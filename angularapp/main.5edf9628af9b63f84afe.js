(self.webpackChunkclinica_app=self.webpackChunkclinica_app||[]).push([[179],{8255:Pt=>{function Ye(B){return Promise.resolve().then(()=>{var D=new Error("Cannot find module '"+B+"'");throw D.code="MODULE_NOT_FOUND",D})}Ye.keys=()=>[],Ye.resolve=Ye,Ye.id=8255,Pt.exports=Ye},8583:(Pt,Ye,B)=>{"use strict";B.d(Ye,{mr:()=>qe,ez:()=>vo,K0:()=>Fe,uU:()=>$s,Do:()=>Qe,V_:()=>J,Ye:()=>re,S$:()=>me,O5:()=>Yr,b0:()=>$e,lw:()=>ve,EM:()=>ai,JF:()=>ns,PM:()=>Rs,w_:()=>de,bD:()=>fs,q:()=>g,Mx:()=>nn,HT:()=>be});var D=B(3018);let O=null;function g(){return O}function be(P){O||(O=P)}class de{}const Fe=new D.OlP("DocumentToken");let ve=(()=>{class P{historyGo(N){throw new Error("Not implemented")}}return P.\u0275fac=function(N){return new(N||P)},P.\u0275prov=(0,D.Yz7)({factory:ae,token:P,providedIn:"platform"}),P})();function ae(){return(0,D.LFG)(X)}const J=new D.OlP("Location Initialized");let X=(()=>{class P extends ve{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return g().getBaseHref(this._doc)}onPopState(N){const z=g().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",N,!1),()=>z.removeEventListener("popstate",N)}onHashChange(N){const z=g().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",N,!1),()=>z.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,z,ye){he()?this._history.pushState(N,z,ye):this.location.hash=ye}replaceState(N,z,ye){he()?this._history.replaceState(N,z,ye):this.location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return P.\u0275fac=function(N){return new(N||P)(D.LFG(Fe))},P.\u0275prov=(0,D.Yz7)({factory:ge,token:P,providedIn:"platform"}),P})();function he(){return!!window.history.pushState}function ge(){return new X((0,D.LFG)(Fe))}function ke(P,G){if(0==P.length)return G;if(0==G.length)return P;let N=0;return P.endsWith("/")&&N++,G.startsWith("/")&&N++,2==N?P+G.substring(1):1==N?P+G:P+"/"+G}function He(P){const G=P.match(/#|\?|$/),N=G&&G.index||P.length;return P.slice(0,N-("/"===P[N-1]?1:0))+P.slice(N)}function je(P){return P&&"?"!==P[0]?"?"+P:P}let me=(()=>{class P{historyGo(N){throw new Error("Not implemented")}}return P.\u0275fac=function(N){return new(N||P)},P.\u0275prov=(0,D.Yz7)({factory:Le,token:P,providedIn:"root"}),P})();function Le(P){const G=(0,D.LFG)(Fe).location;return new $e((0,D.LFG)(ve),G&&G.origin||"")}const qe=new D.OlP("appBaseHref");let $e=(()=>{class P extends me{constructor(N,z){if(super(),this._platformLocation=N,this._removeListenerFns=[],null==z&&(z=this._platformLocation.getBaseHrefFromDOM()),null==z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return ke(this._baseHref,N)}path(N=!1){const z=this._platformLocation.pathname+je(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&N?`${z}${ye}`:z}pushState(N,z,ye,Ke){const ft=this.prepareExternalUrl(ye+je(Ke));this._platformLocation.pushState(N,z,ft)}replaceState(N,z,ye,Ke){const ft=this.prepareExternalUrl(ye+je(Ke));this._platformLocation.replaceState(N,z,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var z,ye;null===(ye=(z=this._platformLocation).historyGo)||void 0===ye||ye.call(z,N)}}return P.\u0275fac=function(N){return new(N||P)(D.LFG(ve),D.LFG(qe,8))},P.\u0275prov=D.Yz7({token:P,factory:P.\u0275fac}),P})(),Qe=(()=>{class P extends me{constructor(N,z){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(N){const z=ke(this._baseHref,N);return z.length>0?"#"+z:z}pushState(N,z,ye,Ke){let ft=this.prepareExternalUrl(ye+je(Ke));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.pushState(N,z,ft)}replaceState(N,z,ye,Ke){let ft=this.prepareExternalUrl(ye+je(Ke));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.replaceState(N,z,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var z,ye;null===(ye=(z=this._platformLocation).historyGo)||void 0===ye||ye.call(z,N)}}return P.\u0275fac=function(N){return new(N||P)(D.LFG(ve),D.LFG(qe,8))},P.\u0275prov=D.Yz7({token:P,factory:P.\u0275fac}),P})(),re=(()=>{class P{constructor(N,z){this._subject=new D.vpe,this._urlChangeListeners=[],this._platformStrategy=N;const ye=this._platformStrategy.getBaseHref();this._platformLocation=z,this._baseHref=He(vt(ye)),this._platformStrategy.onPopState(Ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ke.state,type:Ke.type})})}path(N=!1){return this.normalize(this._platformStrategy.path(N))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(N,z=""){return this.path()==this.normalize(N+je(z))}normalize(N){return P.stripTrailingSlash(function(P,G){return P&&G.startsWith(P)?G.substring(P.length):G}(this._baseHref,vt(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._platformStrategy.prepareExternalUrl(N)}go(N,z="",ye=null){this._platformStrategy.pushState(ye,"",N,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+je(z)),ye)}replaceState(N,z="",ye=null){this._platformStrategy.replaceState(ye,"",N,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+je(z)),ye)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(N=0){var z,ye;null===(ye=(z=this._platformStrategy).historyGo)||void 0===ye||ye.call(z,N)}onUrlChange(N){this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}))}_notifyUrlChangeListeners(N="",z){this._urlChangeListeners.forEach(ye=>ye(N,z))}subscribe(N,z,ye){return this._subject.subscribe({next:N,error:z,complete:ye})}}return P.\u0275fac=function(N){return new(N||P)(D.LFG(me),D.LFG(ve))},P.normalizeQueryParams=je,P.joinWithSlash=ke,P.stripTrailingSlash=He,P.\u0275prov=(0,D.Yz7)({factory:ut,token:P,providedIn:"root"}),P})();function ut(){return new re((0,D.LFG)(me),(0,D.LFG)(ve))}function vt(P){return P.replace(/\/index.html$/,"")}var Re=(()=>((Re=Re||{})[Re.Zero=0]="Zero",Re[Re.One=1]="One",Re[Re.Two=2]="Two",Re[Re.Few=3]="Few",Re[Re.Many=4]="Many",Re[Re.Other=5]="Other",Re))(),fe=(()=>((fe=fe||{})[fe.Format=0]="Format",fe[fe.Standalone=1]="Standalone",fe))(),Te=(()=>((Te=Te||{})[Te.Narrow=0]="Narrow",Te[Te.Abbreviated=1]="Abbreviated",Te[Te.Wide=2]="Wide",Te[Te.Short=3]="Short",Te))(),Be=(()=>((Be=Be||{})[Be.Short=0]="Short",Be[Be.Medium=1]="Medium",Be[Be.Long=2]="Long",Be[Be.Full=3]="Full",Be))(),Ge=(()=>((Ge=Ge||{})[Ge.Decimal=0]="Decimal",Ge[Ge.Group=1]="Group",Ge[Ge.List=2]="List",Ge[Ge.PercentSign=3]="PercentSign",Ge[Ge.PlusSign=4]="PlusSign",Ge[Ge.MinusSign=5]="MinusSign",Ge[Ge.Exponential=6]="Exponential",Ge[Ge.SuperscriptingExponent=7]="SuperscriptingExponent",Ge[Ge.PerMille=8]="PerMille",Ge[Ge.Infinity=9]="Infinity",Ge[Ge.NaN=10]="NaN",Ge[Ge.TimeSeparator=11]="TimeSeparator",Ge[Ge.CurrencyDecimal=12]="CurrencyDecimal",Ge[Ge.CurrencyGroup=13]="CurrencyGroup",Ge))();function Tr(P,G){return vn((0,D.cg1)(P)[D.wAp.DateFormat],G)}function dn(P,G){return vn((0,D.cg1)(P)[D.wAp.TimeFormat],G)}function Lt(P,G){return vn((0,D.cg1)(P)[D.wAp.DateTimeFormat],G)}function tn(P,G){const N=(0,D.cg1)(P),z=N[D.wAp.NumberSymbols][G];if(void 0===z){if(G===Ge.CurrencyDecimal)return N[D.wAp.NumberSymbols][Ge.Decimal];if(G===Ge.CurrencyGroup)return N[D.wAp.NumberSymbols][Ge.Group]}return z}const hn=D.kL8;function mn(P){if(!P[D.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[D.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vn(P,G){for(let N=G;N>-1;N--)if(void 0!==P[N])return P[N];throw new Error("Locale data API: locale data undefined")}function Mr(P){const[G,N]=P.split(":");return{hours:+G,minutes:+N}}const Vn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,zn={},er=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var En=(()=>((En=En||{})[En.Short=0]="Short",En[En.ShortGMT=1]="ShortGMT",En[En.Long=2]="Long",En[En.Extended=3]="Extended",En))(),Ft=(()=>((Ft=Ft||{})[Ft.FullYear=0]="FullYear",Ft[Ft.Month=1]="Month",Ft[Ft.Date=2]="Date",Ft[Ft.Hours=3]="Hours",Ft[Ft.Minutes=4]="Minutes",Ft[Ft.Seconds=5]="Seconds",Ft[Ft.FractionalSeconds=6]="FractionalSeconds",Ft[Ft.Day=7]="Day",Ft))(),kt=(()=>((kt=kt||{})[kt.DayPeriods=0]="DayPeriods",kt[kt.Days=1]="Days",kt[kt.Months=2]="Months",kt[kt.Eras=3]="Eras",kt))();function lr(P,G,N,z){let ye=function(P){if(Ci(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[ye,Ke=1,ft=1]=P.split("-").map($t=>+$t);return mi(ye,Ke-1,ft)}const N=parseFloat(P);if(!isNaN(P-N))return new Date(N);let z;if(z=P.match(Vn))return function(P){const G=new Date(0);let N=0,z=0;const ye=P[8]?G.setUTCFullYear:G.setFullYear,Ke=P[8]?G.setUTCHours:G.setHours;P[9]&&(N=Number(P[9]+P[10]),z=Number(P[9]+P[11])),ye.call(G,Number(P[1]),Number(P[2])-1,Number(P[3]));const ft=Number(P[4]||0)-N,$t=Number(P[5]||0)-z,Ut=Number(P[6]||0),Mt=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return Ke.call(G,ft,$t,Ut,Mt),G}(z)}const G=new Date(P);if(!Ci(G))throw new Error(`Unable to convert "${P}" into a date`);return G}(P);G=yi(N,G)||G;let $t,ft=[];for(;G;){if($t=er.exec(G),!$t){ft.push(G);break}{ft=ft.concat($t.slice(1));const vr=ft.pop();if(!vr)break;G=vr}}let Ut=ye.getTimezoneOffset();z&&(Ut=gr(z,Ut),ye=function(P,G,N){const ye=P.getTimezoneOffset();return function(P,G){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+G),P}(P,-1*(gr(G,ye)-ye))}(ye,z));let Mt="";return ft.forEach(vr=>{const Bn=function(P){if(Pn[P])return Pn[P];let G;switch(P){case"G":case"GG":case"GGG":G=pe(kt.Eras,Te.Abbreviated);break;case"GGGG":G=pe(kt.Eras,Te.Wide);break;case"GGGGG":G=pe(kt.Eras,Te.Narrow);break;case"y":G=we(Ft.FullYear,1,0,!1,!0);break;case"yy":G=we(Ft.FullYear,2,0,!0,!0);break;case"yyy":G=we(Ft.FullYear,3,0,!1,!0);break;case"yyyy":G=we(Ft.FullYear,4,0,!1,!0);break;case"Y":G=Vr(1);break;case"YY":G=Vr(2,!0);break;case"YYY":G=Vr(3);break;case"YYYY":G=Vr(4);break;case"M":case"L":G=we(Ft.Month,1,1);break;case"MM":case"LL":G=we(Ft.Month,2,1);break;case"MMM":G=pe(kt.Months,Te.Abbreviated);break;case"MMMM":G=pe(kt.Months,Te.Wide);break;case"MMMMM":G=pe(kt.Months,Te.Narrow);break;case"LLL":G=pe(kt.Months,Te.Abbreviated,fe.Standalone);break;case"LLLL":G=pe(kt.Months,Te.Wide,fe.Standalone);break;case"LLLLL":G=pe(kt.Months,Te.Narrow,fe.Standalone);break;case"w":G=an(1);break;case"ww":G=an(2);break;case"W":G=an(1,!0);break;case"d":G=we(Ft.Date,1);break;case"dd":G=we(Ft.Date,2);break;case"c":case"cc":G=we(Ft.Day,1);break;case"ccc":G=pe(kt.Days,Te.Abbreviated,fe.Standalone);break;case"cccc":G=pe(kt.Days,Te.Wide,fe.Standalone);break;case"ccccc":G=pe(kt.Days,Te.Narrow,fe.Standalone);break;case"cccccc":G=pe(kt.Days,Te.Short,fe.Standalone);break;case"E":case"EE":case"EEE":G=pe(kt.Days,Te.Abbreviated);break;case"EEEE":G=pe(kt.Days,Te.Wide);break;case"EEEEE":G=pe(kt.Days,Te.Narrow);break;case"EEEEEE":G=pe(kt.Days,Te.Short);break;case"a":case"aa":case"aaa":G=pe(kt.DayPeriods,Te.Abbreviated);break;case"aaaa":G=pe(kt.DayPeriods,Te.Wide);break;case"aaaaa":G=pe(kt.DayPeriods,Te.Narrow);break;case"b":case"bb":case"bbb":G=pe(kt.DayPeriods,Te.Abbreviated,fe.Standalone,!0);break;case"bbbb":G=pe(kt.DayPeriods,Te.Wide,fe.Standalone,!0);break;case"bbbbb":G=pe(kt.DayPeriods,Te.Narrow,fe.Standalone,!0);break;case"B":case"BB":case"BBB":G=pe(kt.DayPeriods,Te.Abbreviated,fe.Format,!0);break;case"BBBB":G=pe(kt.DayPeriods,Te.Wide,fe.Format,!0);break;case"BBBBB":G=pe(kt.DayPeriods,Te.Narrow,fe.Format,!0);break;case"h":G=we(Ft.Hours,1,-12);break;case"hh":G=we(Ft.Hours,2,-12);break;case"H":G=we(Ft.Hours,1);break;case"HH":G=we(Ft.Hours,2);break;case"m":G=we(Ft.Minutes,1);break;case"mm":G=we(Ft.Minutes,2);break;case"s":G=we(Ft.Seconds,1);break;case"ss":G=we(Ft.Seconds,2);break;case"S":G=we(Ft.FractionalSeconds,1);break;case"SS":G=we(Ft.FractionalSeconds,2);break;case"SSS":G=we(Ft.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":G=Ue(En.Short);break;case"ZZZZZ":G=Ue(En.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":G=Ue(En.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":G=Ue(En.Long);break;default:return null}return Pn[P]=G,G}(vr);Mt+=Bn?Bn(ye,N,Ut):"''"===vr?"'":vr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Mt}function mi(P,G,N){const z=new Date(0);return z.setFullYear(P,G,N),z.setHours(0,0,0),z}function yi(P,G){const N=function(P){return(0,D.cg1)(P)[D.wAp.LocaleId]}(P);if(zn[N]=zn[N]||{},zn[N][G])return zn[N][G];let z="";switch(G){case"shortDate":z=Tr(P,Be.Short);break;case"mediumDate":z=Tr(P,Be.Medium);break;case"longDate":z=Tr(P,Be.Long);break;case"fullDate":z=Tr(P,Be.Full);break;case"shortTime":z=dn(P,Be.Short);break;case"mediumTime":z=dn(P,Be.Medium);break;case"longTime":z=dn(P,Be.Long);break;case"fullTime":z=dn(P,Be.Full);break;case"short":const ye=yi(P,"shortTime"),Ke=yi(P,"shortDate");z=Cr(Lt(P,Be.Short),[ye,Ke]);break;case"medium":const ft=yi(P,"mediumTime"),$t=yi(P,"mediumDate");z=Cr(Lt(P,Be.Medium),[ft,$t]);break;case"long":const Ut=yi(P,"longTime"),Mt=yi(P,"longDate");z=Cr(Lt(P,Be.Long),[Ut,Mt]);break;case"full":const vr=yi(P,"fullTime"),Bn=yi(P,"fullDate");z=Cr(Lt(P,Be.Full),[vr,Bn])}return z&&(zn[N][G]=z),z}function Cr(P,G){return G&&(P=P.replace(/\{([^}]+)}/g,function(N,z){return null!=G&&z in G?G[z]:N})),P}function Hr(P,G,N="-",z,ye){let Ke="";(P<0||ye&&P<=0)&&(ye?P=1-P:(P=-P,Ke=N));let ft=String(P);for(;ft.length<G;)ft="0"+ft;return z&&(ft=ft.substr(ft.length-G)),Ke+ft}function we(P,G,N=0,z=!1,ye=!1){return function(Ke,ft){let $t=function(P,G){switch(P){case Ft.FullYear:return G.getFullYear();case Ft.Month:return G.getMonth();case Ft.Date:return G.getDate();case Ft.Hours:return G.getHours();case Ft.Minutes:return G.getMinutes();case Ft.Seconds:return G.getSeconds();case Ft.FractionalSeconds:return G.getMilliseconds();case Ft.Day:return G.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,Ke);if((N>0||$t>-N)&&($t+=N),P===Ft.Hours)0===$t&&-12===N&&($t=12);else if(P===Ft.FractionalSeconds)return function(P,G){return Hr(P,3).substr(0,G)}($t,G);const Ut=tn(ft,Ge.MinusSign);return Hr($t,G,Ut,z,ye)}}function pe(P,G,N=fe.Format,z=!1){return function(ye,Ke){return function(P,G,N,z,ye,Ke){switch(N){case kt.Months:return function(P,G,N){const z=(0,D.cg1)(P),Ke=vn([z[D.wAp.MonthsFormat],z[D.wAp.MonthsStandalone]],G);return vn(Ke,N)}(G,ye,z)[P.getMonth()];case kt.Days:return function(P,G,N){const z=(0,D.cg1)(P),Ke=vn([z[D.wAp.DaysFormat],z[D.wAp.DaysStandalone]],G);return vn(Ke,N)}(G,ye,z)[P.getDay()];case kt.DayPeriods:const ft=P.getHours(),$t=P.getMinutes();if(Ke){const Mt=function(P){const G=(0,D.cg1)(P);return mn(G),(G[D.wAp.ExtraData][2]||[]).map(z=>"string"==typeof z?Mr(z):[Mr(z[0]),Mr(z[1])])}(G),vr=function(P,G,N){const z=(0,D.cg1)(P);mn(z);const Ke=vn([z[D.wAp.ExtraData][0],z[D.wAp.ExtraData][1]],G)||[];return vn(Ke,N)||[]}(G,ye,z),Bn=Mt.findIndex(Er=>{if(Array.isArray(Er)){const[Rn,ui]=Er,Fi=ft>=Rn.hours&&$t>=Rn.minutes,ni=ft<ui.hours||ft===ui.hours&&$t<ui.minutes;if(Rn.hours<ui.hours){if(Fi&&ni)return!0}else if(Fi||ni)return!0}else if(Er.hours===ft&&Er.minutes===$t)return!0;return!1});if(-1!==Bn)return vr[Bn]}return function(P,G,N){const z=(0,D.cg1)(P),Ke=vn([z[D.wAp.DayPeriodsFormat],z[D.wAp.DayPeriodsStandalone]],G);return vn(Ke,N)}(G,ye,z)[ft<12?0:1];case kt.Eras:return function(P,G){return vn((0,D.cg1)(P)[D.wAp.Eras],G)}(G,z)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${N}`)}}(ye,Ke,P,G,N,z)}}function Ue(P){return function(G,N,z){const ye=-1*z,Ke=tn(N,Ge.MinusSign),ft=ye>0?Math.floor(ye/60):Math.ceil(ye/60);switch(P){case En.Short:return(ye>=0?"+":"")+Hr(ft,2,Ke)+Hr(Math.abs(ye%60),2,Ke);case En.ShortGMT:return"GMT"+(ye>=0?"+":"")+Hr(ft,1,Ke);case En.Long:return"GMT"+(ye>=0?"+":"")+Hr(ft,2,Ke)+":"+Hr(Math.abs(ye%60),2,Ke);case En.Extended:return 0===z?"Z":(ye>=0?"+":"")+Hr(ft,2,Ke)+":"+Hr(Math.abs(ye%60),2,Ke);default:throw new Error(`Unknown zone width "${P}"`)}}}function Jn(P){return mi(P.getFullYear(),P.getMonth(),P.getDate()+(4-P.getDay()))}function an(P,G=!1){return function(N,z){let ye;if(G){const Ke=new Date(N.getFullYear(),N.getMonth(),1).getDay()-1,ft=N.getDate();ye=1+Math.floor((ft+Ke)/7)}else{const Ke=Jn(N),ft=function(P){const G=mi(P,0,1).getDay();return mi(P,0,1+(G<=4?4:11)-G)}(Ke.getFullYear()),$t=Ke.getTime()-ft.getTime();ye=1+Math.round($t/6048e5)}return Hr(ye,P,tn(z,Ge.MinusSign))}}function Vr(P,G=!1){return function(N,z){return Hr(Jn(N).getFullYear(),P,tn(z,Ge.MinusSign),G)}}const Pn={};function gr(P,G){P=P.replace(/:/g,"");const N=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(N)?G:N}function Ci(P){return P instanceof Date&&!isNaN(P.valueOf())}class mr{}let tr=(()=>{class P extends mr{constructor(N){super(),this.locale=N}getPluralCategory(N,z){switch(hn(z||this.locale)(N)){case Re.Zero:return"zero";case Re.One:return"one";case Re.Two:return"two";case Re.Few:return"few";case Re.Many:return"many";default:return"other"}}}return P.\u0275fac=function(N){return new(N||P)(D.LFG(D.soG))},P.\u0275prov=D.Yz7({token:P,factory:P.\u0275fac}),P})();function nn(P,G){G=encodeURIComponent(G);for(const N of P.split(";")){const z=N.indexOf("="),[ye,Ke]=-1==z?[N,""]:[N.slice(0,z),N.slice(z+1)];if(ye.trim()===G)return decodeURIComponent(Ke)}return null}let Yr=(()=>{class P{constructor(N,z){this._viewContainer=N,this._context=new Ur,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Oe("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Oe("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,z){return!0}}return P.\u0275fac=function(N){return new(N||P)(D.Y36(D.s_b),D.Y36(D.Rgc))},P.\u0275dir=D.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),P})();class Ur{constructor(){this.$implicit=null,this.ngIf=null}}function Oe(P,G){if(G&&!G.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,D.AaK)(G)}'.`)}let $s=(()=>{class P{constructor(N){this.locale=N}transform(N,z="mediumDate",ye,Ke){if(null==N||""===N||N!=N)return null;try{return lr(N,z,Ke||this.locale,ye)}catch(ft){throw function(P,G){return Error(`InvalidPipeArgument: '${G}' for pipe '${(0,D.AaK)(P)}'`)}(P,ft.message)}}}return P.\u0275fac=function(N){return new(N||P)(D.Y36(D.soG,16))},P.\u0275pipe=D.Yjl({name:"date",type:P,pure:!0}),P})(),vo=(()=>{class P{}return P.\u0275fac=function(N){return new(N||P)},P.\u0275mod=D.oAB({type:P}),P.\u0275inj=D.cJS({providers:[{provide:mr,useClass:tr}]}),P})();const fs="browser";function Rs(P){return"server"===P}let ai=(()=>{class P{}return P.\u0275prov=(0,D.Yz7)({token:P,providedIn:"root",factory:()=>new uo((0,D.LFG)(Fe),window)}),P})();class uo{constructor(G,N){this.document=G,this.window=N,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const N=function(P,G){const N=P.getElementById(G)||P.getElementsByName(G)[0];if(N)return N;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const z=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let ye=z.currentNode;for(;ye;){const Ke=ye.shadowRoot;if(Ke){const ft=Ke.getElementById(G)||Ke.querySelector(`[name="${G}"]`);if(ft)return ft}ye=z.nextNode()}}return null}(this.document,G);N&&(this.scrollToElement(N),this.attemptFocus(N))}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=G)}}scrollToElement(G){const N=G.getBoundingClientRect(),z=N.left+this.window.pageXOffset,ye=N.top+this.window.pageYOffset,Ke=this.offset();this.window.scrollTo(z-Ke[0],ye-Ke[1])}attemptFocus(G){return G.focus(),this.document.activeElement===G}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=Ti(this.window.history)||Ti(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function Ti(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class ns{}},3018:(Pt,Ye,B)=>{"use strict";B.d(Ye,{deG:()=>Jo,tb:()=>nb,AFp:()=>Xw,ip1:()=>nE,CZH:()=>Pf,hGG:()=>jA,z2F:()=>jg,sBO:()=>AC,Sil:()=>Bg,_Vd:()=>Tf,EJc:()=>ib,SBq:()=>xl,qLn:()=>nt,vpe:()=>Rl,gxx:()=>wl,tBr:()=>xu,XFs:()=>lt,OlP:()=>xi,zs3:()=>Ii,ZZ4:()=>By,aQg:()=>jy,soG:()=>Jy,YKP:()=>z0,v3s:()=>EA,h0i:()=>ih,PXZ:()=>pA,R0b:()=>nu,FiY:()=>ta,Lbi:()=>tb,g9A:()=>eb,Qsj:()=>hC,FYo:()=>Uy,JOm:()=>Pa,Tiy:()=>xv,q3G:()=>wi,tp0:()=>Wa,EAV:()=>CA,Rgc:()=>Sg,dDg:()=>ub,DyG:()=>Tu,q4F:()=>Rv,GfV:()=>B0,s_b:()=>Gy,ifc:()=>Cr,eFA:()=>fb,G48:()=>aA,Gpc:()=>je,X6Q:()=>lE,_c5:()=>PA,VLi:()=>oA,c2e:()=>rb,zSh:()=>Vd,wAp:()=>jn,vHH:()=>$e,EiD:()=>wc,mCW:()=>ku,qzn:()=>Pu,JVY:()=>pc,pB0:()=>Gf,eBb:()=>Mi,L6k:()=>Qs,LAX:()=>gh,cg1:()=>Ev,Tjo:()=>NA,kL8:()=>u0,yhl:()=>Ji,dqk:()=>pe,sIi:()=>Gd,CqO:()=>pg,QGY:()=>fg,F4k:()=>vy,RDi:()=>N,AaK:()=>ge,z3N:()=>na,qOj:()=>Hc,TTD:()=>Es,_Bn:()=>k0,xp6:()=>cm,uIk:()=>Qa,ekj:()=>If,Suo:()=>Mw,Xpm:()=>ei,lG2:()=>oi,Yz7:()=>Tn,cJS:()=>pr,oAB:()=>Nr,Yjl:()=>$r,Y36:()=>Jd,_UZ:()=>my,qZA:()=>hg,TgZ:()=>Xd,EpF:()=>cv,n5z:()=>Kn,Ikx:()=>vv,LFG:()=>Hi,$8M:()=>Ln,NdJ:()=>eh,CRH:()=>Nw,oxw:()=>wy,ALo:()=>Tw,xi3:()=>Aw,Q6J:()=>_f,s9C:()=>wf,iGM:()=>Rw,CHM:()=>Yt,LSH:()=>$l,kYT:()=>cr,YNc:()=>pf,_uU:()=>st,Oqu:()=>pt,AsE:()=>ln});var D=B(9765),O=B(5319),g=B(7574),Se=B(6682),be=B(2441);var ve=B(1307);function ae(){return new D.xQ}function X(t){for(let n in t)if(t[n]===X)return n;throw Error("Could not find renamed property on target object.")}function he(t,n){for(const r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=n[r])}function ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function ke(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const He=X({__forward_ref__:X});function je(t){return t.__forward_ref__=je,t.toString=function(){return ge(this())},t}function me(t){return Le(t)?t():t}function Le(t){return"function"==typeof t&&t.hasOwnProperty(He)&&t.__forward_ref__===je}class $e extends Error{constructor(n,r){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,r)),this.code=n}}function ut(t){return"string"==typeof t?t:null==t?"":String(t)}function Gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ut(t)}function Re(t,n){const r=n?` in ${n}`:"";throw new $e("201",`No provider for ${Gt(t)} found${r}`)}function dn(t,n){null==t&&function(t,n,r,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${r} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function Tn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pr(t){return{providers:t.providers||[],imports:t.imports||[]}}function hn(t){return mn(t,vn)||mn(t,Oi)}function mn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Xn(t){return t&&(t.hasOwnProperty(Mr)||t.hasOwnProperty(qt))?t[Mr]:null}const vn=X({\u0275prov:X}),Mr=X({\u0275inj:X}),Oi=X({ngInjectableDef:X}),qt=X({ngInjectorDef:X});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let Vn;function er(t){const n=Vn;return Vn=t,n}function En(t,n,r){const o=hn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&lt.Optional?null:void 0!==n?n:void Re(ge(t),"Injector")}function kt(t){return{toString:t}.toString()}var lr=(()=>((lr=lr||{})[lr.OnPush=0]="OnPush",lr[lr.Default=1]="Default",lr))(),Cr=(()=>((Cr=Cr||{})[Cr.Emulated=0]="Emulated",Cr[Cr.None=2]="None",Cr[Cr.ShadowDom=3]="ShadowDom",Cr))();const Hr="undefined"!=typeof globalThis&&globalThis,en="undefined"!=typeof window&&window,we="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,pe=Hr||"undefined"!=typeof global&&global||en||we,Tt={},wt=[],yn=X({\u0275cmp:X}),Jn=X({\u0275dir:X}),an=X({\u0275pipe:X}),Vr=X({\u0275mod:X}),Pn=X({\u0275loc:X}),rn=X({\u0275fac:X}),gr=X({__NG_ELEMENT_ID__:X});let Xr=0;function ei(t){return kt(()=>{const r={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===lr.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||wt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Cr.Emulated,id:"c",styles:t.styles||wt,_:null,setInput:null,schemas:t.schemas||null,tView:null},u=t.directives,l=t.features,f=t.pipes;return o.id+=Xr++,o.inputs=jr(t.inputs,r),o.outputs=jr(t.outputs),l&&l.forEach(m=>m(o)),o.directiveDefs=u?()=>("function"==typeof u?u():u).map(Pi):null,o.pipeDefs=f?()=>("function"==typeof f?f():f).map(Ci):null,o})}function Pi(t){return Kt(t)||function(t){return t[Jn]||null}(t)}function Ci(t){return function(t){return t[an]||null}(t)}const zr={};function Nr(t){return kt(()=>{const n={type:t.type,bootstrap:t.bootstrap||wt,declarations:t.declarations||wt,imports:t.imports||wt,exports:t.exports||wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(zr[t.id]=t.type),n})}function cr(t,n){return kt(()=>{const r=dr(t,!0);r.declarations=n.declarations||wt,r.imports=n.imports||wt,r.exports=n.exports||wt})}function jr(t,n){if(null==t)return Tt;const r={};for(const o in t)if(t.hasOwnProperty(o)){let u=t[o],l=u;Array.isArray(u)&&(l=u[1],u=u[0]),r[u]=o,n&&(n[u]=l)}return r}const oi=ei;function $r(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kt(t){return t[yn]||null}function dr(t,n){const r=t[Vr]||null;if(!r&&!0===n)throw new Error(`Type ${ge(t)} does not have '\u0275mod' property.`);return r}function _r(t){return Array.isArray(t)&&"object"==typeof t[1]}function ne(t){return Array.isArray(t)&&!0===t[1]}function ce(t){return 0!=(8&t.flags)}function Q(t){return 2==(2&t.flags)}function Ie(t){return 1==(1&t.flags)}function it(t){return null!==t.template}function Bt(t){return 0!=(512&t[2])}function _i(t,n){return t.hasOwnProperty(rn)?t[rn]:null}class Zi{constructor(n,r,o){this.previousValue=n,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function Es(){return Rs}function Rs(t){return t.type.prototype.ngOnChanges&&(t.setInput=qs),vi}function vi(){const t=ai(this),n=null==t?void 0:t.current;if(n){const r=t.previous;if(r===Tt)t.previous=n;else for(let o in n)r[o]=n[o];t.current=null,this.ngOnChanges(n)}}function qs(t,n,r,o){const u=ai(t)||function(t,n){return t[ws]=n}(t,{previous:Tt,current:null}),l=u.current||(u.current={}),f=u.previous,m=this.declaredInputs[r],b=f[m];l[m]=new Zi(b&&b.currentValue,n,f===Tt),t[o]=n}Es.ngInherit=!0;const ws="__ngSimpleChanges__";function ai(t){return t[ws]||null}let G;function N(t){G=t}function Ke(t){return!!t.listen}const $t={createRenderer:(t,n)=>void 0!==G?G:"undefined"!=typeof document?document:void 0};function Mt(t){for(;Array.isArray(t);)t=t[0];return t}function Er(t,n){return Mt(n[t])}function Rn(t,n){return Mt(n[t.index])}function Fi(t,n){return t.data[n]}function Fr(t,n){const r=n[t];return _r(r)?r:r[0]}function Li(t){return 4==(4&t[2])}function Ms(t){return 128==(128&t[2])}function ri(t,n){return null==n?null:t[n]}function Ws(t){t[18]=0}function Ro(t,n){t[5]+=n;let r=t,o=t[3];for(;null!==o&&(1===n&&1===r[5]||-1===n&&0===r[5]);)o[5]+=n,r=o,o=o[3]}const un={lFrame:Ki(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Z(){return un.bindingsEnabled}function se(){return un.lFrame.lView}function Je(){return un.lFrame.tView}function Yt(t){return un.lFrame.contextLView=t,t[8]}function gt(){let t=kn();for(;null!==t&&64===t.type;)t=t.parent;return t}function kn(){return un.lFrame.currentTNode}function nr(t,n){const r=un.lFrame;r.currentTNode=t,r.isParent=n}function wr(){return un.lFrame.isParent}function Vi(){return un.isInCheckNoChangesMode}function li(t){un.isInCheckNoChangesMode=t}function br(){return un.lFrame.bindingIndex}function ir(){return un.lFrame.bindingIndex++}function Ui(t){const n=un.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,r}function A(t,n){const r=un.lFrame;r.bindingIndex=r.bindingRootIndex=t,$(n)}function $(t){un.lFrame.currentDirectiveIndex=t}function mt(){return un.lFrame.currentQueryIndex}function bn(t){un.lFrame.currentQueryIndex=t}function fr(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Dr(t,n,r){if(r&lt.SkipSelf){let u=n,l=t;for(;!(u=u.parent,null!==u||r&lt.Host||(u=fr(l),null===u||(l=l[15],10&u.type))););if(null===u)return!1;n=u,t=l}const o=un.lFrame=Si();return o.currentTNode=n,o.lView=t,!0}function di(t){const n=Si(),r=t[1];un.lFrame=n,n.currentTNode=r.firstChild,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function Si(){const t=un.lFrame,n=null===t?null:t.child;return null===n?Ki(t):n}function Ki(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function rs(){const t=un.lFrame;return un.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const lo=rs;function Ns(){const t=rs();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Is(){return un.lFrame.selectedIndex}function zs(t){un.lFrame.selectedIndex=t}function Qr(){const t=un.lFrame;return Fi(t.tView,t.selectedIndex)}function oa(t,n){for(let r=n.directiveStart,o=n.directiveEnd;r<o;r++){const l=t.data[r].type.prototype,{ngAfterContentInit:f,ngAfterContentChecked:m,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:U}=l;f&&(t.contentHooks||(t.contentHooks=[])).push(-r,f),m&&((t.contentHooks||(t.contentHooks=[])).push(r,m),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,m)),b&&(t.viewHooks||(t.viewHooks=[])).push(-r,b),x&&((t.viewHooks||(t.viewHooks=[])).push(r,x),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,x)),null!=U&&(t.destroyHooks||(t.destroyHooks=[])).push(r,U)}}function Oo(t,n,r){ko(t,n,3,r)}function Ca(t,n,r,o){(3&t[2])===r&&ko(t,n,r,o)}function Po(t,n){let r=t[2];(3&r)===n&&(r&=2047,r+=1,t[2]=r)}function ko(t,n,r,o){const l=null!=o?o:-1,f=n.length-1;let m=0;for(let b=void 0!==o?65535&t[18]:0;b<f;b++)if("number"==typeof n[b+1]){if(m=n[b],null!=o&&m>=o)break}else n[b]<0&&(t[18]+=65536),(m<l||-1==l)&&(Yi(t,r,n,b),t[18]=(4294901760&t[18])+b+2),b++}function Yi(t,n,r,o){const u=r[o]<0,l=r[o+1],m=t[u?-r[o]:r[o]];if(u){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{l.call(m)}finally{}}}else try{l.call(m)}finally{}}class Lo{constructor(n,r,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function Jr(t,n,r){const o=Ke(t);let u=0;for(;u<r.length;){const l=r[u];if("number"==typeof l){if(0!==l)break;u++;const f=r[u++],m=r[u++],b=r[u++];o?t.setAttribute(n,m,b,f):n.setAttributeNS(f,m,b)}else{const f=l,m=r[++u];Da(f)?o&&t.setProperty(n,f,m):o?t.setAttribute(n,f,m):n.setAttribute(f,m),u++}}return u}function ja(t){return 3===t||4===t||6===t}function Da(t){return 64===t.charCodeAt(0)}function Uo(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let r=-1;for(let o=0;o<n.length;o++){const u=n[o];"number"==typeof u?r=u:0===r||iu(t,r,u,null,-1===r||2===r?n[++o]:null)}}return t}function iu(t,n,r,o,u){let l=0,f=t.length;if(-1===n)f=-1;else for(;l<t.length;){const m=t[l++];if("number"==typeof m){if(m===n){f=-1;break}if(m>n){f=l-1;break}}}for(;l<t.length;){const m=t[l];if("number"==typeof m)break;if(m===r){if(null===o)return void(null!==u&&(t[l+1]=u));if(o===t[l+1])return void(t[l+2]=u)}l++,null!==o&&l++,null!==u&&l++}-1!==f&&(t.splice(f,0,n),l=f+1),t.splice(l++,0,r),null!==o&&t.splice(l++,0,o),null!==u&&t.splice(l++,0,u)}function Zs(t){return-1!==t}function aa(t){return 32767&t}function hi(t,n){let r=function(t){return t>>16}(t),o=n;for(;r>0;)o=o[15],r--;return o}let ho=!0;function Os(t){const n=ho;return ho=t,n}let Sr=0;function wo(t,n){const r=on(t,n);if(-1!==r)return r;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,zt(o.data,t),zt(n,null),zt(o.blueprint,null));const u=Aa(t,n),l=t.injectorIndex;if(Zs(u)){const f=aa(u),m=hi(u,n),b=m[1].data;for(let x=0;x<8;x++)n[l+x]=m[f+x]|b[f+x]}return n[l+8]=u,l}function zt(t,n){t.push(0,0,0,0,0,0,0,0,n)}function on(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Aa(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,o=null,u=n;for(;null!==u;){const l=u[1],f=l.type;if(o=2===f?l.declTNode:1===f?u[6]:null,null===o)return-1;if(r++,u=u[15],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return-1}function At(t,n,r){!function(t,n,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(gr)&&(o=r[gr]),null==o&&(o=r[gr]=Sr++);const u=255&o;n.data[t+(u>>5)]|=1<<u}(t,n,r)}function yt(t,n,r){if(r&lt.Optional)return t;Re(n,"NodeInjector")}function fi(t,n,r,o){if(r&lt.Optional&&void 0===o&&(o=null),0==(r&(lt.Self|lt.Host))){const u=t[9],l=er(void 0);try{return u?u.get(n,o,r&lt.Optional):En(n,o,r&lt.Optional)}finally{er(l)}}return yt(o,n,r)}function C(t,n,r,o=lt.Default,u){if(null!==t){const l=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(gr)?t[gr]:void 0;return"number"==typeof n?n>=0?255&n:_:n}(r);if("function"==typeof l){if(!Dr(n,t,o))return o&lt.Host?yt(u,r,o):fi(n,r,o,u);try{const f=l(o);if(null!=f||o&lt.Optional)return f;Re(r)}finally{lo()}}else if("number"==typeof l){let f=null,m=on(t,n),b=-1,x=o&lt.Host?n[16][6]:null;for((-1===m||o&lt.SkipSelf)&&(b=-1===m?Aa(t,n):n[m+8],-1!==b&&at(o,!1)?(f=n[1],m=aa(b),n=hi(b,n)):m=-1);-1!==m;){const U=n[1];if(Ce(l,m,U.data)){const Y=R(m,n,r,f,o,x);if(Y!==v)return Y}b=n[m+8],-1!==b&&at(o,n[1].data[m+8]===x)&&Ce(l,m,n)?(f=U,m=aa(b),n=hi(b,n)):m=-1}}}return fi(n,r,o,u)}const v={};function _(){return new ht(gt(),se())}function R(t,n,r,o,u,l){const f=n[1],m=f.data[t+8],U=L(m,f,r,null==o?Q(m)&&ho:o!=f&&0!=(3&m.type),u&lt.Host&&l===m);return null!==U?q(n,f,U,m):v}function L(t,n,r,o,u){const l=t.providerIndexes,f=n.data,m=1048575&l,b=t.directiveStart,U=l>>20,te=u?m+U:t.directiveEnd;for(let _e=o?m:m+U;_e<te;_e++){const xe=f[_e];if(_e<b&&r===xe||_e>=b&&xe.type===r)return _e}if(u){const _e=f[b];if(_e&&it(_e)&&_e.type===r)return b}return null}function q(t,n,r,o){let u=t[r];const l=n.data;if(function(t){return t instanceof Lo}(u)){const f=u;f.resolving&&function(t,n){throw new $e("200",`Circular dependency in DI detected for ${t}`)}(Gt(l[r]));const m=Os(f.canSeeViewProviders);f.resolving=!0;const b=f.injectImpl?er(f.injectImpl):null;Dr(t,o,lt.Default);try{u=t[r]=f.factory(void 0,l,t,o),n.firstCreatePass&&r>=o.directiveStart&&function(t,n,r){const{ngOnChanges:o,ngOnInit:u,ngDoCheck:l}=n.type.prototype;if(o){const f=Rs(n);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,f),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,f)}u&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,u),l&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,l),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,l))}(r,l[r],n)}finally{null!==b&&er(b),Os(m),f.resolving=!1,lo()}}return u}function Ce(t,n,r){return!!(r[n+(t>>5)]&1<<t)}function at(t,n){return!(t&lt.Self||t&lt.Host&&n)}class ht{constructor(n,r){this._tNode=n,this._lView=r}get(n,r){return C(this._tNode,this._lView,n,void 0,r)}}function Kn(t){return kt(()=>{const n=t.prototype.constructor,r=n[rn]||fn(n),o=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==o;){const l=u[rn]||fn(u);if(l&&l!==r)return l;u=Object.getPrototypeOf(u)}return l=>new l})}function fn(t){return Le(t)?()=>{const n=fn(me(t));return n&&n()}:_i(t)}function Ln(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const r=t.attrs;if(r){const o=r.length;let u=0;for(;u<o;){const l=r[u];if(ja(l))break;if(0===l)u+=2;else if("number"==typeof l)for(u++;u<o&&"string"==typeof r[u];)u++;else{if(l===n)return r[u+1];u+=2}}}return null}(gt(),t)}const ps="__parameters__";function qn(t,n,r){return kt(()=>{const o=function(t){return function(...r){if(t){const o=t(...r);for(const u in o)this[u]=o[u]}}}(n);function u(...l){if(this instanceof u)return o.apply(this,l),this;const f=new u(...l);return m.annotation=f,m;function m(b,x,U){const Y=b.hasOwnProperty(ps)?b[ps]:Object.defineProperty(b,ps,{value:[]})[ps];for(;Y.length<=U;)Y.push(null);return(Y[U]=Y[U]||[]).push(f),b}}return r&&(u.prototype=Object.create(r.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}class xi{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=Tn({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Jo=new xi("AnalyzeForEntryComponents"),Tu=Function;function ro(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let o=t[r];Array.isArray(o)?(n===t&&(n=t.slice(0,r)),ro(o,n)):n!==t&&n.push(o)}return n}function io(t,n){t.forEach(r=>Array.isArray(r)?io(r,n):n(r))}function Bo(t,n,r){n>=t.length?t.push(r):t.splice(n,0,r)}function Xo(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function T(t,n,r){let o=W(t,n);return o>=0?t[1|o]=r:(o=~o,function(t,n,r,o){let u=t.length;if(u==n)t.push(r,o);else if(1===u)t.push(o,t[0]),t[0]=r;else{for(u--,t.push(t[u-1],t[u]);u>n;)t[u]=t[u-2],u--;t[n]=r,t[n+1]=o}}(t,o,n,r)),o}function F(t,n){const r=W(t,n);if(r>=0)return t[1|r]}function W(t,n){return function(t,n,r){let o=0,u=t.length>>r;for(;u!==o;){const l=o+(u-o>>1),f=t[l<<r];if(n===f)return l<<r;f>n?u=l:o=l+1}return~(u<<r)}(t,n,1)}const so={},Ma="__NG_DI_FLAG__",As="ngTempTokenPath",ha=/\n/gm,jo="__source",Ga=X({provide:String,useValue:X});let qa;function Na(t){const n=qa;return qa=t,n}function td(t,n=lt.Default){if(void 0===qa)throw new Error("inject() must be called from an injection context");return null===qa?En(t,void 0,n):qa.get(t,n&lt.Optional?null:void 0,n)}function Hi(t,n=lt.Default){return(Vn||td)(me(t),n)}function Fs(t){const n=[];for(let r=0;r<t.length;r++){const o=me(t[r]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let u,l=lt.Default;for(let f=0;f<o.length;f++){const m=o[f],b=Su(m);"number"==typeof b?-1===b?u=m.token:l|=b:u=m}n.push(Hi(u,l))}else n.push(Hi(o))}return n}function cl(t,n){return t[Ma]=n,t.prototype[Ma]=n,t}function Su(t){return t[Ma]}function nd(t,n,r,o){const u=t[As];throw n[jo]&&u.unshift(n[jo]),t.message=function(t,n,r,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let u=ge(n);if(Array.isArray(n))u=n.map(ge).join(" -> ");else if("object"==typeof n){let l=[];for(let f in n)if(n.hasOwnProperty(f)){let m=n[f];l.push(f+":"+("string"==typeof m?JSON.stringify(m):ge(m)))}u=`{${l.join(", ")}}`}return`${r}${o?"("+o+")":""}[${u}]: ${t.replace(ha,"\n  ")}`}("\n"+t.message,u,r,o),t.ngTokenPath=u,t[As]=null,t}const xu=cl(qn("Inject",t=>({token:t})),-1),ta=cl(qn("Optional"),8),Wa=cl(qn("SkipSelf"),4);let Za;function su(t){var n;return(null===(n=function(){if(void 0===Za&&(Za=null,pe.trustedTypes))try{Za=pe.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Za}())||void 0===n?void 0:n.createHTML(t))||t}class ou{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ul extends ou{getTypeName(){return"HTML"}}class ph extends ou{getTypeName(){return"Style"}}class Ou extends ou{getTypeName(){return"Script"}}class ms extends ou{getTypeName(){return"URL"}}class Pr extends ou{getTypeName(){return"ResourceURL"}}function na(t){return t instanceof ou?t.changingThisBreaksApplicationSecurity:t}function Pu(t,n){const r=Ji(t);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===n}function Ji(t){return t instanceof ou&&t.getTypeName()||null}function pc(t){return new Ul(t)}function Qs(t){return new ph(t)}function Mi(t){return new Ou(t)}function gh(t){return new ms(t)}function Gf(t){return new Pr(t)}class qf{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const r=(new window.DOMParser).parseFromString(su(n),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(n):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class ld{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const o=this.inertDocument.createElement("body");r.appendChild(o)}}getInertBodyElement(n){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=su(n),r;const o=this.inertDocument.createElement("body");return o.innerHTML=su(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const r=n.attributes;for(let u=r.length-1;0<u;u--){const f=r.item(u).name;("xmlns:ns1"===f||0===f.indexOf("ns1:"))&&n.removeAttribute(f)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const mh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ku(t){return(t=String(t)).match(mh)||t.match(Wr)?t:"unsafe:"+t}function Io(t){const n={};for(const r of t.split(","))n[r]=!0;return n}function pa(...t){const n={};for(const r of t)for(const o in r)r.hasOwnProperty(o)&&(n[o]=!0);return n}const Fu=Io("area,br,col,hr,img,wbr"),cd=Io("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dd=Io("rp,rt"),mc=pa(Fu,pa(cd,Io("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pa(dd,Io("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),pa(dd,cd)),yc=Io("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hd=Io("srcset"),fd=pa(yc,hd,Io("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Io("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vc=Io("script,style,template");class Ls{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let r=n.firstChild,o=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?o=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,o&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let u=this.checkClobberedElement(r,r.nextSibling);if(u){r=u;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(n){const r=n.nodeName.toLowerCase();if(!mc.hasOwnProperty(r))return this.sanitizedSomething=!0,!vc.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const o=n.attributes;for(let u=0;u<o.length;u++){const l=o.item(u),f=l.name,m=f.toLowerCase();if(!fd.hasOwnProperty(m)){this.sanitizedSomething=!0;continue}let b=l.value;yc[m]&&(b=ku(b)),hd[m]&&(t=b,b=(t=String(t)).split(",").map(n=>ku(n.trim())).join(", ")),this.buf.push(" ",f,'="',fl(b),'"')}var t;return this.buf.push(">"),!0}endElement(n){const r=n.nodeName.toLowerCase();mc.hasOwnProperty(r)&&!Fu.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(n){this.buf.push(fl(n))}checkClobberedElement(n,r){if(r&&(n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return r}}const Ec=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yh=/([^\#-~ |!])/g;function fl(t){return t.replace(/&/g,"&amp;").replace(Ec,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(yh,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $o;function wc(t,n){let r=null;try{$o=$o||function(t){const n=new ld(t);return function(){try{return!!(new window.DOMParser).parseFromString(su(""),"text/html")}catch(t){return!1}}()?new qf(n):n}(t);let o=n?String(n):"";r=$o.getInertBodyElement(o);let u=5,l=o;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,o=l,l=r.innerHTML,r=$o.getInertBodyElement(o)}while(o!==l);return su((new Ls).sanitizeChildren(jl(r)||r))}finally{if(r){const o=jl(r)||r;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function jl(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var wi=(()=>((wi=wi||{})[wi.NONE=0]="NONE",wi[wi.HTML=1]="HTML",wi[wi.STYLE=2]="STYLE",wi[wi.SCRIPT=3]="SCRIPT",wi[wi.URL=4]="URL",wi[wi.RESOURCE_URL=5]="RESOURCE_URL",wi))();function $l(t){const n=function(){const t=se();return t&&t[12]}();return n?n.sanitize(wi.URL,t)||"":Pu(t,"URL")?na(t):ku(ut(t))}const Eh="__ngContext__";function is(t,n){t[Eh]=n}function oo(t){const n=function(t){return t[Eh]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function V(t){return t.ngOriginalError}function Ae(t,...n){t.error(...n)}class nt{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n),o=this._findContext(n),u=(t=n)&&t.ngErrorLogger||Ae;var t;u(this._console,"ERROR",n),r&&u(this._console,"ORIGINAL ERROR",r),o&&u(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(V(n)):null}_findOriginalError(n){let r=n&&V(n);for(;r&&V(r);)r=V(r);return r||null}}const wd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(pe))();function bi(t){return t instanceof Function?t():t}var Pa=(()=>((Pa=Pa||{})[Pa.Important=1]="Important",Pa[Pa.DashCase=2]="DashCase",Pa))();function bd(t,n){return undefined(t,n)}function du(t){const n=t[3];return ne(n)?n[3]:n}function Ch(t){return Jg(t[13])}function Id(t){return Jg(t[4])}function Jg(t){for(;null!==t&&!ne(t);)t=t[4];return t}function Wl(t,n,r,o,u){if(null!=o){let l,f=!1;ne(o)?l=o:_r(o)&&(f=!0,o=o[0]);const m=Mt(o);0===t&&null!==r?null==u?Sh(n,r,m):ya(n,r,m,u||null,!0):1===t&&null!==r?ya(n,r,m,u||null,!0):2===t?function(t,n,r){const o=xh(t,n);o&&function(t,n,r,o){Ke(t)?t.removeChild(n,r,o):n.removeChild(r)}(t,o,n,r)}(n,m,f):3===t&&n.destroyNode(m),null!=l&&function(t,n,r,o,u){const l=r[7];l!==Mt(r)&&Wl(n,t,o,l,u);for(let m=10;m<r.length;m++){const b=r[m];Zl(b[1],b,t,n,o,l)}}(n,t,l,r,u)}}function Th(t,n,r){return Ke(t)?t.createElement(n,r):null===r?t.createElement(n):t.createElementNS(r,n)}function ju(t,n){const r=t[9],o=r.indexOf(n),u=n[3];1024&n[2]&&(n[2]&=-1025,Ro(u,-1)),r.splice(o,1)}function yl(t,n){if(t.length<=10)return;const r=10+n,o=t[r];if(o){const u=o[17];null!==u&&u!==t&&ju(u,o),n>0&&(t[r-1][4]=o[4]);const l=Xo(t,10+n);!function(t,n){Zl(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const f=l[19];null!==f&&f.detachView(l[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function Xf(t,n){if(!(256&n[2])){const r=n[11];Ke(r)&&r.destroyNode&&Zl(t,n,r,3,null,null),function(t){let n=t[13];if(!n)return $u(t[1],t);for(;n;){let r=null;if(_r(n))r=n[13];else{const o=n[10];o&&(r=o)}if(!r){for(;n&&!n[4]&&n!==t;)_r(n)&&$u(n[1],n),n=n[3];null===n&&(n=t),_r(n)&&$u(n[1],n),r=n&&n[4]}n=r}}(n)}}function $u(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let o=0;o<r.length;o+=2){const u=n[r[o]];if(!(u instanceof Lo)){const l=r[o+1];if(Array.isArray(l))for(let f=0;f<l.length;f+=2){const m=u[l[f]],b=l[f+1];try{b.call(m)}finally{}}else try{l.call(u)}finally{}}}}(t,n),function(t,n){const r=t.cleanup,o=n[7];let u=-1;if(null!==r)for(let l=0;l<r.length-1;l+=2)if("string"==typeof r[l]){const f=r[l+1],m="function"==typeof f?f(n):Mt(n[f]),b=o[u=r[l+2]],x=r[l+3];"boolean"==typeof x?m.removeEventListener(r[l],b,x):x>=0?o[u=x]():o[u=-x].unsubscribe(),l+=2}else{const f=o[u=r[l+1]];r[l].call(f)}if(null!==o){for(let l=u+1;l<o.length;l++)o[l]();n[7]=null}}(t,n),1===n[1].type&&Ke(n[11])&&n[11].destroy();const r=n[17];if(null!==r&&ne(n[3])){r!==n[3]&&ju(r,n);const o=n[19];null!==o&&o.detachView(t)}}}function ep(t,n,r){return function(t,n,r){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return r[0];if(2&o.flags){const u=t.data[o.directiveStart].encapsulation;if(u===Cr.None||u===Cr.Emulated)return null}return Rn(o,r)}(t,n.parent,r)}function ya(t,n,r,o,u){Ke(t)?t.insertBefore(n,r,o,u):n.insertBefore(r,o,u)}function Sh(t,n,r){Ke(t)?t.appendChild(n,r):n.appendChild(r)}function tp(t,n,r,o,u){null!==o?ya(t,n,r,o,u):Sh(t,n,r)}function xh(t,n){return Ke(t)?t.parentNode(n):n.parentNode}let zl=function(t,n,r){return 40&t.type?Rn(t,r):null};function Mh(t,n,r,o){const u=ep(t,o,n),l=n[11],m=function(t,n,r){return zl(t,n,r)}(o.parent||n[6],o,n);if(null!=u)if(Array.isArray(r))for(let b=0;b<r.length;b++)tp(l,u,r[b],m,!1);else tp(l,u,r,m,!1)}function Dd(t,n){if(null!==n){const r=n.type;if(3&r)return Rn(n,t);if(4&r)return Sc(-1,t[n.index]);if(8&r){const o=n.child;if(null!==o)return Dd(t,o);{const u=t[n.index];return ne(u)?Sc(-1,u):Mt(u)}}if(32&r)return bd(n,t)()||Mt(t[n.index]);{const o=Gu(t,n);return null!==o?Array.isArray(o)?o[0]:Dd(du(t[16]),o):Dd(t,n.next)}}return null}function Gu(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Sc(t,n){const r=10+t+1;if(r<n.length){const o=n[r],u=o[1].firstChild;if(null!==u)return Dd(o,u)}return n[7]}function Nh(t,n,r,o,u,l,f){for(;null!=r;){const m=o[r.index],b=r.type;if(f&&0===n&&(m&&is(Mt(m),o),r.flags|=4),64!=(64&r.flags))if(8&b)Nh(t,n,r.child,o,u,l,!1),Wl(n,t,u,m,l);else if(32&b){const x=bd(r,o);let U;for(;U=x();)Wl(n,t,u,U,l);Wl(n,t,u,m,l)}else 16&b?xc(t,n,o,r,u,l):Wl(n,t,u,m,l);r=f?r.projectionNext:r.next}}function Zl(t,n,r,o,u,l){Nh(r,o,t.firstChild,n,u,l,!1)}function xc(t,n,r,o,u,l){const f=r[16],b=f[6].projection[o.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)Wl(n,t,u,b[x],l);else Nh(t,n,b,f[3],u,l,!0)}function sm(t,n,r){Ke(t)?t.setAttribute(n,"style",r):n.style.cssText=r}function Ph(t,n,r){Ke(t)?""===r?t.removeAttribute(n,"class"):t.setAttribute(n,"class",r):n.className=r}function kh(t,n,r){let o=t.length;for(;;){const u=t.indexOf(n,r);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const l=n.length;if(u+l===o||t.charCodeAt(u+l)<=32)return u}r=u+1}}const om="ng-template";function am(t,n,r){let o=0;for(;o<t.length;){let u=t[o++];if(r&&"class"===u){if(u=t[o],-1!==kh(u.toLowerCase(),n,0))return!0}else if(1===u){for(;o<t.length&&"string"==typeof(u=t[o++]);)if(u.toLowerCase()===n)return!0;return!1}}return!1}function ip(t){return 4===t.type&&t.value!==om}function sp(t,n,r){return n===(4!==t.type||r?t.value:om)}function m_(t,n,r){let o=4;const u=t.attrs||[],l=function(t){for(let n=0;n<t.length;n++)if(ja(t[n]))return n;return t.length}(u);let f=!1;for(let m=0;m<n.length;m++){const b=n[m];if("number"!=typeof b){if(!f)if(4&o){if(o=2|1&o,""!==b&&!sp(t,b,r)||""===b&&1===n.length){if(ka(o))return!1;f=!0}}else{const x=8&o?b:n[++m];if(8&o&&null!==t.attrs){if(!am(t.attrs,x,r)){if(ka(o))return!1;f=!0}continue}const Y=y_(8&o?"class":b,u,ip(t),r);if(-1===Y){if(ka(o))return!1;f=!0;continue}if(""!==x){let te;te=Y>l?"":u[Y+1].toLowerCase();const _e=8&o?te:null;if(_e&&-1!==kh(_e,x,0)||2&o&&x!==te){if(ka(o))return!1;f=!0}}}}else{if(!f&&!ka(o)&&!ka(b))return!1;if(f&&ka(b))continue;f=!1,o=b|1&o}}return ka(o)||f}function ka(t){return 0==(1&t)}function y_(t,n,r,o){if(null===n)return-1;let u=0;if(o||!r){let l=!1;for(;u<n.length;){const f=n[u];if(f===t)return u;if(3===f||6===f)l=!0;else{if(1===f||2===f){let m=n[++u];for(;"string"==typeof m;)m=n[++u];continue}if(4===f)break;if(0===f){u+=4;continue}}u+=l?1:2}return-1}return function(t,n){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const o=t[r];if("number"==typeof o)return-1;if(o===n)return r;r++}return-1}(n,t)}function op(t,n,r=!1){for(let o=0;o<n.length;o++)if(m_(t,n[o],r))return!0;return!1}function Td(t,n){return t?":not("+n.trim()+")":n}function um(t){let n=t[0],r=1,o=2,u="",l=!1;for(;r<t.length;){let f=t[r];if("string"==typeof f)if(2&o){const m=t[++r];u+="["+f+(m.length>0?'="'+m+'"':"")+"]"}else 8&o?u+="."+f:4&o&&(u+=" "+f);else""!==u&&!ka(f)&&(n+=Td(l,u),u=""),o=f,l=l||!ka(o);r++}return""!==u&&(n+=Td(l,u)),n}const Yn={};function cm(t){Fh(Je(),se(),Is()+t,Vi())}function Fh(t,n,r,o){if(!o)if(3==(3&n[2])){const l=t.preOrderCheckHooks;null!==l&&Oo(n,l,r)}else{const l=t.preOrderHooks;null!==l&&Ca(n,l,0,r)}zs(r)}function Lh(t,n){return t<<17|n<<2}function _a(t){return t>>17&32767}function Us(t){return 2|t}function qu(t){return(131068&t)>>2}function lp(t,n){return-131069&t|n<<2}function cp(t){return 1|t}function vm(t,n){const r=t.contentQueries;if(null!==r)for(let o=0;o<r.length;o+=2){const u=r[o],l=r[o+1];if(-1!==l){const f=t.data[l];bn(u),f.contentQueries(2,n[l],l)}}}function Kl(t,n,r,o,u,l,f,m,b,x){const U=n.blueprint.slice();return U[0]=u,U[2]=140|o,Ws(U),U[3]=U[15]=t,U[8]=r,U[10]=f||t&&t[10],U[11]=m||t&&t[11],U[12]=b||t&&t[12]||null,U[9]=x||t&&t[9]||null,U[6]=l,U[16]=2==n.type?t[16]:U,U}function Wu(t,n,r,o,u){let l=t.data[n];if(null===l)l=function(t,n,r,o,u){const l=kn(),f=wr(),b=t.data[n]=function(t,n,r,o,u,l){return{type:r,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?l:l&&l.parent,r,n,o,u);return null===t.firstChild&&(t.firstChild=b),null!==l&&(f?null==l.child&&null!==b.parent&&(l.child=b):null===l.next&&(l.next=b)),b}(t,n,r,o,u),un.lFrame.inI18n&&(l.flags|=64);else if(64&l.type){l.type=r,l.value=o,l.attrs=u;const f=function(){const t=un.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();l.injectorIndex=null===f?-1:f.injectorIndex}return nr(l,!0),l}function Yl(t,n,r,o){if(0===r)return-1;const u=n.length;for(let l=0;l<r;l++)n.push(o),t.blueprint.push(o),t.data.push(null);return u}function pu(t,n,r){di(n);try{const o=t.viewQuery;null!==o&&Ld(1,o,r);const u=t.template;null!==u&&Em(t,n,u,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&vm(t,n),t.staticViewQueries&&Ld(2,t.viewQuery,r);const l=t.components;null!==l&&function(t,n){for(let r=0;r<n.length;r++)P_(t,n[r])}(n,l)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,Ns()}}function vl(t,n,r,o){const u=n[2];if(256==(256&u))return;di(n);const l=Vi();try{Ws(n),function(t){un.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&Em(t,n,r,2,o);const f=3==(3&u);if(!l)if(f){const x=t.preOrderCheckHooks;null!==x&&Oo(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Ca(n,x,0,null),Po(n,0)}if(function(t){for(let n=Ch(t);null!==n;n=Id(n)){if(!n[2])continue;const r=n[9];for(let o=0;o<r.length;o++){const u=r[o],l=u[3];0==(1024&u[2])&&Ro(l,1),u[2]|=1024}}}(n),function(t){for(let n=Ch(t);null!==n;n=Id(n))for(let r=10;r<n.length;r++){const o=n[r],u=o[1];Ms(o)&&vl(u,o,u.template,o[8])}}(n),null!==t.contentQueries&&vm(t,n),!l)if(f){const x=t.contentCheckHooks;null!==x&&Oo(n,x)}else{const x=t.contentHooks;null!==x&&Ca(n,x,1),Po(n,1)}!function(t,n){const r=t.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const u=r[o];if(u<0)zs(~u);else{const l=u,f=r[++o],m=r[++o];A(f,l),m(2,n[l])}}}finally{zs(-1)}}(t,n);const m=t.components;null!==m&&function(t,n){for(let r=0;r<n.length;r++)O_(t,n[r])}(n,m);const b=t.viewQuery;if(null!==b&&Ld(2,b,o),!l)if(f){const x=t.viewCheckHooks;null!==x&&Oo(n,x)}else{const x=t.viewHooks;null!==x&&Ca(n,x,2),Po(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),l||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,Ro(n[3],-1))}finally{Ns()}}function T_(t,n,r,o){const u=n[10],l=!Vi(),f=Li(n);try{l&&!f&&u.begin&&u.begin(),f&&pu(t,n,o),vl(t,n,r,o)}finally{l&&!f&&u.end&&u.end()}}function Em(t,n,r,o,u){const l=Is(),f=2&o;try{zs(-1),f&&n.length>20&&Fh(t,n,20,Vi()),r(o,u)}finally{zs(l)}}function Gh(t,n,r){!Z()||(function(t,n,r,o){const u=r.directiveStart,l=r.directiveEnd;t.firstCreatePass||wo(r,n),is(o,n);const f=r.initialInputs;for(let m=u;m<l;m++){const b=t.data[m],x=it(b);x&&Am(n,r,b);const U=q(n,t,m,r);is(U,n),null!==f&&M_(0,m-u,U,b,0,f),x&&(Fr(r.index,n)[8]=U)}}(t,n,r,Rn(r,n)),128==(128&r.flags)&&function(t,n,r){const o=r.directiveStart,u=r.directiveEnd,f=r.index,m=un.lFrame.currentDirectiveIndex;try{zs(f);for(let b=o;b<u;b++){const x=t.data[b],U=n[b];$(b),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Yh(x,U)}}finally{zs(-1),$(m)}}(t,n,r))}function vp(t,n,r=Rn){const o=n.localNames;if(null!==o){let u=n.index+1;for(let l=0;l<o.length;l+=2){const f=o[l+1],m=-1===f?r(n,t):t[f];t[u++]=m}}}function qh(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Wh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Wh(t,n,r,o,u,l,f,m,b,x){const U=20+o,Y=U+u,te=function(t,n){const r=[];for(let o=0;o<n;o++)r.push(o<t?null:Yn);return r}(U,Y),_e="function"==typeof x?x():x;return te[1]={type:t,blueprint:te,template:r,queries:null,viewQuery:m,declTNode:n,data:te.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:b,consts:_e,incompleteFirstPass:!1}}function zh(t,n,r,o){const u=Jh(n);null===r?u.push(o):(u.push(r),t.firstCreatePass&&Xh(t).push(o,u.length-1))}function Zh(t,n,r){for(let o in t)if(t.hasOwnProperty(o)){const u=t[o];(r=null===r?{}:r).hasOwnProperty(o)?r[o].push(n,u):r[o]=[n,u]}return r}function qo(t,n,r,o,u,l,f,m){const b=Rn(n,r);let U,x=n.inputs;!m&&null!=x&&(U=x[o])?(ef(t,r,U,o,u),Q(n)&&function(t,n){const r=Fr(n,t);16&r[2]||(r[2]|=64)}(r,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),u=null!=f?f(u,n.value||"",o):u,Ke(l)?l.setProperty(b,o,u):Da(o)||(b.setProperty?b.setProperty(o,u):b[o]=u))}function Nd(t,n,r,o){let u=!1;if(Z()){const l=function(t,n,r){const o=t.directiveRegistry;let u=null;if(o)for(let l=0;l<o.length;l++){const f=o[l];op(r,f.selectors,!1)&&(u||(u=[]),At(wo(r,n),t,f.type),it(f)?(Dm(t,r),u.unshift(f)):u.push(f))}return u}(t,n,r),f=null===o?null:{"":-1};if(null!==l){u=!0,Dp(r,t.data.length,l.length);for(let U=0;U<l.length;U++){const Y=l[U];Y.providersResolver&&Y.providersResolver(Y)}let m=!1,b=!1,x=Yl(t,n,l.length,null);for(let U=0;U<l.length;U++){const Y=l[U];r.mergedAttrs=Uo(r.mergedAttrs,Y.hostAttrs),Tp(t,r,n,x,Y),R_(x,Y,f),null!==Y.contentQueries&&(r.flags|=8),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(r.flags|=128);const te=Y.type.prototype;!m&&(te.ngOnChanges||te.ngOnInit||te.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),m=!0),!b&&(te.ngOnChanges||te.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),b=!0),x++}!function(t,n){const o=n.directiveEnd,u=t.data,l=n.attrs,f=[];let m=null,b=null;for(let x=n.directiveStart;x<o;x++){const U=u[x],Y=U.inputs,te=null===l||ip(n)?null:N_(Y,l);f.push(te),m=Zh(Y,x,m),b=Zh(U.outputs,x,b)}null!==m&&(m.hasOwnProperty("class")&&(n.flags|=16),m.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=f,n.inputs=m,n.outputs=b}(t,r)}f&&function(t,n,r){if(n){const o=t.localNames=[];for(let u=0;u<n.length;u+=2){const l=r[n[u+1]];if(null==l)throw new $e("301",`Export of name '${n[u+1]}' not found!`);o.push(n[u],l)}}}(r,o,f)}return r.mergedAttrs=Uo(r.mergedAttrs,r.attrs),u}function Kh(t,n,r,o,u,l){const f=l.hostBindings;if(f){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const b=~n.index;(function(t){let n=t.length;for(;n>0;){const r=t[--n];if("number"==typeof r&&r<0)return r}return 0})(m)!=b&&m.push(b),m.push(o,u,f)}}function Yh(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Dm(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function R_(t,n,r){if(r){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)r[n.exportAs[o]]=t;it(n)&&(r[""]=t)}}function Dp(t,n,r){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+r,t.providerIndexes=n}function Tp(t,n,r,o,u){t.data[o]=u;const l=u.factory||(u.factory=_i(u.type)),f=new Lo(l,it(u),null);t.blueprint[o]=f,r[o]=f,Kh(t,n,0,o,Yl(t,r,u.hostVars,Yn),u)}function Am(t,n,r){const o=Rn(n,t),u=qh(r),l=t[10],f=Pd(t,Kl(t,u,null,r.onPush?64:16,o,n,l,l.createRenderer(o,r),null,null));t[n.index]=f}function Ka(t,n,r,o,u,l){const f=Rn(t,n);!function(t,n,r,o,u,l,f){if(null==l)Ke(t)?t.removeAttribute(n,u,r):n.removeAttribute(u);else{const m=null==f?ut(l):f(l,o||"",u);Ke(t)?t.setAttribute(n,u,m,r):r?n.setAttributeNS(r,u,m):n.setAttribute(u,m)}}(n[11],f,l,t.value,r,o,u)}function M_(t,n,r,o,u,l){const f=l[n];if(null!==f){const m=o.setInput;for(let b=0;b<f.length;){const x=f[b++],U=f[b++],Y=f[b++];null!==m?o.setInput(r,Y,x,U):r[U]=Y}}}function N_(t,n){let r=null,o=0;for(;o<n.length;){const u=n[o];if(0!==u)if(5!==u){if("number"==typeof u)break;t.hasOwnProperty(u)&&(null===r&&(r=[]),r.push(u,t[u],n[o+1])),o+=2}else o+=2;else o+=4}return r}function Qh(t,n,r,o){return new Array(t,!0,!1,n,null,0,o,r,null,null)}function O_(t,n){const r=Fr(n,t);if(Ms(r)){const o=r[1];80&r[2]?vl(o,r,o.template,r[8]):r[5]>0&&Od(r)}}function Od(t){for(let o=Ch(t);null!==o;o=Id(o))for(let u=10;u<o.length;u++){const l=o[u];if(1024&l[2]){const f=l[1];vl(f,l,f.template,l[8])}else l[5]>0&&Od(l)}const r=t[1].components;if(null!==r)for(let o=0;o<r.length;o++){const u=Fr(r[o],t);Ms(u)&&u[5]>0&&Od(u)}}function P_(t,n){const r=Fr(n,t),o=r[1];(function(t,n){for(let r=n.length;r<t.blueprint.length;r++)n.push(t.blueprint[r])})(o,r),pu(o,r,r[8])}function Pd(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function kd(t){for(;t;){t[2]|=64;const n=du(t);if(Bt(t)&&!n)return t;t=n}return null}function Fd(t,n,r){const o=n[10];o.begin&&o.begin();try{vl(t,n,t.template,r)}catch(u){throw Pp(n,u),u}finally{o.end&&o.end()}}function xm(t){!function(t){for(let n=0;n<t.components.length;n++){const r=t.components[n],o=oo(r),u=o[1];T_(u,o,u.template,r)}}(t[8])}function Ld(t,n,r){bn(0),n(t,r)}const Op=(()=>Promise.resolve(null))();function Jh(t){return t[7]||(t[7]=[])}function Xh(t){return t.cleanup||(t.cleanup=[])}function Pp(t,n){const r=t[9],o=r?r.get(nt,null):null;o&&o.handleError(n)}function ef(t,n,r,o,u){for(let l=0;l<r.length;){const f=r[l++],m=r[l++],b=n[f],x=t.data[f];null!==x.setInput?x.setInput(b,u,o,m):b[m]=u}}function zu(t,n,r){const o=Er(n,t);!function(t,n,r){Ke(t)?t.setValue(n,r):n.textContent=r}(t[11],o,r)}function Bc(t,n,r){let o=r?t.styles:null,u=r?t.classes:null,l=0;if(null!==n)for(let f=0;f<n.length;f++){const m=n[f];"number"==typeof m?l=m:1==l?u=ke(u,m):2==l&&(o=ke(o,m+": "+n[++f]+";"))}r?t.styles=o:t.stylesWithoutHost=o,r?t.classes=u:t.classesWithoutHost=u}const wl=new xi("INJECTOR",-1);class Rm{get(n,r=so){if(r===so){const o=new Error(`NullInjectorError: No provider for ${ge(n)}!`);throw o.name="NullInjectorError",o}return r}}const Vd=new xi("Set Injector scope."),Jl={},F_={};let Ud;function Mm(){return void 0===Ud&&(Ud=new Rm),Ud}function Nm(t,n=null,r=null,o){return new Lp(t,r,n||Mm(),o)}class Lp{constructor(n,r,o,u=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const l=[];r&&io(r,m=>this.processProvider(m,n,r)),io([n],m=>this.processInjectorType(m,[],l)),this.records.set(wl,jc(void 0,this));const f=this.records.get(Vd);this.scope=null!=f?f.value:null,this.source=u||("object"==typeof n?null:ge(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,r=so,o=lt.Default){this.assertNotDestroyed();const u=Na(this),l=er(void 0);try{if(!(o&lt.SkipSelf)){let m=this.records.get(n);if(void 0===m){const b=("function"==typeof(t=n)||"object"==typeof t&&t instanceof xi)&&hn(n);m=b&&this.injectableDefInScope(b)?jc(tf(n),Jl):null,this.records.set(n,m)}if(null!=m)return this.hydrate(n,m)}return(o&lt.Self?Mm():this.parent).get(n,r=o&lt.Optional&&r===so?null:r)}catch(f){if("NullInjectorError"===f.name){if((f[As]=f[As]||[]).unshift(ge(n)),u)throw f;return nd(f,n,"R3InjectorError",this.source)}throw f}finally{er(l),Na(u)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,u)=>n.push(ge(u))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,r,o){if(!(n=me(n)))return!1;let u=Xn(n);const l=null==u&&n.ngModule||void 0,f=void 0===l?n:l,m=-1!==o.indexOf(f);if(void 0!==l&&(u=Xn(l)),null==u)return!1;if(null!=u.imports&&!m){let U;o.push(f);try{io(u.imports,Y=>{this.processInjectorType(Y,r,o)&&(void 0===U&&(U=[]),U.push(Y))})}finally{}if(void 0!==U)for(let Y=0;Y<U.length;Y++){const{ngModule:te,providers:_e}=U[Y];io(_e,xe=>this.processProvider(xe,te,_e||wt))}}this.injectorDefTypes.add(f);const b=_i(f)||(()=>new f);this.records.set(f,jc(b,Jl));const x=u.providers;if(null!=x&&!m){const U=n;io(x,Y=>this.processProvider(Y,U,x))}return void 0!==l&&void 0!==n.providers}processProvider(n,r,o){let u=bl(n=me(n))?n:me(n&&n.provide);const l=nf(t=n)?jc(void 0,t.useValue):jc(Pm(t),Jl);var t;if(bl(n)||!0!==n.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=jc(void 0,Jl,!0),f.factory=()=>Fs(f.multi),this.records.set(u,f)),u=n,f.multi.push(n)}this.records.set(u,l)}hydrate(n,r){return r.value===Jl&&(r.value=F_,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(t=r.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const r=me(n.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function tf(t){const n=hn(t),r=null!==n?n.factory:_i(t);if(null!==r)return r;if(t instanceof xi)throw new Error(`Token ${ge(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=function(t,n){const r=[];for(let o=0;o<t;o++)r.push(n);return r}(n,"?");throw new Error(`Can't resolve all parameters for ${ge(t)}: (${o.join(", ")}).`)}const r=function(t){const n=t&&(t[vn]||t[Oi]);if(n){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),n}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function Pm(t,n,r){let o;if(bl(t)){const u=me(t);return _i(u)||tf(u)}if(nf(t))o=()=>me(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Fs(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>Hi(me(t.useExisting));else{const u=me(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return _i(u)||tf(u);o=()=>new u(...Fs(t.deps))}return o}function jc(t,n,r=!1){return{factory:t,value:n,multi:r?[]:void 0}}function nf(t){return null!==t&&"object"==typeof t&&Ga in t}function bl(t){return"function"==typeof t}const $p=function(t,n,r){return function(t,n=null,r=null,o){const u=Nm(t,n,r,o);return u._resolveInjectorDefTypes(),u}({name:r},n,t,r)};let Ii=(()=>{class t{static create(r,o){return Array.isArray(r)?$p(r,o,""):$p(r.providers,r.parent,r.name||"")}}return t.THROW_IF_NOT_FOUND=so,t.NULL=new Rm,t.\u0275prov=Tn({token:t,providedIn:"any",factory:()=>Hi(wl)}),t.__NG_ELEMENT_ID__=-1,t})();function gu(t,n){oa(oo(t)[1],gt())}function Hc(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const o=[t];for(;n;){let u;if(it(t))u=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");u=n.\u0275dir}if(u){if(r){o.push(u);const f=t;f.inputs=df(t.inputs),f.declaredInputs=df(t.declaredInputs),f.outputs=df(t.outputs);const m=u.hostBindings;m&&Z_(t,m);const b=u.viewQuery,x=u.contentQueries;if(b&&z_(t,b),x&&Yp(t,x),he(t.inputs,u.inputs),he(t.declaredInputs,u.declaredInputs),he(t.outputs,u.outputs),it(u)&&u.data.animation){const U=t.data;U.animation=(U.animation||[]).concat(u.data.animation)}}const l=u.features;if(l)for(let f=0;f<l.length;f++){const m=l[f];m&&m.ngInherit&&m(t),m===Hc&&(r=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,r=null;for(let o=t.length-1;o>=0;o--){const u=t[o];u.hostVars=n+=u.hostVars,u.hostAttrs=Uo(u.hostAttrs,r=Uo(r,u.hostAttrs))}}(o)}function df(t){return t===Tt?{}:t===wt?[]:t}function z_(t,n){const r=t.viewQuery;t.viewQuery=r?(o,u)=>{n(o,u),r(o,u)}:n}function Yp(t,n){const r=t.contentQueries;t.contentQueries=r?(o,u,l)=>{n(o,u,l),r(o,u,l)}:n}function Z_(t,n){const r=t.hostBindings;t.hostBindings=r?(o,u)=>{n(o,u),r(o,u)}:n}let Qp=null;function Xi(){if(!Qp){const t=pe.Symbol;if(t&&t.iterator)Qp=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<n.length;++r){const o=n[r];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Qp=o)}}}return Qp}class Ya{constructor(n){this.wrapped=n}static wrap(n){return new Ya(n)}static unwrap(n){return Ya.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof Ya}}function Gd(t){return!!Xp(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xi()in t)}function Xp(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Wo(t,n,r){return!Object.is(t[n],r)&&(t[n]=r,!0)}function ec(t,n,r,o){const u=Wo(t,n,r);return Wo(t,n+1,o)||u}function Qa(t,n,r,o){const u=se();return Wo(u,ir(),n)&&(Je(),Ka(Qr(),u,t,n,r,o)),Qa}function zo(t,n,r,o){return Wo(t,ir(),r)?n+ut(r)+o:Yn}function pf(t,n,r,o,u,l,f,m){const b=se(),x=Je(),U=t+20,Y=x.firstCreatePass?function(t,n,r,o,u,l,f,m,b){const x=n.consts,U=Wu(n,t,4,f||null,ri(x,m));Nd(n,r,U,ri(x,b)),oa(n,U);const Y=U.tViews=Wh(2,U,o,u,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x);return null!==n.queries&&(n.queries.template(n,U),Y.queries=n.queries.embeddedTView(U)),U}(U,x,b,n,r,o,u,l,f):x.data[U];nr(Y,!1);const te=b[11].createComment("");Mh(x,b,te,Y),is(te,b),Pd(b,b[U]=Qh(te,b,te,Y)),Ie(Y)&&Gh(x,b,Y),null!=f&&vp(b,Y,m)}function Jd(t,n=lt.Default){const r=se();return null===r?Hi(t,n):C(gt(),r,me(t),n)}function _f(t,n,r){const o=se();return Wo(o,ir(),n)&&qo(Je(),Qr(),o,t,n,o[11],r,!1),_f}function dg(t,n,r,o,u){const f=u?"class":"style";ef(t,r,n.inputs[f],f,o)}function Xd(t,n,r,o){const u=se(),l=Je(),f=20+t,m=u[11],b=u[f]=Th(m,n,un.lFrame.currentNamespace),x=l.firstCreatePass?function(t,n,r,o,u,l,f){const m=n.consts,x=Wu(n,t,2,u,ri(m,l));return Nd(n,r,x,ri(m,f)),null!==x.attrs&&Bc(x,x.attrs,!1),null!==x.mergedAttrs&&Bc(x,x.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,x),x}(f,l,u,0,n,r,o):l.data[f];nr(x,!0);const U=x.mergedAttrs;null!==U&&Jr(m,b,U);const Y=x.classes;null!==Y&&Ph(m,b,Y);const te=x.styles;null!==te&&sm(m,b,te),64!=(64&x.flags)&&Mh(l,u,b,x),0===un.lFrame.elementDepthCount&&is(b,u),un.lFrame.elementDepthCount++,Ie(x)&&(Gh(l,u,x),function(t,n,r){if(ce(n)){const u=n.directiveEnd;for(let l=n.directiveStart;l<u;l++){const f=t.data[l];f.contentQueries&&f.contentQueries(1,r[l],l)}}}(l,x,u)),null!==o&&vp(u,x)}function hg(){let t=gt();wr()?un.lFrame.isParent=!1:(t=t.parent,nr(t,!1));const n=t;un.lFrame.elementDepthCount--;const r=Je();r.firstCreatePass&&(oa(r,t),ce(t)&&r.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&dg(r,n,se(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&dg(r,n,se(),n.stylesWithoutHost,!1)}function my(t,n,r,o){Xd(t,n,r,o),hg()}function cv(){return se()}function fg(t){return!!t&&"function"==typeof t.then}function vy(t){return!!t&&"function"==typeof t.subscribe}const pg=vy;function eh(t,n,r,o){const u=se(),l=Je(),f=gt();return function(t,n,r,o,u,l,f,m){const b=Ie(o),U=t.firstCreatePass&&Xh(t),Y=n[8],te=Jh(n);let _e=!0;if(3&o.type||m){const ze=Rn(o,n),It=m?m(ze):ze,dt=te.length,_n=m?Qn=>m(Mt(Qn[o.index])):o.index;if(Ke(r)){let Qn=null;if(!m&&b&&(Qn=function(t,n,r,o){const u=t.cleanup;if(null!=u)for(let l=0;l<u.length-1;l+=2){const f=u[l];if(f===r&&u[l+1]===o){const m=n[7],b=u[l+2];return m.length>b?m[b]:null}"string"==typeof f&&(l+=2)}return null}(t,n,u,o.index)),null!==Qn)(Qn.__ngLastListenerFn__||Qn).__ngNextListenerFn__=l,Qn.__ngLastListenerFn__=l,_e=!1;else{l=mg(o,n,Y,l,!1);const Lr=r.listen(It,u,l);te.push(l,Lr),U&&U.push(u,_n,dt,dt+1)}}else l=mg(o,n,Y,l,!0),It.addEventListener(u,l,f),te.push(l),U&&U.push(u,_n,dt,f)}else l=mg(o,n,Y,l,!1);const xe=o.outputs;let tt;if(_e&&null!==xe&&(tt=xe[u])){const ze=tt.length;if(ze)for(let It=0;It<ze;It+=2){const mo=n[tt[It]][tt[It+1]].subscribe(l),bu=te.length;te.push(l,mo),U&&U.push(u,o.index,bu,-(bu+1))}}}(l,u,u[11],f,t,n,!!r,o),eh}function vf(t,n,r,o){try{return!1!==r(o)}catch(u){return Pp(t,u),!1}}function mg(t,n,r,o,u){return function l(f){if(f===Function)return o;const m=2&t.flags?Fr(t.index,n):n;0==(32&n[2])&&kd(m);let b=vf(n,0,o,f),x=l.__ngNextListenerFn__;for(;x;)b=vf(n,0,x,f)&&b,x=x.__ngNextListenerFn__;return u&&!1===b&&(f.preventDefault(),f.returnValue=!1),b}}function wy(t=1){return function(t){return(un.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,un.lFrame.contextLView))[8]}(t)}function wf(t,n,r){return bf(t,"",n,"",r),wf}function bf(t,n,r,o,u){const l=se(),f=zo(l,n,r,o);return f!==Yn&&qo(Je(),Qr(),l,t,f,l[11],u,!1),bf}function Sl(t,n,r,o,u){const l=t[r+1],f=null===n;let m=o?_a(l):qu(l),b=!1;for(;0!==m&&(!1===b||f);){const U=t[m+1];Eg(t[m],n)&&(b=!0,t[m+1]=o?cp(U):Us(U)),m=o?_a(U):qu(U)}b&&(t[r+1]=o?Us(l):cp(l))}function Eg(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&W(t,n)>=0}function If(t,n){return function(t,n,r,o){const u=se(),l=Je(),f=Ui(2);l.firstUpdatePass&&function(t,n,r,o){const u=t.data;if(null===u[r+1]){const l=u[Is()],f=function(t,n){return n>=t.expandoStartIndex}(t,r);(function(t,n){return 0!=(t.flags&(n?16:32))})(l,o)&&null===n&&!f&&(n=!1),n=function(t,n,r,o){const u=function(t){const n=un.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let l=o?n.residualClasses:n.residualStyles;if(null===u)0===(o?n.classBindings:n.styleBindings)&&(r=a(r=i(null,t,n,r,o),n.attrs,o),l=null);else{const f=n.directiveStylingLast;if(-1===f||t[f]!==u)if(r=i(u,t,n,r,o),null===l){let b=function(t,n,r){const o=r?n.classBindings:n.styleBindings;if(0!==qu(o))return t[_a(o)]}(t,n,o);void 0!==b&&Array.isArray(b)&&(b=i(null,t,n,b[1],o),b=a(b,n.attrs,o),function(t,n,r,o){t[_a(r?n.classBindings:n.styleBindings)]=o}(t,n,o,b))}else l=function(t,n,r){let o;const u=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<u;l++)o=a(o,t[l].hostAttrs,r);return a(o,n.attrs,r)}(t,n,o)}return void 0!==l&&(o?n.residualClasses=l:n.residualStyles=l),r}(u,l,n,o),function(t,n,r,o,u,l){let f=l?n.classBindings:n.styleBindings,m=_a(f),b=qu(f);t[o]=r;let U,x=!1;if(Array.isArray(r)){const Y=r;U=Y[1],(null===U||W(Y,U)>0)&&(x=!0)}else U=r;if(u)if(0!==b){const te=_a(t[m+1]);t[o+1]=Lh(te,m),0!==te&&(t[te+1]=lp(t[te+1],o)),t[m+1]=function(t,n){return 131071&t|n<<17}(t[m+1],o)}else t[o+1]=Lh(m,0),0!==m&&(t[m+1]=lp(t[m+1],o)),m=o;else t[o+1]=Lh(b,0),0===m?m=o:t[b+1]=lp(t[b+1],o),b=o;x&&(t[o+1]=Us(t[o+1])),Sl(t,U,o,!0),Sl(t,U,o,!1),function(t,n,r,o,u){const l=u?t.residualClasses:t.residualStyles;null!=l&&"string"==typeof n&&W(l,n)>=0&&(r[o+1]=cp(r[o+1]))}(n,U,t,o,l),f=Lh(m,b),l?n.classBindings=f:n.styleBindings=f}(u,l,n,r,f,o)}}(l,t,f,o),n!==Yn&&Wo(u,f,n)&&function(t,n,r,o,u,l,f,m){if(!(3&n.type))return;const b=t.data,x=b[m+1];ee(function(t){return 1==(1&t)}(x)?H(b,n,r,u,qu(x),f):void 0)||(ee(l)||function(t){return 2==(2&t)}(x)&&(l=H(b,null,r,u,m,f)),function(t,n,r,o,u){const l=Ke(t);if(n)u?l?t.addClass(r,o):r.classList.add(o):l?t.removeClass(r,o):r.classList.remove(o);else{let f=-1===o.indexOf("-")?void 0:Pa.DashCase;if(null==u)l?t.removeStyle(r,o,f):r.style.removeProperty(o);else{const m="string"==typeof u&&u.endsWith("!important");m&&(u=u.slice(0,-10),f|=Pa.Important),l?t.setStyle(r,o,u,f):r.style.setProperty(o,u,m?"important":"")}}}(o,f,Er(Is(),r),u,l))}(l,l.data[Is()],u,u[11],t,u[f+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=ge(na(t)))),t}(n,r),o,f)}(t,n,null,!0),If}function i(t,n,r,o,u){let l=null;const f=r.directiveEnd;let m=r.directiveStylingLast;for(-1===m?m=r.directiveStart:m++;m<f&&(l=n[m],o=a(o,l.hostAttrs,u),l!==t);)m++;return null!==t&&(r.directiveStylingLast=m),o}function a(t,n,r){const o=r?1:2;let u=-1;if(null!==n)for(let l=0;l<n.length;l++){const f=n[l];"number"==typeof f?u=f:u===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),T(t,f,!!r||n[++l]))}return void 0===t?null:t}function H(t,n,r,o,u,l){const f=null===n;let m;for(;u>0;){const b=t[u],x=Array.isArray(b),U=x?b[1]:b,Y=null===U;let te=r[u+1];te===Yn&&(te=Y?wt:void 0);let _e=Y?F(te,o):U===o?te:void 0;if(x&&!ee(_e)&&(_e=F(b,o)),ee(_e)&&(m=_e,f))return m;const xe=t[u+1];u=f?_a(xe):qu(xe)}if(null!==n){let b=l?n.residualClasses:n.residualStyles;null!=b&&(m=F(b,o))}return m}function ee(t){return void 0!==t}function st(t,n=""){const r=se(),o=Je(),u=t+20,l=o.firstCreatePass?Wu(o,u,1,n,null):o.data[u],f=r[u]=function(t,n){return Ke(t)?t.createText(n):t.createTextNode(n)}(r[11],n);Mh(o,r,f,l),nr(l,!1)}function pt(t){return Nt("",t,""),pt}function Nt(t,n,r){const o=se(),u=zo(o,t,n,r);return u!==Yn&&zu(o,Is(),u),Nt}function ln(t,n,r,o,u){const l=se(),f=function(t,n,r,o,u,l){const m=ec(t,br(),r,u);return Ui(2),m?n+ut(r)+o+ut(u)+l:Yn}(l,t,n,r,o,u);return f!==Yn&&zu(l,Is(),f),ln}function vv(t,n,r){const o=se();return Wo(o,ir(),n)&&qo(Je(),Qr(),o,t,n,o[11],r,!0),vv}const rh=void 0;var uI=["en",[["a","p"],["AM","PM"],rh],[["AM","PM"],rh,rh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rh,"{1} 'at' {0}",rh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Cf={};function Ev(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=l0(n);if(r)return r;const o=n.split("-")[0];if(r=l0(o),r)return r;if("en"===o)return uI;throw new Error(`Missing locale data for the locale "${t}".`)}function u0(t){return Ev(t)[jn.PluralCase]}function l0(t){return t in Cf||(Cf[t]=pe.ng&&pe.ng.common&&pe.ng.common.locales&&pe.ng.common.locales[t]),Cf[t]}var jn=(()=>((jn=jn||{})[jn.LocaleId=0]="LocaleId",jn[jn.DayPeriodsFormat=1]="DayPeriodsFormat",jn[jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",jn[jn.DaysFormat=3]="DaysFormat",jn[jn.DaysStandalone=4]="DaysStandalone",jn[jn.MonthsFormat=5]="MonthsFormat",jn[jn.MonthsStandalone=6]="MonthsStandalone",jn[jn.Eras=7]="Eras",jn[jn.FirstDayOfWeek=8]="FirstDayOfWeek",jn[jn.WeekendRange=9]="WeekendRange",jn[jn.DateFormat=10]="DateFormat",jn[jn.TimeFormat=11]="TimeFormat",jn[jn.DateTimeFormat=12]="DateTimeFormat",jn[jn.NumberSymbols=13]="NumberSymbols",jn[jn.NumberFormats=14]="NumberFormats",jn[jn.CurrencyCode=15]="CurrencyCode",jn[jn.CurrencySymbol=16]="CurrencySymbol",jn[jn.CurrencyName=17]="CurrencyName",jn[jn.Currencies=18]="Currencies",jn[jn.Directionality=19]="Directionality",jn[jn.PluralCase=20]="PluralCase",jn[jn.ExtraData=21]="ExtraData",jn))();const Oy="en-US";let c0=Oy;function wv(t){dn(t,"Expected localeId to be defined"),"string"==typeof t&&(c0=t.toLowerCase().replace(/_/g,"-"))}function Cv(t,n,r,o,u){if(t=me(t),Array.isArray(t))for(let l=0;l<t.length;l++)Cv(t[l],n,r,o,u);else{const l=Je(),f=se();let m=bl(t)?t:me(t.provide),b=Pm(t);const x=gt(),U=1048575&x.providerIndexes,Y=x.directiveStart,te=x.providerIndexes>>20;if(bl(t)||!t.multi){const _e=new Lo(b,u,Jd),xe=Tv(m,n,u?U:U+te,Y);-1===xe?(At(wo(x,f),l,m),Dv(l,t,n.length),n.push(m),x.directiveStart++,x.directiveEnd++,u&&(x.providerIndexes+=1048576),r.push(_e),f.push(_e)):(r[xe]=_e,f[xe]=_e)}else{const _e=Tv(m,n,U+te,Y),xe=Tv(m,n,U,U+te),tt=_e>=0&&r[_e],ze=xe>=0&&r[xe];if(u&&!ze||!u&&!tt){At(wo(x,f),l,m);const It=function(t,n,r,o,u){const l=new Lo(t,r,Jd);return l.multi=[],l.index=n,l.componentProviders=0,P0(l,u,o&&!r),l}(u?sC:iC,r.length,u,o,b);!u&&ze&&(r[xe].providerFactory=It),Dv(l,t,n.length,0),n.push(m),x.directiveStart++,x.directiveEnd++,u&&(x.providerIndexes+=1048576),r.push(It),f.push(It)}else Dv(l,t,_e>-1?_e:xe,P0(r[u?xe:_e],b,!u&&o));!u&&o&&ze&&r[xe].componentProviders++}}}function Dv(t,n,r,o){const u=bl(n);if(u||function(t){return!!t.useClass}(n)){const f=(n.useClass||n).prototype.ngOnDestroy;if(f){const m=t.destroyHooks||(t.destroyHooks=[]);if(!u&&n.multi){const b=m.indexOf(r);-1===b?m.push(r,[o,f]):m[b+1].push(o,f)}else m.push(r,f)}}}function P0(t,n,r){return r&&t.componentProviders++,t.multi.push(n)-1}function Tv(t,n,r,o){for(let u=r;u<o;u++)if(n[u]===t)return u;return-1}function iC(t,n,r,o){return Av(this.multi,[])}function sC(t,n,r,o){const u=this.multi;let l;if(this.providerFactory){const f=this.providerFactory.componentProviders,m=q(r,r[1],this.providerFactory.index,o);l=m.slice(0,f),Av(u,l);for(let b=f;b<m.length;b++)l.push(m[b])}else l=[],Av(u,l);return l}function Av(t,n){for(let r=0;r<t.length;r++)n.push((0,t[r])());return n}function k0(t,n=[]){return r=>{r.providersResolver=(o,u)=>function(t,n,r){const o=Je();if(o.firstCreatePass){const u=it(t);Cv(r,o.data,o.blueprint,u,!0),Cv(n,o.data,o.blueprint,u,!1)}}(o,u?u(t):t,n)}}class F0{}const V0="ngComponent";class uC{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${ge(t)}. Did you add it to @NgModule.entryComponents?`);return n[V0]=t,n}(n)}}let Tf=(()=>{class t{}return t.NULL=new uC,t})();function Vy(...t){}function Af(t,n){return new xl(Rn(t,n))}const dC=function(){return Af(gt(),se())};let xl=(()=>{class t{constructor(r){this.nativeElement=r}}return t.__NG_ELEMENT_ID__=dC,t})();function U0(t){return t instanceof xl?t.nativeElement:t}class Uy{}let hC=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pC(),t})();const pC=function(){const t=se(),r=Fr(gt().index,t);return function(t){return t[11]}(_r(r)?r:t)};let xv=(()=>{class t{}return t.\u0275prov=Tn({token:t,providedIn:"root",factory:()=>null}),t})();class B0{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Rv=new B0("12.2.10");class j0{constructor(){}supports(n){return Gd(n)}create(n){return new _C(n)}}const yC=(t,n)=>n;class _C{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||yC}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,o=this._removalsHead,u=0,l=null;for(;r||o;){const f=!o||r&&r.currentIndex<H0(o,u,l)?r:o,m=H0(f,u,l),b=f.currentIndex;if(f===o)u--,o=o._nextRemoved;else if(r=r._next,null==f.previousIndex)u++;else{l||(l=[]);const x=m-u,U=b-u;if(x!=U){for(let te=0;te<x;te++){const _e=te<l.length?l[te]:l[te]=0,xe=_e+te;U<=xe&&xe<x&&(l[te]=_e+1)}l[f.previousIndex]=U-x}}m!==b&&n(f,m,b)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!Gd(n))throw new Error(`Error trying to diff '${ge(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,l,f,r=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let m=0;m<this.length;m++)l=n[m],f=this._trackByFn(m,l),null!==r&&Object.is(r.trackById,f)?(o&&(r=this._verifyReinsertion(r,l,f,m)),Object.is(r.item,l)||this._addIdentityChange(r,l)):(r=this._mismatch(r,l,f,m),o=!0),r=r._next}else u=0,function(t,n){if(Array.isArray(t))for(let r=0;r<t.length;r++)n(t[r]);else{const r=t[Xi()]();let o;for(;!(o=r.next()).done;)n(o.value)}}(n,m=>{f=this._trackByFn(u,m),null!==r&&Object.is(r.trackById,f)?(o&&(r=this._verifyReinsertion(r,m,f,u)),Object.is(r.item,m)||this._addIdentityChange(r,m)):(r=this._mismatch(r,m,f,u),o=!0),r=r._next,u++}),this.length=u;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,o,u){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,l,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,l,u)):n=this._addAfter(new vC(r,o),l,u),n}_verifyReinsertion(n,r,o,u){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==l?n=this._reinsertAfter(l,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,l=n._nextRemoved;return null===u?this._removalsHead=l:u._nextRemoved=l,null===l?this._removalsTail=u:l._prevRemoved=u,this._insertAfter(n,r,o),this._addToMoves(n,o),n}_moveAfter(n,r,o){return this._unlink(n),this._insertAfter(n,r,o),this._addToMoves(n,o),n}_addAfter(n,r,o){return this._insertAfter(n,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,o){const u=null===r?this._itHead:r._next;return n._next=u,n._prev=r,null===u?this._itTail=n:u._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new $0),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,o=n._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $0),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class vC{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const r=n._prevDup,o=n._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class $0{constructor(){this.map=new Map}put(n){const r=n.trackById;let o=this.map.get(r);o||(o=new EC,this.map.set(r,o)),o.add(n)}get(n,r){const u=this.map.get(n);return u?u.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function H0(t,n,r){const o=t.previousIndex;if(null===o)return o;let u=0;return r&&o<r.length&&(u=r[o]),o+n+u}class G0{constructor(){}supports(n){return n instanceof Map||Xp(n)}create(){return new wC}}class wC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||Xp(n)))throw new Error(`Error trying to diff '${ge(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,u)=>{if(r&&r.key===u)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const l=this._getOrCreateRecordForKey(u,o);r=this._insertBeforeOrAppend(r,l)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const o=n._prev;return r._next=n,r._prev=o,n._prev=r,o&&(o._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,r);const l=u._prev,f=u._next;return l&&(l._next=f),f&&(f._prev=l),u._next=null,u._prev=null,u}const o=new bC(n);return this._records.set(n,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(o=>r(n[o],o))}}class bC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q0(){return new By([new j0])}let By=(()=>{class t{constructor(r){this.factories=r}static create(r,o){if(null!=o){const u=o.factories.slice();r=r.concat(u)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||q0()),deps:[[t,new Wa,new ta]]}}find(r){const o=this.factories.find(u=>u.supports(r));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(t){return t.name||typeof t}(r)}'`)}}return t.\u0275prov=Tn({token:t,providedIn:"root",factory:q0}),t})();function W0(){return new jy([new G0])}let jy=(()=>{class t{constructor(r){this.factories=r}static create(r,o){if(o){const u=o.factories.slice();r=r.concat(u)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||W0()),deps:[[t,new Wa,new ta]]}}find(r){const o=this.factories.find(u=>u.supports(r));if(o)return o;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return t.\u0275prov=Tn({token:t,providedIn:"root",factory:W0}),t})();function $y(t,n,r,o,u=!1){for(;null!==r;){const l=n[r.index];if(null!==l&&o.push(Mt(l)),ne(l))for(let m=10;m<l.length;m++){const b=l[m],x=b[1].firstChild;null!==x&&$y(b[1],b,x,o)}const f=r.type;if(8&f)$y(t,n,r.child,o);else if(32&f){const m=bd(r,n);let b;for(;b=m();)o.push(b)}else if(16&f){const m=Gu(n,r);if(Array.isArray(m))o.push(...m);else{const b=du(n[16]);$y(b[1],b,m,o,!0)}}r=u?r.projectionNext:r.next}return o}class Ag{constructor(n,r){this._lView=n,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,r=n[1];return $y(r,n,r.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(ne(n)){const r=n[8],o=r?r.indexOf(this):-1;o>-1&&(yl(n,o),Xo(r,o))}this._attachedToViewContainer=!1}Xf(this._lView[1],this._lView)}onDestroy(n){zh(this._lView[1],this._lView,null,n)}markForCheck(){kd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,r){li(!0);try{Fd(t,n,r)}finally{li(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Zl(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class CC extends Ag{constructor(n){super(n),this._view=n}detectChanges(){xm(this._view)}checkNoChanges(){!function(t){li(!0);try{xm(t)}finally{li(!1)}}(this._view)}get context(){return null}}const TC=function(t){return function(t,n,r){if(Q(t)&&!r){const o=Fr(t.index,n);return new Ag(o,o)}return 47&t.type?new Ag(n[16],n):null}(gt(),se(),16==(16&t))};let AC=(()=>{class t{}return t.__NG_ELEMENT_ID__=TC,t})();const RC=[new G0],NC=new By([new j0]),OC=new jy(RC),kC=function(){return Hy(gt(),se())};let Sg=(()=>{class t{}return t.__NG_ELEMENT_ID__=kC,t})();const FC=Sg,LC=class extends FC{constructor(n,r,o){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}createEmbeddedView(n){const r=this._declarationTContainer.tViews,o=Kl(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const l=this._declarationLView[19];return null!==l&&(o[19]=l.createEmbeddedView(r)),pu(r,o,n),new Ag(o)}};function Hy(t,n){return 4&t.type?new LC(n,t,Af(t,n)):null}class ih{}class z0{}const BC=function(){return Y0(gt(),se())};let Gy=(()=>{class t{}return t.__NG_ELEMENT_ID__=BC,t})();const $C=Gy,Z0=class extends $C{constructor(n,r,o){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=o}get element(){return Af(this._hostTNode,this._hostLView)}get injector(){return new ht(this._hostTNode,this._hostLView)}get parentInjector(){const n=Aa(this._hostTNode,this._hostLView);if(Zs(n)){const r=hi(n,this._hostLView),o=aa(n);return new ht(r[1].data[o+8],r)}return new ht(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=K0(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,r,o){const u=n.createEmbeddedView(r||{});return this.insert(u,o),u}createComponent(n,r,o,u,l){const f=o||this.parentInjector;if(!l&&null==n.ngModule&&f){const b=f.get(ih,null);b&&(l=b)}const m=n.create(f,u,void 0,l);return this.insert(m.hostView,r),m}insert(n,r){const o=n._lView,u=o[1];if(ne(o[3])){const U=this.indexOf(n);if(-1!==U)this.detach(U);else{const Y=o[3],te=new Z0(Y,Y[6],Y[3]);te.detach(te.indexOf(n))}}const l=this._adjustIndex(r),f=this._lContainer;!function(t,n,r,o){const u=10+o,l=r.length;o>0&&(r[u-1][4]=n),o<l-10?(n[4]=r[u],Bo(r,10+o,n)):(r.push(n),n[4]=null),n[3]=r;const f=n[17];null!==f&&r!==f&&function(t,n){const r=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===r?t[9]=[n]:r.push(n)}(f,n);const m=n[19];null!==m&&m.insertView(t),n[2]|=128}(u,o,f,l);const m=Sc(l,f),b=o[11],x=xh(b,f[7]);return null!==x&&function(t,n,r,o,u,l){o[0]=u,o[6]=n,Zl(t,o,r,1,u,l)}(u,f[6],b,o,x,m),n.attachToViewContainerRef(),Bo(Mv(f),l,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=K0(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),o=yl(this._lContainer,r);o&&(Xo(Mv(this._lContainer),r),Xf(o[1],o))}detach(n){const r=this._adjustIndex(n,-1),o=yl(this._lContainer,r);return o&&null!=Xo(Mv(this._lContainer),r)?new Ag(o):null}_adjustIndex(n,r=0){return null==n?this.length+r:n}};function K0(t){return t[8]}function Mv(t){return t[8]||(t[8]=[])}function Y0(t,n){let r;const o=n[t.index];if(ne(o))r=o;else{let u;if(8&t.type)u=Mt(o);else{const l=n[11];u=l.createComment("");const f=Rn(t,n);ya(l,xh(l,f),u,function(t,n){return Ke(t)?t.nextSibling(n):n.nextSibling}(l,f),!1)}n[t.index]=r=Qh(o,n,u,t),Pd(n,r)}return new Z0(r,t,n)}const Mf={};class mw extends Tf{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=Kt(n);return new _w(r,this.ngModule)}}function yw(t){const n=[];for(let r in t)t.hasOwnProperty(r)&&n.push({propName:t[r],templateName:r});return n}const VD=new xi("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>wd});class _w extends F0{constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=n.selectors.map(um).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return yw(this.componentDef.inputs)}get outputs(){return yw(this.componentDef.outputs)}create(n,r,o,u){const l=(u=u||this.ngModule)?function(t,n){return{get:(r,o,u)=>{const l=t.get(r,Mf,u);return l!==Mf||o===Mf?l:n.get(r,o,u)}}}(n,u.injector):n,f=l.get(Uy,$t),m=l.get(xv,null),b=f.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",U=o?function(t,n,r){if(Ke(t))return t.selectRootElement(n,r===Cr.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(b,o,this.componentDef.encapsulation):Th(f.createRenderer(null,this.componentDef),x,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(x)),Y=this.componentDef.onPush?576:528,te=function(t,n){return{components:[],scheduler:t||wd,clean:Op,playerHandler:n||null,flags:0}}(),_e=Wh(0,null,null,1,0,null,null,null,null,null),xe=Kl(null,_e,te,Y,null,null,f,b,m,l);let tt,ze;di(xe);try{const It=function(t,n,r,o,u,l){const f=r[1];r[20]=t;const b=Wu(f,20,2,"#host",null),x=b.mergedAttrs=n.hostAttrs;null!==x&&(Bc(b,x,!0),null!==t&&(Jr(u,t,x),null!==b.classes&&Ph(u,t,b.classes),null!==b.styles&&sm(u,t,b.styles)));const U=o.createRenderer(t,n),Y=Kl(r,qh(n),null,n.onPush?64:16,r[20],b,o,U,l||null,null);return f.firstCreatePass&&(At(wo(b,r),f,n.type),Dm(f,b),Dp(b,r.length,1)),Pd(r,Y),r[20]=Y}(U,this.componentDef,xe,f,b);if(U)if(o)Jr(b,U,["ng-version",Rv.full]);else{const{attrs:dt,classes:_n}=function(t){const n=[],r=[];let o=1,u=2;for(;o<t.length;){let l=t[o];if("string"==typeof l)2===u?""!==l&&n.push(l,t[++o]):8===u&&r.push(l);else{if(!ka(u))break;u=l}o++}return{attrs:n,classes:r}}(this.componentDef.selectors[0]);dt&&Jr(b,U,dt),_n&&_n.length>0&&Ph(b,U,_n.join(" "))}if(ze=Fi(_e,20),void 0!==r){const dt=ze.projection=[];for(let _n=0;_n<this.ngContentSelectors.length;_n++){const Qn=r[_n];dt.push(null!=Qn?Array.from(Qn):null)}}tt=function(t,n,r,o,u){const l=r[1],f=function(t,n,r){const o=gt();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Tp(t,o,n,Yl(t,n,1,null),r));const u=q(n,t,o.directiveStart,o);is(u,n);const l=Rn(o,n);return l&&is(l,n),u}(l,r,n);if(o.components.push(f),t[8]=f,u&&u.forEach(b=>b(f,n)),n.contentQueries){const b=gt();n.contentQueries(1,f,b.directiveStart)}const m=gt();return!l.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(zs(m.index),Kh(r[1],m,0,m.directiveStart,m.directiveEnd,n),Yh(n,f)),f}(It,this.componentDef,xe,te,[gu]),pu(_e,xe,null)}finally{Ns()}return new jD(this.componentType,tt,Af(ze,xe),xe,ze)}}class jD extends class{}{constructor(n,r,o,u,l){super(),this.location=o,this._rootLView=u,this._tNode=l,this.instance=r,this.hostView=this.changeDetectorRef=new CC(u),this.componentType=n}get injector(){return new ht(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const Nf=new Map;class GD extends ih{constructor(n,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new mw(this);const o=dr(n),u=n[Pn]||null;u&&wv(u),this._bootstrapComponents=bi(o.bootstrap),this._r3Injector=Nm(n,r,[{provide:ih,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver}],ge(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,r=Ii.THROW_IF_NOT_FOUND,o=lt.Default){return n===Ii||n===ih||n===wl?this:this._r3Injector.get(n,r,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Gv extends z0{constructor(n){super(),this.moduleType=n,null!==dr(n)&&function(t){const n=new Set;!function r(o){const u=dr(o,!0),l=u.id;null!==l&&(function(t,n,r){if(n&&n!==r)throw new Error(`Duplicate module registered for ${t} - ${ge(n)} vs ${ge(n.name)}`)}(l,Nf.get(l),o),Nf.set(l,o));const f=bi(u.imports);for(const m of f)n.has(m)||(n.add(m),r(m))}(t)}(n)}create(n){return new GD(this.moduleType,n)}}function bw(t,n,r,o,u,l,f){const m=n+r;return ec(t,m,u,l)?function(t,n,r){return t[n]=r}(t,m+2,f?o.call(f,u,l):o(u,l)):function(t,n){const r=t[n];return r===Yn?void 0:r}(t,m+2)}function Tw(t,n){const r=Je();let o;const u=t+20;r.firstCreatePass?(o=function(t,n){if(n)for(let r=n.length-1;r>=0;r--){const o=n[r];if(t===o.name)return o}throw new $e("302",`The pipe '${t}' could not be found!`)}(n,r.pipeRegistry),r.data[u]=o,o.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(u,o.onDestroy)):o=r.data[u];const l=o.factory||(o.factory=_i(o.type)),f=er(Jd);try{const m=Os(!1),b=l();return Os(m),function(t,n,r,o){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),n[r]=o}(r,se(),u,b),b}finally{er(f)}}function Aw(t,n,r,o){const u=t+20,l=se(),f=function(t,n){return t[n]}(l,u);return function(t,n){Ya.isWrapped(n)&&(n=Ya.unwrap(n),t[br()]=Yn);return n}(l,function(t,n){return t[1].data[n].pure}(l,u)?bw(l,function(){const t=un.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),n,f.transform,r,o,f):f.transform(r,o))}function qv(t){return n=>{setTimeout(t,void 0,n)}}const Rl=class extends D.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,r,o){var u,l,f;let m=n,b=r||(()=>null),x=o;if(n&&"object"==typeof n){const Y=n;m=null===(u=Y.next)||void 0===u?void 0:u.bind(Y),b=null===(l=Y.error)||void 0===l?void 0:l.bind(Y),x=null===(f=Y.complete)||void 0===f?void 0:f.bind(Y)}this.__isAsync&&(b=qv(b),m&&(m=qv(m)),x&&(x=qv(x)));const U=super.subscribe({next:m,error:b,complete:x});return n instanceof O.w&&n.add(U),U}};function aT(){return this._results[Xi()]()}class Ky{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=Xi(),o=Ky.prototype;o[r]||(o[r]=aT)}get changes(){return this._changes||(this._changes=new Rl)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){const o=this;o.dirty=!1;const u=ro(n);(this._changesDetected=!function(t,n,r){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let u=t[o],l=n[o];if(r&&(u=r(u),l=r(l)),l!==u)return!1}return!0}(o._results,u,r))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Wv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class zv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const o=null!==n.contentQueries?n.contentQueries[0]:r.length,u=[];for(let l=0;l<o;l++){const f=r.getByIndex(l);u.push(this.queries[f.indexInDeclarationView].clone())}return new zv(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==kw(n,r).matches&&this.queries[r].setDirty()}}class Sw{constructor(n,r,o=null){this.predicate=n,this.flags=r,this.read=o}}class Zv{constructor(n=[]){this.queries=n}elementStart(n,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let o=0;o<this.length;o++){const u=null!==r?r.length:0,l=this.getByIndex(o).embeddedTView(n,u);l&&(l.indexInDeclarationView=o,null!==r?r.push(l):r=[l])}return null!==r?new Zv(r):null}template(n,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Kv{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new Kv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let u=0;u<o.length;u++){const l=o[u];this.matchTNodeWithReadOption(n,r,cT(r,l)),this.matchTNodeWithReadOption(n,r,L(r,n,l,!1,!1))}else o===Sg?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,L(r,n,o,!1,!1))}matchTNodeWithReadOption(n,r,o){if(null!==o){const u=this.metadata.read;if(null!==u)if(u===xl||u===Gy||u===Sg&&4&r.type)this.addMatch(r.index,-2);else{const l=L(r,n,u,!1,!1);null!==l&&this.addMatch(r.index,l)}else this.addMatch(r.index,o)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function cT(t,n){const r=t.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===n)return r[o+1];return null}function hT(t,n,r,o){return-1===r?function(t,n){return 11&t.type?Af(t,n):4&t.type?Hy(t,n):null}(n,t):-2===r?function(t,n,r){return r===xl?Af(n,t):r===Sg?Hy(n,t):r===Gy?Y0(n,t):void 0}(t,n,o):q(t,t[1],r,n)}function xw(t,n,r,o){const u=n[19].queries[o];if(null===u.matches){const l=t.data,f=r.matches,m=[];for(let b=0;b<f.length;b+=2){const x=f[b];m.push(x<0?null:hT(n,l[x],f[b+1],r.metadata.read))}u.matches=m}return u.matches}function Yv(t,n,r,o){const u=t.queries.getByIndex(r),l=u.matches;if(null!==l){const f=xw(t,n,u,r);for(let m=0;m<l.length;m+=2){const b=l[m];if(b>0)o.push(f[m/2]);else{const x=l[m+1],U=n[-b];for(let Y=10;Y<U.length;Y++){const te=U[Y];te[17]===te[3]&&Yv(te[1],te,x,o)}if(null!==U[9]){const Y=U[9];for(let te=0;te<Y.length;te++){const _e=Y[te];Yv(_e[1],_e,x,o)}}}}}return o}function Rw(t){const n=se(),r=Je(),o=mt();bn(o+1);const u=kw(r,o);if(t.dirty&&Li(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const l=u.crossesNgTemplate?Yv(r,n,o,[]):xw(r,n,u,o);t.reset(l,U0),t.notifyOnChanges()}return!0}return!1}function Mw(t,n,r,o){const u=Je();if(u.firstCreatePass){const l=gt();(function(t,n,r){null===t.queries&&(t.queries=new Zv),t.queries.track(new Kv(n,r))})(u,new Sw(n,r,o),l.index),function(t,n){const r=t.contentQueries||(t.contentQueries=[]);n!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,n)}(u,t),2==(2&r)&&(u.staticContentQueries=!0)}!function(t,n,r){const o=new Ky(4==(4&r));zh(t,n,o,o.destroy),null===n[19]&&(n[19]=new zv),n[19].queries.push(new Wv(o))}(u,se(),r)}function Nw(){return t=se(),n=mt(),t[19].queries[n].queryList;var t,n}function kw(t,n){return t.queries.getByIndex(n)}const nE=new xi("Application Initializer");let Pf=(()=>{class t{constructor(r){this.appInits=r,this.resolve=Vy,this.reject=Vy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,u)=>{this.resolve=o,this.reject=u})}runInitializers(){if(this.initialized)return;const r=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const l=this.appInits[u]();if(fg(l))r.push(l);else if(pg(l)){const f=new Promise((m,b)=>{l.subscribe({complete:m,error:b})});r.push(f)}}Promise.all(r).then(()=>{o()}).catch(u=>{this.reject(u)}),0===r.length&&o(),this.initialized=!0}}return t.\u0275fac=function(r){return new(r||t)(Hi(nE,8))},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();const Xw=new xi("AppId"),GT={provide:Xw,useFactory:function(){return`${rE()}${rE()}${rE()}`},deps:[]};function rE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eb=new xi("Platform Initializer"),tb=new xi("Platform ID"),nb=new xi("appBootstrapListener");let rb=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();const Jy=new xi("LocaleId"),ib=new xi("DefaultCurrencyCode");class WT{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}const iE=function(t){return new Gv(t)},zT=iE,ZT=function(t){return Promise.resolve(iE(t))},sb=function(t){const n=iE(t),o=bi(dr(t).declarations).reduce((u,l)=>{const f=Kt(l);return f&&u.push(new _w(f)),u},[]);return new WT(n,o)},KT=sb,YT=function(t){return Promise.resolve(sb(t))};let Bg=(()=>{class t{constructor(){this.compileModuleSync=zT,this.compileModuleAsync=ZT,this.compileModuleAndAllComponentsSync=KT,this.compileModuleAndAllComponentsAsync=YT}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();const XT=(()=>Promise.resolve(0))();function sE(t){"undefined"==typeof Zone?XT.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nu{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rl(!1),this.onMicrotaskEmpty=new Rl(!1),this.onStable=new Rl(!1),this.onError=new Rl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!o&&r,u.shouldCoalesceRunChangeDetection=o,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let t=pe.requestAnimationFrame,n=pe.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(pe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,aE(t),t.isCheckStableRunning=!0,oE(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),aE(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,u,l,f,m)=>{try{return ob(t),r.invokeTask(u,l,f,m)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||t.shouldCoalesceRunChangeDetection)&&n(),ab(t)}},onInvoke:(r,o,u,l,f,m,b)=>{try{return ob(t),r.invoke(u,l,f,m,b)}finally{t.shouldCoalesceRunChangeDetection&&n(),ab(t)}},onHasTask:(r,o,u,l)=>{r.hasTask(u,l),o===u&&("microTask"==l.change?(t._hasPendingMicrotasks=l.microTask,aE(t),oE(t)):"macroTask"==l.change&&(t.hasPendingMacrotasks=l.macroTask))},onHandleError:(r,o,u,l)=>(r.handleError(u,l),t.runOutsideAngular(()=>t.onError.emit(l)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,r,o){return this._inner.run(n,r,o)}runTask(n,r,o,u){const l=this._inner,f=l.scheduleEventTask("NgZoneEvent: "+u,n,tA,Vy,Vy);try{return l.runTask(f,r,o)}finally{l.cancelTask(f)}}runGuarded(n,r,o){return this._inner.runGuarded(n,r,o)}runOutsideAngular(n){return this._outer.run(n)}}const tA={};function oE(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function aE(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ob(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ab(t){t._nesting--,oE(t)}class iA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rl,this.onMicrotaskEmpty=new Rl,this.onStable=new Rl,this.onError=new Rl}run(n,r,o){return n.apply(r,o)}runGuarded(n,r,o){return n.apply(r,o)}runOutsideAngular(n){return n()}runTask(n,r,o,u){return n.apply(r,o)}}let ub=(()=>{class t{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nu.assertNotInAngularZone(),sE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sE(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,u){let l=-1;o&&o>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(f=>f.timeoutId!==l),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:l,updateCb:u})}whenStable(r,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,o,u){return[]}}return t.\u0275fac=function(r){return new(r||t)(Hi(nu))},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})(),lb=(()=>{class t{constructor(){this._applications=new Map,uE.addToWindow(this)}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return uE.findTestabilityInTree(this,r,o)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();class sA{addToWindow(n){}findTestabilityInTree(n,r,o){return null}}function oA(t){uE=t}let uE=new sA,cb=!0,db=!1;function lE(){return db=!0,cb}function aA(){if(db)throw new Error("Cannot enable prod mode after platform setup.");cb=!1}let tl;const hb=new xi("AllowMultipleToken");class pA{constructor(n,r){this.name=n,this.token=r}}function fb(t,n,r=[]){const o=`Platform: ${n}`,u=new xi(o);return(l=[])=>{let f=pb();if(!f||f.injector.get(hb,!1))if(t)t(r.concat(l).concat({provide:u,useValue:!0}));else{const m=r.concat(l).concat({provide:u,useValue:!0},{provide:Vd,useValue:"platform"});!function(t){if(tl&&!tl.destroyed&&!tl.injector.get(hb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");tl=t.get(gb);const n=t.get(eb,null);n&&n.forEach(r=>r())}(Ii.create({providers:m,name:o}))}return function(t){const n=pb();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(u)}}function pb(){return tl&&!tl.destroyed?tl:null}let gb=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){const m=function(t,n){let r;return r="noop"===t?new iA:("zone.js"===t?void 0:t)||new nu({enableLongStackTrace:lE(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),r}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),b=[{provide:nu,useValue:m}];return m.run(()=>{const x=Ii.create({providers:b,parent:this.injector,name:r.moduleType.name}),U=r.create(x),Y=U.injector.get(nt,null);if(!Y)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return m.runOutsideAngular(()=>{const te=m.onError.subscribe({next:_e=>{Y.handleError(_e)}});U.onDestroy(()=>{cE(this._modules,U),te.unsubscribe()})}),function(t,n,r){try{const o=r();return fg(o)?o.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(Y,m,()=>{const te=U.injector.get(Pf);return te.runInitializers(),te.donePromise.then(()=>(wv(U.injector.get(Jy,Oy)||Oy),this._moduleDoBootstrap(U),U))})})}bootstrapModule(r,o=[]){const u=mb({},o);return function(t,n,r){const o=new Gv(r);return Promise.resolve(o)}(0,0,r).then(l=>this.bootstrapModuleFactory(l,u))}_moduleDoBootstrap(r){const o=r.injector.get(jg);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(u=>o.bootstrap(u));else{if(!r.instance.ngDoBootstrap)throw new Error(`The module ${ge(r.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);r.instance.ngDoBootstrap(o)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(r){return new(r||t)(Hi(Ii))},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();function mb(t,n){return Array.isArray(n)?n.reduce(mb,t):Object.assign(Object.assign({},t),n)}let jg=(()=>{class t{constructor(r,o,u,l,f){this._zone=r,this._injector=o,this._exceptionHandler=u,this._componentFactoryResolver=l,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new g.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),b=new g.y(x=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{nu.assertNotInAngularZone(),sE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const Y=this._zone.onUnstable.subscribe(()=>{nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{U.unsubscribe(),Y.unsubscribe()}});this.isStable=(0,Se.T)(m,b.pipe(t=>(0,ve.x)()(function(t,n){return function(o){let u;u="function"==typeof t?t:function(){return t};const l=Object.create(o,be.N);return l.source=o,l.subjectFactory=u,l}}(ae)(t))))}bootstrap(r,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=r instanceof F0?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(u.componentType);const l=function(t){return t.isBoundToModule}(u)?void 0:this._injector.get(ih),m=u.create(Ii.NULL,[],o||u.selector,l),b=m.location.nativeElement,x=m.injector.get(ub,null),U=x&&m.injector.get(lb);return x&&U&&U.registerApplication(b,x),m.onDestroy(()=>{this.detachView(m.hostView),cE(this.components,m),U&&U.unregisterApplication(b)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;cE(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(nb,[]).concat(this._bootstrapListeners).forEach(u=>u(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(r){return new(r||t)(Hi(nu),Hi(Ii),Hi(nt),Hi(Tf),Hi(Pf))},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();function cE(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}class EA{}class bA{}const IA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let CA=(()=>{class t{constructor(r,o){this._compiler=r,this._config=o||IA}load(r){return this.loadAndCompile(r)}loadAndCompile(r){let[o,u]=r.split("#");return void 0===u&&(u="default"),B(8255)(o).then(l=>l[u]).then(l=>Eb(l,o,u)).then(l=>this._compiler.compileModuleAsync(l))}loadFactory(r){let[o,u]=r.split("#"),l="NgFactory";return void 0===u&&(u="default",l=""),B(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(f=>f[u+l]).then(f=>Eb(f,o,u))}}return t.\u0275fac=function(r){return new(r||t)(Hi(Bg),Hi(bA,8))},t.\u0275prov=Tn({token:t,factory:t.\u0275fac}),t})();function Eb(t,n,r){if(!t)throw new Error(`Cannot find '${r}' in '${n}'`);return t}const NA=function(t){return null},PA=fb(null,"core",[{provide:tb,useValue:"unknown"},{provide:gb,deps:[Ii]},{provide:lb,deps:[]},{provide:rb,deps:[]}]),UA=[{provide:jg,useClass:jg,deps:[nu,Ii,nt,Tf,Pf]},{provide:VD,deps:[nu],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(r){n.push(r)}}},{provide:Pf,useClass:Pf,deps:[[new ta,nE]]},{provide:Bg,useClass:Bg,deps:[]},GT,{provide:By,useFactory:function(){return NC},deps:[]},{provide:jy,useFactory:function(){return OC},deps:[]},{provide:Jy,useFactory:function(t){return wv(t=t||"undefined"!=typeof $localize&&$localize.locale||Oy),t},deps:[[new xu(Jy),new ta,new Wa]]},{provide:ib,useValue:"USD"}];let jA=(()=>{class t{constructor(r){}}return t.\u0275fac=function(r){return new(r||t)(Hi(jg))},t.\u0275mod=Nr({type:t}),t.\u0275inj=pr({providers:UA}),t})()},2965:(Pt,Ye,B)=>{"use strict";B.d(Ye,{nm:()=>Hn});var D=B(6643);B(3018),B(2329);var Qe=B(8239),re=B(5452),ut=B(6034),Gt=B(3854),vt=B(5601);const Ze=new Map,Ve={activated:!1,tokenObservers:[]},Re={initialized:!1,enabled:!1};function fe(Oe){return Ze.get(Oe)||Ve}function Te(Oe,We){Ze.set(Oe,We)}function Be(){return Re}class jt{constructor(We,Xe,Et,Ct,Ot){if(this.operation=We,this.retryPolicy=Xe,this.getWaitDuration=Et,this.lowerBound=Ct,this.upperBound=Ot,this.pending=null,this.nextErrorWaitInterval=Ct,Ct>Ot)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(We){var Xe=this;return(0,Qe.Z)(function*(){Xe.stop();try{Xe.pending=new Gt.BH,yield(Oe=Xe.getNextRun(We),new Promise(We=>{setTimeout(We,Oe)})),Xe.pending.resolve(),yield Xe.pending.promise,Xe.pending=new Gt.BH,yield Xe.operation(),Xe.pending.resolve(),yield Xe.pending.promise,Xe.process(!0).catch(()=>{})}catch(Et){Xe.retryPolicy(Et)?Xe.process(!1).catch(()=>{}):Xe.stop()}var Oe})()}getNextRun(We){if(We)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Xe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Xe}}}const cn=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function Tr(Oe){if(!fe(Oe).activated)throw cn.create("use-before-activation",{appName:Oe.name})}function Lt(Oe,We){return tn.apply(this,arguments)}function tn(){return(tn=(0,Qe.Z)(function*({url:Oe,body:We},Xe){const Et={"Content-Type":"application/json"},Ct=Xe.getImmediate({optional:!0});Ct&&(Et["X-Firebase-Client"]=Ct.getPlatformInfoString());const Ot={method:"POST",body:JSON.stringify(We),headers:Et};let Gn,pn;try{Gn=yield fetch(Oe,Ot)}catch(ne){throw cn.create("fetch-network-error",{originalErrorMessage:ne.message})}if(200!==Gn.status)throw cn.create("fetch-status-error",{httpStatus:Gn.status});try{pn=yield Gn.json()}catch(ne){throw cn.create("fetch-parse-error",{originalErrorMessage:ne.message})}const gn=pn.ttl.match(/^([\d.]+)(s)$/);if(!gn||!gn[2]||isNaN(Number(gn[1])))throw cn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${pn.ttl}`});const kr=1e3*Number(gn[1]),_r=Date.now();return{token:pn.attestationToken,expireTimeMillis:_r+kr,issuedAtTimeMillis:_r}})).apply(this,arguments)}function Wn(Oe,We){const{projectId:Xe,appId:Et,apiKey:Ct}=Oe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${Xe}/apps/${Et}:exchangeDebugToken?key=${Ct}`,body:{debug_token:We}}}const pr="firebase-app-check-store";let mn=null;function Nn(){return mn||(mn=new Promise((Oe,We)=>{try{const Xe=indexedDB.open("firebase-app-check-database",1);Xe.onsuccess=Et=>{Oe(Et.target.result)},Xe.onerror=Et=>{var Ct;We(cn.create("storage-open",{originalErrorMessage:null===(Ct=Et.target.error)||void 0===Ct?void 0:Ct.message}))},Xe.onupgradeneeded=Et=>{const Ct=Et.target.result;switch(Et.oldVersion){case 0:Ct.createObjectStore(pr,{keyPath:"compositeKey"})}}}catch(Xe){We(cn.create("storage-open",{originalErrorMessage:Xe.message}))}}),mn)}function qt(){return(qt=(0,Qe.Z)(function*(Oe,We){const Et=(yield Nn()).transaction(pr,"readwrite"),Ot=Et.objectStore(pr).put({compositeKey:Oe,value:We});return new Promise((Gn,pn)=>{Ot.onsuccess=gn=>{Gn()},Et.onerror=gn=>{var kr;pn(cn.create("storage-set",{originalErrorMessage:null===(kr=gn.target.error)||void 0===kr?void 0:kr.message}))}})})).apply(this,arguments)}const er=new vt.Yd("@firebase/app-check");function kt(Oe,We){return(0,Gt.hl)()?function(Oe,We){return function(Oe,We){return qt.apply(this,arguments)}(function(Oe){return`${Oe.options.appId}-${Oe.name}`}(Oe),We)}(Oe,We).catch(Xe=>{er.warn(`Failed to write token to IndexedDB. Error: ${Xe}`)}):Promise.resolve()}function yi(){return Be().enabled}function Cr(){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,Qe.Z)(function*(){const Oe=Be();if(Oe.enabled&&Oe.token)return Oe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const we={error:"UNKNOWN_ERROR"};function Ee(Oe){return Gt.US.encodeString(JSON.stringify(Oe),!1)}function pe(Oe){return ot.apply(this,arguments)}function ot(){return(ot=(0,Qe.Z)(function*(Oe,We=!1){const Xe=Oe.app;Tr(Xe);const Et=fe(Xe);let Ot,Gn,Ct=Et.token;if(!Ct){const pn=yield Et.cachedTokenPromise;pn&&Jn(pn)&&(Ct=pn,Te(Xe,Object.assign(Object.assign({},Et),{token:Ct})),yn(Xe,{token:Ct.token}))}if(!We&&Ct&&Jn(Ct))return{token:Ct.token};if(yi()){const pn=yield Lt(Wn(Xe,yield Cr()),Oe.platformLoggerProvider);return yield kt(Xe,pn),Te(Xe,Object.assign(Object.assign({},Et),{token:pn})),{token:pn.token}}try{Ct=yield Et.provider.getToken()}catch(pn){er.error(pn),Ot=pn}return Ct?(Gn={token:Ct.token},Te(Xe,Object.assign(Object.assign({},Et),{token:Ct})),yield kt(Xe,Ct)):Gn=an(Ot),yn(Xe,Gn),Gn})).apply(this,arguments)}function Tt(Oe,We){const Xe=fe(Oe),Et=Xe.tokenObservers.filter(Ct=>Ct.next!==We);0===Et.length&&Xe.tokenRefresher&&Xe.tokenRefresher.isRunning()&&Xe.tokenRefresher.stop(),Te(Oe,Object.assign(Object.assign({},Xe),{tokenObservers:Et}))}function yn(Oe,We){const Xe=fe(Oe).tokenObservers;for(const Et of Xe)try{"EXTERNAL"===Et.type&&null!=We.error?Et.error(We.error):Et.next(We)}catch(Ct){}}function Jn(Oe){return Oe.expireTimeMillis-Date.now()>0}function an(Oe){return{token:Ee(we),error:Oe}}class Vr{constructor(We,Xe){this.app=We,this.platformLoggerProvider=Xe}_delete(){const{tokenObservers:We}=fe(this.app);for(const Xe of We)Tt(this.app,Xe.next);return Promise.resolve()}}const On="app-check-internal";(0,re._registerComponent)(new ut.wA("app-check",Oe=>function(Oe,We){return new Vr(Oe,We)}(Oe.getProvider("app").getImmediate(),Oe.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Oe,We,Xe)=>{Oe.getProvider(On).initialize()})),(0,re._registerComponent)(new ut.wA(On,Oe=>function(Oe){return{getToken:We=>pe(Oe,We),addTokenListener:We=>function(Oe,We,Xe,Et){const{app:Ct}=Oe,Ot=fe(Ct),Gn={next:Xe,error:Et,type:We},pn=Object.assign(Object.assign({},Ot),{tokenObservers:[...Ot.tokenObservers,Gn]});if(!pn.tokenRefresher){const gn=function(Oe){const{app:We}=Oe;return new jt((0,Qe.Z)(function*(){let Et;if(Et=fe(We).token?yield pe(Oe,!0):yield pe(Oe),Et.error)throw Et.error}),()=>!0,()=>{const Xe=fe(We);if(Xe.token){let Et=Xe.token.issuedAtTimeMillis+.5*(Xe.token.expireTimeMillis-Xe.token.issuedAtTimeMillis)+3e5;return Et=Math.min(Et,Xe.token.expireTimeMillis-3e5),Math.max(0,Et-Date.now())}return 0},3e4,96e4)}(Oe);pn.tokenRefresher=gn}if(!pn.tokenRefresher.isRunning()&&Ot.isTokenAutoRefreshEnabled&&pn.tokenRefresher.start(),Ot.token&&Jn(Ot.token)){const gn=Ot.token;Promise.resolve().then(()=>Xe({token:gn.token})).catch(()=>{})}else null==Ot.token&&Ot.cachedTokenPromise.then(gn=>{gn&&Jn(gn)&&Xe({token:gn.token})}).catch(()=>{});Te(Ct,pn)}(Oe,"INTERNAL",We),removeTokenListener:We=>Tt(Oe.app,We)}}(Oe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)("@firebase/app-check","0.4.2");class Hn{constructor(){return(0,D.vb)("app-check")}}"undefined"!=typeof window&&window},3820:(Pt,Ye,B)=>{"use strict";B.d(Ye,{zQ:()=>Re,ww:()=>fe,rT:()=>Gt,f7:()=>Ze,L6:()=>re,_Q:()=>ut,lh:()=>vt,Qv:()=>Qe,nw:()=>Ve});var D=B(3018),O=B(9765),g=B(5917),Se=B(7574),be=B(4402),de=B(6682),Fe=B(3190);function ve(Te,Be){return Be?(0,Fe.w)(()=>Te,Be):(0,Fe.w)(()=>Te)}var ae=B(309),J=B(8002),X=B(2066),he=B(8049),ge=B(3101),ke=B(5435),He=B(6643),je=B(8939),me=B(8583),Le=B(2965),qe=B(7841);const Qe=new D.OlP("angularfire2.auth.use-emulator"),re=new D.OlP("angularfire2.auth.settings"),ut=new D.OlP("angularfire2.auth.tenant-id"),Gt=new D.OlP("angularfire2.auth.langugage-code"),vt=new D.OlP("angularfire2.auth.use-device-language"),Ze=new D.OlP("angularfire.auth.persistence"),Ve=(Te,Be,Ge,Rt,Xt,$n,jt,xn)=>(0,je.cc)(`${Te.name}.auth`,"AngularFireAuth",Te.name,()=>{const Zn=Be.runOutsideAngular(()=>Te.auth());if(Ge&&Zn.useEmulator(...Ge),Rt&&(Zn.tenantId=Rt),Zn.languageCode=Xt,$n&&Zn.useDeviceLanguage(),jt)for(const[cn,In]of Object.entries(jt))Zn.settings[cn]=In;return xn&&Zn.setPersistence(xn),Zn},[Ge,Rt,Xt,$n,jt,xn]);let Re=(()=>{class Te{constructor(Ge,Rt,Xt,$n,jt,xn,Zn,cn,In,Tr,dn,Lt){const tn=new O.xQ,Mn=(0,g.of)(void 0).pipe((0,ae.QV)(jt.outsideAngular),(0,Fe.w)(()=>$n.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4671)))),(0,J.U)(()=>(0,je.on)(Ge,$n,Rt)),(0,J.U)(Wn=>Ve(Wn,$n,xn,cn,In,Tr,Zn,dn)),(0,X.d)({bufferSize:1,refCount:!1}));if((0,me.PM)(Xt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,g.of)(null);else{Mn.pipe((0,he.P)()).subscribe();const Tn=Mn.pipe((0,Fe.w)(hn=>hn.getRedirectResult().then(mn=>mn,()=>null)),He.iC,(0,X.d)({bufferSize:1,refCount:!1})),Rr=Mn.pipe((0,Fe.w)(hn=>new Se.y(mn=>({unsubscribe:$n.runOutsideAngular(()=>hn.onAuthStateChanged(Nn=>mn.next(Nn),Nn=>mn.error(Nn),()=>mn.complete()))})))),pr=Mn.pipe((0,Fe.w)(hn=>new Se.y(mn=>({unsubscribe:$n.runOutsideAngular(()=>hn.onIdTokenChanged(Nn=>mn.next(Nn),Nn=>mn.error(Nn),()=>mn.complete()))}))));this.authState=Tn.pipe(ve(Rr),(0,ge.R)(jt.outsideAngular),(0,ae.QV)(jt.insideAngular)),this.user=Tn.pipe(ve(pr),(0,ge.R)(jt.outsideAngular),(0,ae.QV)(jt.insideAngular)),this.idToken=this.user.pipe((0,Fe.w)(hn=>hn?(0,be.D)(hn.getIdToken()):(0,g.of)(null))),this.idTokenResult=this.user.pipe((0,Fe.w)(hn=>hn?(0,be.D)(hn.getIdTokenResult()):(0,g.of)(null))),this.credential=(0,de.T)(Tn,tn,this.authState.pipe((0,ke.h)(hn=>!hn))).pipe((0,J.U)(hn=>(null==hn?void 0:hn.user)?hn:null),(0,ge.R)(jt.outsideAngular),(0,ae.QV)(jt.insideAngular))}return(0,je.pX)(this,Mn,$n,{spy:{apply:(Wn,Tn,Rr)=>{(Wn.startsWith("signIn")||Wn.startsWith("createUser"))&&Rr.then(pr=>tn.next(pr))}}})}}return Te.\u0275fac=function(Ge){return new(Ge||Te)(D.LFG(je.Dh),D.LFG(je.xv,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(He.HU),D.LFG(Qe,8),D.LFG(re,8),D.LFG(ut,8),D.LFG(Gt,8),D.LFG(vt,8),D.LFG(Ze,8),D.LFG(Le.nm,8))},Te.\u0275prov=D.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"any"}),Te})(),fe=(()=>{class Te{constructor(){qe.Z.registerVersion("angularfire",He.q4.full,"auth-compat")}}return Te.\u0275fac=function(Ge){return new(Ge||Te)},Te.\u0275mod=D.oAB({type:Te}),Te.\u0275inj=D.cJS({providers:[Re]}),Te})()},166:(Pt,Ye,B)=>{"use strict";B.d(Ye,{ST:()=>Ny,yb:()=>yv});var D=B(3018),O=B(3637),g=B(7574),Se=B(4402),be=B(5917),de=B(6643),Fe=B(7393);function ve(){return s=>s.lift(new ae)}class ae{call(e,i){return i.subscribe(new J(e))}}class J extends Fe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let i;this.hasPrev?i=[this.prev,e]:this.hasPrev=!0,this.prev=e,i&&this.destination.next(i)}}class he{constructor(e,i){this.compare=e,this.keySelector=i}call(e,i){return i.subscribe(new ge(e,this.compare,this.keySelector))}}class ge extends Fe.L{constructor(e,i,a){super(e),this.keySelector=a,this.hasKey=!1,"function"==typeof i&&(this.compare=i)}compare(e,i){return e===i}_next(e){let i;try{const{keySelector:c}=this;i=c?c(e):e}catch(c){return this.destination.error(c)}let a=!1;if(this.hasKey)try{const{compare:c}=this;a=c(this.key,i)}catch(c){return this.destination.error(c)}else this.hasKey=!0;a||(this.key=i,this.destination.next(e))}}var fe,ke=B(9761),He=B(8002),je=B(2145),me=B(5435),Le=B(8939),qe=B(8583),Qe=(B(4671),B(4486)),re=B(8239),ut=B(5452),Gt=B(6034),vt=B(5601),Ze=B(3854),Ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Re={},Te=Te||{},Be=Ve||self;function Ge(){}function Rt(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function Xt(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var jt="closure_uid_"+(1e9*Math.random()>>>0),xn=0;function Zn(s,e,i){return s.call.apply(s.bind,arguments)}function cn(s,e,i){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,a),s.apply(e,c)}}return function(){return s.apply(e,arguments)}}function In(s,e,i){return(In=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zn:cn).apply(null,arguments)}function Tr(s,e){var i=Array.prototype.slice.call(arguments,1);return function(){var a=i.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function dn(s,e){function i(){}i.prototype=e.prototype,s.Z=e.prototype,s.prototype=new i,s.prototype.constructor=s,s.Vb=function(a,c,p){for(var E=Array(arguments.length-2),M=2;M<arguments.length;M++)E[M-2]=arguments[M];return e.prototype[c].apply(a,E)}}function Lt(){this.s=this.s,this.o=this.o}var Mn={};Lt.prototype.s=!1,Lt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,jt)&&s[jt]||(s[jt]=++xn)}(this);delete Mn[s]}},Lt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wn=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let i=0;i<s.length;i++)if(i in s&&s[i]===e)return i;return-1},Tn=Array.prototype.forEach?function(s,e,i){Array.prototype.forEach.call(s,e,i)}:function(s,e,i){const a=s.length,c="string"==typeof s?s.split(""):s;for(let p=0;p<a;p++)p in c&&e.call(i,c[p],p,s)};function pr(s){return Array.prototype.concat.apply([],arguments)}function hn(s){const e=s.length;if(0<e){const i=Array(e);for(let a=0;a<e;a++)i[a]=s[a];return i}return[]}function mn(s){return/^[\s\xa0]*$/.test(s)}var vn,Nn=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function Cn(s,e){return-1!=s.indexOf(e)}function Xn(s,e){return s<e?-1:s>e?1:0}e:{var Mr=Be.navigator;if(Mr){var Oi=Mr.userAgent;if(Oi){vn=Oi;break e}}vn=""}function qt(s,e,i){for(const a in s)e.call(i,s[a],a,s)}function lt(s){const e={};for(const i in s)e[i]=s[i];return e}var Vn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zn(s,e){let i,a;for(let c=1;c<arguments.length;c++){for(i in a=arguments[c],a)s[i]=a[i];for(let p=0;p<Vn.length;p++)i=Vn[p],Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}}function er(s){return er[" "](s),s}er[" "]=Ge;var en,s,Ft=Cn(vn,"Opera"),kt=Cn(vn,"Trident")||Cn(vn,"MSIE"),lr=Cn(vn,"Edge"),mi=lr||kt,yi=Cn(vn,"Gecko")&&!(Cn(vn.toLowerCase(),"webkit")&&!Cn(vn,"Edge"))&&!(Cn(vn,"Trident")||Cn(vn,"MSIE"))&&!Cn(vn,"Edge"),Cr=Cn(vn.toLowerCase(),"webkit")&&!Cn(vn,"Edge");function Hr(){var s=Be.document;return s?s.documentMode:void 0}e:{var we="",Ee=(s=vn,yi?/rv:([^\);]+)(\)|;)/.exec(s):lr?/Edge\/([\d\.]+)/.exec(s):kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Cr?/WebKit\/(\S+)/.exec(s):Ft?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Ee&&(we=Ee?Ee[1]:""),kt){var pe=Hr();if(null!=pe&&pe>parseFloat(we)){en=String(pe);break e}}en=we}var ot={};function Ue(){return e=ot,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=Nn(String(en)).split("."),i=Nn("9").split("."),a=Math.max(e.length,i.length);for(let E=0;0==s&&E<a;E++){var c=e[E]||"",p=i[E]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;s=Xn(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||Xn(0==c[2].length,0==p[2].length)||Xn(c[2],p[2]),c=c[3],p=p[3]}while(0==s)}return 0<=s}();var e}var yn=Be.document&&kt&&(Hr()||parseInt(en,10))||void 0,Jn=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{Be.addEventListener("test",Ge,e),Be.removeEventListener("test",Ge,e)}catch(i){}return s}();function an(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}function Vr(s,e){if(an.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var i=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(yi){e:{try{er(e.nodeName);var c=!0;break e}catch(p){}c=!1}c||(e=null)}}else"mouseover"==i?e=s.fromElement:"mouseout"==i&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:Pn[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&Vr.Z.h.call(this)}}an.prototype.h=function(){this.defaultPrevented=!0},dn(Vr,an);var Pn={2:"touch",3:"pen",4:"mouse"};Vr.prototype.h=function(){Vr.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),gr=0;function Xr(s,e,i,a,c){this.listener=s,this.proxy=null,this.src=e,this.type=i,this.capture=!!a,this.ia=c,this.key=++gr,this.ca=this.fa=!1}function ei(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function os(s){this.src=s,this.g={},this.h=0}function Pi(s,e){var i=e.type;if(i in s.g){var p,a=s.g[i],c=Wn(a,e);(p=0<=c)&&Array.prototype.splice.call(a,c,1),p&&(ei(e),0==s.g[i].length&&(delete s.g[i],s.h--))}}function Ci(s,e,i,a){for(var c=0;c<s.length;++c){var p=s[c];if(!p.ca&&p.listener==e&&p.capture==!!i&&p.ia==a)return c}return-1}os.prototype.add=function(s,e,i,a,c){var p=s.toString();(s=this.g[p])||(s=this.g[p]=[],this.h++);var E=Ci(s,e,a,c);return-1<E?(e=s[E],i||(e.fa=!1)):((e=new Xr(e,this.src,p,!!a,c)).fa=i,s.push(e)),e};var zr="closure_lm_"+(1e6*Math.random()|0),Nr={};function cr(s,e,i,a,c){if(a&&a.once)return $r(s,e,i,a,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)cr(s,e[p],i,a,c);return null}return i=bt(i),s&&s[rn]?s.N(e,i,Xt(a)?!!a.capture:!!a,c):jr(s,e,i,!1,a,c)}function jr(s,e,i,a,c,p){if(!e)throw Error("Invalid event type");var E=Xt(c)?!!c.capture:!!c,M=as(s);if(M||(s[zr]=M=new os(s)),(i=M.add(e,i,a,E,p)).proxy)return i;if(a=function(){var e=dr;return function s(i){return e.call(s.src,s.listener,i)}}(),i.proxy=a,a.src=s,a.listener=i,s.addEventListener)Jn||(c=E),void 0===c&&(c=!1),s.addEventListener(e.toString(),a,c);else if(s.attachEvent)s.attachEvent(Di(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return i}function $r(s,e,i,a,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)$r(s,e[p],i,a,c);return null}return i=bt(i),s&&s[rn]?s.O(e,i,Xt(a)?!!a.capture:!!a,c):jr(s,e,i,!0,a,c)}function Kt(s,e,i,a,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)Kt(s,e[p],i,a,c);else a=Xt(a)?!!a.capture:!!a,i=bt(i),s&&s[rn]?(s=s.i,(e=String(e).toString())in s.g&&-1<(i=Ci(p=s.g[e],i,a,c))&&(ei(p[i]),Array.prototype.splice.call(p,i,1),0==p.length&&(delete s.g[e],s.h--))):s&&(s=as(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Ci(e,i,a,c)),(i=-1<s?e[s]:null)&&Gr(i))}function Gr(s){if("number"!=typeof s&&s&&!s.ca){var e=s.src;if(e&&e[rn])Pi(e.i,s);else{var i=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(i,a,s.capture):e.detachEvent?e.detachEvent(Di(i),a):e.addListener&&e.removeListener&&e.removeListener(a),(i=as(e))?(Pi(i,s),0==i.h&&(i.src=null,e[zr]=null)):ei(s)}}}function Di(s){return s in Nr?Nr[s]:Nr[s]="on"+s}function dr(s,e){if(s.ca)s=!0;else{e=new Vr(e,this);var i=s.listener,a=s.ia||s.src;s.fa&&Gr(s),s=i.call(a,e)}return s}function as(s){return(s=s[zr])instanceof os?s:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function bt(s){return"function"==typeof s?s:(s[On]||(s[On]=function(e){return s.handleEvent(e)}),s[On])}function Vt(){Lt.call(this),this.i=new os(this),this.P=this,this.I=null}function Ht(s,e){var i,a=s.I;if(a)for(i=[];a;a=a.I)i.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new an(e,s);else if(e instanceof an)e.target=e.target||s;else{var c=e;zn(e=new an(a,s),c)}if(c=!0,i)for(var p=i.length-1;0<=p;p--){var E=e.g=i[p];c=Hn(E,a,!0,e)&&c}if(c=Hn(E=e.g=s,a,!0,e)&&c,c=Hn(E,a,!1,e)&&c,i)for(p=0;p<i.length;p++)c=Hn(E=e.g=i[p],a,!1,e)&&c}function Hn(s,e,i,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var E=e[p];if(E&&!E.ca&&E.capture==i){var M=E.listener,H=E.ia||E.src;E.fa&&Pi(s.i,E),c=!1!==M.call(H,a)&&c}}return c&&!a.defaultPrevented}dn(Vt,Lt),Vt.prototype[rn]=!0,Vt.prototype.removeEventListener=function(s,e,i,a){Kt(this,s,e,i,a)},Vt.prototype.M=function(){if(Vt.Z.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var i=s.g[e],a=0;a<i.length;a++)ei(i[a]);delete s.g[e],s.h--}}this.I=null},Vt.prototype.N=function(s,e,i,a){return this.i.add(String(s),e,!1,i,a)},Vt.prototype.O=function(s,e,i,a){return this.i.add(String(s),e,!0,i,a)};var Zr=Be.JSON.stringify;function yr(){var s=Kr;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var js,Un=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new tr,s=>s.reset());class tr{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function es(s){Be.setTimeout(()=>{throw s},0)}function nn(s,e){js||function(){var s=Be.Promise.resolve(void 0);js=function(){s.then(Ar)}}(),vs||(js(),vs=!0),Kr.add(s,e)}var vs=!1,Kr=new class{constructor(){this.h=this.g=null}add(e,i){const a=Un.get();a.set(e,i),this.h?this.h.next=a:this.g=a,this.h=a}};function Ar(){for(var s;s=yr();){try{s.h.call(s.g)}catch(i){es(i)}var e=Un;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}vs=!1}function ki(s,e){Vt.call(this),this.h=s||1,this.g=e||Be,this.j=In(this.kb,this),this.l=Date.now()}function Yr(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function Ur(s,e,i){if("function"==typeof s)i&&(s=In(s,i));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=In(s.handleEvent,s)}return 2147483647<Number(e)?-1:Be.setTimeout(s,e||0)}function Oe(s){s.g=Ur(()=>{s.g=null,s.i&&(s.i=!1,Oe(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}dn(ki,Vt),(fe=ki.prototype).da=!1,fe.S=null,fe.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ht(this,"tick"),this.da&&(Yr(this),this.start()))}},fe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.M=function(){ki.Z.M.call(this),Yr(this),delete this.g};class We extends Lt{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oe(this)}M(){super.M(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(s){Lt.call(this),this.h=s,this.g={}}dn(Xe,Lt);var Et=[];function Ct(s,e,i,a){Array.isArray(i)||(i&&(Et[0]=i.toString()),i=Et);for(var c=0;c<i.length;c++){var p=cr(e,i[c],a||s.handleEvent,!1,s.h||s);if(!p)break;s.g[p.key]=p}}function Ot(s){qt(s.g,function(e,i){this.g.hasOwnProperty(i)&&Gr(e)},s),s.g={}}function Gn(){this.g=!0}function kr(s,e,i,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(s=0;s<i.length;s++)if(Array.isArray(i[s])){var a=i[s];if(!(2>a.length)){var c=a[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var E=1;E<c.length;E++)c[E]=""}}}return Zr(i)}catch(M){return e}}(s,i)+(a?" "+a:"")})}Xe.prototype.M=function(){Xe.Z.M.call(this),Ot(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gn.prototype.Aa=function(){this.g=!1},Gn.prototype.info=function(){};var ce={},Q=null;function Ie(){return Q=Q||new Vt}function it(s){an.call(this,ce.Ma,s)}function Bt(s){const e=Ie();Ht(e,new it(e,s))}function An(s,e){an.call(this,ce.STAT_EVENT,s),this.stat=e}function sn(s){const e=Ie();Ht(e,new An(e,s))}function hr(s,e){an.call(this,ce.Na,s),this.size=e}function ti(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){s()},e)}ce.Ma="serverreachability",dn(it,an),ce.STAT_EVENT="statevent",dn(An,an),ce.Na="timingevent",dn(hr,an);var $s={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ao(){}function Hs(){}ao.prototype.h=null;var Js,Gs={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ls(){an.call(this,"d")}function yo(){an.call(this,"c")}function zi(){}function ts(s,e,i,a){this.l=s,this.j=e,this.m=i,this.X=a||1,this.V=new Xe(this),this.P=_o,this.W=new ki(s=mi?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new cs}function cs(){this.i=null,this.g="",this.h=!1}dn(ls,an),dn(yo,an),dn(zi,ao),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},Js=new zi;var _o=45e3,ds={},hs={};function vo(s,e,i){s.K=1,s.v=Mt(z(e)),s.s=i,s.U=!0,fs(s,null)}function fs(s,e){s.F=Date.now(),Es(s),s.A=z(s.v);var i=s.A,a=s.X;Array.isArray(a)||(a=[String(a)]),un(i.h,"t",a),s.C=0,i=s.l.H,s.h=new cs,s.g=Lo(s.l,i?e:null,!s.s),0<s.O&&(s.L=new We(In(s.Ia,s,s.g),s.O)),Ct(s.V,s.g,"readystatechange",s.gb),e=s.H?lt(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,e)):(s.u="GET",s.g.ea(s.A,s.u,null,e)),Bt(1),function(s,e,i,a,c,p){s.info(function(){if(s.g)if(p)for(var E="",M=p.split("&"),H=0;H<M.length;H++){var ee=M[H].split("=");if(1<ee.length){var le=ee[0];ee=ee[1];var Ne=le.split("_");E=2<=Ne.length&&"type"==Ne[1]?E+(le+"=")+ee+"&":E+(le+"=redacted&")}}else E=null;else E=p;return"XMLHTTP REQ ("+a+") [attempt "+c+"]: "+e+"\n"+i+"\n"+E})}(s.j,s.u,s.A,s.m,s.X,s.s)}function Ia(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function _i(s,e,i){let c,a=!0;for(;!s.I&&s.C<i.length;){if(c=Zi(s,i),c==hs){4==e&&(s.o=4,sn(14),a=!1),kr(s.j,s.m,null,"[Incomplete Response]");break}if(c==ds){s.o=4,sn(15),kr(s.j,s.m,i,"[Invalid Chunk]"),a=!1;break}kr(s.j,s.m,c,null),ai(s,c)}Ia(s)&&c!=hs&&c!=ds&&(s.h.g="",s.C=0),4!=e||0!=i.length||s.h.h||(s.o=1,sn(16),a=!1),s.i=s.i&&a,a?0<i.length&&!s.aa&&(s.aa=!0,(e=s.l).g==s&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),ru(e),e.L=!0,sn(11))):(kr(s.j,s.m,i,"[Invalid Chunked Response]"),ws(s),qs(s))}function Zi(s,e){var i=s.C,a=e.indexOf("\n",i);return-1==a?hs:(i=Number(e.substring(i,a)),isNaN(i)?ds:(a+=1)+i>e.length?hs:(e=e.substr(a,i),s.C=a+i,e))}function Es(s){s.Y=Date.now()+s.P,Rs(s,s.P)}function Rs(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=ti(In(s.eb,s),e)}function vi(s){s.B&&(Be.clearTimeout(s.B),s.B=null)}function qs(s){0==s.l.G||s.I||Ca(s.l,s)}function ws(s){vi(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Yr(s.W),Ot(s.V),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function ai(s,e){try{var i=s.l;if(0!=i.G&&(i.g==s||se(i.i,s)))if(i.I=s.N,!s.J&&se(i.i,s)&&3==i.G){try{var a=i.Ca.g.parse(e)}catch(ee){a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0])e:if(i.u)i.ta=c[1],0<i.ta-i.U&&37500>c[2]&&i.N&&0==i.A&&!i.v&&(i.v=ti(In(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<s.F))break e;Oo(i),bs(i)}Bi(i),sn(18)}if(1>=De(i.i)&&i.ka){try{i.ka()}catch(ee){}i.ka=void 0}}else ko(i,11)}else if((s.J||i.g==s)&&Oo(i),!mn(e))for(c=i.Ca.g.parse(e),e=0;e<c.length;e++){let ee=c[e];if(i.U=ee[0],ee=ee[1],2==i.G)if("c"==ee[0]){i.J=ee[1],i.la=ee[2];const le=ee[3];null!=le&&(i.ma=le,i.h.info("VER="+i.ma));const Ne=ee[4];null!=Ne&&(i.za=Ne,i.h.info("SVER="+i.za));const st=ee[5];null!=st&&"number"==typeof st&&0<st&&(i.K=a=1.5*st,i.h.info("backChannelRequestTimeoutMs_="+a)),a=i;const pt=s.g;if(pt){const Nt=pt.g?pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nt){var p=a.i;!p.g&&(Cn(Nt,"spdy")||Cn(Nt,"quic")||Cn(Nt,"h2"))&&(p.j=p.l,p.g=new Set,p.h&&(Je(p,p.h),p.h=null))}if(a.D){const ln=pt.g?pt.g.getResponseHeader("X-HTTP-Session-Id"):null;ln&&(a.sa=ln,Ut(a.F,a.D,ln))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-s.F,i.h.info("Handshake RTT: "+i.O+"ms"));var E=s;if((a=i).oa=Fo(a,a.H?a.la:null,a.W),E.J){Yt(a.i,E);var M=E,H=a.K;H&&M.setTimeout(H),M.B&&(vi(M),Es(M)),a.g=E}else Ko(a);0<i.l.length&&zs(i)}else"stop"!=ee[0]&&"close"!=ee[0]||ko(i,7);else 3==i.G&&("stop"==ee[0]||"close"==ee[0]?"stop"==ee[0]?ko(i,7):Ns(i):"noop"!=ee[0]&&i.j&&i.j.wa(ee),i.A=0)}Bt(4)}catch(ee){}}function Ti(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Rt(s)||"string"==typeof s)Tn(s,e,void 0);else{if(s.T&&"function"==typeof s.T)var i=s.T();else if(s.R&&"function"==typeof s.R)i=void 0;else if(Rt(s)||"string"==typeof s){i=[];for(var a=s.length,c=0;c<a;c++)i.push(c)}else for(c in i=[],a=0,s)i[a++]=c;c=(a=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Rt(s)){for(var e=[],i=s.length,a=0;a<i;a++)e.push(s[a]);return e}for(a in e=[],i=0,s)e[i++]=s[a];return e}(s)).length;for(var p=0;p<c;p++)e.call(void 0,a[p],i&&i[p],s)}}function Xs(s,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var a=0;a<i;a+=2)this.set(arguments[a],arguments[a+1])}else if(s)if(s instanceof Xs)for(i=s.T(),a=0;a<i.length;a++)this.set(i[a],s.get(i[a]));else for(a in s)this.set(a,s[a])}function qr(s){if(s.i!=s.g.length){for(var e=0,i=0;e<s.g.length;){var a=s.g[e];ns(s.h,a)&&(s.g[i++]=a),e++}s.g.length=i}if(s.i!=s.g.length){var c={};for(i=e=0;e<s.g.length;)ns(c,a=s.g[e])||(s.g[i++]=a,c[a]=1),e++;s.g.length=i}}function ns(s,e){return Object.prototype.hasOwnProperty.call(s,e)}(fe=ts.prototype).setTimeout=function(s){this.P=s},fe.gb=function(s){s=s.target;const e=this.L;e&&3==Dr(s)?e.l():this.Ia(s)},fe.Ia=function(s){try{if(s==this.g)e:{const le=Dr(this.g);var e=this.g.Da();const Ne=this.g.ba();if(!(3>le)&&(3!=le||mi||this.g&&(this.h.h||this.g.ga()||di(this.g)))){this.I||4!=le||7==e||Bt(8==e||0>=Ne?3:2),vi(this);var i=this.g.ba();this.N=i;t:if(Ia(this)){var a=di(this.g);s="";var c=a.length,p=4==Dr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ws(this),qs(this);var E="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:p&&e==c-1});a.splice(0,c),this.h.g+=s,this.C=0,E=this.h.g}else E=this.g.ga();if(this.i=200==i,function(s,e,i,a,c,p,E){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+c+"]: "+e+"\n"+i+"\n"+p+" "+E})}(this.j,this.u,this.A,this.m,this.X,le,i),this.i){if(this.$&&!this.J){t:{if(this.g){var M,H=this.g;if((M=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mn(M)){var ee=M;break t}}ee=null}if(!(i=ee)){this.i=!1,this.o=3,sn(12),ws(this),qs(this);break e}kr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ai(this,i)}this.U?(_i(this,le,E),mi&&this.i&&3==le&&(Ct(this.V,this.W,"tick",this.fb),this.W.start())):(kr(this.j,this.m,E,null),ai(this,E)),4==le&&ws(this),this.i&&!this.I&&(4==le?Ca(this.l,this):(this.i=!1,Es(this)))}else 400==i&&0<E.indexOf("Unknown SID")?(this.o=3,sn(12)):(this.o=0,sn(13)),ws(this),qs(this)}}}catch(le){}},fe.fb=function(){if(this.g){var s=Dr(this.g),e=this.g.ga();this.C<e.length&&(vi(this),_i(this,s,e),this.i&&4!=s&&Es(this))}},fe.cancel=function(){this.I=!0,ws(this)},fe.eb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Bt(3),sn(17)),ws(this),this.o=2,qs(this)):Rs(this,this.Y-s)},(fe=Xs.prototype).R=function(){qr(this);for(var s=[],e=0;e<this.g.length;e++)s.push(this.h[this.g[e]]);return s},fe.T=function(){return qr(this),this.g.concat()},fe.get=function(s,e){return ns(this.h,s)?this.h[s]:e},fe.set=function(s,e){ns(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=e},fe.forEach=function(s,e){for(var i=this.T(),a=0;a<i.length;a++){var c=i[a],p=this.get(c);s.call(e,p,c,this)}};var P=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function N(s,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof N){this.g=void 0!==e?e:s.g,ye(this,s.j),this.s=s.s,Ke(this,s.i),ft(this,s.m),this.l=s.l,e=s.h;var i=new Ai;i.i=e.i,e.g&&(i.g=new Xs(e.g),i.h=e.h),$t(this,i),this.o=s.o}else s&&(i=String(s).match(P))?(this.g=!!e,ye(this,i[1]||"",!0),this.s=Er(i[2]||""),Ke(this,i[3]||"",!0),ft(this,i[4]),this.l=Er(i[5]||"",!0),$t(this,i[6]||"",!0),this.o=Er(i[7]||"")):(this.g=!!e,this.h=new Ai(null,this.g))}function z(s){return new N(s)}function ye(s,e,i){s.j=i?Er(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function Ke(s,e,i){s.i=i?Er(e,!0):e}function ft(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function $t(s,e,i){e instanceof Ai?(s.h=e,function(s,e){e&&!s.j&&(ri(s),s.i=null,s.g.forEach(function(i,a){var c=a.toLowerCase();a!=c&&(Ws(this,a),un(this,c,i))},s)),s.j=e}(s.h,s.g)):(i||(e=Rn(e,Li)),s.h=new Ai(e,s.g))}function Ut(s,e,i){s.h.set(e,i)}function Mt(s){return Ut(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Er(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Rn(s,e,i){return"string"==typeof s?(s=encodeURI(s).replace(e,ui),i&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function ui(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}N.prototype.toString=function(){var s=[],e=this.j;e&&s.push(Rn(e,Fi,!0),":");var i=this.i;return(i||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(Rn(e,Fi,!0),"@"),s.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&s.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&s.push("/"),s.push(Rn(i,"/"==i.charAt(0)?Fr:ni,!0))),(i=this.h.toString())&&s.push("?",i),(i=this.o)&&s.push("#",Rn(i,Ms)),s.join("")};var Fi=/[#\/\?@]/g,ni=/[#\?:]/g,Fr=/[#\?]/g,Li=/[#\?@]/g,Ms=/#/g;function Ai(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function ri(s){s.g||(s.g=new Xs,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var i=0;i<s.length;i++){var a=s[i].indexOf("="),c=null;if(0<=a){var p=s[i].substring(0,a);c=s[i].substring(a+1)}else p=s[i];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(s.i,function(e,i){s.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function Ws(s,e){ri(s),e=Mo(s,e),ns(s.g.h,e)&&(s.i=null,s.h-=s.g.get(e).length,ns((s=s.g).h,e)&&(delete s.h[e],s.i--,s.g.length>2*s.i&&qr(s)))}function Ro(s,e){return ri(s),e=Mo(s,e),ns(s.g.h,e)}function un(s,e,i){Ws(s,e),0<i.length&&(s.i=null,s.g.set(Mo(s,e),hn(i)),s.h+=i.length)}function Mo(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function k(s){this.l=s||Z,s=Be.PerformanceNavigationTiming?0<(s=Be.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(Be.g&&Be.g.Ea&&Be.g.Ea()&&Be.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=Ai.prototype).add=function(s,e){ri(this),this.i=null,s=Mo(this,s);var i=this.g.get(s);return i||this.g.set(s,i=[]),i.push(e),this.h+=1,this},fe.forEach=function(s,e){ri(this),this.g.forEach(function(i,a){Tn(i,function(c){s.call(e,c,a,this)},this)},this)},fe.T=function(){ri(this);for(var s=this.g.R(),e=this.g.T(),i=[],a=0;a<e.length;a++)for(var c=s[a],p=0;p<c.length;p++)i.push(e[a]);return i},fe.R=function(s){ri(this);var e=[];if("string"==typeof s)Ro(this,s)&&(e=pr(e,this.g.get(Mo(this,s))));else{s=this.g.R();for(var i=0;i<s.length;i++)e=pr(e,s[i])}return e},fe.set=function(s,e){return ri(this),this.i=null,Ro(this,s=Mo(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},fe.get=function(s,e){return s&&0<(s=this.R(s)).length?String(s[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],e=this.g.T(),i=0;i<e.length;i++){var a=e[i],c=encodeURIComponent(String(a));a=this.R(a);for(var p=0;p<a.length;p++){var E=c;""!==a[p]&&(E+="="+encodeURIComponent(String(a[p]))),s.push(E)}}return this.i=s.join("&")};var Z=10;function oe(s){return!!s.h||!!s.g&&s.g.size>=s.j}function De(s){return s.h?1:s.g?s.g.size:0}function se(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function Je(s,e){s.g?s.g.add(e):s.h=e}function Yt(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function gt(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const i of s.g.values())e=e.concat(i.D);return e}return hn(s.i)}function kn(){}function wn(){this.g=new kn}function nr(s,e,i){const a=i||"";try{Ti(s,function(c,p){let E=c;Xt(c)&&(E=Zr(c)),e.push(a+p+"="+encodeURIComponent(E))})}catch(c){throw e.push(a+"type="+encodeURIComponent("_badmap")),c}}function rr(s,e,i,a,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(a)}catch(p){}}function Fn(s){this.l=s.$b||null,this.j=s.ib||!1}function ii(s,e){Vt.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Vi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}k.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},kn.prototype.stringify=function(s){return Be.JSON.stringify(s,void 0)},kn.prototype.parse=function(s){return Be.JSON.parse(s,void 0)},dn(Fn,ao),Fn.prototype.g=function(){return new ii(this.l,this.j)},Fn.prototype.i=function(s){return function(){return s}}({}),dn(ii,Vt);var Vi=0;function li(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function Or(s){s.readyState=4,s.l=null,s.j=null,s.A=null,br(s)}function br(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(fe=ii.prototype).open=function(s,e){if(this.readyState!=Vi)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,br(this)},fe.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||Be).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Or(this)),this.readyState=Vi},fe.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Be.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;li(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},fe.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Or(this):br(this),3==this.readyState&&li(this)}},fe.Ua=function(s){this.g&&(this.response=this.responseText=s,Or(this))},fe.Ta=function(s){this.g&&(this.response=s,Or(this))},fe.ha=function(){this.g&&Or(this)},fe.setRequestHeader=function(s,e){this.v.append(s,e)},fe.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var i=e.next();!i.done;)s.push((i=i.value)[0]+": "+i[1]),i=e.next();return s.join("\r\n")},Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var ci=Be.JSON.parse;function ir(s){Vt.call(this),this.headers=new Xs,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ui,this.K=this.L=!1}dn(ir,Vt);var Ui="",eo=/^https?$/i,S=["POST","PUT"];function I(s){return"content-type"==s.toLowerCase()}function $(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Pe(s),bn(s)}function Pe(s){s.D||(s.D=!0,Ht(s,"complete"),Ht(s,"error"))}function mt(s){if(s.h&&void 0!==Te&&(!s.C[1]||4!=Dr(s)||2!=s.ba()))if(s.v&&4==Dr(s))Ur(s.Fa,0,s);else if(Ht(s,"readystatechange"),4==Dr(s)){s.h=!1;try{const M=s.ba();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var a;if(a=0===M){var c=String(s.H).match(P)[1]||null;if(!c&&Be.self&&Be.self.location){var p=Be.self.location.protocol;c=p.substr(0,p.length-1)}a=!eo.test(c?c.toLowerCase():"")}i=a}if(i)Ht(s,"complete"),Ht(s,"success");else{s.m=6;try{var E=2<Dr(s)?s.g.statusText:""}catch(H){E=""}s.j=E+" ["+s.ba()+"]",Pe(s)}}finally{bn(s)}}}function bn(s,e){if(s.g){fr(s);const i=s.g,a=s.C[0]?Ge:null;s.g=null,s.C=null,e||Ht(s,"ready");try{i.onreadystatechange=a}catch(c){}}}function fr(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(Be.clearTimeout(s.A),s.A=null)}function Dr(s){return s.g?s.g.readyState:0}function di(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case Ui:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ki(s,e,i){e:{for(a in i){var a=!1;break e}a=!0}a||(i=function(s){let e="";return qt(s,function(i,a){e+=a,e+=":",e+=i,e+="\r\n"}),e}(i),"string"==typeof s?null!=i&&encodeURIComponent(String(i)):Ut(s,e,i))}function rs(s,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[s]||e}function lo(s){this.za=0,this.l=[],this.h=new Gn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rs("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rs("baseRetryDelayMs",5e3,s),this.$a=rs("retryDelaySeedMs",1e4,s),this.Ya=rs("forwardChannelMaxRetries",2,s),this.ra=rs("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new k(s&&s.concurrentRequestLimit),this.Ca=new wn,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function Ns(s){if(to(s),3==s.G){var e=s.V++,i=z(s.F);Ut(i,"SID",s.J),Ut(i,"RID",e),Ut(i,"TYPE","terminate"),Zo(s,i),(e=new ts(s,s.h,e,void 0)).K=2,e.v=Mt(z(i)),i=!1,Be.navigator&&Be.navigator.sendBeacon&&(i=Be.navigator.sendBeacon(e.v.toString(),"")),!i&&Be.Image&&((new Image).src=e.v,i=!0),i||(e.g=Lo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Es(e)}Yi(s)}function bs(s){s.g&&(ru(s),s.g.cancel(),s.g=null)}function to(s){bs(s),s.u&&(Be.clearTimeout(s.u),s.u=null),Oo(s),s.i.cancel(),s.m&&("number"==typeof s.m&&Be.clearTimeout(s.m),s.m=null)}function Is(s,e){s.l.push(new class{constructor(s,e){this.h=s,this.g=e}}(s.Za++,e)),3==s.G&&zs(s)}function zs(s){oe(s.i)||s.m||(s.m=!0,nn(s.Ha,s),s.C=0)}function Eo(s,e){var i;i=e?e.m:s.V++;const a=z(s.F);Ut(a,"SID",s.J),Ut(a,"RID",i),Ut(a,"AID",s.U),Zo(s,a),s.o&&s.s&&Ki(a,s.o,s.s),i=new ts(s,s.h,i,s.C+1),null===s.o&&(i.H=s.s),e&&(s.l=e.D.concat(s.l)),e=il(s,i,1e3),i.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),Je(s.i,i),vo(i,a,e)}function Zo(s,e){s.j&&Ti({},function(i,a){Ut(e,a,i)})}function il(s,e,i){i=Math.min(s.l.length,i);var a=s.j?In(s.j.Oa,s.j,s):null;e:{var c=s.l;let p=-1;for(;;){const E=["count="+i];-1==p?0<i?(p=c[0].h,E.push("ofs="+p)):p=0:E.push("ofs="+p);let M=!0;for(let H=0;H<i;H++){let ee=c[H].h;const le=c[H].g;if(ee-=p,0>ee)p=Math.max(0,c[H].h-100),M=!1;else try{nr(le,E,"req"+ee+"_")}catch(Ne){a&&a(le)}}if(M){a=E.join("&");break e}}}return s=s.l.splice(0,i),e.D=s,a}function Ko(s){s.g||s.u||(s.Y=1,nn(s.Ga,s),s.A=0)}function Bi(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=ti(In(s.Ga,s),Po(s,s.A)),s.A++,0))}function ru(s){null!=s.B&&(Be.clearTimeout(s.B),s.B=null)}function oa(s){s.g=new ts(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var e=z(s.oa);Ut(e,"RID","rpc"),Ut(e,"SID",s.J),Ut(e,"CI",s.N?"0":"1"),Ut(e,"AID",s.U),Zo(s,e),Ut(e,"TYPE","xmlhttp"),s.o&&s.s&&Ki(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var i=s.g;s=s.la,i.K=1,i.v=Mt(z(e)),i.s=null,i.U=!0,fs(i,s)}function Oo(s){null!=s.v&&(Be.clearTimeout(s.v),s.v=null)}function Ca(s,e){var i=null;if(s.g==e){Oo(s),ru(s),s.g=null;var a=2}else{if(!se(s.i,e))return;i=e.D,Yt(s.i,e),a=1}if(s.I=e.N,0!=s.G)if(e.i)if(1==a){i=e.s?e.s.length:0,e=Date.now()-e.F;var c=s.C;Ht(a=Ie(),new hr(a,i,e,c)),zs(s)}else Ko(s);else if(3==(c=e.o)||0==c&&0<s.I||!(1==a&&function(s,e){return!(De(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=e.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=ti(In(s.Ha,s,e),Po(s,s.C)),s.C++,0)))}(s,e)||2==a&&Bi(s)))switch(i&&0<i.length&&(e=s.i,e.i=e.i.concat(i)),c){case 1:ko(s,5);break;case 4:ko(s,10);break;case 3:ko(s,6);break;default:ko(s,2)}}function Po(s,e){let i=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(i*=2),i*e}function ko(s,e){if(s.h.info("Error code "+e),2==e){var i=null;s.j&&(i=null);var a=In(s.jb,s);i||(i=new N("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||ye(i,"https"),Mt(i)),function(s,e){const i=new Gn;if(Be.Image){const a=new Image;a.onload=Tr(rr,i,a,"TestLoadImage: loaded",!0,e),a.onerror=Tr(rr,i,a,"TestLoadImage: error",!1,e),a.onabort=Tr(rr,i,a,"TestLoadImage: abort",!1,e),a.ontimeout=Tr(rr,i,a,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(i.toString(),a)}else sn(2);s.G=0,s.j&&s.j.va(e),Yi(s),to(s)}function Yi(s){s.G=0,s.I=-1,s.j&&((0!=gt(s.i).length||0!=s.l.length)&&(s.i.i.length=0,hn(s.l),s.l.length=0),s.j.ua())}function Fo(s,e,i){let a=function(s){return s instanceof N?z(s):new N(s,void 0)}(i);if(""!=a.i)e&&Ke(a,e+"."+a.i),ft(a,a.m);else{const c=Be.location;a=function(s,e,i,a){var c=new N(null,void 0);return s&&ye(c,s),e&&Ke(c,e),i&&ft(c,i),a&&(c.l=a),c}(c.protocol,e?e+"."+c.hostname:c.hostname,+c.port,i)}return s.aa&&qt(s.aa,function(c,p){Ut(a,p,c)}),i=s.sa,(e=s.D)&&i&&Ut(a,e,i),Ut(a,"VER",s.ma),Zo(s,a),a}function Lo(s,e,i){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(i&&s.Ba&&!s.qa?new Fn({ib:!0}):s.qa)).L=s.H,e}function Iu(){}function Vo(){if(kt&&!(10<=Number(yn)))throw Error("Environmental error: no available transport.")}function Ir(s,e){Vt.call(this),this.g=new lo(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.P=s,(s=e&&e.httpHeadersOverwriteParam)&&!mn(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mn(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new Yo(this)}function co(s){ls.call(this);var e=s.__sm__;if(e){e:{for(const i in e){s=i;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function sl(){yo.call(this),this.status=1}function Yo(s){this.g=s}(fe=ir.prototype).ea=function(s,e,i,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Js.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:Js),this.g.onreadystatechange=In(this.Fa,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(p){return void $(this,p)}s=i||"";const c=new Xs(this.headers);a&&Ti(a,function(p,E){c.set(E,p)}),a=function(s){e:{var e=I;const i=s.length,a="string"==typeof s?s.split(""):s;for(let c=0;c<i;c++)if(c in a&&e.call(void 0,a[c],c,s)){e=c;break e}e=-1}return 0>e?null:"string"==typeof s?s.charAt(e):s[e]}(c.T()),i=Be.FormData&&s instanceof Be.FormData,!(0<=Wn(S,e))||a||i||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(p,E){this.g.setRequestHeader(E,p)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fr(this),0<this.B&&((this.K=function(s){return kt&&Ue()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=In(this.pa,this)):this.A=Ur(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(p){$(this,p)}},fe.pa=function(){void 0!==Te&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))},fe.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,Ht(this,"complete"),Ht(this,"abort"),bn(this))},fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bn(this,!0)),ir.Z.M.call(this)},fe.Fa=function(){this.s||(this.F||this.v||this.l?mt(this):this.cb())},fe.cb=function(){mt(this)},fe.ba=function(){try{return 2<Dr(this)?this.g.status:-1}catch(s){return-1}},fe.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},fe.Qa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),ci(e)}},fe.Da=function(){return this.m},fe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=lo.prototype).ma=8,fe.G=1,fe.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(e){}},fe.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;const c=new ts(this,this.h,s,void 0);let p=this.s;if(this.P&&(p?(p=lt(p),zn(p,this.P)):p=this.P),null===this.o&&(c.H=p),this.ja)e:{for(var e=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=i;break e}if(4096===e||i===this.l.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=il(this,c,e),Ut(i=z(this.F),"RID",s),Ut(i,"CVER",22),this.D&&Ut(i,"X-HTTP-Session-Id",this.D),Zo(this,i),this.o&&p&&Ki(i,this.o,p),Je(this.i,c),this.Ra&&Ut(i,"TYPE","init"),this.ja?(Ut(i,"$req",e),Ut(i,"SID","null"),c.$=!0,vo(c,i,null)):vo(c,i,e),this.G=2}}else 3==this.G&&(s?Eo(this,s):0==this.l.length||oe(this.i)||Eo(this))},fe.Ga=function(){if(this.u=null,oa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=ti(In(this.bb,this),s)}},fe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,sn(10),bs(this),oa(this))},fe.ab=function(){null!=this.v&&(this.v=null,bs(this),Bi(this),sn(19))},fe.jb=function(s){s?(this.h.info("Successfully pinged google.com"),sn(2)):(this.h.info("Failed to ping google.com"),sn(1))},(fe=Iu.prototype).xa=function(){},fe.wa=function(){},fe.va=function(){},fe.ua=function(){},fe.Oa=function(){},Vo.prototype.g=function(s,e){return new Ir(s,e)},dn(Ir,Vt),Ir.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,i=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),nn(In(s.hb,s,e))),sn(0),s.W=e,s.aa=i||{},s.N=s.X,s.F=Fo(s,null,s.W),zs(s)},Ir.prototype.close=function(){Ns(this.g)},Ir.prototype.u=function(s){if("string"==typeof s){var e={};e.__data__=s,Is(this.g,e)}else this.v?((e={}).__data__=Zr(s),Is(this.g,e)):Is(this.g,s)},Ir.prototype.M=function(){this.g.j=null,delete this.j,Ns(this.g),delete this.g,Ir.Z.M.call(this)},dn(co,ls),dn(sl,yo),dn(Yo,Iu),Yo.prototype.xa=function(){Ht(this.g,"a")},Yo.prototype.wa=function(s){Ht(this.g,new co(s))},Yo.prototype.va=function(s){Ht(this.g,new sl(s))},Yo.prototype.ua=function(){Ht(this.g,"b")},Vo.prototype.createWebChannel=Vo.prototype.g,Ir.prototype.send=Ir.prototype.u,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,xo.COMPLETE="complete",Hs.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",Vt.prototype.listen=Vt.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var Ba=Re.createWebChannelTransport=function(){return new Vo},Ml=Re.getStatEventTarget=function(){return Ie()},Jr=Re.ErrorCode=$s,ja=Re.EventType=xo,Da=Re.Event=ce,Uo=Re.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iu=Re.FetchXmlHttpFactory=Fn,Zs=Re.WebChannel=Hs,aa=Re.XhrIo=ir;const Cu="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let ho="9.1.3";const Os=new vt.Yd("@firebase/firestore");function Ta(){return Os.logLevel}function Dt(s,...e){if(Os.logLevel<=vt.in.DEBUG){const i=e.map(wo);Os.debug(`Firestore (${ho}): ${s}`,...i)}}function Sr(s,...e){if(Os.logLevel<=vt.in.ERROR){const i=e.map(wo);Os.error(`Firestore (${ho}): ${s}`,...i)}}function la(s,...e){if(Os.logLevel<=vt.in.WARN){const i=e.map(wo);Os.warn(`Firestore (${ho}): ${s}`,...i)}}function wo(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(i){return s}}function zt(s="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+s;throw Sr(e),new Error(e)}function on(s,e){s||zt()}function At(s,e){return s}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Error{constructor(e,i){super(i),this.code=e,this.message=i,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fi{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}class C{constructor(e,i){this.user=i,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class v{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(hi.UNAUTHENTICATED))}shutdown(){}}class _{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class R{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){var a=this;let c=this.i;const p=ee=>this.i!==c?(c=this.i,i(ee)):Promise.resolve();let E=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new fi,e.enqueueRetryable(()=>p(this.currentUser))};const M=()=>{const ee=E;e.enqueueRetryable((0,re.Z)(function*(){yield ee.promise,yield p(a.currentUser)}))},H=ee=>{Dt("FirebaseCredentialsProvider","Auth detected"),this.auth=ee,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(ee=>H(ee)),setTimeout(()=>{if(!this.auth){const ee=this.t.getImmediate({optional:!0});ee?H(ee):(Dt("FirebaseCredentialsProvider","Auth not yet detected"),E.resolve(),E=new fi)}},0),M()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(Dt("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(on("string"==typeof a.accessToken),new C(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return on(null===e||"string"==typeof e),new hi(e)}}class L{constructor(e,i,a){this.h=e,this.l=i,this.m=a,this.type="FirstParty",this.user=hi.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},i=this.h.auth.getAuthHeaderValueForFirstParty([]);return i&&(e.Authorization=i),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class q{constructor(e,i,a){this.h=e,this.l=i,this.m=a}getToken(){return Promise.resolve(new L(this.h,this.l,this.m))}start(e,i){e.enqueueRetryable(()=>i(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ie{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.g(a),this.p=a=>i.writeSequenceNumber(a))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Ce(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}ie.T=-1;class at{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const c=Ce(40);for(let p=0;p<c.length;++p)a.length<20&&c[p]<i&&(a+=e.charAt(c[p]%e.length))}return a}}function ht(s,e){return s<e?-1:s>e?1:0}function Kn(s,e,i){return s.length===e.length&&s.every((a,c)=>i(a,e[c]))}function fn(s){return s+"\0"}class Ln{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new yt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new yt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new yt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*i));return new Ln(i,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Ln(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ps(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function ji(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function Ps(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class bo{constructor(e,i,a){void 0===i?i=0:i>e.length&&zt(),void 0===a?a=e.length-i:a>e.length-i&&zt(),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return 0===bo.comparator(this,e)}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof bo?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let c=0;c<a;c++){const p=e.get(c),E=i.get(c);if(p<E)return-1;if(p>E)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class qn extends bo{construct(e,i,a){return new qn(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new yt(et.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(c=>c.length>0))}return new qn(i)}static emptyPath(){return new qn([])}}const Qo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $i extends bo{construct(e,i,a){return new $i(e,i,a)}static isValidIdentifier(e){return Qo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $i(["__name__"])}static fromServerFormat(e){const i=[];let a="",c=0;const p=()=>{if(0===a.length)throw new yt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let E=!1;for(;c<e.length;){const M=e[c];if("\\"===M){if(c+1===e.length)throw new yt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[c+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new yt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=H,c+=2}else"`"===M?(E=!E,c++):"."!==M||E?(a+=M,c++):(p(),c++)}if(p(),E)throw new yt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $i(i)}static emptyPath(){return new $i([])}}class $a{constructor(e){this.fields=e,e.sort($i.comparator)}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Kn(this.fields,e.fields,(i,a)=>i.isEqual(a))}}class Qi{constructor(e){this.binaryString=e}static fromBase64String(e){const i=atob(e);return new Qi(i)}static fromUint8Array(e){const i=function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c}(e);return new Qi(i)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qi.EMPTY_BYTE_STRING=new Qi("");const xi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(s){if(on(!!s),"string"==typeof s){let e=0;const i=xi.exec(s);if(on(!!i),i[1]){let c=i[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ri(s.seconds),nanos:Ri(s.nanos)}}function Ri(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function Ha(s){return"string"==typeof s?Qi.fromBase64String(s):Qi.fromUint8Array(s)}function uc(s){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function ol(s){const e=s.mapValue.fields.__previous_value__;return uc(e)?ol(e):e}function ca(s){const e=Jo(s.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}function da(s){return null==s}function Du(s){return 0===s&&1/s==-1/0}function al(s){return"number"==typeof s&&Number.isInteger(s)&&!Du(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}class Zt{constructor(e){this.path=e}static fromPath(e){return new Zt(qn.fromString(e))}static fromName(e){return new Zt(qn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return qn.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zt(new qn(e.slice()))}}function no(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?uc(s)?4:10:zt()}function Ks(s,e){const i=no(s);if(i!==no(e))return!1;switch(i){case 0:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ca(s).isEqual(ca(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=Jo(a.timestampValue),E=Jo(c.timestampValue);return p.seconds===E.seconds&&p.nanos===E.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return c=e,Ha(s.bytesValue).isEqual(Ha(c.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,c){return Ri(a.geoPointValue.latitude)===Ri(c.geoPointValue.latitude)&&Ri(a.geoPointValue.longitude)===Ri(c.geoPointValue.longitude)}(s,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Ri(a.integerValue)===Ri(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=Ri(a.doubleValue),E=Ri(c.doubleValue);return p===E?Du(p)===Du(E):isNaN(p)&&isNaN(E)}return!1}(s,e);case 9:return Kn(s.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(a,c){const p=a.mapValue.fields||{},E=c.mapValue.fields||{};if(ps(p)!==ps(E))return!1;for(const M in p)if(p.hasOwnProperty(M)&&(void 0===E[M]||!Ks(p[M],E[M])))return!1;return!0}(s,e);default:return zt()}var c}function Nl(s,e){return void 0!==(s.values||[]).find(i=>Ks(i,e))}function Ei(s,e){const i=no(s),a=no(e);if(i!==a)return ht(i,a);switch(i){case 0:return 0;case 1:return ht(s.booleanValue,e.booleanValue);case 2:return function(c,p){const E=Ri(c.integerValue||c.doubleValue),M=Ri(p.integerValue||p.doubleValue);return E<M?-1:E>M?1:E===M?0:isNaN(E)?isNaN(M)?0:-1:1}(s,e);case 3:return Tu(s.timestampValue,e.timestampValue);case 4:return Tu(ca(s),ca(e));case 5:return ht(s.stringValue,e.stringValue);case 6:return function(c,p){const E=Ha(c),M=Ha(p);return E.compareTo(M)}(s.bytesValue,e.bytesValue);case 7:return function(c,p){const E=c.split("/"),M=p.split("/");for(let H=0;H<E.length&&H<M.length;H++){const ee=ht(E[H],M[H]);if(0!==ee)return ee}return ht(E.length,M.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,p){const E=ht(Ri(c.latitude),Ri(p.latitude));return 0!==E?E:ht(Ri(c.longitude),Ri(p.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(c,p){const E=c.values||[],M=p.values||[];for(let H=0;H<E.length&&H<M.length;++H){const ee=Ei(E[H],M[H]);if(ee)return ee}return ht(E.length,M.length)}(s.arrayValue,e.arrayValue);case 10:return function(c,p){const E=c.fields||{},M=Object.keys(E),H=p.fields||{},ee=Object.keys(H);M.sort(),ee.sort();for(let le=0;le<M.length&&le<ee.length;++le){const Ne=ht(M[le],ee[le]);if(0!==Ne)return Ne;const st=Ei(E[M[le]],H[ee[le]]);if(0!==st)return st}return ht(M.length,ee.length)}(s.mapValue,e.mapValue);default:throw zt()}}function Tu(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return ht(s,e);const i=Jo(s),a=Jo(e),c=ht(i.seconds,a.seconds);return 0!==c?c:ht(i.nanos,a.nanos)}function Sa(s){return xa(s)}function xa(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const c=Jo(a);return`time(${c.seconds},${c.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?Ha(s.bytesValue).toBase64():"referenceValue"in s?Zt.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let c="[",p=!0;for(const E of a.values||[])p?p=!1:c+=",",c+=xa(E);return c+"]"}(s.arrayValue):"mapValue"in s?function(a){const c=Object.keys(a.fields||{}).sort();let p="{",E=!0;for(const M of c)E?E=!1:p+=",",p+=`${M}:${xa(a.fields[M])}`;return p+"}"}(s.mapValue):zt();var e}function Au(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function ro(s){return!!s&&"integerValue"in s}function io(s){return!!s&&"arrayValue"in s}function Bo(s){return!!s&&"nullValue"in s}function Xo(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Cs(s){return!!s&&"mapValue"in s}function Ra(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ji(s.mapValue.fields,(i,a)=>e.mapValue.fields[i]=Ra(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Ra(s.arrayValue.values[i]);return e}return Object.assign({},s)}class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!Cs(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(i)}setAll(e){let i=$i.emptyPath(),a={},c=[];e.forEach((E,M)=>{if(!i.isImmediateParentOf(M)){const H=this.getFieldsMap(i);this.applyChanges(H,a,c),a={},c=[],i=M.popLast()}E?a[M.lastSegment()]=Ra(E):c.push(M.lastSegment())});const p=this.getFieldsMap(i);this.applyChanges(p,a,c)}delete(e){const i=this.field(e.popLast());Cs(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=i.mapValue.fields[e.get(a)];Cs(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=c),i=c}return i.mapValue.fields}applyChanges(e,i,a){ji(i,(c,p)=>e[c]=p);for(const c of a)delete e[c]}clone(){return new Ds(Ra(this.value))}}function Ol(s){const e=[];return ji(s.fields,(i,a)=>{const c=new $i([i]);if(Cs(a)){const p=Ol(a.mapValue).fields;if(0===p.length)e.push(c);else for(const E of p)e.push(c.child(E))}else e.push(c)}),new $a(e)}class si{constructor(e,i,a,c,p){this.key=e,this.documentType=i,this.version=a,this.data=c,this.documentState=p}static newInvalidDocument(e){return new si(e,0,xt.min(),Ds.empty(),0)}static newFoundDocument(e,i,a){return new si(e,1,i,a,0)}static newNoDocument(e,i){return new si(e,2,i,Ds.empty(),0)}static newUnknownDocument(e,i){return new si(e,3,i,Ds.empty(),2)}convertToFoundDocument(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new si(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ch{constructor(e,i=null,a=[],c=[],p=null,E=null,M=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=c,this.limit=p,this.startAt=E,this.endAt=M,this.A=null}}function lc(s,e=null,i=[],a=[],c=null,p=null,E=null){return new ch(s,e,i,a,c,p,E)}function T(s){const e=At(s);if(null===e.A){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>function(s){return s.field.canonicalString()+s.op.toString()+Sa(s.value)}(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>{return(c=a).field.canonicalString()+c.dir;var c}).join(","),da(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=Ma(e.startAt)),e.endAt&&(i+="|ub:",i+=Ma(e.endAt)),e.A=i}return e.A}function W(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<s.orderBy.length;c++)if(!ea(s.orderBy[c],e.orderBy[c]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let c=0;c<s.filters.length;c++)if((i=s.filters[c]).op!==(a=e.filters[c]).op||!i.field.isEqual(a.field)||!Ks(i.value,a.value))return!1;var i,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!ul(s.startAt,e.startAt)&&ul(s.endAt,e.endAt)}function ue(s){return Zt.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}class Me extends class{}{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?"in"===i||"not-in"===i?this.R(e,i,a):new _t(e,i,a):"array-contains"===i?new Br(e,a):"in"===i?new Ts(e,a):"not-in"===i?new Ys(e,a):"array-contains-any"===i?new ks(e,a):new Me(e,i,a)}static R(e,i,a){return"in"===i?new Qt(e,a):new Wt(e,a)}matches(e){const i=e.data.field(this.field);return"!="===this.op?null!==i&&this.P(Ei(i,this.value)):null!==i&&no(this.value)===no(i)&&this.P(Ei(i,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _t extends Me{constructor(e,i,a){super(e,i,a),this.key=Zt.fromName(a.referenceValue)}matches(e){const i=Zt.comparator(e.key,this.key);return this.P(i)}}class Qt extends Me{constructor(e,i){super(e,"in",i),this.keys=xr(0,i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Wt extends Me{constructor(e,i){super(e,"not-in",i),this.keys=xr(0,i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function xr(s,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(a=>Zt.fromName(a.referenceValue))}class Br extends Me{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return io(i)&&Nl(i.arrayValue,this.value)}}class Ts extends Me{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return null!==i&&Nl(this.value.arrayValue,i)}}class Ys extends Me{constructor(e,i){super(e,"not-in",i)}matches(e){if(Nl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return null!==i&&!Nl(this.value.arrayValue,i)}}class ks extends Me{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!io(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>Nl(this.value.arrayValue,a))}}class so{constructor(e,i){this.position=e,this.before=i}}function Ma(s){return`${s.before?"b":"a"}:${s.position.map(e=>Sa(e)).join(",")}`}class As{constructor(e,i="asc"){this.field=e,this.dir=i}}function ea(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function ha(s,e,i){let a=0;for(let c=0;c<s.position.length;c++){const p=e[c],E=s.position[c];if(a=p.field.isKeyField()?Zt.comparator(Zt.fromName(E.referenceValue),i.key):Ei(E,i.data.field(p.field)),"desc"===p.dir&&(a*=-1),0!==a)break}return s.before?a<=0:a<0}function ul(s,e){if(null===s)return null===e;if(null===e||s.before!==e.before||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ks(s.position[i],e.position[i]))return!1;return!0}class jo{constructor(e,i=null,a=[],c=[],p=null,E="F",M=null,H=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=c,this.limit=p,this.limitType=E,this.startAt=M,this.endAt=H,this.V=null,this.S=null}}function Bf(s,e,i,a,c,p,E,M){return new jo(s,e,i,a,c,p,E,M)}function Ga(s){return new jo(s)}function qa(s){return!da(s.limit)&&"F"===s.limitType}function Na(s){return!da(s.limit)&&"L"===s.limitType}function td(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function Hi(s){for(const e of s.filters)if(e.v())return e.field;return null}function ll(s){return null!==s.collectionGroup}function Pl(s){const e=At(s);if(null===e.V){e.V=[];const i=Hi(e),a=td(e);if(null!==i&&null===a)i.isKeyField()||e.V.push(new As(i)),e.V.push(new As($i.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e.V.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new As($i.keyField(),p))}}}return e.V}function Fs(s){const e=At(s);if(!e.S)if("F"===e.limitType)e.S=lc(e.path,e.collectionGroup,Pl(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const p of Pl(e))i.push(new As(p.field,"desc"===p.dir?"asc":"desc"));const a=e.endAt?new so(e.endAt.position,!e.endAt.before):null,c=e.startAt?new so(e.startAt.position,!e.startAt.before):null;e.S=lc(e.path,e.collectionGroup,i,e.filters,e.limit,a,c)}return e.S}function cl(s,e,i){return new jo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Su(s,e){return W(Fs(s),Fs(e))&&s.limitType===e.limitType}function nd(s){return`${T(Fs(s))}|lt:${s.limitType}`}function cc(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(i=>{return`${(a=i).field.canonicalString()} ${a.op} ${Sa(a.value)}`;var a}).join(", ")}]`),da(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: "+Ma(s.startAt)),s.endAt&&(e+=", endAt: "+Ma(s.endAt)),`Target(${e})`}(Fs(s))}; limitType=${s.limitType})`}function kl(s,e){return e.isFoundDocument()&&function(i,a){const c=a.key.path;return null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Zt.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)}(s,e)&&function(i,a){for(const c of i.explicitOrderBy)if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(s,e)&&function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0}(s,e)&&(a=e,!((i=s).startAt&&!ha(i.startAt,Pl(i),a)||i.endAt&&ha(i.endAt,Pl(i),a)));var i,a}function xu(s){return(e,i)=>{let a=!1;for(const c of Pl(s)){const p=ta(c,e,i);if(0!==p)return p;a=a||c.field.isKeyField()}return 0}}function ta(s,e,i){const a=s.field.isKeyField()?Zt.comparator(e.key,i.key):function(c,p,E){const M=p.data.field(c),H=E.data.field(c);return null!==M&&null!==H?Ei(M,H):zt()}(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return zt()}}function Fl(s,e){if(s.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(e)?"-0":e}}function Wa(s){return{integerValue:""+s}}function dh(s,e){return al(e)?Wa(e):Fl(s,e)}class Ll{constructor(){this._=void 0}}function rd(s,e,i){return s instanceof dl?function(a,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&(p.fields.__previous_value__=c),{mapValue:p}}(i,e):s instanceof za?Ru(s,e):s instanceof fa?hh(s,e):function(a,c){const p=id(a,c),E=sd(p)+sd(a.C);return ro(p)&&ro(a.C)?Wa(E):Fl(a.N,E)}(s,e)}function dc(s,e,i){return s instanceof za?Ru(s,e):s instanceof fa?hh(s,e):i}function id(s,e){return s instanceof Vl?ro(i=e)||(a=i)&&"doubleValue"in a?e:{integerValue:0}:null;var a,i}class dl extends Ll{}class za extends Ll{constructor(e){super(),this.elements=e}}function Ru(s,e){const i=od(e);for(const a of s.elements)i.some(c=>Ks(c,a))||i.push(a);return{arrayValue:{values:i}}}class fa extends Ll{constructor(e){super(),this.elements=e}}function hh(s,e){let i=od(e);for(const a of s.elements)i=i.filter(c=>!Ks(c,a));return{arrayValue:{values:i}}}class Vl extends Ll{constructor(e,i){super(),this.N=e,this.C=i}}function sd(s){return Ri(s.integerValue||s.doubleValue)}function od(s){return io(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class hc{constructor(e,i){this.field=e,this.transform=i}}class $f{constructor(e,i){this.version=e,this.transformResults=i}}class gs{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Za(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class hl{}function su(s,e,i){s instanceof Nu?function(a,c,p){const E=a.value.clone(),M=ud(a.fieldTransforms,c,p.transformResults);E.setAll(M),c.convertToFoundDocument(p.version,E).setHasCommittedMutations()}(s,e,i):s instanceof Oa?function(a,c,p){if(!Za(a.precondition,c))return void c.convertToUnknownDocument(p.version);const E=ud(a.fieldTransforms,c,p.transformResults),M=c.data;M.setAll(fc(a)),M.setAll(E),c.convertToFoundDocument(p.version,M).setHasCommittedMutations()}(s,e,i):e.convertToNoDocument(i.version).setHasCommittedMutations()}function ad(s,e,i){var c;s instanceof Nu?function(a,c,p){if(!Za(a.precondition,c))return;const E=a.value.clone(),M=ou(a.fieldTransforms,p,c);E.setAll(M),c.convertToFoundDocument(Mu(c),E).setHasLocalMutations()}(s,e,i):s instanceof Oa?function(a,c,p){if(!Za(a.precondition,c))return;const E=ou(a.fieldTransforms,p,c),M=c.data;M.setAll(fc(a)),M.setAll(E),c.convertToFoundDocument(Mu(c),M).setHasLocalMutations()}(s,e,i):Za(s.precondition,c=e)&&c.convertToNoDocument(xt.min())}function fh(s,e){let i=null;for(const a of s.fieldTransforms){const c=e.data.field(a.field),p=id(a.transform,c||null);null!=p&&(null==i&&(i=Ds.empty()),i.set(a.field,p))}return i||null}function Hf(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(i=s.fieldTransforms)&&void 0===a||i&&a&&Kn(i,a,(c,p)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(i=s.transform)instanceof za&&a instanceof za||i instanceof fa&&a instanceof fa?Kn(i.elements,a.elements,Ks):i instanceof Vl&&a instanceof Vl?Ks(i.C,a.C):i instanceof dl&&a instanceof dl);var i,a}(c,p))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var i,a}function Mu(s){return s.isFoundDocument()?s.version:xt.min()}class Nu extends hl{constructor(e,i,a,c=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=c,this.type=0}}class Oa extends hl{constructor(e,i,a,c,p=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=c,this.fieldTransforms=p,this.type=1}}function fc(s){const e=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}}),e}function ud(s,e,i){const a=new Map;on(s.length===i.length);for(let c=0;c<i.length;c++){const p=s[c],E=p.transform,M=e.data.field(p.field);a.set(p.field,dc(E,M,i[c]))}return a}function ou(s,e,i){const a=new Map;for(const c of s){const p=c.transform,E=i.data.field(c.field);a.set(c.field,rd(p,E,e))}return a}class Ul extends hl{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}}class ph extends hl{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}}class Ou{constructor(e){this.count=e}}var ms,Pr;function na(s){switch(s){default:return zt();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function Pu(s){if(void 0===s)return Sr("GRPC error has no .code"),et.UNKNOWN;switch(s){case ms.OK:return et.OK;case ms.CANCELLED:return et.CANCELLED;case ms.UNKNOWN:return et.UNKNOWN;case ms.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case ms.INTERNAL:return et.INTERNAL;case ms.UNAVAILABLE:return et.UNAVAILABLE;case ms.UNAUTHENTICATED:return et.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case ms.NOT_FOUND:return et.NOT_FOUND;case ms.ALREADY_EXISTS:return et.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return et.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case ms.ABORTED:return et.ABORTED;case ms.OUT_OF_RANGE:return et.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return et.UNIMPLEMENTED;case ms.DATA_LOSS:return et.DATA_LOSS;default:return zt()}}(Pr=ms||(ms={}))[Pr.OK=0]="OK",Pr[Pr.CANCELLED=1]="CANCELLED",Pr[Pr.UNKNOWN=2]="UNKNOWN",Pr[Pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pr[Pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pr[Pr.NOT_FOUND=5]="NOT_FOUND",Pr[Pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pr[Pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pr[Pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pr[Pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pr[Pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pr[Pr.ABORTED=10]="ABORTED",Pr[Pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pr[Pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pr[Pr.INTERNAL=13]="INTERNAL",Pr[Pr.UNAVAILABLE=14]="UNAVAILABLE",Pr[Pr.DATA_LOSS=15]="DATA_LOSS";class Ji{constructor(e,i){this.comparator=e,this.root=i||Qs.EMPTY}insert(e,i){return new Ji(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Qs.BLACK,null,null))}remove(e){return new Ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qs.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(0===c)return i+a.left.size;c<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,i,a,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=i?a(e.key,i):1,c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qs{constructor(e,i,a,c,p){this.key=e,this.value=i,this.color=null!=a?a:Qs.RED,this.left=null!=c?c:Qs.EMPTY,this.right=null!=p?p:Qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,c,p){return new Qs(null!=e?e:this.key,null!=i?i:this.value,null!=a?a:this.color,null!=c?c:this.left,null!=p?p:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let c=this;const p=a(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,i,a),null):0===p?c.copy(null,i,null,null,null):c.copy(null,null,null,null,c.right.insert(e,i,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,c=this;if(i(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,i),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===i(e,c.key)){if(c.right.isEmpty())return Qs.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,i))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw zt();const e=this.left.check();if(e!==this.right.check())throw zt();return e+(this.isRed()?0:1)}}Qs.EMPTY=null,Qs.RED=!0,Qs.BLACK=!1,Qs.EMPTY=new class{constructor(){this.size=0}get key(){throw zt()}get value(){throw zt()}get color(){throw zt()}get left(){throw zt()}get right(){throw zt()}copy(s,e,i,a,c){return this}insert(s,e,i){return new Qs(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mi{constructor(e){this.comparator=e,this.data=new Ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;i(c.key)}}forEachWhile(e,i){let a;for(a=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new gh(this.data.getIterator())}getIteratorFrom(e){return new gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const c=i.getNext().key,p=a.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new Mi(this.comparator);return i.data=e,i}}class gh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Gf=new Ji(Zt.comparator);function fo(){return Gf}const qf=new Ji(Zt.comparator);function ld(){return qf}const Wf=new Ji(Zt.comparator);function mh(){return Wf}const zg=new Mi(Zt.comparator);function Wr(...s){let e=zg;for(const i of s)e=e.add(i);return e}const ku=new Mi(ht);function Bl(){return ku}class Io{constructor(e,i,a,c,p){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,i){const a=new Map;return a.set(e,pa.createSynthesizedTargetChangeForCurrentChange(e,i)),new Io(xt.min(),a,Bl(),fo(),Wr())}}class pa{constructor(e,i,a,c,p){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,i){return new pa(Qi.EMPTY_BYTE_STRING,i,Wr(),Wr(),Wr())}}class Fu{constructor(e,i,a,c){this.k=e,this.removedTargetIds=i,this.key=a,this.$=c}}class cd{constructor(e,i){this.targetId=e,this.O=i}}class dd{constructor(e,i,a=Qi.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=c}}class gc{constructor(){this.F=0,this.M=mc(),this.L=Qi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Wr(),i=Wr(),a=Wr();return this.M.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:i=i.add(c);break;case 1:a=a.add(c);break;default:zt()}}),new pa(this.L,this.B,e,i,a)}G(){this.U=!1,this.M=mc()}H(e,i){this.U=!0,this.M=this.M.insert(e,i)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Zg{constructor(e){this.tt=e,this.et=new Map,this.nt=fo(),this.st=zf(),this.it=new Mi(ht)}rt(e){for(const i of e.k)e.$&&e.$.isFoundDocument()?this.ot(i,e.$):this.at(i,e.key,e.$);for(const i of e.removedTargetIds)this.at(i,e.key,e.$)}ct(e){this.forEachTarget(e,i=>{const a=this.ut(i);switch(e.state){case 0:this.ht(i)&&a.j(e.resumeToken);break;case 1:a.X(),a.q||a.G(),a.j(e.resumeToken);break;case 2:a.X(),a.q||this.removeTarget(i);break;case 3:this.ht(i)&&(a.Z(),a.j(e.resumeToken));break;case 4:this.ht(i)&&(this.lt(i),a.j(e.resumeToken));break;default:zt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.et.forEach((a,c)=>{this.ht(c)&&i(c)})}ft(e){const i=e.targetId,a=e.O.count,c=this.dt(i);if(c){const p=c.target;if(ue(p))if(0===a){const E=new Zt(p.path);this.at(i,E,si.newNoDocument(E,xt.min()))}else on(1===a);else this.wt(i)!==a&&(this.lt(i),this.it=this.it.add(i))}}_t(e){const i=new Map;this.et.forEach((p,E)=>{const M=this.dt(E);if(M){if(p.current&&ue(M.target)){const H=new Zt(M.target.path);null!==this.nt.get(H)||this.gt(E,H)||this.at(E,H,si.newNoDocument(H,e))}p.K&&(i.set(E,p.W()),p.G())}});let a=Wr();this.st.forEach((p,E)=>{let M=!0;E.forEachWhile(H=>{const ee=this.dt(H);return!ee||2===ee.purpose||(M=!1,!1)}),M&&(a=a.add(p))});const c=new Io(e,i,this.it,this.nt,a);return this.nt=fo(),this.st=zf(),this.it=new Mi(ht),c}ot(e,i){if(!this.ht(e))return;const a=this.gt(e,i.key)?2:0;this.ut(e).H(i.key,a),this.nt=this.nt.insert(i.key,i),this.st=this.st.insert(i.key,this.yt(i.key).add(e))}at(e,i,a){if(!this.ht(e))return;const c=this.ut(e);this.gt(e,i)?c.H(i,1):c.J(i),this.st=this.st.insert(i,this.yt(i).delete(e)),a&&(this.nt=this.nt.insert(i,a))}removeTarget(e){this.et.delete(e)}wt(e){const i=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let i=this.et.get(e);return i||(i=new gc,this.et.set(e,i)),i}yt(e){let i=this.st.get(e);return i||(i=new Mi(ht),this.st=this.st.insert(e,i)),i}ht(e){const i=null!==this.dt(e);return i||Dt("WatchChangeAggregator","Detected inactive target",e),i}dt(e){const i=this.et.get(e);return i&&i.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new gc),this.tt.getRemoteKeysForTarget(e).forEach(i=>{this.at(e,i,null)})}gt(e,i){return this.tt.getRemoteKeysForTarget(e).has(i)}}function zf(){return new Ji(Zt.comparator)}function mc(){return new Ji(Zt.comparator)}const yc={asc:"ASCENDING",desc:"DESCENDING"},hd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Kg{constructor(e,i){this.databaseId=e,this.D=i}}function _c(s,e){return s.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fd(s,e){return s.D?e.toBase64():e.toUint8Array()}function vc(s,e){return _c(s,e.toTimestamp())}function Ls(s){return on(!!s),xt.fromTimestamp(function(e){const i=Jo(e);return new Ln(i.seconds,i.nanos)}(s))}function Ec(s,e){return(i=s,new qn(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function yh(s){const e=qn.fromString(s);return on(_d(e)),e}function fl(s,e){return Ec(s.databaseId,e.path)}function $o(s,e){const i=yh(e);if(i.get(1)!==s.databaseId.projectId)throw new yt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new yt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Zt(wi(i))}function wc(s,e){return Ec(s.databaseId,e)}function jl(s){const e=yh(s);return 4===e.length?qn.emptyPath():wi(e)}function Lu(s){return new qn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function wi(s){return on(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function pd(s,e,i){return{name:fl(s,e),fields:i.value.mapValue.fields}}function _h(s,e,i){const a=$o(s,e.name),c=Ls(e.updateTime),p=new Ds({mapValue:{fields:e.fields}}),E=si.newFoundDocument(a,c,p);return i&&E.setHasCommittedMutations(),i?E.setHasCommittedMutations():E}function au(s,e){let i;if(e instanceof Nu)i={update:pd(s,e.key,e.value)};else if(e instanceof Ul)i={delete:fl(s,e.key)};else if(e instanceof Oa)i={update:pd(s,e.key,e.data),updateMask:yd(e.fieldMask)};else{if(!(e instanceof ph))return zt();i={verify:fl(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(c,p){const E=p.transform;if(E instanceof dl)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof za)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof fa)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Vl)return{fieldPath:p.field.canonicalString(),increment:E.C};throw zt()}(0,a))),e.precondition.isNone||(i.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:vc(s,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:zt()),i;var c}function gd(s,e){const i=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?gs.updateTime(Ls(c.updateTime)):void 0!==c.exists?gs.exists(c.exists):gs.none():gs.none(),a=e.updateTransforms?e.updateTransforms.map(c=>function(p,E){let M=null;"setToServerValue"in E?(on("REQUEST_TIME"===E.setToServerValue),M=new dl):"appendMissingElements"in E?M=new za(E.appendMissingElements.values||[]):"removeAllFromArray"in E?M=new fa(E.removeAllFromArray.values||[]):"increment"in E?M=new Vl(p,E.increment):zt();const H=$i.fromServerFormat(E.fieldPath);return new hc(H,M)}(s,c)):[];var c;if(e.update){const c=$o(s,e.update.name),p=new Ds({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new $a((e.updateMask.fieldPaths||[]).map(ee=>$i.fromServerFormat(ee)));return new Oa(c,p,E,i,a)}return new Nu(c,p,i,a)}if(e.delete){const c=$o(s,e.delete);return new Ul(c,i)}if(e.verify){const c=$o(s,e.verify);return new ph(c,i)}return zt()}function bc(s,e){return{documents:[wc(s,e.path)]}}function Ic(s,e){const i={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(i.parent=wc(s,a),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=wc(s,a.popLast()),i.structuredQuery.from=[{collectionId:a.lastSegment()}]);const c=function(M){if(0===M.length)return;const H=M.map(ee=>function(le){if("=="===le.op){if(Xo(le.value))return{unaryFilter:{field:is(le.field),op:"IS_NAN"}};if(Bo(le.value))return{unaryFilter:{field:is(le.field),op:"IS_NULL"}}}else if("!="===le.op){if(Xo(le.value))return{unaryFilter:{field:is(le.field),op:"IS_NOT_NAN"}};if(Bo(le.value))return{unaryFilter:{field:is(le.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(le.field),op:Eh(le.op),value:le.value}}}(ee));return 1===H.length?H[0]:{compositeFilter:{op:"AND",filters:H}}}(e.filters);c&&(i.structuredQuery.where=c);const p=function(M){if(0!==M.length)return M.map(H=>{return{field:is((ee=H).field),direction:vh(ee.dir)};var ee})}(e.orderBy);p&&(i.structuredQuery.orderBy=p);const E=(H=e.limit,s.D||da(H)?H:{value:H});var H;return null!==E&&(i.structuredQuery.limit=E),e.startAt&&(i.structuredQuery.startAt=Gi(e.startAt)),e.endAt&&(i.structuredQuery.endAt=Gi(e.endAt)),i}function Kf(s){let e=jl(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let c=null;if(a>0){on(1===a);const le=i.from[0];le.allDescendants?c=le.collectionId:e=e.child(le.collectionId)}let p=[];i.where&&(p=pl(i.where));let E=[];i.orderBy&&(E=i.orderBy.map(le=>{return new As(ga((Ne=le).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ne.direction));var Ne}));let M=null;i.limit&&(M=function(le){let Ne;return Ne="object"==typeof le?le.value:le,da(Ne)?null:Ne}(i.limit));let H=null;i.startAt&&(H=Hl(i.startAt));let ee=null;return i.endAt&&(ee=Hl(i.endAt)),Bf(e,c,E,p,M,"F",H,ee)}function pl(s){return s?void 0!==s.unaryFilter?[md(s)]:void 0!==s.fieldFilter?[oo(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>pl(e)).reduce((e,i)=>e.concat(i)):zt():[]}function Gi(s){return{before:s.before,values:s.position}}function Hl(s){return new so(s.values||[],!!s.before)}function vh(s){return yc[s]}function Eh(s){return hd[s]}function is(s){return{fieldPath:s.canonicalString()}}function ga(s){return $i.fromServerFormat(s.fieldPath)}function oo(s){return Me.create(ga(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zt()}}(s.fieldFilter.op),s.fieldFilter.value)}function md(s){switch(s.unaryFilter.op){case"IS_NAN":const e=ga(s.unaryFilter.field);return Me.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=ga(s.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ga(s.unaryFilter.field);return Me.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ga(s.unaryFilter.field);return Me.create(c,"!=",{nullValue:"NULL_VALUE"});default:return zt()}}function yd(s){const e=[];return s.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function _d(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Ss(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=vd(e)),e=gl(s.get(i),e);return vd(e)}function gl(s,e){let i=e;const a=s.length;for(let c=0;c<a;c++){const p=s.charAt(c);switch(p){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=p}}return i}function vd(s){return s+"\x01\x01"}function ma(s){const e=s.length;if(on(e>=2),2===e)return on("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),qn.emptyPath();const i=e-2,a=[];let c="";for(let p=0;p<e;){const E=s.indexOf("\x01",p);switch((E<0||E>i)&&zt(),s.charAt(E+1)){case"\x01":const M=s.substring(p,E);let H;0===c.length?H=M:(c+=M,H=c,c=""),a.push(H);break;case"\x10":c+=s.substring(p,E),c+="\0";break;case"\x11":c+=s.substring(p,E+1);break;default:zt()}p=E+2}return new qn(a)}class Ed{constructor(e,i){this.seconds=e,this.nanoseconds=i}}class Ho{constructor(e,i,a){this.ownerId=e,this.allowTabSynchronization=i,this.leaseTimestampMs=a}}Ho.store="owner",Ho.key="owner";class uu{constructor(e,i,a){this.userId=e,this.lastAcknowledgedBatchId=i,this.lastStreamToken=a}}uu.store="mutationQueues",uu.keyPath="userId";class pi{constructor(e,i,a,c,p){this.userId=e,this.batchId=i,this.localWriteTimeMs=a,this.baseMutations=c,this.mutations=p}}pi.store="mutations",pi.keyPath="batchId",pi.userMutationsIndex="userMutationsIndex",pi.userMutationsKeyPath=["userId","batchId"];class Vs{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,i){return[e,Ss(i)]}static key(e,i,a){return[e,Ss(i),a]}}Vs.store="documentMutations",Vs.PLACEHOLDER=new Vs;class y{constructor(e,i){this.path=e,this.readTime=i}}class d{constructor(e,i){this.path=e,this.version=i}}class h{constructor(e,i,a,c,p,E){this.unknownDocument=e,this.noDocument=i,this.document=a,this.hasCommittedMutations=c,this.readTime=p,this.parentPath=E}}h.store="remoteDocuments",h.readTimeIndex="readTimeIndex",h.readTimeIndexPath="readTime",h.collectionReadTimeIndex="collectionReadTimeIndex",h.collectionReadTimeIndexPath=["parentPath","readTime"];class w{constructor(e){this.byteSize=e}}w.store="remoteDocumentGlobal",w.key="remoteDocumentGlobalKey";class V{constructor(e,i,a,c,p,E,M){this.targetId=e,this.canonicalId=i,this.readTime=a,this.resumeToken=c,this.lastListenSequenceNumber=p,this.lastLimboFreeSnapshotVersion=E,this.query=M}}V.store="targets",V.keyPath="targetId",V.queryTargetsIndexName="queryTargetsIndex",V.queryTargetsKeyPath=["canonicalId","targetId"];class K{constructor(e,i,a){this.targetId=e,this.path=i,this.sequenceNumber=a}}K.store="targetDocuments",K.keyPath=["targetId","path"],K.documentTargetsIndex="documentTargetsIndex",K.documentTargetsKeyPath=["path","targetId"];class Ae{constructor(e,i,a,c){this.highestTargetId=e,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=a,this.targetCount=c}}Ae.key="targetGlobalKey",Ae.store="targetGlobal";class nt{constructor(e,i){this.collectionId=e,this.parent=i}}nt.store="collectionParents",nt.keyPath=["collectionId","parent"];class St{constructor(e,i,a,c){this.clientId=e,this.updateTimeMs=i,this.networkEnabled=a,this.inForeground=c}}St.store="clientMetadata",St.keyPath="clientId";class Jt{constructor(e,i,a){this.bundleId=e,this.createTime=i,this.version=a}}Jt.store="bundles",Jt.keyPath="bundleId";class Dn{constructor(e,i,a){this.name=e,this.readTime=i,this.bundledQuery=a}}Dn.store="namedQueries",Dn.keyPath="name";const Sn=[uu.store,pi.store,Vs.store,h.store,V.store,Ho.store,Ae.store,K.store,St.store,w.store,nt.store,Jt.store,Dn.store],ys="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class po{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&zt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ct((a,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(a,c)},this.catchCallback=p=>{this.wrapFailure(i,p).next(a,c)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof ct?i:ct.resolve(i)}catch(i){return ct.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):ct.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):ct.reject(i)}static resolve(e){return new ct((i,a)=>{i(e)})}static reject(e){return new ct((i,a)=>{a(e)})}static waitFor(e){return new ct((i,a)=>{let c=0,p=0,E=!1;e.forEach(M=>{++c,M.next(()=>{++p,E&&p===c&&i()},H=>a(H))}),E=!0,p===c&&i()})}static or(e){let i=ct.resolve(!1);for(const a of e)i=i.next(c=>c?ct.resolve(c):a());return i}static forEach(e,i){const a=[];return e.forEach((c,p)=>{a.push(i.call(this,c,p))}),this.waitFor(a)}}class ml{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.Et=new fi,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{i.error?this.Et.reject(new Vu(e,i.error)):this.Et.resolve()},this.transaction.onerror=a=>{const c=Dc(a.target.error);this.Et.reject(new Vu(e,c))}}static open(e,i,a,c){try{return new ml(i,e.transaction(c,a))}catch(p){throw new Vu(i,p)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const i=this.transaction.objectStore(e);return new wd(i)}}class Go{constructor(e,i,a){this.name=e,this.version=i,this.At=a,12.2===Go.Rt((0,Ze.z$)())&&Sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Dt("SimpleDb","Removing database:",e),cu(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Ze.hl)())return!1;if(Go.Pt())return!0;const e=(0,Ze.z$)(),i=Go.Rt(e),a=0<i&&i<10,c=Go.vt(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||p)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,i){return e.store(i)}static Rt(e){const i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static vt(e){const i=e.match(/Android ([\d.]+)/i),a=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Dt(e){var i=this;return(0,re.Z)(function*(){return i.db||(Dt("SimpleDb","Opening database:",i.name),i.db=yield new Promise((a,c)=>{const p=indexedDB.open(i.name,i.version);p.onsuccess=E=>{a(E.target.result)},p.onblocked=()=>{c(new Vu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=E=>{const M=E.target.error;c("VersionError"===M.name?new yt(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new yt(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Vu(e,M))},p.onupgradeneeded=E=>{Dt("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',E.oldVersion),i.At.Ct(E.target.result,p.transaction,E.oldVersion,i.version).next(()=>{Dt("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.Nt&&(i.db.onversionchange=a=>i.Nt(a)),i.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,a,c){var p=this;return(0,re.Z)(function*(){const E="readonly"===i;let M=0;for(;;){++M;try{p.db=yield p.Dt(e);const H=ml.open(p.db,e,E?"readonly":"readwrite",a),ee=c(H).catch(le=>(H.abort(le),ct.reject(le))).toPromise();return ee.catch(()=>{}),yield H.It,ee}catch(H){const ee="FirebaseError"!==H.name&&M<3;if(Dt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",ee),p.close(),!ee)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wh{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return cu(this.kt.delete())}}class Vu extends yt{constructor(e,i){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function lu(s){return"IndexedDbTransactionError"===s.name}class wd{constructor(e){this.store=e}put(e,i){let a;return void 0!==i?(Dt("SimpleDb","PUT",this.store.name,e,i),a=this.store.put(i,e)):(Dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),cu(a)}add(e){return Dt("SimpleDb","ADD",this.store.name,e,e),cu(this.store.add(e))}get(e){return cu(this.store.get(e)).next(i=>(void 0===i&&(i=null),Dt("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return Dt("SimpleDb","DELETE",this.store.name,e),cu(this.store.delete(e))}count(){return Dt("SimpleDb","COUNT",this.store.name),cu(this.store.count())}Lt(e,i){const a=this.cursor(this.options(e,i)),c=[];return this.Bt(a,(p,E)=>{c.push(E)}).next(()=>c)}Ut(e,i){Dt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,i);a.qt=!1;const c=this.cursor(a);return this.Bt(c,(p,E,M)=>M.delete())}Kt(e,i){let a;i?a=e:(a={},i=e);const c=this.cursor(a);return this.Bt(c,i)}jt(e){const i=this.cursor({});return new ct((a,c)=>{i.onerror=p=>{const E=Dc(p.target.error);c(E)},i.onsuccess=p=>{const E=p.target.result;E?e(E.primaryKey,E.value).next(M=>{M?E.continue():a()}):a()}})}Bt(e,i){const a=[];return new ct((c,p)=>{e.onerror=E=>{p(E.target.error)},e.onsuccess=E=>{const M=E.target.result;if(!M)return void c();const H=new wh(M),ee=i(M.primaryKey,M.value,H);if(ee instanceof ct){const le=ee.catch(Ne=>(H.done(),ct.reject(Ne)));a.push(le)}H.isDone?c():null===H.Ft?M.continue():M.continue(H.Ft)}}).next(()=>ct.waitFor(a))}options(e,i){let a;return void 0!==e&&("string"==typeof e?a=e:i=e),{index:a,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){const a=this.store.index(e.index);return e.qt?a.openKeyCursor(e.range,i):a.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}function cu(s){return new ct((e,i)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const c=Dc(a.target.error);i(c)}})}let Cc=!1;function Dc(s){const e=Go.Rt((0,Ze.z$)());if(e>=12.2&&e<13){const i="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(i)>=0){const a=new yt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cc||(Cc=!0,setTimeout(()=>{throw a},0)),a}}return s}class Uu extends po{constructor(e,i){super(),this.Qt=e,this.currentSequenceNumber=i}}function bi(s,e){const i=At(s);return Go.St(i.Qt,e)}class bh{constructor(e,i,a,c){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&su(p,e,a[c])}}applyToLocalView(e){for(const i of this.baseMutations)i.key.isEqual(e.key)&&ad(i,e,this.localWriteTime);for(const i of this.mutations)i.key.isEqual(e.key)&&ad(i,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(i=>{const a=e.get(i.key),c=a;this.applyToLocalView(c),a.isValidDocument()||c.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Wr())}isEqual(e){return this.batchId===e.batchId&&Kn(this.mutations,e.mutations,(i,a)=>Hf(i,a))&&Kn(this.baseMutations,e.baseMutations,(i,a)=>Hf(i,a))}}class Yg{constructor(e,i,a,c){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=c}static from(e,i,a){on(e.mutations.length===a.length);let c=mh();const p=e.mutations;for(let E=0;E<p.length;E++)c=c.insert(p[E].key,a[E].version);return new Yg(e,i,a,c)}}class Bu{constructor(e,i,a,c,p=xt.min(),E=xt.min(),M=Qi.EMPTY_BYTE_STRING){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=M}withSequenceNumber(e){return new Bu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,i){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class l_{constructor(e){this.Wt=e}}function Pa(s,e){if(e.document)return _h(s.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const i=Zt.fromSegments(e.noDocument.path),a=du(e.noDocument.readTime),c=si.newNoDocument(i,a);return e.hasCommittedMutations?c.setHasCommittedMutations():c}if(e.unknownDocument){const i=Zt.fromSegments(e.unknownDocument.path),a=du(e.unknownDocument.version);return si.newUnknownDocument(i,a)}return zt()}function Ih(s,e,i){const a=bd(i),c=e.key.path.popLast().toArray();if(e.isFoundDocument()){const p={name:fl(M=s.Wt,(H=e).key),fields:H.data.value.mapValue.fields,updateTime:_c(M,H.version.toTimestamp())};return new h(null,null,p,e.hasCommittedMutations,a,c)}var M,H;if(e.isNoDocument()){const p=e.key.path.toArray(),E=Gl(e.version),M=e.hasCommittedMutations;return new h(null,new y(p,E),null,M,a,c)}if(e.isUnknownDocument()){const p=e.key.path.toArray(),E=Gl(e.version);return new h(new d(p,E),null,null,!0,a,c)}return zt()}function bd(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Qg(s){const e=new Ln(s[0],s[1]);return xt.fromTimestamp(e)}function Gl(s){const e=s.toTimestamp();return new Ed(e.seconds,e.nanoseconds)}function du(s){const e=new Ln(s.seconds,s.nanoseconds);return xt.fromTimestamp(e)}function ql(s,e){const i=(e.baseMutations||[]).map(p=>gd(s.Wt,p));for(let p=0;p<e.mutations.length-1;++p){const E=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(E.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const a=e.mutations.map(p=>gd(s.Wt,p)),c=Ln.fromMillis(e.localWriteTimeMs);return new bh(e.batchId,c,i,a)}function Tc(s){const e=du(s.readTime),i=void 0!==s.lastLimboFreeSnapshotVersion?du(s.lastLimboFreeSnapshotVersion):xt.min();let a;var c;return void 0!==s.query.documents?(on(1===(c=s.query).documents.length),a=Fs(Ga(jl(c.documents[0])))):a=Fs(Kf(s.query)),new Bu(a,s.targetId,0,s.lastListenSequenceNumber,e,i,Qi.fromBase64String(s.resumeToken))}function Ch(s,e){const i=Gl(e.snapshotVersion),a=Gl(e.lastLimboFreeSnapshotVersion);let c;c=ue(e.target)?bc(s.Wt,e.target):Ic(s.Wt,e.target);const p=e.resumeToken.toBase64();return new V(e.targetId,T(e.target),i,p,e.sequenceNumber,a,c)}function Id(s){const e=Kf({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?cl(e,e.limit,"L"):e}class Jg{getBundleMetadata(e,i){return c_(e).get(i).next(a=>{if(a)return{id:(c=a).bundleId,createTime:du(c.createTime),version:c.version};var c})}saveBundleMetadata(e,i){return c_(e).put({bundleId:(a=i).id,createTime:Gl(Ls(a.createTime)),version:a.version});var a}getNamedQuery(e,i){return Wl(e).get(i).next(a=>{if(a)return{name:(c=a).name,query:Id(c.bundledQuery),readTime:du(c.readTime)};var c})}saveNamedQuery(e,i){return Wl(e).put({name:(a=i).name,readTime:Gl(Ls(a.readTime)),bundledQuery:a.bundledQuery});var a}}function c_(s){return bi(s,Jt.store)}function Wl(s){return bi(s,Dn.store)}class Qf{constructor(){this.Gt=new Dh}addToCollectionParentIndex(e,i){return this.Gt.add(i),ct.resolve()}getCollectionParents(e,i){return ct.resolve(this.Gt.getEntries(i))}}class Dh{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),c=this.index[i]||new Mi(qn.comparator),p=!c.has(a);return this.index[i]=c.add(a),p}has(e){const i=e.lastSegment(),a=e.popLast(),c=this.index[i];return c&&c.has(a)}getEntries(e){return(this.index[e]||new Mi(qn.comparator)).toArray()}}class d_{constructor(){this.zt=new Dh}addToCollectionParentIndex(e,i){if(!this.zt.has(i)){const a=i.lastSegment(),c=i.popLast();e.addOnCommittedListener(()=>{this.zt.add(i)});const p={collectionId:a,parent:Ss(c)};return Th(e).put(p)}return ct.resolve()}getCollectionParents(e,i){const a=[],c=IDBKeyRange.bound([i,""],[fn(i),""],!1,!0);return Th(e).Lt(c).next(p=>{for(const E of p){if(E.collectionId!==i)break;a.push(ma(E.parent))}return a})}}function Th(s){return bi(s,nt.store)}const Xg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ra{constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new ra(e,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function em(s,e,i){const a=s.store(pi.store),c=s.store(Vs.store),p=[],E=IDBKeyRange.only(i.batchId);let M=0;const H=a.Kt({range:E},(le,Ne,st)=>(M++,st.delete()));p.push(H.next(()=>{on(1===M)}));const ee=[];for(const le of i.mutations){const Ne=Vs.key(e,le.key.path,i.batchId);p.push(c.delete(Ne)),ee.push(le.key)}return ct.waitFor(p).next(()=>ee)}function Ah(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw zt();e=s.noDocument}return JSON.stringify(e).length}ra.DEFAULT_COLLECTION_PERCENTILE=10,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ra.DEFAULT=new ra(41943040,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ra.DISABLED=new ra(-1,0,0);class Jf{constructor(e,i,a,c){this.userId=e,this.N=i,this.Ht=a,this.referenceDelegate=c,this.Jt={}}static Yt(e,i,a,c){on(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Jf(p,i,a,c)}checkEmpty(e){let i=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ju(e).Kt({index:pi.userMutationsIndex,range:a},(c,p,E)=>{i=!1,E.done()}).next(()=>i)}addMutationBatch(e,i,a,c){const p=yl(e),E=ju(e);return E.add({}).next(M=>{on("number"==typeof M);const H=new bh(M,i,a,c),ee=function(st,pt,Nt){const ln=Nt.baseMutations.map(ss=>au(st.Wt,ss)),ar=Nt.mutations.map(ss=>au(st.Wt,ss));return new pi(pt,Nt.batchId,Nt.localWriteTime.toMillis(),ln,ar)}(this.N,this.userId,H),le=[];let Ne=new Mi((st,pt)=>ht(st.canonicalString(),pt.canonicalString()));for(const st of c){const pt=Vs.key(this.userId,st.key.path,M);Ne=Ne.add(st.key.path.popLast()),le.push(E.put(ee)),le.push(p.put(pt,Vs.PLACEHOLDER))}return Ne.forEach(st=>{le.push(this.Ht.addToCollectionParentIndex(e,st))}),e.addOnCommittedListener(()=>{this.Jt[M]=H.keys()}),ct.waitFor(le).next(()=>H)})}lookupMutationBatch(e,i){return ju(e).get(i).next(a=>a?(on(a.userId===this.userId),ql(this.N,a)):null)}Xt(e,i){return this.Jt[i]?ct.resolve(this.Jt[i]):this.lookupMutationBatch(e,i).next(a=>{if(a){const c=a.keys();return this.Jt[i]=c,c}return null})}getNextMutationBatchAfterBatchId(e,i){const a=i+1,c=IDBKeyRange.lowerBound([this.userId,a]);let p=null;return ju(e).Kt({index:pi.userMutationsIndex,range:c},(E,M,H)=>{M.userId===this.userId&&(on(M.batchId>=a),p=ql(this.N,M)),H.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return ju(e).Kt({index:pi.userMutationsIndex,range:i,reverse:!0},(c,p,E)=>{a=p.batchId,E.done()}).next(()=>a)}getAllMutationBatches(e){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ju(e).Lt(pi.userMutationsIndex,i).next(a=>a.map(c=>ql(this.N,c)))}getAllMutationBatchesAffectingDocumentKey(e,i){const a=Vs.prefixForPath(this.userId,i.path),c=IDBKeyRange.lowerBound(a),p=[];return yl(e).Kt({range:c},(E,M,H)=>{const[ee,le,Ne]=E,st=ma(le);if(ee===this.userId&&i.path.isEqual(st))return ju(e).get(Ne).next(pt=>{if(!pt)throw zt();on(pt.userId===this.userId),p.push(ql(this.N,pt))});H.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Mi(ht);const c=[];return i.forEach(p=>{const E=Vs.prefixForPath(this.userId,p.path),M=IDBKeyRange.lowerBound(E),H=yl(e).Kt({range:M},(ee,le,Ne)=>{const[st,pt,Nt]=ee,ln=ma(pt);st===this.userId&&p.path.isEqual(ln)?a=a.add(Nt):Ne.done()});c.push(H)}),ct.waitFor(c).next(()=>this.Zt(e,a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,c=a.length+1,p=Vs.prefixForPath(this.userId,a),E=IDBKeyRange.lowerBound(p);let M=new Mi(ht);return yl(e).Kt({range:E},(H,ee,le)=>{const[Ne,st,pt]=H,Nt=ma(st);Ne===this.userId&&a.isPrefixOf(Nt)?Nt.length===c&&(M=M.add(pt)):le.done()}).next(()=>this.Zt(e,M))}Zt(e,i){const a=[],c=[];return i.forEach(p=>{c.push(ju(e).get(p).next(E=>{if(null===E)throw zt();on(E.userId===this.userId),a.push(ql(this.N,E))}))}),ct.waitFor(c).next(()=>a)}removeMutationBatch(e,i){return em(e.Qt,this.userId,i).next(a=>(e.addOnCommittedListener(()=>{this.te(i.batchId)}),ct.forEach(a,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return ct.resolve();const a=IDBKeyRange.lowerBound(Vs.prefixForUser(this.userId)),c=[];return yl(e).Kt({range:a},(p,E,M)=>{if(p[0]===this.userId){const H=ma(p[1]);c.push(H)}else M.done()}).next(()=>{on(0===c.length)})})}containsKey(e,i){return tm(e,this.userId,i)}ee(e){return Xf(e).get(this.userId).next(i=>i||new uu(this.userId,-1,""))}}function tm(s,e,i){const a=Vs.prefixForPath(e,i.path),c=a[1],p=IDBKeyRange.lowerBound(a);let E=!1;return yl(s).Kt({range:p,qt:!0},(M,H,ee)=>{const[le,Ne,st]=M;le===e&&Ne===c&&(E=!0),ee.done()}).next(()=>E)}function ju(s){return bi(s,pi.store)}function yl(s){return bi(s,Vs.store)}function Xf(s){return bi(s,uu.store)}class $u{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new $u(0)}static ie(){return new $u(-1)}}class h_{constructor(e,i){this.referenceDelegate=e,this.N=i}allocateTargetId(e){return this.re(e).next(i=>{const a=new $u(i.highestTargetId);return i.highestTargetId=a.next(),this.oe(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(i=>xt.fromTimestamp(new Ln(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,a){return this.re(e).next(c=>(c.highestListenSequenceNumber=i,a&&(c.lastRemoteSnapshotVersion=a.toTimestamp()),i>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=i),this.oe(e,c)))}addTargetData(e,i){return this.ae(e,i).next(()=>this.re(e).next(a=>(a.targetCount+=1,this.ce(i,a),this.oe(e,a))))}updateTargetData(e,i){return this.ae(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>Ac(e).delete(i.targetId)).next(()=>this.re(e)).next(a=>(on(a.targetCount>0),a.targetCount-=1,this.oe(e,a)))}removeTargets(e,i,a){let c=0;const p=[];return Ac(e).Kt((E,M)=>{const H=Tc(M);H.sequenceNumber<=i&&null===a.get(H.targetId)&&(c++,p.push(this.removeTargetData(e,H)))}).next(()=>ct.waitFor(p)).next(()=>c)}forEachTarget(e,i){return Ac(e).Kt((a,c)=>{const p=Tc(c);i(p)})}re(e){return ep(e).get(Ae.key).next(i=>(on(null!==i),i))}oe(e,i){return ep(e).put(Ae.key,i)}ae(e,i){return Ac(e).put(Ch(this.N,i))}ce(e,i){let a=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,a=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.re(e).next(i=>i.targetCount)}getTargetData(e,i){const a=T(i),c=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let p=null;return Ac(e).Kt({range:c,index:V.queryTargetsIndexName},(E,M,H)=>{const ee=Tc(M);W(i,ee.target)&&(p=ee,H.done())}).next(()=>p)}addMatchingKeys(e,i,a){const c=[],p=Hu(e);return i.forEach(E=>{const M=Ss(E.path);c.push(p.put(new K(a,M))),c.push(this.referenceDelegate.addReference(e,a,E))}),ct.waitFor(c)}removeMatchingKeys(e,i,a){const c=Hu(e);return ct.forEach(i,p=>{const E=Ss(p.path);return ct.waitFor([c.delete([a,E]),this.referenceDelegate.removeReference(e,a,p)])})}removeMatchingKeysForTargetId(e,i){const a=Hu(e),c=IDBKeyRange.bound([i],[i+1],!1,!0);return a.delete(c)}getMatchingKeysForTargetId(e,i){const a=IDBKeyRange.bound([i],[i+1],!1,!0),c=Hu(e);let p=Wr();return c.Kt({range:a,qt:!0},(E,M,H)=>{const ee=ma(E[1]),le=new Zt(ee);p=p.add(le)}).next(()=>p)}containsKey(e,i){const a=Ss(i.path),c=IDBKeyRange.bound([a],[fn(a)],!1,!0);let p=0;return Hu(e).Kt({index:K.documentTargetsIndex,qt:!0,range:c},([E,M],H,ee)=>{0!==E&&(p++,ee.done())}).next(()=>p>0)}Tt(e,i){return Ac(e).get(i).next(a=>a?Tc(a):null)}}function Ac(s){return bi(s,V.store)}function ep(s){return bi(s,Ae.store)}function Hu(s){return bi(s,K.store)}function ya(s){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,re.Z)(function*(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==ys)throw s;Dt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function tp([s,e],[i,a]){const c=ht(s,i);return 0===c?ht(e,a):c}class f_{constructor(e){this.ue=e,this.buffer=new Mi(tp),this.he=0}le(){return++this.he}fe(e){const i=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();tp(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class xh{constructor(e,i){this.garbageCollector=e,this.asyncQueue=i,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var i=this;const a=this.de?3e5:6e4;Dt("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,re.Z)(function*(){i.we=null,i.de=!0;try{yield e.collectGarbage(i.garbageCollector)}catch(c){lu(c)?Dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield ya(c)}yield i._e(e)}))}}class p_{constructor(e,i){this.me=e,this.params=i}calculateTargetCount(e,i){return this.me.ge(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(0===i)return ct.resolve(ie.T);const a=new f_(i);return this.me.forEachTarget(e,c=>a.fe(c.sequenceNumber)).next(()=>this.me.ye(e,c=>a.fe(c))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.me.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.me.removeOrphanedDocuments(e,i)}collect(e,i){return-1===this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(Xg)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xg):this.pe(e,i))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,i){let a,c,p,E,M,H,ee;const le=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ne=>(Ne>this.params.maximumSequenceNumbersToCollect?(Dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ne}`),c=this.params.maximumSequenceNumbersToCollect):c=Ne,E=Date.now(),this.nthSequenceNumber(e,c))).next(Ne=>(a=Ne,M=Date.now(),this.removeTargets(e,a,i))).next(Ne=>(p=Ne,H=Date.now(),this.removeOrphanedDocuments(e,a))).next(Ne=>(ee=Date.now(),Ta()<=vt.in.DEBUG&&Dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-le}ms\n\tDetermined least recently used ${c} in `+(M-E)+`ms\n\tRemoved ${p} targets in `+(H-M)+`ms\n\tRemoved ${Ne} documents in `+(ee-H)+`ms\nTotal Duration: ${ee-le}ms`),ct.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:Ne})))}}class nm{constructor(e,i){this.db=e,this.garbageCollector=new p_(this,i)}ge(e){const i=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(a=>i.next(c=>a+c))}Te(e){let i=0;return this.ye(e,a=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}ye(e,i){return this.Ee(e,(a,c)=>i(c))}addReference(e,i,a){return Cd(e,a)}removeReference(e,i,a){return Cd(e,a)}removeTargets(e,i,a){return this.db.getTargetCache().removeTargets(e,i,a)}markPotentiallyOrphaned(e,i){return Cd(e,i)}Ie(e,i){return function(a,c){let p=!1;return Xf(a).jt(E=>tm(a,E,c).next(M=>(M&&(p=!0),ct.resolve(!M)))).next(()=>p)}(e,i)}removeOrphanedDocuments(e,i){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Ee(e,(E,M)=>{if(M<=i){const H=this.Ie(e,E).next(ee=>{if(!ee)return p++,a.getEntry(e,E).next(()=>(a.removeEntry(E),Hu(e).delete([0,Ss(E.path)])))});c.push(H)}}).next(()=>ct.waitFor(c)).next(()=>a.apply(e)).next(()=>p)}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,i){return Cd(e,i)}Ee(e,i){const a=Hu(e);let c,p=ie.T;return a.Kt({index:K.documentTargetsIndex},([E,M],{path:H,sequenceNumber:ee})=>{0===E?(p!==ie.T&&i(new Zt(ma(c)),p),p=ee,c=H):p=ie.T}).next(()=>{p!==ie.T&&i(new Zt(ma(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cd(s,e){return Hu(s).put((a=s.currentSequenceNumber,new K(0,Ss(e.path),a)));var a}class zl{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={}}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0!==a)for(const[c,p]of a)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,i){const a=this.mapKeyFn(e),c=this.inner[a];if(void 0!==c){for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,i]);c.push([e,i])}else this.inner[a]=[[e,i]]}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return 1===a.length?delete this.inner[i]:a.splice(c,1),!0;return!1}forEach(e){ji(this.inner,(i,a)=>{for(const[c,p]of a)e(c,p)})}isEmpty(){return Ps(this.inner)}}class Rh{constructor(){this.changes=new zl(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}getReadTime(e){const i=this.changes.get(e);return i?i.readTime:xt.min()}addEntry(e,i){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:i})}removeEntry(e,i=null){this.assertNotApplied(),this.changes.set(e,{document:si.newInvalidDocument(e),readTime:i})}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return void 0!==a?ct.resolve(a.document):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rm{constructor(e,i){this.N=e,this.Ht=i}addEntry(e,i,a){return Gu(e).put(Sc(i),a)}removeEntry(e,i){const a=Gu(e),c=Sc(i);return a.delete(c)}updateMetadata(e,i){return this.getMetadata(e).next(a=>(a.byteSize+=i,this.Ae(e,a)))}getEntry(e,i){return Gu(e).get(Sc(i)).next(a=>this.Re(i,a))}be(e,i){return Gu(e).get(Sc(i)).next(a=>({document:this.Re(i,a),size:Ah(a)}))}getEntries(e,i){let a=fo();return this.Pe(e,i,(c,p)=>{const E=this.Re(c,p);a=a.insert(c,E)}).next(()=>a)}ve(e,i){let a=fo(),c=new Ji(Zt.comparator);return this.Pe(e,i,(p,E)=>{const M=this.Re(p,E);a=a.insert(p,M),c=c.insert(p,Ah(E))}).next(()=>({documents:a,Ve:c}))}Pe(e,i,a){if(i.isEmpty())return ct.resolve();const c=IDBKeyRange.bound(i.first().path.toArray(),i.last().path.toArray()),p=i.getIterator();let E=p.getNext();return Gu(e).Kt({range:c},(M,H,ee)=>{const le=Zt.fromSegments(M);for(;E&&Zt.comparator(E,le)<0;)a(E,null),E=p.getNext();E&&E.isEqual(le)&&(a(E,H),E=p.hasNext()?p.getNext():null),E?ee.Mt(E.path.toArray()):ee.done()}).next(()=>{for(;E;)a(E,null),E=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,i,a){let c=fo();const p=i.path.length+1,E={};if(a.isEqual(xt.min())){const M=i.path.toArray();E.range=IDBKeyRange.lowerBound(M)}else{const M=i.path.toArray(),H=bd(a);E.range=IDBKeyRange.lowerBound([M,H],!0),E.index=h.collectionReadTimeIndex}return Gu(e).Kt(E,(M,H,ee)=>{if(M.length!==p)return;const le=Pa(this.N,H);i.path.isPrefixOf(le.key.path)?kl(i,le)&&(c=c.insert(le.key,le)):ee.done()}).next(()=>c)}newChangeBuffer(e){return new Mh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return Dd(e).get(w.key).next(i=>(on(!!i),i))}Ae(e,i){return Dd(e).put(w.key,i)}Re(e,i){if(i){const a=Pa(this.N,i);if(!a.isNoDocument()||!a.version.isEqual(xt.min()))return a}return si.newInvalidDocument(e)}}class Mh extends Rh{constructor(e,i){super(),this.Se=e,this.trackRemovals=i,this.De=new zl(a=>a.toString(),(a,c)=>a.isEqual(c))}applyChanges(e){const i=[];let a=0,c=new Mi((p,E)=>ht(p.canonicalString(),E.canonicalString()));return this.changes.forEach((p,E)=>{const M=this.De.get(p);if(E.document.isValidDocument()){const H=Ih(this.Se.N,E.document,this.getReadTime(p));c=c.add(p.path.popLast()),a+=Ah(H)-M,i.push(this.Se.addEntry(e,p,H))}else if(a-=M,this.trackRemovals){const H=Ih(this.Se.N,si.newNoDocument(p,xt.min()),this.getReadTime(p));i.push(this.Se.addEntry(e,p,H))}else i.push(this.Se.removeEntry(e,p))}),c.forEach(p=>{i.push(this.Se.Ht.addToCollectionParentIndex(e,p))}),i.push(this.Se.updateMetadata(e,a)),ct.waitFor(i)}getFromCache(e,i){return this.Se.be(e,i).next(a=>(this.De.set(i,a.size),a.document))}getAllFromCache(e,i){return this.Se.ve(e,i).next(({documents:a,Ve:c})=>(c.forEach((p,E)=>{this.De.set(p,E)}),a))}}function Dd(s){return bi(s,w.store)}function Gu(s){return bi(s,h.store)}function Sc(s){return s.path.toArray()}class im{constructor(e){this.N=e}Ct(e,i,a,c){on(a<c&&a>=0&&c<=11);const p=new ml("createOrUpgrade",i);var M;a<1&&c>=1&&(e.createObjectStore(Ho.store),(M=e).createObjectStore(uu.store,{keyPath:uu.keyPath}),M.createObjectStore(pi.store,{keyPath:pi.keyPath,autoIncrement:!0}).createIndex(pi.userMutationsIndex,pi.userMutationsKeyPath,{unique:!0}),M.createObjectStore(Vs.store),Nh(e),function(M){M.createObjectStore(h.store)}(e));let E=ct.resolve();return a<3&&c>=3&&(0!==a&&(function(M){M.deleteObjectStore(K.store),M.deleteObjectStore(V.store),M.deleteObjectStore(Ae.store)}(e),Nh(e)),E=E.next(()=>function(M){const H=M.store(Ae.store),ee=new Ae(0,0,xt.min().toTimestamp(),0);return H.put(Ae.key,ee)}(p))),a<4&&c>=4&&(0!==a&&(E=E.next(()=>function(M,H){return H.store(pi.store).Lt().next(ee=>{M.deleteObjectStore(pi.store),M.createObjectStore(pi.store,{keyPath:pi.keyPath,autoIncrement:!0}).createIndex(pi.userMutationsIndex,pi.userMutationsKeyPath,{unique:!0});const le=H.store(pi.store),Ne=ee.map(st=>le.put(st));return ct.waitFor(Ne)})}(e,p))),E=E.next(()=>{!function(M){M.createObjectStore(St.store,{keyPath:St.keyPath})}(e)})),a<5&&c>=5&&(E=E.next(()=>this.Ce(p))),a<6&&c>=6&&(E=E.next(()=>(function(M){M.createObjectStore(w.store)}(e),this.Ne(p)))),a<7&&c>=7&&(E=E.next(()=>this.xe(p))),a<8&&c>=8&&(E=E.next(()=>this.ke(e,p))),a<9&&c>=9&&(E=E.next(()=>{(function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")})(e),function(M){const H=M.objectStore(h.store);H.createIndex(h.readTimeIndex,h.readTimeIndexPath,{unique:!1}),H.createIndex(h.collectionReadTimeIndex,h.collectionReadTimeIndexPath,{unique:!1})}(i)})),a<10&&c>=10&&(E=E.next(()=>this.$e(p))),a<11&&c>=11&&(E=E.next(()=>{(function(M){M.createObjectStore(Jt.store,{keyPath:Jt.keyPath})})(e),function(M){M.createObjectStore(Dn.store,{keyPath:Dn.keyPath})}(e)})),E}Ne(e){let i=0;return e.store(h.store).Kt((a,c)=>{i+=Ah(c)}).next(()=>{const a=new w(i);return e.store(w.store).put(w.key,a)})}Ce(e){const i=e.store(uu.store),a=e.store(pi.store);return i.Lt().next(c=>ct.forEach(c,p=>{const E=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return a.Lt(pi.userMutationsIndex,E).next(M=>ct.forEach(M,H=>{on(H.userId===p.userId);const ee=ql(this.N,H);return em(e,p.userId,ee).next(()=>{})}))}))}xe(e){const i=e.store(K.store),a=e.store(h.store);return e.store(Ae.store).get(Ae.key).next(c=>{const p=[];return a.Kt((E,M)=>{const H=new qn(E),ee=[0,Ss(H)];p.push(i.get(ee).next(le=>le?ct.resolve():i.put(new K(0,Ss(H),c.highestListenSequenceNumber))))}).next(()=>ct.waitFor(p))})}ke(e,i){e.createObjectStore(nt.store,{keyPath:nt.keyPath});const a=i.store(nt.store),c=new Dh,p=E=>{if(c.add(E)){const M=E.lastSegment(),H=E.popLast();return a.put({collectionId:M,parent:Ss(H)})}};return i.store(h.store).Kt({qt:!0},(E,M)=>{const H=new qn(E);return p(H.popLast())}).next(()=>i.store(Vs.store).Kt({qt:!0},([E,M,H],ee)=>{const le=ma(M);return p(le.popLast())}))}$e(e){const i=e.store(V.store);return i.Kt((a,c)=>{const p=Tc(c),E=Ch(this.N,p);return i.put(E)})}}function Nh(s){s.createObjectStore(K.store,{keyPath:K.keyPath}).createIndex(K.documentTargetsIndex,K.documentTargetsKeyPath,{unique:!0}),s.createObjectStore(V.store,{keyPath:V.keyPath}).createIndex(V.queryTargetsIndexName,V.queryTargetsKeyPath,{unique:!0}),s.createObjectStore(Ae.store)}const Zl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class np{constructor(e,i,a,c,p,E,M,H,ee,le){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=a,this.Oe=p,this.window=E,this.document=M,this.Fe=ee,this.Me=le,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=Ne=>Promise.resolve(),!np.bt())throw new yt(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nm(this,c),this.We=i+"main",this.N=new l_(H),this.Ge=new Go(this.We,11,new im(this.N)),this.ze=new h_(this.referenceDelegate,this.N),this.Ht=new d_,this.He=new rm(this.N,this.Ht),this.Je=new Jg,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===le&&Sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new yt(et.FAILED_PRECONDITION,Zl);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ie(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var i=this;return this.Qe=function(){var a=(0,re.Z)(function*(c){if(i.started)return e(c)});return function(c){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var i=(0,re.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return i.apply(this,arguments)}}())}setNetworkEnabled(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,re.Z)(function*(){i.started&&(yield i.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Oh(e).put(new St(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(i=>{i||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(i=>this.isPrimary&&!i?this.on(e).next(()=>!1):!!i&&this.an(e).next(()=>!0))).catch(e=>{if(lu(e))return Dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return xc(e).get(Ho.key).next(i=>ct.resolve(this.cn(i)))}un(e){return Oh(e).delete(this.clientId)}hn(){var e=this;return(0,re.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const i=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const c=bi(a,St.store);return c.Lt().next(p=>{const E=e.fn(p,18e5),M=p.filter(H=>-1===E.indexOf(H));return ct.forEach(M,H=>c.delete(H.clientId)).next(()=>M)})}).catch(()=>[]);if(e.Ye)for(const a of i)e.Ye.removeItem(e.dn(a.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?ct.resolve(!0):xc(e).get(Ho.key).next(i=>{if(null!==i&&this.ln(i.leaseTimestampMs,5e3)&&!this.wn(i.ownerId)){if(this.cn(i)&&this.networkEnabled)return!0;if(!this.cn(i)){if(!i.allowTabSynchronization)throw new yt(et.FAILED_PRECONDITION,Zl);return!1}}return!(!this.networkEnabled||!this.inForeground)||Oh(e).Lt().next(a=>void 0===this.fn(a,5e3).find(c=>{if(this.clientId!==c.clientId){const E=!this.inForeground&&c.inForeground,M=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||E&&M)return!0}return!1}))}).next(i=>(this.isPrimary!==i&&Dt("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var e=this;return(0,re.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Ho.store,St.store],i=>{const a=new Uu(i,ie.T);return e.on(a).next(()=>e.un(a))}),e.Ge.close(),e.yn()})()}fn(e,i){return e.filter(a=>this.ln(a.updateTimeMs,i)&&!this.wn(a.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Oh(e).Lt().next(i=>this.fn(i,18e5).map(a=>a.clientId)))}get started(){return this.Be}getMutationQueue(e){return Jf.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,i,a){let p;return Dt("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===i?"readonly":"readwrite",Sn,E=>(p=new Uu(E,this.Le?this.Le.next():ie.T),"readwrite-primary"===i?this.sn(p).next(M=>!!M||this.rn(p)).next(M=>{if(!M)throw Sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new yt(et.FAILED_PRECONDITION,ys);return a(p)}).next(M=>this.an(p).next(()=>M)):this.Tn(p).next(()=>a(p)))).then(E=>(p.raiseOnCommittedEvent(),E))}Tn(e){return xc(e).get(Ho.key).next(i=>{if(null!==i&&this.ln(i.leaseTimestampMs,5e3)&&!this.wn(i.ownerId)&&!this.cn(i)&&!(this.Me||this.allowTabSynchronization&&i.allowTabSynchronization))throw new yt(et.FAILED_PRECONDITION,Zl)})}an(e){const i=new Ho(this.clientId,this.allowTabSynchronization,Date.now());return xc(e).put(Ho.key,i)}static bt(){return Go.bt()}on(e){const i=xc(e);return i.get(Ho.key).next(a=>this.cn(a)?(Dt("IndexedDbPersistence","Releasing primary lease."),i.delete(Ho.key)):ct.resolve())}ln(e,i){const a=Date.now();return!(e<a-i||e>a&&(Sr(`Detected an update time that is in the future: ${e} > ${a}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,Ze.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var i;try{const a=null!==(null===(i=this.Ye)||void 0===i?void 0:i.getItem(this.dn(e)));return Dt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Sr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Sr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xc(s){return bi(s,Ho.store)}function Oh(s){return bi(s,St.store)}function rp(s,e){let i=s.projectId;return s.isDefaultDatabase||(i+="."+s.database),"firestore/"+e+"/"+i+"/"}class sm{constructor(e,i){this.progress=e,this.En=i}}class Ph{constructor(e,i,a){this.He=e,this.In=i,this.Ht=a}An(e,i){return this.In.getAllMutationBatchesAffectingDocumentKey(e,i).next(a=>this.Rn(e,i,a))}Rn(e,i,a){return this.He.getEntry(e,i).next(c=>{for(const p of a)p.applyToLocalView(c);return c})}bn(e,i){e.forEach((a,c)=>{for(const p of i)p.applyToLocalView(c)})}Pn(e,i){return this.He.getEntries(e,i).next(a=>this.vn(e,a).next(()=>a))}vn(e,i){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,i).next(a=>this.bn(i,a))}getDocumentsMatchingQuery(e,i,a){return Zt.isDocumentKey((c=i).path)&&null===c.collectionGroup&&0===c.filters.length?this.Vn(e,i.path):ll(i)?this.Sn(e,i,a):this.Dn(e,i,a);var c}Vn(e,i){return this.An(e,new Zt(i)).next(a=>{let c=ld();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}Sn(e,i,a){const c=i.collectionGroup;let p=ld();return this.Ht.getCollectionParents(e,c).next(E=>ct.forEach(E,M=>{const H=(ee=i,le=M.child(c),new jo(le,null,ee.explicitOrderBy.slice(),ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt));var ee,le;return this.Dn(e,H,a).next(ee=>{ee.forEach((le,Ne)=>{p=p.insert(le,Ne)})})}).next(()=>p))}Dn(e,i,a){let c,p;return this.He.getDocumentsMatchingQuery(e,i,a).next(E=>(c=E,this.In.getAllMutationBatchesAffectingQuery(e,i))).next(E=>(p=E,this.Cn(e,p,c).next(M=>{c=M;for(const H of p)for(const ee of H.mutations){const le=ee.key;let Ne=c.get(le);null==Ne&&(Ne=si.newInvalidDocument(le),c=c.insert(le,Ne)),ad(ee,Ne,H.localWriteTime),Ne.isFoundDocument()||(c=c.remove(le))}}))).next(()=>(c.forEach((E,M)=>{kl(i,M)||(c=c.remove(E))}),c))}Cn(e,i,a){let c=Wr();for(const E of i)for(const M of E.mutations)M instanceof Oa&&null===a.get(M.key)&&(c=c.add(M.key));let p=a;return this.He.getEntries(e,c).next(E=>(E.forEach((M,H)=>{H.isFoundDocument()&&(p=p.insert(M,H))}),p))}}class kh{constructor(e,i,a,c){this.targetId=e,this.fromCache=i,this.Nn=a,this.xn=c}static kn(e,i){let a=Wr(),c=Wr();for(const p of i.docChanges)switch(p.type){case 0:a=a.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new kh(e,i.fromCache,a,c)}}class g_{$n(e){this.On=e}getDocumentsMatchingQuery(e,i,a,c){return 0===(p=i).filters.length&&null===p.limit&&null==p.startAt&&null==p.endAt&&(0===p.explicitOrderBy.length||1===p.explicitOrderBy.length&&p.explicitOrderBy[0].field.isKeyField())||a.isEqual(xt.min())?this.Fn(e,i):this.On.Pn(e,c).next(p=>{const E=this.Mn(i,p);return(qa(i)||Na(i))&&this.Ln(i.limitType,E,c,a)?this.Fn(e,i):(Ta()<=vt.in.DEBUG&&Dt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),cc(i)),this.On.getDocumentsMatchingQuery(e,i,a).next(M=>(E.forEach(H=>{M=M.insert(H.key,H)}),M)))});var p}Mn(e,i){let a=new Mi(xu(e));return i.forEach((c,p)=>{kl(e,p)&&(a=a.add(p))}),a}Ln(e,i,a,c){if(a.size!==i.size)return!0;const p="F"===e?i.last():i.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Fn(e,i){return Ta()<=vt.in.DEBUG&&Dt("QueryEngine","Using full collection scan to execute query:",cc(i)),this.On.getDocumentsMatchingQuery(e,i,xt.min())}}class om{constructor(e,i,a,c){this.persistence=e,this.Bn=i,this.N=c,this.Un=new Ji(ht),this.qn=new zl(p=>T(p),W),this.Kn=xt.min(),this.In=e.getMutationQueue(a),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Ph(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.Un))}}function am(s,e,i,a){return new om(s,e,i,a)}function ip(s,e){return sp.apply(this,arguments)}function sp(){return(sp=(0,re.Z)(function*(s,e){const i=At(s);let a=i.In,c=i.Qn;const p=yield i.persistence.runTransaction("Handle user change","readonly",E=>{let M;return i.In.getAllMutationBatches(E).next(H=>(M=H,a=i.persistence.getMutationQueue(e),c=new Ph(i.jn,a,i.persistence.getIndexManager()),a.getAllMutationBatches(E))).next(H=>{const ee=[],le=[];let Ne=Wr();for(const st of M){ee.push(st.batchId);for(const pt of st.mutations)Ne=Ne.add(pt.key)}for(const st of H){le.push(st.batchId);for(const pt of st.mutations)Ne=Ne.add(pt.key)}return c.Pn(E,Ne).next(st=>({Wn:st,removedBatchIds:ee,addedBatchIds:le}))})});return i.In=a,i.Qn=c,i.Bn.$n(i.Qn),p})).apply(this,arguments)}function m_(s,e){const i=At(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),p=i.jn.newChangeBuffer({trackRemovals:!0});return function(E,M,H,ee){const le=H.batch,Ne=le.keys();let st=ct.resolve();return Ne.forEach(pt=>{st=st.next(()=>ee.getEntry(M,pt)).next(Nt=>{const ln=H.docVersions.get(pt);on(null!==ln),Nt.version.compareTo(ln)<0&&(le.applyToRemoteDocument(Nt,H),Nt.isValidDocument()&&ee.addEntry(Nt,H.commitVersion))})}),st.next(()=>E.In.removeMutationBatch(M,le))}(i,a,e,p).next(()=>p.apply(a)).next(()=>i.In.performConsistencyCheck(a)).next(()=>i.Qn.Pn(a,c))})}function ka(s){const e=At(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.ze.getLastRemoteSnapshotVersion(i))}function y_(s,e){const i=At(s),a=e.snapshotVersion;let c=i.Un;return i.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const E=i.jn.newChangeBuffer({trackRemovals:!0});c=i.Un;const M=[];e.targetChanges.forEach((ee,le)=>{const Ne=c.get(le);if(!Ne)return;M.push(i.ze.removeMatchingKeys(p,ee.removedDocuments,le).next(()=>i.ze.addMatchingKeys(p,ee.addedDocuments,le)));const st=ee.resumeToken;if(st.approximateByteSize()>0){const pt=Ne.withResumeToken(st,a).withSequenceNumber(p.currentSequenceNumber);c=c.insert(le,pt),Nt=Ne,ar=ee,on((ln=pt).resumeToken.approximateByteSize()>0),(0===Nt.resumeToken.approximateByteSize()||ln.snapshotVersion.toMicroseconds()-Nt.snapshotVersion.toMicroseconds()>=3e8||ar.addedDocuments.size+ar.modifiedDocuments.size+ar.removedDocuments.size>0)&&M.push(i.ze.updateTargetData(p,pt))}var Nt,ln,ar});let H=fo();if(e.documentUpdates.forEach((ee,le)=>{e.resolvedLimboDocuments.has(ee)&&M.push(i.persistence.referenceDelegate.updateLimboDocument(p,ee))}),M.push(op(p,E,e.documentUpdates,a,void 0).next(ee=>{H=ee})),!a.isEqual(xt.min())){const ee=i.ze.getLastRemoteSnapshotVersion(p).next(le=>i.ze.setTargetsMetadata(p,p.currentSequenceNumber,a));M.push(ee)}return ct.waitFor(M).next(()=>E.apply(p)).next(()=>i.Qn.vn(p,H)).next(()=>H)}).then(p=>(i.Un=c,p))}function op(s,e,i,a,c){let p=Wr();return i.forEach(E=>p=p.add(E)),e.getEntries(s,p).next(E=>{let M=fo();return i.forEach((H,ee)=>{const le=E.get(H),Ne=(null==c?void 0:c.get(H))||a;ee.isNoDocument()&&ee.version.isEqual(xt.min())?(e.removeEntry(H,Ne),M=M.insert(H,ee)):!le.isValidDocument()||ee.version.compareTo(le.version)>0||0===ee.version.compareTo(le.version)&&le.hasPendingWrites?(e.addEntry(ee,Ne),M=M.insert(H,ee)):Dt("LocalStore","Ignoring outdated watch update for ",H,". Current version:",le.version," Watch version:",ee.version)}),M})}function __(s,e){const i=At(s);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),i.In.getNextMutationBatchAfterBatchId(a,e)))}function Rc(s,e){const i=At(s);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return i.ze.getTargetData(a,e).next(p=>p?(c=p,ct.resolve(c)):i.ze.allocateTargetId(a).next(E=>(c=new Bu(e,E,0,a.currentSequenceNumber),i.ze.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=i.Un.get(a.targetId);return(null===c||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(i.Un=i.Un.insert(a.targetId,a),i.qn.set(e,a.targetId)),a})}function Mc(s,e,i){return ap.apply(this,arguments)}function ap(){return(ap=(0,re.Z)(function*(s,e,i){const a=At(s),c=a.Un.get(e),p=i?"readwrite":"readwrite-primary";try{i||(yield a.persistence.runTransaction("Release target",p,E=>a.persistence.referenceDelegate.removeTarget(E,c)))}catch(E){if(!lu(E))throw E;Dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}a.Un=a.Un.remove(e),a.qn.delete(c.target)})).apply(this,arguments)}function Td(s,e,i){const a=At(s);let c=xt.min(),p=Wr();return a.persistence.runTransaction("Execute query","readonly",E=>function(M,H,ee){const le=At(M),Ne=le.qn.get(ee);return void 0!==Ne?ct.resolve(le.Un.get(Ne)):le.ze.getTargetData(H,ee)}(a,E,Fs(e)).next(M=>{if(M)return c=M.lastLimboFreeSnapshotVersion,a.ze.getMatchingKeysForTargetId(E,M.targetId).next(H=>{p=H})}).next(()=>a.Bn.getDocumentsMatchingQuery(E,e,i?c:xt.min(),i?p:Wr())).next(M=>({documents:M,Gn:p})))}function um(s,e){const i=At(s),a=At(i.ze),c=i.Un.get(e);return c?Promise.resolve(c.target):i.persistence.runTransaction("Get target data","readonly",p=>a.Tt(p,e).next(E=>E?E.target:null))}function lm(s){const e=At(s);return e.persistence.runTransaction("Get new document changes","readonly",i=>function(a,c,p){const E=At(a);let M=fo(),H=bd(p);const ee=Gu(c),le=IDBKeyRange.lowerBound(H,!0);return ee.Kt({index:h.readTimeIndex,range:le},(Ne,st)=>{const pt=Pa(E.N,st);M=M.insert(pt.key,pt),H=st.readTime}).next(()=>({En:M,readTime:Qg(H)}))}(e.jn,i,e.Kn)).then(({En:i,readTime:a})=>(e.Kn=a,i))}function Yn(){return(Yn=(0,re.Z)(function*(s){const e=At(s);return e.persistence.runTransaction("Synchronize last document change read time","readonly",i=>function(a){const c=Gu(a);let p=xt.min();return c.Kt({index:h.readTimeIndex,reverse:!0},(E,M,H)=>{M.readTime&&(p=Qg(M.readTime)),H.done()}).next(()=>p)}(i)).then(i=>{e.Kn=i})})).apply(this,arguments)}function Fh(){return(Fh=(0,re.Z)(function*(s,e,i,a){const c=At(s);let p=Wr(),E=fo(),M=mh();for(const le of i){const Ne=e.zn(le.metadata.name);le.document&&(p=p.add(Ne)),E=E.insert(Ne,e.Hn(le)),M=M.insert(Ne,e.Jn(le.metadata.readTime))}const H=c.jn.newChangeBuffer({trackRemovals:!0}),ee=yield Rc(c,(le=a,Fs(Ga(qn.fromString(`__bundle__/docs/${le}`)))));var le;return c.persistence.runTransaction("Apply bundle documents","readwrite",le=>op(le,H,E,xt.min(),M).next(Ne=>(H.apply(le),Ne)).next(Ne=>c.ze.removeMatchingKeysForTargetId(le,ee.targetId).next(()=>c.ze.addMatchingKeys(le,p,ee.targetId)).next(()=>c.Qn.vn(le,Ne)).next(()=>Ne)))})).apply(this,arguments)}function Lh(s,e){return _a.apply(this,arguments)}function _a(){return(_a=(0,re.Z)(function*(s,e,i=Wr()){const a=yield Rc(s,Fs(Id(e.bundledQuery))),c=At(s);return c.persistence.runTransaction("Save named query","readwrite",p=>{const E=Ls(e.readTime);if(a.snapshotVersion.compareTo(E)>=0)return c.Je.saveNamedQuery(p,e);const M=a.withResumeToken(Qi.EMPTY_BYTE_STRING,E);return c.Un=c.Un.insert(M.targetId,M),c.ze.updateTargetData(p,M).next(()=>c.ze.removeMatchingKeysForTargetId(p,a.targetId)).next(()=>c.ze.addMatchingKeys(p,i,a.targetId)).next(()=>c.Je.saveNamedQuery(p,e))})})).apply(this,arguments)}class dm{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,i){return ct.resolve(this.Yn.get(i))}saveBundleMetadata(e,i){var a;return this.Yn.set(i.id,{id:(a=i).id,version:a.version,createTime:Ls(a.createTime)}),ct.resolve()}getNamedQuery(e,i){return ct.resolve(this.Xn.get(i))}saveNamedQuery(e,i){return this.Xn.set(i.name,{name:(a=i).name,query:Id(a.bundledQuery),readTime:Ls(a.readTime)}),ct.resolve();var a}}class up{constructor(){this.Zn=new Mi(Us.ts),this.es=new Mi(Us.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,i){const a=new Us(e,i);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.rs(new Us(e,i))}os(e,i){e.forEach(a=>this.removeReference(a,i))}cs(e){const i=new Zt(new qn([])),a=new Us(i,e),c=new Us(i,e+1),p=[];return this.es.forEachInRange([a,c],E=>{this.rs(E),p.push(E.key)}),p}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const i=new Zt(new qn([])),a=new Us(i,e),c=new Us(i,e+1);let p=Wr();return this.es.forEachInRange([a,c],E=>{p=p.add(E.key)}),p}containsKey(e){const i=new Us(e,0),a=this.Zn.firstAfterOrEqual(i);return null!==a&&e.isEqual(a.key)}}class Us{constructor(e,i){this.key=e,this.ls=i}static ts(e,i){return Zt.comparator(e.key,i.key)||ht(e.ls,i.ls)}static ns(e,i){return ht(e.ls,i.ls)||Zt.comparator(e.key,i.key)}}class qu{constructor(e,i){this.Ht=e,this.referenceDelegate=i,this.In=[],this.fs=1,this.ds=new Mi(Us.ts)}checkEmpty(e){return ct.resolve(0===this.In.length)}addMutationBatch(e,i,a,c){const p=this.fs;this.fs++;const E=new bh(p,i,a,c);this.In.push(E);for(const M of c)this.ds=this.ds.add(new Us(M.key,p)),this.Ht.addToCollectionParentIndex(e,M.key.path.popLast());return ct.resolve(E)}lookupMutationBatch(e,i){return ct.resolve(this.ws(i))}getNextMutationBatchAfterBatchId(e,i){const c=this._s(i+1),p=c<0?0:c;return ct.resolve(this.In.length>p?this.In[p]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return ct.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Us(i,0),c=new Us(i,Number.POSITIVE_INFINITY),p=[];return this.ds.forEachInRange([a,c],E=>{const M=this.ws(E.ls);p.push(M)}),ct.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Mi(ht);return i.forEach(c=>{const p=new Us(c,0),E=new Us(c,Number.POSITIVE_INFINITY);this.ds.forEachInRange([p,E],M=>{a=a.add(M.ls)})}),ct.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,c=a.length+1;let p=a;Zt.isDocumentKey(p)||(p=p.child(""));const E=new Us(new Zt(p),0);let M=new Mi(ht);return this.ds.forEachWhile(H=>{const ee=H.key.path;return!!a.isPrefixOf(ee)&&(ee.length===c&&(M=M.add(H.ls)),!0)},E),ct.resolve(this.gs(M))}gs(e){const i=[];return e.forEach(a=>{const c=this.ws(a);null!==c&&i.push(c)}),i}removeMutationBatch(e,i){on(0===this.ys(i.batchId,"removed")),this.In.shift();let a=this.ds;return ct.forEach(i.mutations,c=>{const p=new Us(c.key,i.batchId);return a=a.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.ds=a})}te(e){}containsKey(e,i){const a=new Us(i,0),c=this.ds.firstAfterOrEqual(a);return ct.resolve(i.isEqual(c&&c.key))}performConsistencyCheck(e){return ct.resolve()}ys(e,i){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const i=this._s(e);return i<0||i>=this.In.length?null:this.In[i]}}class lp{constructor(e,i){this.Ht=e,this.ps=i,this.docs=new Ji(Zt.comparator),this.size=0}addEntry(e,i,a){const c=i.key,p=this.docs.get(c),E=p?p.size:0,M=this.ps(i);return this.docs=this.docs.insert(c,{document:i.clone(),size:M,readTime:a}),this.size+=M-E,this.Ht.addToCollectionParentIndex(e,c.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ct.resolve(a?a.document.clone():si.newInvalidDocument(i))}getEntries(e,i){let a=fo();return i.forEach(c=>{const p=this.docs.get(c);a=a.insert(c,p?p.document.clone():si.newInvalidDocument(c))}),ct.resolve(a)}getDocumentsMatchingQuery(e,i,a){let c=fo();const p=new Zt(i.path.child("")),E=this.docs.getIteratorFrom(p);for(;E.hasNext();){const{key:M,value:{document:H,readTime:ee}}=E.getNext();if(!i.path.isPrefixOf(M.path))break;ee.compareTo(a)<=0||kl(i,H)&&(c=c.insert(H.key,H.clone()))}return ct.resolve(c)}Ts(e,i){return ct.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new hm(this)}getSize(e){return ct.resolve(this.size)}}class hm extends Rh{constructor(e){super(),this.Se=e}applyChanges(e){const i=[];return this.changes.forEach((a,c)=>{c.document.isValidDocument()?i.push(this.Se.addEntry(e,c.document,this.getReadTime(a))):this.Se.removeEntry(a)}),ct.waitFor(i)}getFromCache(e,i){return this.Se.getEntry(e,i)}getAllFromCache(e,i){return this.Se.getEntries(e,i)}}class cp{constructor(e){this.persistence=e,this.Es=new zl(i=>T(i),W),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.Is=0,this.As=new up,this.targetCount=0,this.Rs=$u.se()}forEachTarget(e,i){return this.Es.forEach((a,c)=>i(c)),ct.resolve()}getLastRemoteSnapshotVersion(e){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ct.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.Is&&(this.Is=i),ct.resolve()}ae(e){this.Es.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Rs=new $u(i),this.highestTargetId=i),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,i){return this.ae(i),this.targetCount+=1,ct.resolve()}updateTargetData(e,i){return this.ae(i),ct.resolve()}removeTargetData(e,i){return this.Es.delete(i.target),this.As.cs(i.targetId),this.targetCount-=1,ct.resolve()}removeTargets(e,i,a){let c=0;const p=[];return this.Es.forEach((E,M)=>{M.sequenceNumber<=i&&null===a.get(M.targetId)&&(this.Es.delete(E),p.push(this.removeMatchingKeysForTargetId(e,M.targetId)),c++)}),ct.waitFor(p).next(()=>c)}getTargetCount(e){return ct.resolve(this.targetCount)}getTargetData(e,i){const a=this.Es.get(i)||null;return ct.resolve(a)}addMatchingKeys(e,i,a){return this.As.ss(i,a),ct.resolve()}removeMatchingKeys(e,i,a){this.As.os(i,a);const c=this.persistence.referenceDelegate,p=[];return c&&i.forEach(E=>{p.push(c.markPotentiallyOrphaned(e,E))}),ct.waitFor(p)}removeMatchingKeysForTargetId(e,i){return this.As.cs(i),ct.resolve()}getMatchingKeysForTargetId(e,i){const a=this.As.hs(i);return ct.resolve(a)}containsKey(e,i){return ct.resolve(this.As.containsKey(i))}}class RE{constructor(e,i){this.bs={},this.Le=new ie(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new cp(this),this.Ht=new Qf,this.He=new lp(this.Ht,a=>this.referenceDelegate.Ps(a)),this.N=new l_(i),this.Je=new dm(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let i=this.bs[e.toKey()];return i||(i=new qu(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,i,a){Dt("MemoryPersistence","Starting transaction:",e);const c=new fm(this.Le.next());return this.referenceDelegate.vs(),a(c).next(p=>this.referenceDelegate.Vs(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Ss(e,i){return ct.or(Object.values(this.bs).map(a=>()=>a.containsKey(e,i)))}}class fm extends po{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.Ds=new up,this.Cs=null}static Ns(e){return new pm(e)}get xs(){if(this.Cs)return this.Cs;throw zt()}addReference(e,i,a){return this.Ds.addReference(a,i),this.xs.delete(a.toString()),ct.resolve()}removeReference(e,i,a){return this.Ds.removeReference(a,i),this.xs.add(a.toString()),ct.resolve()}markPotentiallyOrphaned(e,i){return this.xs.add(i.toString()),ct.resolve()}removeTarget(e,i){this.Ds.cs(i.targetId).forEach(c=>this.xs.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(c=>{c.forEach(p=>this.xs.add(p.toString()))}).next(()=>a.removeTargetData(e,i))}vs(){this.Cs=new Set}Vs(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.xs,a=>{const c=Zt.fromPath(a);return this.ks(e,c).next(p=>{p||i.removeEntry(c)})}).next(()=>(this.Cs=null,i.apply(e)))}updateLimboDocument(e,i){return this.ks(e,i).next(a=>{a?this.xs.delete(i.toString()):this.xs.add(i.toString())})}Ps(e){return 0}ks(e,i){return ct.or([()=>ct.resolve(this.Ds.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ss(e,i)])}}function hu(s,e){return`firestore_clients_${s}_${e}`}function Ad(s,e,i){let a=`firestore_mutations_${s}_${i}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Nc(s,e){return`firestore_targets_${s}_${e}`}class Oc{constructor(e,i,a,c){this.user=e,this.batchId=i,this.state=a,this.error=c}static $s(e,i,a){const c=JSON.parse(a);let p,E="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return E&&c.error&&(E="string"==typeof c.error.message&&"string"==typeof c.error.code,E&&(p=new yt(c.error.code,c.error.message))),E?new Oc(e,i,c.state,p):(Sr("SharedClientState",`Failed to parse mutation state for ID '${i}': ${a}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,i,a){this.targetId=e,this.state=i,this.error=a}static $s(e,i){const a=JSON.parse(i);let c,p="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new yt(a.error.code,a.error.message))),p?new Vh(e,a.state,c):(Sr("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uh{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static $s(e,i){const a=JSON.parse(i);let c="object"==typeof a&&a.activeTargetIds instanceof Array,p=Bl();for(let E=0;c&&E<a.activeTargetIds.length;++E)c=al(a.activeTargetIds[E]),p=p.add(a.activeTargetIds[E]);return c?new Uh(e,p):(Sr("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}}class Bh{constructor(e,i){this.clientId=e,this.onlineState=i}static $s(e){const i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new Bh(i.clientId,i.onlineState):(Sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gm{constructor(){this.activeTargetIds=Bl()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dp{constructor(e,i,a,c,p){this.window=e,this.Oe=i,this.persistenceKey=a,this.Ls=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Ji(ht),this.started=!1,this.Ks=[];const E=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.js=hu(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new gm),this.Ws=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(M){return`firestore_bundle_loaded_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,re.Z)(function*(){const i=yield e.syncEngine.pn();for(const c of i){if(c===e.Ls)continue;const p=e.getItem(hu(e.persistenceKey,c));if(p){const E=Uh.$s(c,p);E&&(e.qs=e.qs.insert(E.clientId,E))}}e.Ys();const a=e.storage.getItem(e.Hs);if(a){const c=e.Xs(a);c&&e.Zs(c)}for(const c of e.Ks)e.Us(c);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let i=!1;return this.qs.forEach((a,c)=>{c.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,i,a){this.ei(e,i,a),this.ni(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Nc(this.persistenceKey,e));if(a){const c=Vh.$s(e,a);c&&(i=c.state)}}return this.si.Fs(e),this.Ys(),i}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nc(this.persistenceKey,e))}updateQueryState(e,i,a){this.ii(e,i,a)}handleUserChange(e,i,a){i.forEach(c=>{this.ni(c)}),this.currentUser=e,a.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const i=this.storage.getItem(e);return Dt("SharedClientState","READ",e,i),i}setItem(e,i){Dt("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){Dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var i=this;const a=e;if(a.storageArea===this.storage){if(Dt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void Sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,re.Z)(function*(){if(i.started){if(null!==a.key)if(i.Ws.test(a.key)){if(null==a.newValue){const c=i.ai(a.key);return i.ci(c,null)}{const c=i.ui(a.key,a.newValue);if(c)return i.ci(c.clientId,c)}}else if(i.Gs.test(a.key)){if(null!==a.newValue){const c=i.hi(a.key,a.newValue);if(c)return i.li(c)}}else if(i.zs.test(a.key)){if(null!==a.newValue){const c=i.fi(a.key,a.newValue);if(c)return i.di(c)}}else if(a.key===i.Hs){if(null!==a.newValue){const c=i.Xs(a.newValue);if(c)return i.Zs(c)}}else if(a.key===i.Qs){const c=function(p){let E=ie.T;if(null!=p)try{const M=JSON.parse(p);on("number"==typeof M),E=M}catch(M){Sr("SharedClientState","Failed to read sequence number from WebStorage",M)}return E}(a.newValue);c!==ie.T&&i.sequenceNumberHandler(c)}else if(a.key===i.Js)return i.syncEngine.wi()}else i.Ks.push(a)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,i,a){const c=new Oc(this.currentUser,e,i,a),p=Ad(this.persistenceKey,this.currentUser,e);this.setItem(p,c.Os())}ni(e){const i=Ad(this.persistenceKey,this.currentUser,e);this.removeItem(i)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,i,a){const c=Nc(this.persistenceKey,e),p=new Vh(e,i,a);this.setItem(c,p.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const i=this.Ws.exec(e);return i?i[1]:null}ui(e,i){const a=this.ai(e);return Uh.$s(a,i)}hi(e,i){const a=this.Gs.exec(e),c=Number(a[1]);return Oc.$s(new hi(void 0!==a[2]?a[2]:null),c,i)}fi(e,i){const a=this.zs.exec(e),c=Number(a[1]);return Vh.$s(c,i)}Xs(e){return Bh.$s(e)}li(e){var i=this;return(0,re.Z)(function*(){if(e.user.uid===i.currentUser.uid)return i.syncEngine._i(e.batchId,e.state,e.error);Dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,i){const a=i?this.qs.insert(e,i):this.qs.remove(e),c=this.ti(this.qs),p=this.ti(a),E=[],M=[];return p.forEach(H=>{c.has(H)||E.push(H)}),c.forEach(H=>{p.has(H)||M.push(H)}),this.syncEngine.gi(E,M).then(()=>{this.qs=a})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let i=Bl();return e.forEach((a,c)=>{i=i.unionWith(c.activeTargetIds)}),i}}class E_{constructor(){this.yi=new gm,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,i,a){this.pi[e]=i}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new gm,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class mm{Ti(e){}shutdown(){}}class hp{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const w_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class fp{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class ME extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,i,a,c){const p=this.Bi(e,i);Dt("RestConnection","Sending: ",p,a);const E={};return this.Ui(E,c),this.qi(e,p,E,a).then(M=>(Dt("RestConnection","Received: ",M),M),M=>{throw la("RestConnection",`${e} failed with error: `,M,"url: ",p,"request:",a),M})}Ki(e,i,a,c){return this.Li(e,i,a,c)}Ui(e,i){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ho,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i)for(const a in i.authHeaders)i.authHeaders.hasOwnProperty(a)&&(e[a]=i.authHeaders[a])}Bi(e,i){return`${this.Fi}/v1/${i}:${w_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,i,a,c){return new Promise((p,E)=>{const M=new aa;M.listenOnce(ja.COMPLETE,()=>{try{switch(M.getLastErrorCode()){case Jr.NO_ERROR:const ee=M.getResponseJson();Dt("Connection","XHR received:",JSON.stringify(ee)),p(ee);break;case Jr.TIMEOUT:Dt("Connection",'RPC "'+e+'" timed out'),E(new yt(et.DEADLINE_EXCEEDED,"Request time out"));break;case Jr.HTTP_ERROR:const le=M.getStatus();if(Dt("Connection",'RPC "'+e+'" failed with status:',le,"response text:",M.getResponseText()),le>0){const Ne=M.getResponseJson().error;if(Ne&&Ne.status&&Ne.message){const st=function(pt){const Nt=pt.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(Nt)>=0?Nt:et.UNKNOWN}(Ne.status);E(new yt(st,Ne.message))}else E(new yt(et.UNKNOWN,"Server responded with status "+M.getStatus()))}else E(new yt(et.UNAVAILABLE,"Connection failed."));break;default:zt()}}finally{Dt("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(c);M.send(i,"POST",H,a,15)})}ji(e,i){const a=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Ba(),p=Ml(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(E.xmlHttpFactory=new iu({})),this.Ui(E.initMessageHeaders,i),(0,Ze.uI)()||(0,Ze.b$)()||(0,Ze.d)()||(0,Ze.w1)()||(0,Ze.Mn)()||(0,Ze.ru)()||(E.httpHeadersOverwriteParam="$httpHeaders");const M=a.join("");Dt("Connection","Creating WebChannel: "+M,E);const H=c.createWebChannel(M,E);let ee=!1,le=!1;const Ne=new fp({vi:pt=>{le?Dt("Connection","Not sending because WebChannel is closed:",pt):(ee||(Dt("Connection","Opening WebChannel transport."),H.open(),ee=!0),Dt("Connection","WebChannel sending:",pt),H.send(pt))},Vi:()=>H.close()}),st=(pt,Nt,ln)=>{pt.listen(Nt,ar=>{try{ln(ar)}catch(ss){setTimeout(()=>{throw ss},0)}})};return st(H,Zs.EventType.OPEN,()=>{le||Dt("Connection","WebChannel transport opened.")}),st(H,Zs.EventType.CLOSE,()=>{le||(le=!0,Dt("Connection","WebChannel transport closed"),Ne.$i())}),st(H,Zs.EventType.ERROR,pt=>{le||(le=!0,la("Connection","WebChannel transport errored:",pt),Ne.$i(new yt(et.UNAVAILABLE,"The operation could not be completed")))}),st(H,Zs.EventType.MESSAGE,pt=>{var Nt;if(!le){const ln=pt.data[0];on(!!ln);const ar=ln,ss=ar.error||(null===(Nt=ar[0])||void 0===Nt?void 0:Nt.error);if(ss){Dt("Connection","WebChannel received error:",ss);const Ua=ss.status;let tu=function(vu){const nh=ms[vu];if(void 0!==nh)return Pu(nh)}(Ua),_u=ss.message;void 0===tu&&(tu=et.INTERNAL,_u="Unknown error status: "+Ua+" with message "+ss.message),le=!0,Ne.$i(new yt(tu,_u)),H.close()}else Dt("Connection","WebChannel received:",ln),Ne.Oi(ln)}}),st(p,Da.STAT_EVENT,pt=>{pt.stat===Uo.PROXY?Dt("Connection","Detected buffering proxy"):pt.stat===Uo.NOPROXY&&Dt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ne.ki()},0),Ne}}function b_(){return"undefined"!=typeof window?window:null}function pp(){return"undefined"!=typeof document?document:null}function jh(s){return new Kg(s,!0)}class ym{constructor(e,i,a=1e3,c=1.5,p=6e4){this.Oe=e,this.timerId=i,this.Qi=a,this.Wi=c,this.Gi=p,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const i=Math.floor(this.zi+this.Zi()),a=Math.max(0,Date.now()-this.Ji),c=Math.max(0,i-a);c>0&&Dt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.zi} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,c,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class I_{constructor(e,i,a,c,p,E){this.Oe=e,this.er=a,this.nr=c,this.credentialsProvider=p,this.listener=E,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new ym(e,i)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,re.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,re.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,i){var a=this;return(0,re.Z)(function*(){a._r(),a.rr.cancel(),a.sr++,3!==e?a.rr.reset():i&&i.code===et.RESOURCE_EXHAUSTED?(Sr(i.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),a.rr.Yi()):i&&i.code===et.UNAUTHENTICATED&&a.credentialsProvider.invalidateToken(),null!==a.stream&&(a.mr(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Ci(i)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),i=this.sr;this.credentialsProvider.getToken().then(a=>{this.sr===i&&this.yr(a)},a=>{e(()=>{const c=new yt(et.UNKNOWN,"Fetching auth token failed: "+a.message);return this.pr(c)})})}yr(e){const i=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{i(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(a=>{i(()=>this.pr(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}ur(){var e=this;this.state=4,this.rr.Xi((0,re.Z)(function*(){e.state=0,e.start()}))}pr(e){return Dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return i=>{this.Oe.enqueueAndForget(()=>this.sr===e?i():(Dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NE extends I_{constructor(e,i,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle",i,a,p),this.N=c}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const i=function(s,e){let i;if("targetChange"in e){const a="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:zt(),c=e.targetChange.targetIds||[],p=function(H,ee){return H.D?(on(void 0===ee||"string"==typeof ee),Qi.fromBase64String(ee||"")):(on(void 0===ee||ee instanceof Uint8Array),Qi.fromUint8Array(ee||new Uint8Array))}(s,e.targetChange.resumeToken),E=e.targetChange.cause,M=E&&function(H){const ee=void 0===H.code?et.UNKNOWN:Pu(H.code);return new yt(ee,H.message||"")}(E);i=new dd(a,c,p,M||null)}else if("documentChange"in e){const a=e.documentChange,c=$o(s,a.document.name),p=Ls(a.document.updateTime),E=new Ds({mapValue:{fields:a.document.fields}}),M=si.newFoundDocument(c,p,E);i=new Fu(a.targetIds||[],a.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const a=e.documentDelete,c=$o(s,a.document),p=a.readTime?Ls(a.readTime):xt.min(),E=si.newNoDocument(c,p);i=new Fu([],a.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const a=e.documentRemove,c=$o(s,a.document);i=new Fu([],a.removedTargetIds||[],c,null)}else{if(!("filter"in e))return zt();{const a=e.filter,p=new Ou(a.count||0);i=new cd(a.targetId,p)}}var H;return i}(this.N,e),a=function(c){if(!("targetChange"in c))return xt.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?xt.min():p.readTime?Ls(p.readTime):xt.min()}(e);return this.listener.Er(i,a)}Ir(e){const i={};i.database=Lu(this.N),i.addTarget=function(c,p){let E;const M=p.target;return E=ue(M)?{documents:bc(c,M)}:{query:Ic(c,M)},E.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?E.resumeToken=fd(c,p.resumeToken):p.snapshotVersion.compareTo(xt.min())>0&&(E.readTime=_c(c,p.snapshotVersion.toTimestamp())),E}(this.N,e);const a=function(s,e){const i=function(a,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zt()}}(0,e.purpose);return null==i?null:{"goog-listen-tags":i}}(0,e);a&&(i.labels=a),this.wr(i)}Ar(e){const i={};i.database=Lu(this.N),i.removeTarget=e,this.wr(i)}}class OE extends I_{constructor(e,i,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle",i,a,p),this.N=c,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(on(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const i=function(s,e){return s&&s.length>0?(on(void 0!==e),s.map(i=>function(a,c){let p=Ls(a.updateTime?a.updateTime:c);return p.isEqual(xt.min())&&(p=Ls(c)),new $f(p,a.transformResults||[])}(i,e))):[]}(e.writeResults,e.commitTime),a=Ls(e.commitTime);return this.listener.vr(a,i)}return on(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Lu(this.N),this.wr(e)}Pr(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>au(this.N,a))};this.wr(i)}}class PE extends class{}{constructor(e,i,a){super(),this.credentials=e,this.nr=i,this.N=a,this.Dr=!1}Cr(){if(this.Dr)throw new yt(et.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,i,a){return this.Cr(),this.credentials.getToken().then(c=>this.nr.Li(e,i,a,c)).catch(c=>{throw"FirebaseError"===c.name?(c.code===et.UNAUTHENTICATED&&this.credentials.invalidateToken(),c):new yt(et.UNKNOWN,c.toString())})}Ki(e,i,a){return this.Cr(),this.credentials.getToken().then(c=>this.nr.Ki(e,i,a,c)).catch(c=>{throw"FirebaseError"===c.name?(c.code===et.UNAUTHENTICATED&&this.credentials.invalidateToken(),c):new yt(et.UNKNOWN,c.toString())})}terminate(){this.Dr=!0}}class kE{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const i=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Sr(i),this.$r=!1):Dt("OnlineStateTracker",i)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class FE{constructor(e,i,a,c,p){var E=this;this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=p,this.Qr.Ti(M=>{a.enqueueAndForget((0,re.Z)(function*(){var H;_l(E)&&(Dt("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,re.Z)(function*(ee){const le=At(ee);le.Kr.add(4),yield Pc(le),le.Wr.set("Unknown"),le.Kr.delete(4),yield Fa(le)}),function(ee){return H.apply(this,arguments)})(E))}))}),this.Wr=new kE(a,c)}}function Fa(s){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,re.Z)(function*(s){if(_l(s))for(const e of s.jr)yield e(!0)})).apply(this,arguments)}function Pc(s){return $h.apply(this,arguments)}function $h(){return($h=(0,re.Z)(function*(s){for(const e of s.jr)yield e(!1)})).apply(this,arguments)}function kc(s,e){const i=At(s);i.qr.has(e.targetId)||(i.qr.set(e.targetId,e),Hh(i)?fu(i):Lc(i).cr()&&xd(i,e))}function Fc(s,e){const i=At(s),a=Lc(i);i.qr.delete(e),a.cr()&&_m(i,e),0===i.qr.size&&(a.cr()?a.lr():_l(i)&&i.Wr.set("Unknown"))}function xd(s,e){s.Gr.Y(e.targetId),Lc(s).Ir(e)}function _m(s,e){s.Gr.Y(e),Lc(s).Ar(e)}function fu(s){s.Gr=new Zg({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>s.qr.get(e)||null}),Lc(s).start(),s.Wr.Or()}function Hh(s){return _l(s)&&!Lc(s).ar()&&s.qr.size>0}function _l(s){return 0===At(s).Kr.size}function C_(s){s.Gr=void 0}function gp(s){return mp.apply(this,arguments)}function mp(){return(mp=(0,re.Z)(function*(s){s.qr.forEach((e,i)=>{xd(s,e)})})).apply(this,arguments)}function vm(s,e){return yp.apply(this,arguments)}function yp(){return(yp=(0,re.Z)(function*(s,e){C_(s),Hh(s)?(s.Wr.Lr(e),fu(s)):s.Wr.set("Unknown")})).apply(this,arguments)}function D_(s,e,i){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,re.Z)(function*(s,e,i){if(s.Wr.set("Online"),e instanceof dd&&2===e.state&&e.cause)try{yield(a=(0,re.Z)(function*(c,p){const E=p.cause;for(const M of p.targetIds)c.qr.has(M)&&(yield c.remoteSyncer.rejectListen(M,E),c.qr.delete(M),c.Gr.removeTarget(M))}),function(c,p){return a.apply(this,arguments)})(s,e)}catch(a){Dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Wu(s,a)}else if(e instanceof Fu?s.Gr.rt(e):e instanceof cd?s.Gr.ft(e):s.Gr.ct(e),!i.isEqual(xt.min()))try{const a=yield ka(s.localStore);i.compareTo(a)>=0&&(yield function(c,p){const E=c.Gr._t(p);return E.targetChanges.forEach((M,H)=>{if(M.resumeToken.approximateByteSize()>0){const ee=c.qr.get(H);ee&&c.qr.set(H,ee.withResumeToken(M.resumeToken,p))}}),E.targetMismatches.forEach(M=>{const H=c.qr.get(M);if(!H)return;c.qr.set(M,H.withResumeToken(Qi.EMPTY_BYTE_STRING,H.snapshotVersion)),_m(c,M);const ee=new Bu(H.target,M,1,H.sequenceNumber);xd(c,ee)}),c.remoteSyncer.applyRemoteEvent(E)}(s,i))}catch(a){Dt("RemoteStore","Failed to raise snapshot:",a),yield Wu(s,a)}var a})).apply(this,arguments)}function Wu(s,e,i){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,re.Z)(function*(s,e,i){if(!lu(e))throw e;s.Kr.add(1),yield Pc(s),s.Wr.set("Offline"),i||(i=()=>ka(s.localStore)),s.asyncQueue.enqueueRetryable((0,re.Z)(function*(){Dt("RemoteStore","Retrying IndexedDB access"),yield i(),s.Kr.delete(1),yield Fa(s)}))})).apply(this,arguments)}function Yl(s,e){return e().catch(i=>Wu(s,i,e))}function pu(s){return vl.apply(this,arguments)}function vl(){return(vl=(0,re.Z)(function*(s){const e=At(s),i=El(e);let a=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;T_(e);)try{const c=yield __(e.localStore,a);if(null===c){0===e.Ur.length&&i.lr();break}a=c.batchId,Em(e,c)}catch(c){yield Wu(e,c)}_p(e)&&Gh(e)})).apply(this,arguments)}function T_(s){return _l(s)&&s.Ur.length<10}function Em(s,e){s.Ur.push(e);const i=El(s);i.cr()&&i.br&&i.Pr(e.mutations)}function _p(s){return _l(s)&&!El(s).ar()&&s.Ur.length>0}function Gh(s){El(s).start()}function vp(s){return qh.apply(this,arguments)}function qh(){return(qh=(0,re.Z)(function*(s){El(s).Sr()})).apply(this,arguments)}function Wh(s){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,re.Z)(function*(s){const e=El(s);for(const i of s.Ur)e.Pr(i.mutations)})).apply(this,arguments)}function wm(s,e,i){return bm.apply(this,arguments)}function bm(){return(bm=(0,re.Z)(function*(s,e,i){const a=s.Ur.shift(),c=Yg.from(a,e,i);yield Yl(s,()=>s.remoteSyncer.applySuccessfulWrite(c)),yield pu(s)})).apply(this,arguments)}function Im(s,e){return zh.apply(this,arguments)}function zh(){return(zh=(0,re.Z)(function*(s,e){var i;e&&El(s).br&&(yield(i=(0,re.Z)(function*(a,c){if(na(p=c.code)&&p!==et.ABORTED){const E=a.Ur.shift();El(a).hr(),yield Yl(a,()=>a.remoteSyncer.rejectFailedWrite(E.batchId,c)),yield pu(a)}var p}),function(a,c){return i.apply(this,arguments)})(s,e)),_p(s)&&Gh(s)})).apply(this,arguments)}function wp(s,e){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,re.Z)(function*(s,e){const i=At(s);e?(i.Kr.delete(2),yield Fa(i)):e||(i.Kr.add(2),yield Pc(i),i.Wr.set("Unknown"))})).apply(this,arguments)}function Lc(s){return s.zr||(s.zr=function(e,i,a){const c=At(e);return c.Cr(),new NE(i,c.nr,c.credentials,c.N,a)}(s.datastore,s.asyncQueue,{Si:gp.bind(null,s),Ci:vm.bind(null,s),Er:D_.bind(null,s)}),s.jr.push(function(){var e=(0,re.Z)(function*(i){i?(s.zr.hr(),Hh(s)?fu(s):s.Wr.set("Unknown")):(yield s.zr.stop(),C_(s))});return function(i){return e.apply(this,arguments)}}())),s.zr}function El(s){return s.Hr||(s.Hr=function(e,i,a){const c=At(e);return c.Cr(),new OE(i,c.nr,c.credentials,c.N,a)}(s.datastore,s.asyncQueue,{Si:vp.bind(null,s),Ci:Im.bind(null,s),Vr:Wh.bind(null,s),vr:wm.bind(null,s)}),s.jr.push(function(){var e=(0,re.Z)(function*(i){i?(s.Hr.hr(),yield pu(s)):(yield s.Hr.stop(),s.Ur.length>0&&(Dt("RemoteStore",`Stopping write stream with ${s.Ur.length} pending writes`),s.Ur=[]))});return function(i){return e.apply(this,arguments)}}())),s.Hr}class qo{constructor(e,i,a,c,p){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=c,this.removalCallback=p,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,i,a,c,p){const E=Date.now()+a,M=new qo(e,i,E,c,p);return M.start(a),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vc(s,e){if(Sr("AsyncQueue",`${e}: ${s}`),lu(s))return new yt(et.UNAVAILABLE,`${e}: ${s}`);throw s}class Uc{constructor(e){this.comparator=e?(i,a)=>e(i,a)||Zt.comparator(i.key,a.key):(i,a)=>Zt.comparator(i.key,a.key),this.keyedMap=ld(),this.sortedSet=new Ji(this.comparator)}static emptySet(e){return new Uc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Uc)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const c=i.getNext().key,p=a.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){const a=new Uc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}class A_{constructor(){this.Jr=new Ji(Zt.comparator)}track(e){const i=e.doc.key,a=this.Jr.get(i);a?0!==e.type&&3===a.type?this.Jr=this.Jr.insert(i,e):3===e.type&&1!==a.type?this.Jr=this.Jr.insert(i,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Jr=this.Jr.insert(i,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Jr=this.Jr.insert(i,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Jr=this.Jr.remove(i):1===e.type&&2===a.type?this.Jr=this.Jr.insert(i,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Jr=this.Jr.insert(i,{type:2,doc:e.doc}):zt():this.Jr=this.Jr.insert(i,e)}Yr(){const e=[];return this.Jr.inorderTraversal((i,a)=>{e.push(a)}),e}}class Md{constructor(e,i,a,c,p,E,M,H){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=p,this.fromCache=E,this.syncStateChanged=M,this.excludesMetadataChanges=H}static fromInitialDocuments(e,i,a,c){const p=[];return i.forEach(E=>{p.push({type:0,doc:E})}),new Md(e,i,Uc.emptySet(i),p,a,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let c=0;c<i.length;c++)if(i[c].type!==a[c].type||!i[c].doc.isEqual(a[c].doc))return!1;return!0}}class Cm{constructor(){this.Xr=void 0,this.listeners=[]}}class LE{constructor(){this.queries=new zl(e=>nd(e),Su),this.onlineState="Unknown",this.Zr=new Set}}function bp(s,e){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,re.Z)(function*(s,e){const i=At(s),a=e.query;let c=!1,p=i.queries.get(a);if(p||(c=!0,p=new Cm),c)try{p.Xr=yield i.onListen(a)}catch(E){const M=Vc(E,`Initialization of query '${cc(e.query)}' failed`);return void e.onError(M)}i.queries.set(a,p),p.listeners.push(e),e.eo(i.onlineState),p.Xr&&e.no(p.Xr)&&Yh(i)})).apply(this,arguments)}function Kh(s,e){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,re.Z)(function*(s,e){const i=At(s),a=e.query;let c=!1;const p=i.queries.get(a);if(p){const E=p.listeners.indexOf(e);E>=0&&(p.listeners.splice(E,1),c=0===p.listeners.length)}if(c)return i.queries.delete(a),i.onUnlisten(a)})).apply(this,arguments)}function S_(s,e){const i=At(s);let a=!1;for(const c of e){const E=i.queries.get(c.query);if(E){for(const M of E.listeners)M.no(c)&&(a=!0);E.Xr=c}}a&&Yh(i)}function x_(s,e,i){const a=At(s),c=a.queries.get(e);if(c)for(const p of c.listeners)p.onError(i);a.queries.delete(e)}function Yh(s){s.Zr.forEach(e=>{e.next()})}class Cp{constructor(e,i,a){this.query=e,this.so=i,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=a||{}}no(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)3!==c.type&&a.push(c);e=new Md(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let i=!1;return this.io?this.oo(e)&&(this.so.next(e),i=!0):this.ao(e,this.onlineState)&&(this.co(e),i=!0),this.ro=e,i}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let i=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),i=!0),i}ao(e,i){return!e.fromCache||!(this.options.uo&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=Md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Dm{constructor(e,i){this.payload=e,this.byteLength=i}ho(){return"metadata"in this.payload}}class Tm{constructor(e){this.N=e}zn(e){return $o(this.N,e)}Hn(e){return e.metadata.exists?_h(this.N,e.document,!1):si.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Ls(e)}}class R_{constructor(e,i,a){this.lo=e,this.localStore=i,this.N=a,this.queries=[],this.documents=[],this.progress=Dp(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i),i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}wo(e){const i=new Map,a=new Tm(this.N);for(const c of e)if(c.metadata.queries){const p=a.zn(c.metadata.name);for(const E of c.metadata.queries){const M=(i.get(E)||Wr()).add(p);i.set(E,M)}}return i}complete(){var e=this;return(0,re.Z)(function*(){const i=yield function(s,e,i,a){return Fh.apply(this,arguments)}(e.localStore,new Tm(e.N),e.documents,e.lo.id),a=e.wo(e.documents);for(const c of e.queries)yield Lh(e.localStore,c,a.get(c.name));return e.progress.taskState="Success",new sm(Object.assign({},e.progress),i)})()}}function Dp(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class Tp{constructor(e){this.key=e}}class Am{constructor(e){this.key=e}}class Ka{constructor(e,i){this.query=e,this._o=i,this.mo=null,this.current=!1,this.yo=Wr(),this.mutatedKeys=Wr(),this.po=xu(e),this.To=new Uc(this.po)}get Eo(){return this._o}Io(e,i){const a=i?i.Ao:new A_,c=i?i.To:this.To;let p=i?i.mutatedKeys:this.mutatedKeys,E=c,M=!1;const H=qa(this.query)&&c.size===this.query.limit?c.last():null,ee=Na(this.query)&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((le,Ne)=>{const st=c.get(le),pt=kl(this.query,Ne)?Ne:null,Nt=!!st&&this.mutatedKeys.has(st.key),ln=!!pt&&(pt.hasLocalMutations||this.mutatedKeys.has(pt.key)&&pt.hasCommittedMutations);let ar=!1;st&&pt?st.data.isEqual(pt.data)?Nt!==ln&&(a.track({type:3,doc:pt}),ar=!0):this.Ro(st,pt)||(a.track({type:2,doc:pt}),ar=!0,(H&&this.po(pt,H)>0||ee&&this.po(pt,ee)<0)&&(M=!0)):!st&&pt?(a.track({type:0,doc:pt}),ar=!0):st&&!pt&&(a.track({type:1,doc:st}),ar=!0,(H||ee)&&(M=!0)),ar&&(pt?(E=E.add(pt),p=ln?p.add(le):p.delete(le)):(E=E.delete(le),p=p.delete(le)))}),qa(this.query)||Na(this.query))for(;E.size>this.query.limit;){const le=qa(this.query)?E.last():E.first();E=E.delete(le.key),p=p.delete(le.key),a.track({type:1,doc:le})}return{To:E,Ao:a,Ln:M,mutatedKeys:p}}Ro(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a){const c=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const p=e.Ao.Yr();p.sort((ee,le)=>function(Ne,st){const pt=Nt=>{switch(Nt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt()}};return pt(Ne)-pt(st)}(ee.type,le.type)||this.po(ee.doc,le.doc)),this.bo(a);const E=i?this.Po():[],M=0===this.yo.size&&this.current?1:0,H=M!==this.mo;return this.mo=M,0!==p.length||H?{snapshot:new Md(this.query,e.To,c,p,e.mutatedKeys,0===M,H,!1),vo:E}:{vo:E}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new A_,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(i=>this._o=this._o.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this._o=this._o.delete(i)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Wr(),this.To.forEach(a=>{this.Vo(a.key)&&(this.yo=this.yo.add(a.key))});const i=[];return e.forEach(a=>{this.yo.has(a)||i.push(new Am(a))}),this.yo.forEach(a=>{e.has(a)||i.push(new Tp(a))}),i}So(e){this._o=e.Gn,this.yo=Wr();const i=this.Io(e.documents);return this.applyChanges(i,!0)}Do(){return Md.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class Ap{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class M_{constructor(e){this.key=e,this.Co=!1}}class N_{constructor(e,i,a,c,p,E){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=E,this.No={},this.xo=new zl(M=>nd(M),Su),this.ko=new Map,this.$o=new Set,this.Oo=new Ji(Zt.comparator),this.Fo=new Map,this.Mo=new up,this.Lo={},this.Bo=new Map,this.Uo=$u.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function VE(s,e){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,re.Z)(function*(s,e){const i=bl(s);let a,c;const p=i.xo.get(e);if(p)a=p.targetId,i.sharedClientState.addLocalQueryTarget(a),c=p.view.Do();else{const E=yield Rc(i.localStore,Fs(e)),M=i.sharedClientState.addLocalQueryTarget(E.targetId);a=E.targetId,c=yield Sp(i,e,a,"current"===M),i.isPrimaryClient&&kc(i.remoteStore,E)}return c})).apply(this,arguments)}function Sp(s,e,i,a){return xp.apply(this,arguments)}function xp(){return(xp=(0,re.Z)(function*(s,e,i,a){s.Ko=(le,Ne,st)=>{return(pt=(0,re.Z)(function*(Nt,ln,ar,ss){let Ua=ln.view.Io(ar);Ua.Ln&&(Ua=yield Td(Nt.localStore,ln.query,!1).then(({documents:vu})=>ln.view.Io(vu,Ua)));const tu=ss&&ss.targetChanges.get(ln.targetId),_u=ln.view.applyChanges(Ua,Nt.isPrimaryClient,tu);return ef(Nt,ln.targetId,_u.vo),_u.snapshot}),function(Nt,ln,ar,ss){return pt.apply(this,arguments)})(s,le,Ne,st);var pt};const c=yield Td(s.localStore,e,!0),p=new Ka(e,c.Gn),E=p.Io(c.documents),M=pa.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==s.onlineState),H=p.applyChanges(E,s.isPrimaryClient,M);ef(s,i,H.vo);const ee=new Ap(e,i,p);return s.xo.set(e,ee),s.ko.has(i)?s.ko.get(i).push(e):s.ko.set(i,[e]),H.snapshot})).apply(this,arguments)}function O_(s,e){return Od.apply(this,arguments)}function Od(){return(Od=(0,re.Z)(function*(s,e){const i=At(s),a=i.xo.get(e),c=i.ko.get(a.targetId);if(c.length>1)return i.ko.set(a.targetId,c.filter(p=>!Su(p,e))),void i.xo.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Mc(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),Fc(i.remoteStore,a.targetId),Ql(i,a.targetId)}).catch(ya))):(Ql(i,a.targetId),yield Mc(i.localStore,a.targetId,!0))})).apply(this,arguments)}function Rp(){return(Rp=(0,re.Z)(function*(s,e,i){const a=Bp(s);try{const c=yield function(p,E){const M=At(p),H=Ln.now(),ee=E.reduce((Ne,st)=>Ne.add(st.key),Wr());let le;return M.persistence.runTransaction("Locally write mutations","readwrite",Ne=>M.Qn.Pn(Ne,ee).next(st=>{le=st;const pt=[];for(const Nt of E){const ln=fh(Nt,le.get(Nt.key));null!=ln&&pt.push(new Oa(Nt.key,ln,Ol(ln.value.mapValue),gs.exists(!0)))}return M.In.addMutationBatch(Ne,H,pt,E)})).then(Ne=>(Ne.applyToLocalDocumentSet(le),{batchId:Ne.batchId,changes:le}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(p,E,M){let H=p.Lo[p.currentUser.toKey()];H||(H=new Ji(ht)),H=H.insert(E,M),p.Lo[p.currentUser.toKey()]=H}(a,c.batchId,i),yield Zu(a,c.changes),yield pu(a.remoteStore)}catch(c){const p=Vc(c,"Failed to persist write");i.reject(p)}})).apply(this,arguments)}function Pd(s,e){return kd.apply(this,arguments)}function kd(){return(kd=(0,re.Z)(function*(s,e){const i=At(s);try{const a=yield y_(i.localStore,e);e.targetChanges.forEach((c,p)=>{const E=i.Fo.get(p);E&&(on(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?E.Co=!0:c.modifiedDocuments.size>0?on(E.Co):c.removedDocuments.size>0&&(on(E.Co),E.Co=!1))}),yield Zu(i,a,e)}catch(a){yield ya(a)}})).apply(this,arguments)}function Sm(s,e,i){const a=At(s);if(a.isPrimaryClient&&0===i||!a.isPrimaryClient&&1===i){const c=[];a.xo.forEach((p,E)=>{const M=E.view.eo(e);M.snapshot&&c.push(M.snapshot)}),function(p,E){const M=At(p);M.onlineState=E;let H=!1;M.queries.forEach((ee,le)=>{for(const Ne of le.listeners)Ne.eo(E)&&(H=!0)}),H&&Yh(M)}(a.eventManager,e),c.length&&a.No.Er(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function Mp(s,e,i){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,re.Z)(function*(s,e,i){const a=At(s);a.sharedClientState.updateQueryState(e,"rejected",i);const c=a.Fo.get(e),p=c&&c.key;if(p){let E=new Ji(Zt.comparator);E=E.insert(p,si.newNoDocument(p,xt.min()));const M=Wr().add(p),H=new Io(xt.min(),new Map,new Mi(ht),E,M);yield Pd(a,H),a.Oo=a.Oo.remove(p),a.Fo.delete(e),Bc(a)}else yield Mc(a.localStore,e,!1).then(()=>Ql(a,e,i)).catch(ya)})).apply(this,arguments)}function xm(s,e){return Np.apply(this,arguments)}function Np(){return(Np=(0,re.Z)(function*(s,e){const i=At(s),a=e.batch.batchId;try{const c=yield m_(i.localStore,e);Xh(i,a,null),Jh(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),yield Zu(i,c)}catch(c){yield ya(c)}})).apply(this,arguments)}function k_(s,e,i){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,re.Z)(function*(s,e,i){const a=At(s);try{const c=yield function(p,E){const M=At(p);return M.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let ee;return M.In.lookupMutationBatch(H,E).next(le=>(on(null!==le),ee=le.keys(),M.In.removeMutationBatch(H,le))).next(()=>M.In.performConsistencyCheck(H)).next(()=>M.Qn.Pn(H,ee))})}(a.localStore,e);Xh(a,e,i),Jh(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),yield Zu(a,c)}catch(c){yield ya(c)}})).apply(this,arguments)}function Op(){return(Op=(0,re.Z)(function*(s,e){const i=At(s);_l(i.remoteStore)||Dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(p){const E=At(p);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>E.In.getHighestUnacknowledgedBatchId(M))}(i.localStore);if(-1===a)return void e.resolve();const c=i.Bo.get(a)||[];c.push(e),i.Bo.set(a,c)}catch(a){const c=Vc(a,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}})).apply(this,arguments)}function Jh(s,e){(s.Bo.get(e)||[]).forEach(i=>{i.resolve()}),s.Bo.delete(e)}function Xh(s,e,i){const a=At(s);let c=a.Lo[a.currentUser.toKey()];if(c){const p=c.get(e);p&&(i?p.reject(i):p.resolve(),c=c.remove(e)),a.Lo[a.currentUser.toKey()]=c}}function Ql(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.ko.get(e))s.xo.delete(a),i&&s.No.jo(a,i);s.ko.delete(e),s.isPrimaryClient&&s.Mo.cs(e).forEach(a=>{s.Mo.containsKey(a)||Pp(s,a)})}function Pp(s,e){s.$o.delete(e.path.canonicalString());const i=s.Oo.get(e);null!==i&&(Fc(s.remoteStore,i),s.Oo=s.Oo.remove(e),s.Fo.delete(i),Bc(s))}function ef(s,e,i){for(const a of i)a instanceof Tp?(s.Mo.addReference(a.key,e),zu(s,a)):a instanceof Am?(Dt("SyncEngine","Document no longer in limbo: "+a.key),s.Mo.removeReference(a.key,e),s.Mo.containsKey(a.key)||Pp(s,a.key)):zt()}function zu(s,e){const i=e.key,a=i.path.canonicalString();s.Oo.get(i)||s.$o.has(a)||(Dt("SyncEngine","New document in limbo: "+i),s.$o.add(a),Bc(s))}function Bc(s){for(;s.$o.size>0&&s.Oo.size<s.maxConcurrentLimboResolutions;){const e=s.$o.values().next().value;s.$o.delete(e);const i=new Zt(qn.fromString(e)),a=s.Uo.next();s.Fo.set(a,new M_(i)),s.Oo=s.Oo.insert(i,a),kc(s.remoteStore,new Bu(Fs(Ga(i.path)),a,2,ie.T))}}function Zu(s,e,i){return kp.apply(this,arguments)}function kp(){return(kp=(0,re.Z)(function*(s,e,i){const a=At(s),c=[],p=[],E=[];var M;a.xo.isEmpty()||(a.xo.forEach((M,H)=>{E.push(a.Ko(H,e,i).then(ee=>{if(ee){a.isPrimaryClient&&a.sharedClientState.updateQueryState(H.targetId,ee.fromCache?"not-current":"current"),c.push(ee);const le=kh.kn(H.targetId,ee);p.push(le)}}))}),yield Promise.all(E),a.No.Er(c),yield(M=(0,re.Z)(function*(H,ee){const le=At(H);try{yield le.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ne=>ct.forEach(ee,st=>ct.forEach(st.Nn,pt=>le.persistence.referenceDelegate.addReference(Ne,st.targetId,pt)).next(()=>ct.forEach(st.xn,pt=>le.persistence.referenceDelegate.removeReference(Ne,st.targetId,pt)))))}catch(Ne){if(!lu(Ne))throw Ne;Dt("LocalStore","Failed to update sequence numbers: "+Ne)}for(const Ne of ee){const st=Ne.targetId;if(!Ne.fromCache){const pt=le.Un.get(st),ln=pt.withLastLimboFreeSnapshotVersion(pt.snapshotVersion);le.Un=le.Un.insert(st,ln)}}}),function(H,ee){return M.apply(this,arguments)})(a.localStore,p))})).apply(this,arguments)}function BE(s,e){return wl.apply(this,arguments)}function wl(){return(wl=(0,re.Z)(function*(s,e){const i=At(s);if(!i.currentUser.isEqual(e)){Dt("SyncEngine","User change. New user:",e.toKey());const a=yield ip(i.localStore,e);i.currentUser=e,(c=i).Bo.forEach(E=>{E.forEach(M=>{M.reject(new yt(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Bo.clear(),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield Zu(i,a.Wn)}var c})).apply(this,arguments)}function Rm(s,e){const i=At(s),a=i.Fo.get(e);if(a&&a.Co)return Wr().add(a.key);{let c=Wr();const p=i.ko.get(e);if(!p)return c;for(const E of p){const M=i.xo.get(E);c=c.unionWith(M.view.Eo)}return c}}function Vd(s,e){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,re.Z)(function*(s,e){const i=At(s),a=yield Td(i.localStore,e.query,!0),c=e.view.So(a);return i.isPrimaryClient&&ef(i,e.targetId,c.vo),c})).apply(this,arguments)}function F_(s){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,re.Z)(function*(s){const e=At(s);return lm(e.localStore).then(i=>Zu(e,i))})).apply(this,arguments)}function Mm(s,e,i,a){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,re.Z)(function*(s,e,i,a){const c=At(s),p=yield function(E,M){const H=At(E),ee=At(H.In);return H.persistence.runTransaction("Lookup mutation documents","readonly",le=>ee.Xt(le,M).next(Ne=>Ne?H.Qn.Pn(le,Ne):ct.resolve(null)))}(c.localStore,e);var M;null!==p?("pending"===i?yield pu(c.remoteStore):"acknowledged"===i||"rejected"===i?(Xh(c,e,a||null),Jh(c,e),M=e,At(At(c.localStore).In).te(M)):zt(),yield Zu(c,p)):Dt("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Lp(){return(Lp=(0,re.Z)(function*(s,e){const i=At(s);if(bl(i),Bp(i),!0===e&&!0!==i.qo){const a=i.sharedClientState.getAllActiveQueryTargets(),c=yield tf(i,a.toArray());i.qo=!0,yield wp(i.remoteStore,!0);for(const p of c)kc(i.remoteStore,p)}else if(!1===e&&!1!==i.qo){const a=[];let c=Promise.resolve();i.ko.forEach((p,E)=>{i.sharedClientState.isLocalQueryTarget(E)?a.push(E):c=c.then(()=>(Ql(i,E),Mc(i.localStore,E,!0))),Fc(i.remoteStore,E)}),yield c,yield tf(i,a),function(p){const E=At(p);E.Fo.forEach((M,H)=>{Fc(E.remoteStore,H)}),E.Mo.us(),E.Fo=new Map,E.Oo=new Ji(Zt.comparator)}(i),i.qo=!1,yield wp(i.remoteStore,!1)}})).apply(this,arguments)}function tf(s,e,i){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,re.Z)(function*(s,e,i){const a=At(s),c=[],p=[];for(const E of e){let M;const H=a.ko.get(E);if(H&&0!==H.length){M=yield Rc(a.localStore,Fs(H[0]));for(const ee of H){const le=a.xo.get(ee),Ne=yield Vd(a,le);Ne.snapshot&&p.push(Ne.snapshot)}}else{const ee=yield um(a.localStore,E);M=yield Rc(a.localStore,ee),yield Sp(a,Om(ee),E,!1)}c.push(M)}return a.No.Er(p),c})).apply(this,arguments)}function Om(s){return Bf(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Pm(s){const e=At(s);return At(At(e.localStore).persistence).pn()}function jc(s,e,i,a){return nf.apply(this,arguments)}function nf(){return(nf=(0,re.Z)(function*(s,e,i,a){const c=At(s);if(c.qo)Dt("SyncEngine","Ignoring unexpected query state notification.");else if(c.ko.has(e))switch(i){case"current":case"not-current":{const p=yield lm(c.localStore),E=Io.createSynthesizedRemoteEventForCurrentChange(e,"current"===i);yield Zu(c,p,E);break}case"rejected":yield Mc(c.localStore,e,!0),Ql(c,e,a);break;default:zt()}})).apply(this,arguments)}function L_(s,e,i){return Up.apply(this,arguments)}function Up(){return(Up=(0,re.Z)(function*(s,e,i){const a=bl(s);if(a.qo){for(const c of e){if(a.ko.has(c)){Dt("SyncEngine","Adding an already active target "+c);continue}const p=yield um(a.localStore,c),E=yield Rc(a.localStore,p);yield Sp(a,Om(p),E.targetId,!1),kc(a.remoteStore,E)}for(const c of i)a.ko.has(c)&&(yield Mc(a.localStore,c,!1).then(()=>{Fc(a.remoteStore,c),Ql(a,c)}).catch(ya))}})).apply(this,arguments)}function bl(s){const e=At(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mp.bind(null,e),e.No.Er=S_.bind(null,e.eventManager),e.No.jo=x_.bind(null,e.eventManager),e}function Bp(s){const e=At(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k_.bind(null,e),e}class km{constructor(){this.synchronizeTabs=!1}initialize(e){var i=this;return(0,re.Z)(function*(){i.N=jh(e.databaseInfo.databaseId),i.sharedClientState=i.Wo(e),i.persistence=i.Go(e),yield i.persistence.start(),i.gcScheduler=i.zo(e),i.localStore=i.Ho(e)})()}zo(e){return null}Ho(e){return am(this.persistence,new g_,e.initialUser,this.N)}Go(e){return new RE(pm.Ns,this.N)}Wo(e){return new E_}terminate(){var e=this;return(0,re.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Fm extends km{constructor(e,i,a){super(),this.Jo=e,this.cacheSizeBytes=i,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var i=()=>super.initialize,a=this;return(0,re.Z)(function*(){yield i().call(a,e),yield function(s){return Yn.apply(this,arguments)}(a.localStore),yield a.Jo.initialize(a,e),yield Bp(a.Jo.syncEngine),yield pu(a.Jo.remoteStore),yield a.persistence.nn(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ho(e){return am(this.persistence,new g_,e.initialUser,this.N)}zo(e){return new xh(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const i=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?ra.withCacheSize(this.cacheSizeBytes):ra.DEFAULT;return new np(this.synchronizeTabs,i,e.clientId,a,e.asyncQueue,b_(),pp(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new E_}}class jE extends Fm{constructor(e,i){super(e,i,!1),this.Jo=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){var i=()=>super.initialize,a=this;return(0,re.Z)(function*(){yield i().call(a,e);const c=a.Jo.syncEngine;a.sharedClientState instanceof dp&&(a.sharedClientState.syncEngine={_i:Mm.bind(null,c),mi:jc.bind(null,c),gi:L_.bind(null,c),pn:Pm.bind(null,c),wi:F_.bind(null,c)},yield a.sharedClientState.start()),yield a.persistence.nn(function(){var p=(0,re.Z)(function*(E){yield function(s,e){return Lp.apply(this,arguments)}(a.Jo.syncEngine,E),a.gcScheduler&&(E&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):E||a.gcScheduler.stop())});return function(E){return p.apply(this,arguments)}}())})()}Wo(e){const i=b_();if(!dp.bt(i))throw new yt(et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dp(i,e.asyncQueue,a,e.clientId,e.initialUser)}}class jp{initialize(e,i){var a=this;return(0,re.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(i),a.remoteStore=a.createRemoteStore(i),a.eventManager=a.createEventManager(i),a.syncEngine=a.createSyncEngine(i,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=c=>Sm(a.syncEngine,c,1),a.remoteStore.remoteSyncer.handleCredentialChange=BE.bind(null,a.syncEngine),yield wp(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LE}createDatastore(e){const i=jh(e.databaseInfo.databaseId),a=new ME(e.databaseInfo);return new PE(e.credentials,a,i)}createRemoteStore(e){return i=this.localStore,a=this.datastore,c=e.asyncQueue,p=M=>Sm(this.syncEngine,M,0),E=hp.bt()?new hp:new mm,new FE(i,a,c,p,E);var i,a,c,p,E}createSyncEngine(e,i){return function(a,c,p,E,M,H,ee){const le=new N_(a,c,p,E,M,H);return ee&&(le.qo=!0),le}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return(e=(0,re.Z)(function*(i){const a=At(i);Dt("RemoteStore","RemoteStore shutting down."),a.Kr.add(5),yield Pc(a),a.Qr.shutdown(),a.Wr.set("Unknown")}),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function $p(s,e=10240){let i=0;return{read:()=>(0,re.Z)(function*(){if(i<s.byteLength){const a={value:s.slice(i,i+e),done:!1};return i+=e,a}return{done:!0}})(),cancel:()=>(0,re.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ii{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}class Hp{constructor(e,i){this.Zo=e,this.N=i,this.metadata=new fi,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(a=>{a&&a.ho()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,re.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,re.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,re.Z)(function*(){const i=yield e.na();if(null===i)return null;const a=e.ta.decode(i),c=Number(a);isNaN(c)&&e.sa(`length string (${a}) is not valid number`);const p=yield e.ia(c);return new Dm(JSON.parse(p),i.length+c)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,re.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const i=e.ra();i<0&&e.sa("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,i);return e.buffer=e.buffer.slice(i),a})()}ia(e){var i=this;return(0,re.Z)(function*(){for(;i.buffer.length<e;)(yield i.oa())&&i.sa("Reached the end of bundle when more is expected.");const a=i.ta.decode(i.buffer.slice(0,e));return i.buffer=i.buffer.slice(e),a})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,re.Z)(function*(){const i=yield e.Zo.read();if(!i.done){const a=new Uint8Array(e.buffer.length+i.value.length);a.set(e.buffer),a.set(i.value,e.buffer.length),e.buffer=a}return i.done})()}}class $E{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var i=this;return(0,re.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new yt(et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(c=(0,re.Z)(function*(p,E){const M=At(p),H=Lu(M.N)+"/documents",ee={documents:E.map(pt=>fl(M.N,pt))},le=yield M.Ki("BatchGetDocuments",H,ee),Ne=new Map;le.forEach(pt=>{const Nt=function(s,e){return"found"in e?function(i,a){on(!!a.found);const c=$o(i,a.found.name),p=Ls(a.found.updateTime),E=new Ds({mapValue:{fields:a.found.fields}});return si.newFoundDocument(c,p,E)}(s,e):"missing"in e?function(i,a){on(!!a.missing),on(!!a.readTime);const c=$o(i,a.missing),p=Ls(a.readTime);return si.newNoDocument(c,p)}(s,e):zt()}(M.N,pt);Ne.set(Nt.key.toString(),Nt)});const st=[];return E.forEach(pt=>{const Nt=Ne.get(pt.toString());on(!!Nt),st.push(Nt)}),st}),function(p,E){return c.apply(this,arguments)})(i.datastore,e);var c;return a.forEach(c=>i.recordVersion(c)),a})()}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,re.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;var a;e.mutations.forEach(a=>{i.delete(a.key.toString())}),i.forEach((a,c)=>{const p=Zt.fromPath(c);e.mutations.push(new ph(p,e.precondition(p)))}),yield(a=(0,re.Z)(function*(c,p){const E=At(c),M=Lu(E.N)+"/documents",H={writes:p.map(ee=>au(E.N,ee))};yield E.Li("Commit",M,H)}),function(c,p){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw zt();i=xt.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!i.isEqual(a))throw new yt(et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){const i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?gs.updateTime(i):gs.none()}preconditionForUpdate(e){const i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(xt.min()))throw new yt(et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gs.updateTime(i)}return gs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ku{constructor(e,i,a,c){this.asyncQueue=e,this.datastore=i,this.updateFunction=a,this.deferred=c,this.aa=5,this.rr=new ym(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,re.Z)(function*(){const i=new $E(e.datastore),a=e.ua(i);a&&a.then(c=>{e.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.ha(p)}))}).catch(c=>{e.ha(c)})}))}ua(e){try{const i=this.updateFunction(e);return!da(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const i=e.code;return"aborted"===i||"failed-precondition"===i||!na(i)}return!1}}class Gp{constructor(e,i,a){var c=this;this.credentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=hi.UNAUTHENTICATED,this.clientId=at.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(i,function(){var p=(0,re.Z)(function*(E){Dt("FirestoreClient","Received user=",E.uid),yield c.credentialListener(E),c.user=E});return function(E){return p.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,re.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new yt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const i=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,re.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),i.resolve()}catch(a){const c=Vc(a,"Failed to shutdown persistence");i.reject(c)}})),i.promise}}function rf(s,e){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,re.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),Dt("FirestoreClient","Initializing OfflineComponentProvider");const i=yield s.getConfiguration();yield e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener(function(){var c=(0,re.Z)(function*(p){a.isEqual(p)||(yield ip(e.localStore,p),a=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e})).apply(this,arguments)}function Vm(s,e){return qp.apply(this,arguments)}function qp(){return(qp=(0,re.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const i=yield sf(s);Dt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(i,a),s.setCredentialChangeListener(c=>{return(p=(0,re.Z)(function*(E,M){const H=At(E);H.asyncQueue.verifyOperationInProgress(),Dt("RemoteStore","RemoteStore received new credentials");const ee=_l(H);H.Kr.add(3),yield Pc(H),ee&&H.Wr.set("Unknown"),yield H.remoteSyncer.handleCredentialChange(M),H.Kr.delete(3),yield Fa(H)}),function(E,M){return p.apply(this,arguments)})(e.remoteStore,c);var p}),s.onlineComponents=e})).apply(this,arguments)}function sf(s){return af.apply(this,arguments)}function af(){return(af=(0,re.Z)(function*(s){return s.offlineComponents||(Dt("FirestoreClient","Using default OfflineComponentProvider"),yield rf(s,new km)),s.offlineComponents})).apply(this,arguments)}function Bd(s){return uf.apply(this,arguments)}function uf(){return(uf=(0,re.Z)(function*(s){return s.onlineComponents||(Dt("FirestoreClient","Using default OnlineComponentProvider"),yield Vm(s,new jp)),s.onlineComponents})).apply(this,arguments)}function Um(s){return sf(s).then(e=>e.persistence)}function Wp(s){return sf(s).then(e=>e.localStore)}function $c(s){return Bd(s).then(e=>e.remoteStore)}function jd(s){return Bd(s).then(e=>e.syncEngine)}function Xl(s){return lf.apply(this,arguments)}function lf(){return(lf=(0,re.Z)(function*(s){const e=yield Bd(s),i=e.eventManager;return i.onListen=VE.bind(null,e.syncEngine),i.onUnlisten=O_.bind(null,e.syncEngine),i})).apply(this,arguments)}function $m(s,e,i={}){const a=new fi;return s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(c,p,E,M,H){const ee=new Ii({next:Ne=>{p.enqueueAndForget(()=>Kh(c,le));const st=Ne.docs.has(E);!st&&Ne.fromCache?H.reject(new yt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&Ne.fromCache&&M&&"server"===M.source?H.reject(new yt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Ne)},error:Ne=>H.reject(Ne)}),le=new Cp(Ga(E.path),ee,{includeMetadataChanges:!0,uo:!0});return bp(c,le)}(yield Xl(s),s.asyncQueue,e,i,a)})),a.promise}function Hm(s,e,i={}){const a=new fi;return s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(c,p,E,M,H){const ee=new Ii({next:Ne=>{p.enqueueAndForget(()=>Kh(c,le)),Ne.fromCache&&"server"===M.source?H.reject(new yt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Ne)},error:Ne=>H.reject(Ne)}),le=new Cp(E,ee,{includeMetadataChanges:!0,uo:!0});return bp(c,le)}(yield Xl(s),s.asyncQueue,e,i,a)})),a.promise}class $_{constructor(e,i,a,c,p,E,M,H){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=c,this.ssl=p,this.forceLongPolling=E,this.autoDetectLongPolling=M,this.useFetchStreams=H}}class $d{constructor(e,i){this.projectId=e,this.database=i||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $d&&e.projectId===this.projectId&&e.database===this.database}}const H_=new Map;function Hd(s,e,i){if(!i)throw new yt(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Wm(s,e,i,a){if(!0===e&&!0===a)throw new yt(et.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function zp(s){if(!Zt.isDocumentKey(s))throw new yt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Zp(s){if(Zt.isDocumentKey(s))throw new yt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Kp(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(i=s).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof s?"a function":zt()}function or(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new yt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Kp(s);throw new yt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}function G_(s,e){if(e<=0)throw new yt(et.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class q_{constructor(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new yt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new yt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Wm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cf{constructor(e,i){this._credentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,e instanceof $d?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new yt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $d(a.options.projectId)}(e))}get app(){if(!this._app)throw new yt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(e),void 0!==e.credentials&&(this._credentials=function(i){if(!i)return new v;switch(i.type){case"gapi":const a=i.client;return on(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new q(a,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new yt(et.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=H_.get(e);i&&(Dt("ComponentProvider","Removing Datastore"),H_.delete(e),i.terminate())}(this),Promise.resolve()}}class Ni{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ni(this.firestore,e,this._key)}}class go{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class gu extends go{constructor(e,i,a){super(e,i,Ga(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ni(this.firestore,null,new Zt(e))}withConverter(e){return new gu(this.firestore,e,this._path)}}function W_(s,e,...i){if(s=(0,Ze.m9)(s),Hd("collection","path",e),s instanceof cf){const a=qn.fromString(e,...i);return Zp(a),new gu(s,null,a)}{if(!(s instanceof Ni||s instanceof gu))throw new yt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(qn.fromString(e,...i));return Zp(a),new gu(s.firestore,null,a)}}function Hc(s,e,...i){if(s=(0,Ze.m9)(s),1===arguments.length&&(e=at.I()),Hd("doc","path",e),s instanceof cf){const a=qn.fromString(e,...i);return zp(a),new Ni(s,null,new Zt(a))}{if(!(s instanceof Ni||s instanceof gu))throw new yt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(qn.fromString(e,...i));return zp(a),new Ni(s.firestore,s instanceof gu?s.converter:null,new Zt(a))}}function Km(s,e){return s=(0,Ze.m9)(s),e=(0,Ze.m9)(e),(s instanceof Ni||s instanceof gu)&&(e instanceof Ni||e instanceof gu)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function df(s,e){return s=(0,Ze.m9)(s),e=(0,Ze.m9)(e),s instanceof go&&e instanceof go&&s.firestore===e.firestore&&Su(s._query,e._query)&&s.converter===e.converter}class z_{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new ym(this,"async_queue_retry"),this.Ta=()=>{const i=pp();i&&Dt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.rr.tr()};const e=pp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const i=pp();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const i=new fi;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,re.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(i){if(!lu(i))throw i;Dt("AsyncQueue","Operation failed with retryable error: "+i)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const i=this.fa.then(()=>(this.ga=!0,e().catch(a=>{throw this.ma=a,this.ga=!1,Sr("INTERNAL UNHANDLED ERROR: ",function(p){let E=p.message||"";return p.stack&&(E=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),E}(a)),a}).then(a=>(this.ga=!1,a))));return this.fa=i,i}enqueueAfterDelay(e,i,a){this.Ea(),this.pa.indexOf(e)>-1&&(i=0);const c=qo.createAndSchedule(this,e,i,a,p=>this.Ra(p));return this._a.push(c),c}Ea(){this.ma&&zt()}verifyOperationInProgress(){}ba(){var e=this;return(0,re.Z)(function*(){let i;do{i=e.fa,yield i}while(i!==e.fa)})()}Pa(e){for(const i of this._a)if(i.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this._a)if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const i=this._a.indexOf(e);this._a.splice(i,1)}}function Yp(s){return function(e,i){if("object"!=typeof e||null===e)return!1;const a=e;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(s)}class Z_{constructor(){this._progressObserver={},this._taskCompletionResolver=new fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,a){this._progressObserver={next:e,error:i,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _s extends cf{constructor(e,i){super(e,i),this.type="firestore",this._queue=new z_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Jp(this),this._firestoreClient.terminate()}}function Xi(s){return s._firestoreClient||Jp(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function Jp(s){var e;const i=s._freezeSettings(),a=(p=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new $_(s._databaseId,p,s._persistenceKey,(M=i).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));var p,M;s._firestoreClient=new Gp(s._credentials,s._queue,a)}function Ym(s,e,i){const a=new fi;return s.asyncQueue.enqueue((0,re.Z)(function*(){try{yield rf(s,i),yield Vm(s,e),a.resolve()}catch(c){if(!("FirebaseError"===(p=c).name?p.code===et.FAILED_PRECONDITION||p.code===et.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw c;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),a.reject(c)}var p})).then(()=>a.promise)}function va(s){if(s._initialized||s._terminated)throw new yt(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qa{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new yt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(Qi.fromBase64String(e))}catch(i){throw new yt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new zo(Qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class La{constructor(e){this._methodName=e}}class Yu{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new yt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new yt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}const Gc=/^__.*__$/;class qc{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return null!==this.fieldMask?new Oa(e,this.data,this.fieldMask,i,this.fieldTransforms):new Nu(e,this.data,i,this.fieldTransforms)}}class tc{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new Oa(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function nc(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt()}}class Qu{constructor(e,i,a,c,p,E){this.settings=e,this.databaseId=i,this.N=a,this.ignoreUndefinedProperties=c,void 0===p&&this.Sa(),this.fieldTransforms=p||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Qu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var i;const a=null===(i=this.path)||void 0===i?void 0:i.child(e),c=this.Ca({path:a,xa:!1});return c.ka(e),c}$a(e){var i;const a=null===(i=this.path)||void 0===i?void 0:i.child(e),c=this.Ca({path:a,xa:!1});return c.Sa(),c}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Zd(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(nc(this.Da)&&Gc.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class Qm{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.N=a||jh(e)}Ba(e,i,a,c=!1){return new Qu({Da:e,methodName:i,La:a,path:$i.emptyPath(),xa:!1,Ma:c},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Il(s){const e=s._freezeSettings(),i=jh(s._databaseId);return new Qm(s._databaseId,!!e.ignoreUndefinedProperties,i)}function zd(s,e,i,a,c,p={}){const E=s.Ba(p.merge||p.mergeFields?2:0,e,i,c);ry("Data must be an object, but it was:",E,a);const M=ng(a,E);let H,ee;if(p.merge)H=new $a(E.fieldMask),ee=E.fieldTransforms;else if(p.mergeFields){const le=[];for(const Ne of p.mergeFields){const st=rg(e,Ne,i);if(!E.contains(st))throw new yt(et.INVALID_ARGUMENT,`Field '${st}' is specified in your field mask but missing from your input data.`);sy(le,st)||le.push(st)}H=new $a(le),ee=E.fieldTransforms.filter(Ne=>H.covers(Ne.field))}else H=null,ee=E.fieldTransforms;return new qc(new Ds(M),H,ee)}class Wc extends La{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function eg(s,e,i){return new Qu({Da:3,La:e.settings.La,methodName:s._methodName,xa:i},e.databaseId,e.N,e.ignoreUndefinedProperties)}class ff extends La{_toFieldTransform(e){return new hc(e.path,new dl)}isEqual(e){return e instanceof ff}}class Jm extends La{constructor(e,i){super(e),this.Ua=i}_toFieldTransform(e){const i=eg(this,e,!0),a=this.Ua.map(p=>rc(p,i)),c=new za(a);return new hc(e.path,c)}isEqual(e){return this===e}}class Xm extends La{constructor(e,i){super(e),this.Ua=i}_toFieldTransform(e){const i=eg(this,e,!0),a=this.Ua.map(p=>rc(p,i)),c=new fa(a);return new hc(e.path,c)}isEqual(e){return this===e}}class ey extends La{constructor(e,i){super(e),this.qa=i}_toFieldTransform(e){const i=new Vl(e.N,dh(e.N,this.qa));return new hc(e.path,i)}isEqual(e){return this===e}}function tg(s,e,i,a){const c=s.Ba(1,e,i);ry("Data must be an object, but it was:",c,a);const p=[],E=Ds.empty();ji(a,(H,ee)=>{const le=ig(e,H,i);ee=(0,Ze.m9)(ee);const Ne=c.$a(le);if(ee instanceof Wc)p.push(le);else{const st=rc(ee,Ne);null!=st&&(p.push(le),E.set(le,st))}});const M=new $a(p);return new tc(E,M,c.fieldTransforms)}function pf(s,e,i,a,c,p){const E=s.Ba(1,e,i),M=[rg(e,a,i)],H=[c];if(p.length%2!=0)throw new yt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let st=0;st<p.length;st+=2)M.push(rg(e,p[st])),H.push(p[st+1]);const ee=[],le=Ds.empty();for(let st=M.length-1;st>=0;--st)if(!sy(ee,M[st])){const pt=M[st];let Nt=H[st];Nt=(0,Ze.m9)(Nt);const ln=E.$a(pt);if(Nt instanceof Wc)ee.push(pt);else{const ar=rc(Nt,ln);null!=ar&&(ee.push(pt),le.set(pt,ar))}}const Ne=new $a(ee);return new tc(le,Ne,E.fieldTransforms)}function ty(s,e,i,a=!1){return rc(i,s.Ba(a?4:3,e))}function rc(s,e){if(ny(s=(0,Ze.m9)(s)))return ry("Unsupported field value:",e,s),ng(s,e);if(s instanceof La)return function(i,a){if(!nc(a.Da))throw a.Fa(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Fa(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(i,a){const c=[];let p=0;for(const E of i){let M=rc(E,a.Oa(p));null==M&&(M={nullValue:"NULL_VALUE"}),c.push(M),p++}return{arrayValue:{values:c}}}(s,e)}return function(i,a){if(null===(i=(0,Ze.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return dh(a.N,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const c=Ln.fromDate(i);return{timestampValue:_c(a.N,c)}}if(i instanceof Ln){const c=new Ln(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_c(a.N,c)}}if(i instanceof Yu)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zo)return{bytesValue:fd(a.N,i._byteString)};if(i instanceof Ni){const c=a.databaseId,p=i.firestore._databaseId;if(!p.isEqual(c))throw a.Fa(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ec(i.firestore._databaseId||a.databaseId,i._key.path)}}throw a.Fa(`Unsupported field value: ${Kp(i)}`)}(s,e)}function ng(s,e){const i={};return Ps(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(s,(a,c)=>{const p=rc(c,e.Na(a));null!=p&&(i[a]=p)}),{mapValue:{fields:i}}}function ny(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof Ln||s instanceof Yu||s instanceof zo||s instanceof Ni||s instanceof La)}function ry(s,e,i){if(!ny(i)||"object"!=typeof(a=i)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Kp(i);throw e.Fa("an object"===a?s+" a custom object":s+" "+a)}var a}function rg(s,e,i){if((e=(0,Ze.m9)(e))instanceof Qa)return e._internalPath;if("string"==typeof e)return ig(s,e);throw Zd("Field path arguments must be of type string or FieldPath.",s,!1,void 0,i)}const iy=new RegExp("[~\\*/\\[\\]]");function ig(s,e,i){if(e.search(iy)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Qa(...e.split("."))._internalPath}catch(a){throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Zd(s,e,i,a,c){const p=a&&!a.isEmpty(),E=void 0!==c;let M=`Function ${e}() called with invalid data`;i&&(M+=" (via `toFirestore()`)"),M+=". ";let H="";return(p||E)&&(H+=" (found",p&&(H+=` in field ${a}`),E&&(H+=` in document ${c}`),H+=")"),new yt(et.INVALID_ARGUMENT,M+s+H)}function sy(s,e){return s.some(i=>i.isEqual(e))}class Kd{constructor(e,i,a,c,p){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Ni(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(gf("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class qE extends Kd{data(){return super.data()}}function gf(s,e){return"string"==typeof e?ig(s,e):e instanceof Qa?e._internalPath:e._delegate._internalPath}class Cl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dl extends Kd{constructor(e,i,a,c,p,E){super(e,i,a,c,E),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(gf("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class mf extends Dl{data(e={}){return super.data(e)}}class ic{constructor(e,i,a,c){this._firestore=e,this._userDataWriter=i,this._snapshot=c,this.metadata=new Cl(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new mf(this._firestore,this._userDataWriter,a.key,a,new Cl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new yt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map(E=>({type:"added",doc:new mf(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Cl(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:p++}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(E=>c||3!==E.type).map(E=>{const M=new mf(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Cl(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter);let H=-1,ee=-1;return 0!==E.type&&(H=p.indexOf(E.doc.key),p=p.delete(E.doc.key)),1!==E.type&&(p=p.add(E.doc),ee=p.indexOf(E.doc.key)),{type:Q_(E.type),doc:M,oldIndex:H,newIndex:ee}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function Q_(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt()}}function J_(s,e){return s instanceof Dl&&e instanceof Dl?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof ic&&e instanceof ic&&s._firestore===e._firestore&&df(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function oy(s){if(Na(s)&&0===s.explicitOrderBy.length)throw new yt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yd{}function yu(s,...e){for(const i of e)s=i._apply(s);return s}class sg extends Yd{constructor(e,i,a){super(),this.Ka=e,this.ja=i,this.Qa=a,this.type="where"}_apply(e){const i=Il(e.firestore),a=function(c,p,E,M,H,ee,le){let Ne;if(H.isKeyField()){if("array-contains"===ee||"array-contains-any"===ee)throw new yt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ee}' queries on FieldPath.documentId().`);if("in"===ee||"not-in"===ee){cy(le,ee);const pt=[];for(const Nt of le)pt.push(Qd(M,c,Nt));Ne={arrayValue:{values:pt}}}else Ne=Qd(M,c,le)}else"in"!==ee&&"not-in"!==ee&&"array-contains-any"!==ee||cy(le,ee),Ne=ty(E,"where",le,"in"===ee||"not-in"===ee);const st=Me.create(H,ee,Ne);return function(pt,Nt){if(Nt.v()){const ar=Hi(pt);if(null!==ar&&!ar.isEqual(Nt.field))throw new yt(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ar.toString()}' and '${Nt.field.toString()}'`);const ss=td(pt);null!==ss&&ag(0,Nt.field,ss)}const ln=function(ar,ss){for(const Ua of ar.filters)if(ss.indexOf(Ua.op)>=0)return Ua.op;return null}(pt,function(ar){switch(ar){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Nt.op));if(null!==ln)throw new yt(et.INVALID_ARGUMENT,ln===Nt.op?`Invalid query. You cannot use more than one '${Nt.op.toString()}' filter.`:`Invalid query. You cannot use '${Nt.op.toString()}' filters with '${ln.toString()}' filters.`)}(c,st),st}(e._query,0,i,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new go(e.firestore,e.converter,function(c,p){const E=c.filters.concat([p]);return new jo(c.path,c.collectionGroup,c.explicitOrderBy.slice(),E,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,a))}}class WE extends Yd{constructor(e,i){super(),this.Ka=e,this.Wa=i,this.type="orderBy"}_apply(e){const i=function(a,c,p){if(null!==a.startAt)throw new yt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new yt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new As(c,p);return function(M,H){if(null===td(M)){const ee=Hi(M);null!==ee&&ag(0,ee,H.field)}}(a,E),E}(e._query,this.Ka,this.Wa);return new go(e.firestore,e.converter,function(a,c){const p=a.explicitOrderBy.concat([c]);return new jo(a.path,a.collectionGroup,p,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,i))}}class ev extends Yd{constructor(e,i,a){super(),this.type=e,this.Ga=i,this.za=a}_apply(e){return new go(e.firestore,e.converter,cl(e._query,this.Ga,this.za))}}class nv extends Yd{constructor(e,i,a){super(),this.type=e,this.Ha=i,this.Ja=a}_apply(e){const i=og(e,this.type,this.Ha,this.Ja);return new go(e.firestore,e.converter,(c=i,new jo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class uy extends Yd{constructor(e,i,a){super(),this.type=e,this.Ha=i,this.Ja=a}_apply(e){const i=og(e,this.type,this.Ha,this.Ja);return new go(e.firestore,e.converter,(c=i,new jo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function og(s,e,i,a){if(i[0]=(0,Ze.m9)(i[0]),i[0]instanceof Kd)return function(c,p,E,M,H){if(!M)throw new yt(et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const ee=[];for(const le of Pl(c))if(le.field.isKeyField())ee.push(Au(p,M.key));else{const Ne=M.data.field(le.field);if(uc(Ne))throw new yt(et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+le.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ne){const st=le.field.canonicalString();throw new yt(et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${st}' (used as the orderBy) does not exist.`)}ee.push(Ne)}return new so(ee,H)}(s._query,s.firestore._databaseId,e,i[0]._document,a);{const c=Il(s.firestore);return function(p,E,M,H,ee,le){const Ne=p.explicitOrderBy;if(ee.length>Ne.length)throw new yt(et.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const st=[];for(let pt=0;pt<ee.length;pt++){const Nt=ee[pt];if(Ne[pt].field.isKeyField()){if("string"!=typeof Nt)throw new yt(et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Nt}`);if(!ll(p)&&-1!==Nt.indexOf("/"))throw new yt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${H}() must be a plain document ID, but '${Nt}' contains a slash.`);const ln=p.path.child(qn.fromString(Nt));if(!Zt.isDocumentKey(ln))throw new yt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${H}() must result in a valid document path, but '${ln}' is not because it contains an odd number of segments.`);const ar=new Zt(ln);st.push(Au(E,ar))}else{const ln=ty(M,H,Nt);st.push(ln)}}return new so(st,le)}(s._query,s.firestore._databaseId,c,e,i,a)}}function Qd(s,e,i){if("string"==typeof(i=(0,Ze.m9)(i))){if(""===i)throw new yt(et.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ll(e)&&-1!==i.indexOf("/"))throw new yt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(qn.fromString(i));if(!Zt.isDocumentKey(a))throw new yt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Au(s,new Zt(a))}if(i instanceof Ni)return Au(s,i._key);throw new yt(et.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kp(i)}.`)}function cy(s,e){if(!Array.isArray(s)||0===s.length)throw new yt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new yt(et.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ag(s,e,i){if(!i.isEqual(e))throw new yt(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class ug{convertValue(e,i="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw zt()}}convertObject(e,i){const a={};return ji(e.fields,(c,p)=>{a[c]=this.convertValue(p,i)}),a}convertGeoPoint(e){return new Yu(Ri(e.latitude),Ri(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=ol(e);return null==a?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const i=Jo(e);return new Ln(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=qn.fromString(e);on(_d(a));const c=new $d(a.get(1),a.get(3)),p=new Zt(a.popFirst(5));return c.isEqual(i)||Sr(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),p}}function yf(s,e,i){let a;return a=s?i&&(i.merge||i.mergeFields)?s.toFirestore(e,i):s.toFirestore(e):e,a}class sv extends ug{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,i)}}class dy{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Il(e)}set(e,i,a){this._verifyNotCommitted();const c=Tl(e,this._firestore),p=yf(c.converter,i,a),E=zd(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,a);return this._mutations.push(E.toMutation(c._key,gs.none())),this}update(e,i,a,...c){this._verifyNotCommitted();const p=Tl(e,this._firestore);let E;return E="string"==typeof(i=(0,Ze.m9)(i))||i instanceof Qa?pf(this._dataReader,"WriteBatch.update",p._key,i,a,c):tg(this._dataReader,"WriteBatch.update",p._key,i),this._mutations.push(E.toMutation(p._key,gs.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=Tl(e,this._firestore);return this._mutations=this._mutations.concat(new Ul(i._key,gs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new yt(et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tl(s,e){if((s=(0,Ze.m9)(s)).firestore!==e)throw new yt(et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class sc extends ug{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,i)}}function gy(s,e,i){s=or(s,Ni);const a=or(s.firestore,_s),c=yf(s.converter,e,i);return Zc(a,[zd(Il(a),"setDoc",s._key,c,null!==s.converter,i).toMutation(s._key,gs.none())])}function ov(s,e,i,...a){s=or(s,Ni);const c=or(s.firestore,_s),p=Il(c);let E;return E="string"==typeof(e=(0,Ze.m9)(e))||e instanceof Qa?pf(p,"updateDoc",s._key,e,i,a):tg(p,"updateDoc",s._key,e),Zc(c,[E.toMutation(s._key,gs.exists(!0))])}function _f(s,...e){var i,a,c;s=(0,Ze.m9)(s);let p={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||Yp(e[E])||(p=e[E],E++);const M={includeMetadataChanges:p.includeMetadataChanges};if(Yp(e[E])){const Ne=e[E];e[E]=null===(i=Ne.next)||void 0===i?void 0:i.bind(Ne),e[E+1]=null===(a=Ne.error)||void 0===a?void 0:a.bind(Ne),e[E+2]=null===(c=Ne.complete)||void 0===c?void 0:c.bind(Ne)}let H,ee,le;if(s instanceof Ni)ee=or(s.firestore,_s),le=Ga(s._key.path),H={next:Ne=>{e[E]&&e[E](Xd(ee,s,Ne))},error:e[E+1],complete:e[E+2]};else{const Ne=or(s,go);ee=or(Ne.firestore,_s),le=Ne._query;const st=new sc(ee);H={next:pt=>{e[E]&&e[E](new ic(ee,st,Ne,pt))},error:e[E+1],complete:e[E+2]},oy(s._query)}return function(Ne,st,pt,Nt){const ln=new Ii(Nt),ar=new Cp(st,ln,pt);return Ne.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return bp(yield Xl(Ne),ar)})),()=>{ln.Xo(),Ne.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return Kh(yield Xl(Ne),ar)}))}}(Xi(ee),le,M,H)}function Zc(s,e){return function(i,a){const c=new fi;return i.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(s,e,i){return Rp.apply(this,arguments)}(yield jd(i),a,c)})),c.promise}(Xi(s),e)}function Xd(s,e,i){const a=i.docs.get(e._key),c=new sc(s);return new Dl(s,c,e._key,a,new Cl(i.hasPendingWrites,i.fromCache),e.converter)}class hg extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=Il(e)}get(e){const i=Tl(e,this._firestore),a=new sv(this._firestore);return this._transaction.lookup([i._key]).then(c=>{if(!c||1!==c.length)return zt();const p=c[0];if(p.isFoundDocument())return new Kd(this._firestore,a,p.key,p,i.converter);if(p.isNoDocument())return new Kd(this._firestore,a,i._key,null,i.converter);throw zt()})}set(e,i,a){const c=Tl(e,this._firestore),p=yf(c.converter,i,a),E=zd(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,a);return this._transaction.set(c._key,E),this}update(e,i,a,...c){const p=Tl(e,this._firestore);let E;return E="string"==typeof(i=(0,Ze.m9)(i))||i instanceof Qa?pf(this._dataReader,"Transaction.update",p._key,i,a,c):tg(this._dataReader,"Transaction.update",p._key,i),this._transaction.update(p._key,E),this}delete(e){const i=Tl(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){const i=Tl(e,this._firestore),a=new sc(this._firestore);return super.get(e).then(c=>new Dl(this._firestore,a,i._key,c._document,new Cl(!1,!1),i.converter))}}function eh(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new yt("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function gg(){if("undefined"==typeof Uint8Array)throw new yt("unimplemented","Uint8Arrays are not available in this environment.")}function Ey(){if("undefined"==typeof atob)throw new yt("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(s){ho=s})(ut.SDK_VERSION),(0,ut._registerComponent)(new Gt.wA("firestore",(s,{options:e})=>{const i=s.getProvider("app").getImmediate(),a=new _s(i,new R(s.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),a._setSettings(e),a},"PUBLIC")),(0,ut.registerVersion)(Cu,"3.1.1",void 0),(0,ut.registerVersion)(Cu,"3.1.1","esm2017");class Kc{constructor(e){this._delegate=e}static fromBase64String(e){return Ey(),new Kc(zo.fromBase64String(e))}static fromUint8Array(e){return gg(),new Kc(zo.fromUint8Array(e))}toBase64(){return Ey(),this._delegate.toBase64()}toUint8Array(){return gg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vf(s){return function(s,e){if("object"!=typeof s||null===s)return!1;const i=s;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(s)}class wy{enableIndexedDbPersistence(e,i){return function(s,e){va(s=or(s,_s));const i=Xi(s),a=s._freezeSettings(),c=new jp;return Ym(i,c,new Fm(c,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return function(s){va(s=or(s,_s));const e=Xi(s),i=s._freezeSettings(),a=new jp;return Ym(e,a,new jE(a,i.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(s){if(s._initialized&&!s._terminated)throw new yt(et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fi;return s._queue.enqueueAndForgetEvenWhileRestricted((0,re.Z)(function*(){try{yield(i=(0,re.Z)(function*(a){if(!Go.bt())return Promise.resolve();const c=a+"main";yield Go.delete(c)}),function(a){return i.apply(this,arguments)})(rp(s._databaseId,s._persistenceKey)),e.resolve()}catch(i){e.reject(i)}var i})),e.promise}(e._delegate)}}class by{constructor(e,i,a){this._delegate=i,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof $d||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&la("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}useEmulator(e,i,a={}){!function(s,e,i,a={}){var c;const p=(s=or(s,cf))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&la("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${i}`,ssl:!1})),a.mockUserToken){let E,M;if("string"==typeof a.mockUserToken)E=a.mockUserToken,M=hi.MOCK_USER;else{E=(0,Ze.Sg)(a.mockUserToken,null===(c=s._app)||void 0===c?void 0:c.options.projectId);const H=a.mockUserToken.sub||a.mockUserToken.user_id;if(!H)throw new yt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new hi(H)}s._credentials=new _(new C(E,M))}}(this._delegate,e,i,a)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,re.Z)(function*(){const e=yield Um(s),i=yield $c(s);return e.setNetworkEnabled(!0),function(a){const c=At(a);return c.Kr.delete(0),Fa(c)}(i)}))}(Xi(s=or(s,_s)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,re.Z)(function*(){const e=yield Um(s),i=yield $c(s);return e.setNetworkEnabled(!1),(a=(0,re.Z)(function*(c){const p=At(c);p.Kr.add(0),yield Pc(p),p.Wr.set("Offline")}),function(c){return a.apply(this,arguments)})(i);var a}))}(Xi(s=or(s,_s)))}(this._delegate)}enablePersistence(e){let i=!1,a=!1;return e&&(i=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,Wm("synchronizeTabs",i,"experimentalForceOwningTab",a)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(e){const i=new fi;return e.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return function(s,e){return Op.apply(this,arguments)}(yield jd(e),i)})),i.promise}(Xi(s=or(s,_s)))}(this._delegate)}onSnapshotsInSync(e){return function(s,e){return function(s,e){const i=new Ii(e);return s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return a=yield Xl(s),c=i,At(a).Zr.add(c),void c.next();var a,c})),()=>{i.Xo(),s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return a=yield Xl(s),c=i,void At(a).Zr.delete(c);var a,c}))}}(Xi(s=or(s,_s)),Yp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new yt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jc(this,W_(this._delegate,e))}catch(i){throw Do(i,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,Hc(this._delegate,e))}catch(i){throw Do(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new To(this,function(s,e){if(s=or(s,cf),Hd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new yt(et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new go(s,null,(i=e,new jo(qn.emptyPath(),i)));var i}(this._delegate,e))}catch(i){throw Do(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(s,e){return function(s,e){const i=new fi;return s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){const a=yield(c=s,Bd(c).then(p=>p.datastore));var c;new Ku(s.asyncQueue,a,e,i).run()})),i.promise}(Xi(s),i=>e(new hg(s,i)))}(this._delegate,i=>e(new wf(this,i)))}batch(){return Xi(this._delegate),new bf(new dy(this._delegate,e=>Zc(this._delegate,e)))}loadBundle(e){return function(s,e){const i=Xi(s=or(s,_s)),a=new Z_;return function(s,e,i,a){const c=function(p,E){let M;return M="string"==typeof p?(new TextEncoder).encode(p):p,H=function(H,ee){if(H instanceof Uint8Array)return $p(H,void 0);if(H instanceof ArrayBuffer)return $p(new Uint8Array(H),void 0);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new Hp(H,E);var H}(i,jh(e));s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){!function(s,e,i){const a=At(s);var c;(c=(0,re.Z)(function*(p,E,M){try{const H=yield E.getMetadata();if(yield function(st,pt){const Nt=At(st),ln=Ls(pt.createTime);return Nt.persistence.runTransaction("hasNewerBundle","readonly",ar=>Nt.Je.getBundleMetadata(ar,pt.id)).then(ar=>!!ar&&ar.createTime.compareTo(ln)>=0)}(p.localStore,H))return yield E.close(),void M._completeWith((st=H,{taskState:"Success",documentsLoaded:st.totalDocuments,bytesLoaded:st.totalBytes,totalDocuments:st.totalDocuments,totalBytes:st.totalBytes}));M._updateProgress(Dp(H));const ee=new R_(H,p.localStore,E.N);let le=yield E.Qo();for(;le;){const st=yield ee.fo(le);st&&M._updateProgress(st),le=yield E.Qo()}const Ne=yield ee.complete();yield Zu(p,Ne.En,void 0),yield function(st,pt){const Nt=At(st);return Nt.persistence.runTransaction("Save bundle","readwrite",ln=>Nt.Je.saveBundleMetadata(ln,pt))}(p.localStore,H),M._completeWith(Ne.progress)}catch(H){la("SyncEngine",`Loading bundle failed with ${H}`),M._failWith(H)}var st}),function(p,E,M){return c.apply(this,arguments)})(a,e,i).then(()=>{a.sharedClientState.notifyBundleLoaded()})}(yield jd(s),c,a)}))}(i,s._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function(s,e){return function(s,e){return s.asyncQueue.enqueue((0,re.Z)(function*(){return function(i,a){const c=At(i);return c.persistence.runTransaction("Get named query","readonly",p=>c.Je.getNamedQuery(p,a))}(yield Wp(s),e)}))}(Xi(s=or(s,_s)),e).then(i=>i?new go(s,null,i.query):null)}(this._delegate,e).then(i=>i?new To(this,i):null)}}class Ef extends ug{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kc(new zo(e))}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(i,this.firestore,null)}}class wf{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new Ef(e)}get(e){const i=Sl(e);return this._delegate.get(i).then(a=>new Yc(this._firestore,new Dl(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,i.converter)))}set(e,i,a){const c=Sl(e);return a?(eh("Transaction.set",a),this._delegate.set(c,i,a)):this._delegate.set(c,i),this}update(e,i,a,...c){const p=Sl(e);return 2===arguments.length?this._delegate.update(p,i):this._delegate.update(p,i,a,...c),this}delete(e){const i=Sl(e);return this._delegate.delete(i),this}}class bf{constructor(e){this._delegate=e}set(e,i,a){const c=Sl(e);return a?(eh("WriteBatch.set",a),this._delegate.set(c,i,a)):this._delegate.set(c,i),this}update(e,i,a,...c){const p=Sl(e);return 2===arguments.length?this._delegate.update(p,i):this._delegate.update(p,i,a,...c),this}delete(e){const i=Sl(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class Al{constructor(e,i,a){this._firestore=e,this._userDataWriter=i,this._delegate=a}fromFirestore(e,i){const a=new mf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qc(this._firestore,a),null!=i?i:{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){const a=Al.INSTANCES;let c=a.get(e);c||(c=new WeakMap,a.set(e,c));let p=c.get(i);return p||(p=new Al(e,new Ef(e),i),c.set(i,p)),p}}Al.INSTANCES=new WeakMap;class Ea{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Ef(e)}static forPath(e,i,a){if(e.length%2!=0)throw new yt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(i,new Ni(i._delegate,a,new Zt(e)))}static forKey(e,i,a){return new Ea(i,new Ni(i._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new Jc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jc(this.firestore,W_(this._delegate,e))}catch(i){throw Do(i,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ze.m9)(e))instanceof Ni&&Km(this._delegate,e)}set(e,i){i=eh("DocumentReference.set",i);try{return i?gy(this._delegate,e,i):gy(this._delegate,e)}catch(a){throw Do(a,"setDoc()","DocumentReference.set()")}}update(e,i,...a){try{return 1===arguments.length?ov(this._delegate,e):ov(this._delegate,e,i,...a)}catch(c){throw Do(c,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return Zc(or(s.firestore,_s),[new Ul(s._key,gs.none())])}(this._delegate)}onSnapshot(...e){const i=yg(e),a=_g(e,c=>new Yc(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return _f(this._delegate,i,a)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function(s){s=or(s,Ni);const e=or(s.firestore,_s),i=Xi(e),a=new sc(e);return function(s,e){const i=new fi;return s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return(a=(0,re.Z)(function*(c,p,E){try{const M=yield function(H,ee){const le=At(H);return le.persistence.runTransaction("read document","readonly",Ne=>le.Qn.An(Ne,ee))}(c,p);M.isFoundDocument()?E.resolve(M):M.isNoDocument()?E.resolve(null):E.reject(new yt(et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const H=Vc(M,`Failed to get document '${p} from cache`);E.reject(H)}}),function(c,p,E){return a.apply(this,arguments)})(yield Wp(s),e,i);var a})),i.promise}(i,s._key).then(c=>new Dl(e,a,s._key,c,new Cl(null!==c&&c.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=or(s,Ni);const e=or(s.firestore,_s);return $m(Xi(e),s._key,{source:"server"}).then(i=>Xd(e,s,i))}(this._delegate):function(s){s=or(s,Ni);const e=or(s.firestore,_s);return $m(Xi(e),s._key).then(i=>Xd(e,s,i))}(this._delegate),i.then(a=>new Yc(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Al.getInstance(this.firestore,e):null))}}function Do(s,e,i){return s.message=s.message.replace(e,i),s}function yg(s){for(const e of s)if("object"==typeof e&&!vf(e))return e;return{}}function _g(s,e){var i,a;let c;return c=vf(s[0])?s[0]:vf(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(i=c.error)||void 0===i?void 0:i.bind(c),complete:null===(a=c.complete)||void 0===a?void 0:a.bind(c)}}class Yc{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return J_(this._delegate,e._delegate)}}class Qc extends Yc{data(e){const i=this._delegate.data(e);return function(s,e){s||zt()}(void 0!==i),i}}class To{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new Ef(e)}where(e,i,a){try{return new To(this.firestore,yu(this._delegate,function(s,e,i){const a=e,c=gf("where",s);return new sg(c,a,i)}(e,i,a)))}catch(c){throw Do(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new To(this.firestore,yu(this._delegate,function(s,e="asc"){const i=e,a=gf("orderBy",s);return new WE(a,i)}(e,i)))}catch(a){throw Do(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new To(this.firestore,yu(this._delegate,function(s){return G_("limit",s),new ev("limit",s,"F")}(e)))}catch(i){throw Do(i,"limit()","Query.limit()")}}limitToLast(e){try{return new To(this.firestore,yu(this._delegate,function(s){return G_("limitToLast",s),new ev("limitToLast",s,"L")}(e)))}catch(i){throw Do(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new To(this.firestore,yu(this._delegate,function(...s){return new nv("startAt",s,!0)}(...e)))}catch(i){throw Do(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new To(this.firestore,yu(this._delegate,function(...s){return new nv("startAfter",s,!1)}(...e)))}catch(i){throw Do(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new To(this.firestore,yu(this._delegate,function(...s){return new uy("endBefore",s,!0)}(...e)))}catch(i){throw Do(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new To(this.firestore,yu(this._delegate,function(...s){return new uy("endAt",s,!1)}(...e)))}catch(i){throw Do(i,"endAt()","Query.endAt()")}}isEqual(e){return df(this._delegate,e._delegate)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function(s){s=or(s,go);const e=or(s.firestore,_s),i=Xi(e),a=new sc(e);return function(s,e){const i=new fi;return s.asyncQueue.enqueueAndForget((0,re.Z)(function*(){return(a=(0,re.Z)(function*(c,p,E){try{const M=yield Td(c,p,!0),H=new Ka(p,M.Gn),ee=H.Io(M.documents),le=H.applyChanges(ee,!1);E.resolve(le.snapshot)}catch(M){const H=Vc(M,`Failed to execute query '${p} against cache`);E.reject(H)}}),function(c,p,E){return a.apply(this,arguments)})(yield Wp(s),e,i);var a})),i.promise}(i,s._query).then(c=>new ic(e,a,s,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=or(s,go);const e=or(s.firestore,_s),i=Xi(e),a=new sc(e);return Hm(i,s._query,{source:"server"}).then(c=>new ic(e,a,s,c))}(this._delegate):function(s){s=or(s,go);const e=or(s.firestore,_s),i=Xi(e),a=new sc(e);return oy(s._query),Hm(i,s._query).then(c=>new ic(e,a,s,c))}(this._delegate),i.then(a=>new vg(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const i=yg(e),a=_g(e,c=>new vg(this.firestore,new ic(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return _f(this._delegate,i,a)}withConverter(e){return new To(this.firestore,this._delegate.withConverter(e?Al.getInstance(this.firestore,e):null))}}class YE{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new Qc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vg{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new To(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new YE(this._firestore,i))}forEach(e,i){this._delegate.forEach(a=>{e.call(i,new Qc(this._firestore,a))})}isEqual(e){return J_(this._delegate,e._delegate)}}class Jc extends To{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?Hc(this._delegate):Hc(this._delegate,e))}catch(i){throw Do(i,"doc()","CollectionReference.doc()")}}add(e){return function(s,e){const i=or(s.firestore,_s),a=Hc(s),c=yf(s.converter,e);return Zc(i,[zd(Il(s.firestore),"addDoc",a._key,c,null!==s.converter,{}).toMutation(a._key,gs.exists(!1))]).then(()=>a)}(this._delegate,e).then(i=>new Ea(this.firestore,i))}isEqual(e){return Km(this._delegate,e._delegate)}withConverter(e){return new Jc(this.firestore,this._delegate.withConverter(e?Al.getInstance(this.firestore,e):null))}}function Sl(s){return or(s,Ni)}class Eg{constructor(...e){this._delegate=new Qa(...e)}static documentId(){return new Eg($i.keyField().canonicalString())}isEqual(e){return(e=(0,Ze.m9)(e))instanceof Qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class qi{constructor(e){this._delegate=e}static serverTimestamp(){const e=new ff("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new qi(e)}static delete(){const e=new Wc("deleteField");return e._methodName="FieldValue.delete",new qi(e)}static arrayUnion(...e){const i=function(...s){return new Jm("arrayUnion",s)}(...e);return i._methodName="FieldValue.arrayUnion",new qi(i)}static arrayRemove(...e){const i=function(...s){return new Xm("arrayRemove",s)}(...e);return i._methodName="FieldValue.arrayRemove",new qi(i)}static increment(e){const i=function(s){return new ey("increment",s)}(e);return i._methodName="FieldValue.increment",new qi(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Iy={Firestore:by,GeoPoint:Yu,Timestamp:Ln,Blob:Kc,Transaction:wf,WriteBatch:bf,DocumentReference:Ea,DocumentSnapshot:Yc,Query:To,QueryDocumentSnapshot:Qc,QuerySnapshot:vg,CollectionReference:Jc,FieldPath:Eg,FieldValue:qi,setLogLevel:function(s){!function(s){Os.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function(s){(function(s,e){s.INTERNAL.registerComponent(new Gt.wA("firestore-compat",i=>((e,i)=>new by(e,i,new wy))(i.getProvider("app-compat").getImmediate(),i.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Iy)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.4")}(Qe.Z);var Ju=B(3820),pv=B(2965),Cy=B(7841);function oc(s,e){return function(s,e=O.z){return new g.y(i=>{let a;return null!=e?e.schedule(()=>{a=s.onSnapshot({includeMetadataChanges:!0},i)}):a=s.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=a&&a()}})}(s,e)}function wg(s,e){return oc(s,e).pipe((0,He.U)(i=>({payload:i,type:"query"})))}function th(s,e){return wg(s,e).pipe((0,ke.O)(void 0),ve(),(0,He.U)(([i,a])=>{const c=a.payload.docChanges(),p=c.map(E=>({type:E.type,payload:E}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((E,M)=>{const H=c.find(le=>le.doc.ref.isEqual(E.ref)),ee=null==i?void 0:i.payload.docs.find(le=>le.ref.isEqual(E.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(E.metadata)||!H&&ee&&JSON.stringify(ee.metadata)===JSON.stringify(E.metadata)||p.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:E}})}),p}))}function Ty(s,e,i){return th(s,i).pipe((0,je.R)((a,c)=>function(s,e,i){return e.forEach(a=>{i.indexOf(a.type)>-1&&(s=function(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sy(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=s.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return Sy(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sy(s,e.oldIndex,1)}return s}(s,a))}),s}(a,c.map(p=>p.payload),e),[]),i=>i.lift(new he(void 0,void 0)),(0,He.U)(a=>a.map(c=>({type:c.type,payload:c}))))}function Sy(s,e,i,...a){const c=s.slice();return c.splice(e,i,...a),c}function If(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class Ja{constructor(e,i,a){this.ref=e,this.query=i,this.afs=a}stateChanges(e){let i=th(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,He.U)(a=>a.filter(c=>e.indexOf(c.type)>-1)))),i.pipe((0,ke.O)(void 0),ve(),(0,me.h)(([a,c])=>c.length>0||!a),(0,He.U)(([a,c])=>c),de.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,je.R)((i,a)=>[...i,...a],[]))}snapshotChanges(e){const i=If(e);return Ty(this.query,i,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return wg(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),de.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(de.iC)}add(e){return this.ref.add(e)}doc(e){return new Ry(this.ref.doc(e),this.afs)}}class Ry{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const a=this.ref.collection(e),{ref:c,query:p}=bg(a,i);return new Ja(c,p,this.afs)}snapshotChanges(){return function(s,e){return oc(s,e).pipe((0,ke.O)(void 0),ve(),(0,He.U)(([i,a])=>a.exists?(null==i?void 0:i.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,He.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,Se.D)(this.ref.get(e)).pipe(de.iC)}}class mv{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?th(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)),(0,me.h)(i=>i.length>0),de.iC):th(this.query,this.afs.schedulers.outsideAngular).pipe(de.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,je.R)((i,a)=>[...i,...a],[]))}snapshotChanges(e){const i=If(e);return Ty(this.query,i,this.afs.schedulers.outsideAngular).pipe(de.iC)}valueChanges(e={}){return wg(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.U)(a=>a.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),de.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(de.iC)}}const Xa=new D.OlP("angularfire2.enableFirestorePersistence"),Va=new D.OlP("angularfire2.firestore.persistenceSettings"),eu=new D.OlP("angularfire2.firestore.settings"),My=new D.OlP("angularfire2.firestore.use-emulator");function bg(s,e=(i=>i)){return{query:e(s),ref:s}}let Ny=(()=>{class s{constructor(i,a,c,p,E,M,H,ee,le,Ne,st,pt,Nt,ln,ar,ss,Ua){this.schedulers=H;const tu=(0,Le.on)(i,M,a),_u=le;Ne&&(0,Ju.nw)(tu,M,st,Nt,ln,ar,pt,ss),[this.firestore,this.persistenceEnabled$]=(0,Le.cc)(`${tu.name}.firestore`,"AngularFirestore",tu.name,()=>{const vu=M.runOutsideAngular(()=>tu.firestore());if(p&&vu.settings(p),_u&&vu.useEmulator(..._u),c&&!(0,qe.PM)(E)){const nh=()=>{try{return(0,Se.D)(vu.enablePersistence(ee||void 0).then(()=>!0,()=>!1))}catch(_v){return"undefined"!=typeof console&&console.warn(_v),(0,be.of)(!1)}};return[vu,M.runOutsideAngular(nh)]}return[vu,(0,be.of)(!1)]},[p,_u,c])}collection(i,a){let c;c="string"==typeof i?this.firestore.collection(i):i;const{ref:p,query:E}=bg(c,a),M=this.schedulers.ngZone.run(()=>p);return new Ja(M,E,this)}collectionGroup(i,a){const c=a||(E=>E),p=this.firestore.collectionGroup(i);return new mv(c(p),this)}doc(i){let a;a="string"==typeof i?this.firestore.doc(i):i;const c=this.schedulers.ngZone.run(()=>a);return new Ry(c,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(i){return new(i||s)(D.LFG(Le.Dh),D.LFG(Le.xv,8),D.LFG(Xa,8),D.LFG(eu,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(de.HU),D.LFG(Va,8),D.LFG(My,8),D.LFG(Ju.zQ,8),D.LFG(Ju.Qv,8),D.LFG(Ju.L6,8),D.LFG(Ju._Q,8),D.LFG(Ju.rT,8),D.LFG(Ju.lh,8),D.LFG(Ju.f7,8),D.LFG(pv.nm,8))},s.\u0275prov=D.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),yv=(()=>{class s{constructor(){Cy.Z.registerVersion("angularfire",de.q4.full,"fst-compat")}static enablePersistence(i){return{ngModule:s,providers:[{provide:Xa,useValue:!0},{provide:Va,useValue:i}]}}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=D.oAB({type:s}),s.\u0275inj=D.cJS({providers:[Ny]}),s})()},4290:(Pt,Ye,B)=>{"use strict";B.d(Ye,{l4:()=>je,Qv:()=>me});var D=B(3018),O=B(5917),g=B(4402),Se=B(309),be=B(3190),de=B(8002),Fe=B(2066),ve=B(6643),ae=B(8939),J=B(2965),X=B(7841);const ge=new D.OlP("angularfire2.functions.origin"),ke=new D.OlP("angularfire2.functions.region"),He=new D.OlP("angularfire2.functions.use-emulator");let je=(()=>{class Le{constructor($e,Qe,re,ut,Gt,vt,Ze,Ve){const Re=Ze,fe=(0,O.of)(void 0).pipe((0,Se.QV)(ut.outsideAngular),(0,be.w)(()=>B.e(294).then(B.bind(B,2294))),(0,de.U)(()=>(0,ae.on)($e,re,Qe)),(0,de.U)(Te=>(0,ae.cc)(`${Te.name}.functions.${Gt||vt}`,"AngularFireFunctions",Te.name,()=>{let Be;if(Gt&&vt)throw new Error("REGION and ORIGIN can't be used at the same time.");return Be=Te.functions(Gt||vt||void 0),Re&&Be.useEmulator(...Re),Be},[Gt,vt,Re])),(0,Fe.d)({bufferSize:1,refCount:!1}));return this.httpsCallable=(Te,Be)=>Ge=>(0,g.D)(fe).pipe((0,Se.QV)(ut.insideAngular),(0,be.w)(Rt=>Rt.httpsCallable(Te,Be)(Ge)),(0,de.U)(Rt=>Rt.data)),(0,ae.pX)(this,fe,re)}}return Le.\u0275fac=function($e){return new($e||Le)(D.LFG(ae.Dh),D.LFG(ae.xv,8),D.LFG(D.R0b),D.LFG(ve.HU),D.LFG(ke,8),D.LFG(ge,8),D.LFG(He,8),D.LFG(J.nm,8))},Le.\u0275prov=D.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"any"}),Le})(),me=(()=>{class Le{constructor(){X.Z.registerVersion("angularfire",ve.q4.full,"fn-compat")}}return Le.\u0275fac=function($e){return new($e||Le)},Le.\u0275mod=D.oAB({type:Le}),Le.\u0275inj=D.cJS({providers:[je]}),Le})()},8939:(Pt,Ye,B)=>{"use strict";B.d(Ye,{hO:()=>ge,xv:()=>ae,Dh:()=>ve,GT:()=>de,cc:()=>ke,on:()=>J,pX:()=>be});var D=B(3018),O=B(7841),g=B(6643);Pt=B.hmd(Pt);const Se=["ngOnDestroy"],be=(Le,qe,$e,Qe={})=>new Proxy(Le,{get:(re,ut)=>$e.runOutsideAngular(()=>{var Gt;if(Le[ut])return(null===(Gt=null==Qe?void 0:Qe.spy)||void 0===Gt?void 0:Gt.get)&&Qe.spy.get(ut,Le[ut]),Le[ut];if(Se.indexOf(ut)>-1)return()=>{};const vt=qe.toPromise().then(Ze=>{const Ve=Ze&&Ze[ut];return"function"==typeof Ve?Ve.bind(Ze):Ve&&Ve.then?Ve.then(Re=>$e.run(()=>Re)):$e.run(()=>Ve)});return new Proxy(()=>{},{get:(Ze,Ve)=>vt[Ve],apply:(Ze,Ve,Re)=>vt.then(fe=>{var Te;const Be=fe&&fe(...Re);return(null===(Te=null==Qe?void 0:Qe.spy)||void 0===Te?void 0:Te.apply)&&Qe.spy.apply(ut,Re,Be),Be})})})}),de=(Le,qe)=>{qe.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Qe=>{Object.defineProperty(Le.prototype,Qe,Object.getOwnPropertyDescriptor($e.prototype||$e,Qe))})})};class Fe{constructor(qe){return qe}}const ve=new D.OlP("angularfire2.app.options"),ae=new D.OlP("angularfire2.app.name");function J(Le,qe,$e){const re="object"==typeof $e&&$e||{};re.name=re.name||"string"==typeof $e&&$e||"[DEFAULT]";const Gt=O.Z.apps.filter(vt=>vt&&vt.name===re.name)[0]||qe.runOutsideAngular(()=>O.Z.initializeApp(Le,re));try{JSON.stringify(Le)!==JSON.stringify(Gt.options)&&X("error",`${Gt.name} Firebase App already initialized with different options${Pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new Fe(Gt)}const X=(Le,...qe)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Le](...qe)},he={provide:Fe,useFactory:J,deps:[ve,D.R0b,[new D.FiY,ae]]};let ge=(()=>{class Le{constructor($e){O.Z.registerVersion("angularfire",g.q4.full,"core"),O.Z.registerVersion("angularfire",g.q4.full,"app-compat"),O.Z.registerVersion("angular",D.q4F.full,$e.toString())}static initializeApp($e,Qe){return{ngModule:Le,providers:[{provide:ve,useValue:$e},{provide:ae,useValue:Qe}]}}}return Le.\u0275fac=function($e){return new($e||Le)(D.LFG(D.Lbi))},Le.\u0275mod=D.oAB({type:Le}),Le.\u0275inj=D.cJS({providers:[he]}),Le})();function ke(Le,qe,$e,Qe,re){const[,ut,Gt]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===Le)||[];if(ut)return function(Le,qe){try{return Le.toString()===qe.toString()}catch($e){return Le===qe}}(re,Gt)||(me("error",`${qe} was already initialized on the ${$e} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:re,was:Gt})),ut;{const vt=Qe();return globalThis.\u0275AngularfireInstanceCache.push([Le,vt,re]),vt}}const je=!!Pt.hot,me=(Le,...qe)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Le](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(Pt,Ye,B)=>{"use strict";B.d(Ye,{q4:()=>uc,iC:()=>Ol,fc:()=>Ra,HU:()=>io,vb:()=>Sa,JM:()=>Tu});var D=B(3018),O=B(2329),g=B(8239),Se=B(5452),be=B(3854),de=B(6034),Fe=B(5601),ve=B(6676);const ae="@firebase/installations",J="0.5.2",he=`w:${J}`,ge="FIS_v2",qe=new be.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(T){return T instanceof be.ZR&&T.code.includes("request-failed")}function Qe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function re(T){return{token:T.token,requestStatus:2,expiresIn:fe(T.expiresIn),creationTime:Date.now()}}function ut(T,F){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,g.Z)(function*(T,F){const ue=(yield F.json()).error;return qe.create("request-failed",{requestName:T,serverCode:ue.code,serverMessage:ue.message,serverStatus:ue.status})})).apply(this,arguments)}function vt({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Ze(T,{refreshToken:F}){const W=vt(T);return W.append("Authorization",function(T){return`${ge} ${T}`}(F)),W}function Ve(T){return Re.apply(this,arguments)}function Re(){return(Re=(0,g.Z)(function*(T){const F=yield T();return F.status>=500&&F.status<600?T():F})).apply(this,arguments)}function fe(T){return Number(T.replace("s","000"))}function Be(T,F){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,g.Z)(function*(T,{fid:F}){const W=Qe(T),rt={method:"POST",headers:vt(T),body:JSON.stringify({fid:F,authVersion:ge,appId:T.appId,sdkVersion:he})},_t=yield Ve(()=>fetch(W,rt));if(_t.ok){const Qt=yield _t.json();return{fid:Qt.fid||F,registrationStatus:2,refreshToken:Qt.refreshToken,authToken:re(Qt.authToken)}}throw yield ut("Create Installation",_t)})).apply(this,arguments)}function Rt(T){return new Promise(F=>{setTimeout(F,T)})}const $n=/^[cdef][\w-]{21}$/;function xn(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const W=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return $n.test(W)?W:""}catch(T){return""}}function cn(T){return`${T.appName}!${T.appId}`}const In=new Map;function Tr(T,F){const W=cn(T);tn(W,F),function(T,F){const W=(!Wn&&"BroadcastChannel"in self&&(Wn=new BroadcastChannel("[Firebase] FID Change"),Wn.onmessage=T=>{tn(T.data.key,T.data.fid)}),Wn);W&&W.postMessage({key:T,fid:F}),0===In.size&&Wn&&(Wn.close(),Wn=null)}(W,F)}function tn(T,F){const W=In.get(T);if(W)for(const ue of W)ue(F)}let Wn=null;const mn="firebase-installations-store";let Nn=null;function Cn(){return Nn||(Nn=(0,ve.openDb)("firebase-installations-database",1,T=>{switch(T.oldVersion){case 0:T.createObjectStore(mn)}})),Nn}function Xn(T,F){return vn.apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(T,F){const W=cn(T),Me=(yield Cn()).transaction(mn,"readwrite"),rt=Me.objectStore(mn),_t=yield rt.get(W);return yield rt.put(F,W),yield Me.complete,(!_t||_t.fid!==F.fid)&&Tr(T,F.fid),F})).apply(this,arguments)}function Mr(T){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(T){const F=cn(T),ue=(yield Cn()).transaction(mn,"readwrite");yield ue.objectStore(mn).delete(F),yield ue.complete})).apply(this,arguments)}function qt(T,F){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(T,F){const W=cn(T),Me=(yield Cn()).transaction(mn,"readwrite"),rt=Me.objectStore(mn),_t=yield rt.get(W),Qt=F(_t);return void 0===Qt?yield rt.delete(W):yield rt.put(Qt,W),yield Me.complete,Qt&&(!_t||_t.fid!==Qt.fid)&&Tr(T,Qt.fid),Qt})).apply(this,arguments)}function Vn(T){return zn.apply(this,arguments)}function zn(){return(zn=(0,g.Z)(function*(T){let F;const W=yield qt(T,ue=>{const Me=er(ue),rt=En(T,Me);return F=rt.registrationPromise,rt.installationEntry});return""===W.fid?{installationEntry:yield F}:{installationEntry:W,registrationPromise:F}})).apply(this,arguments)}function er(T){return Cr(T||{fid:xn(),registrationStatus:0})}function En(T,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(qe.create("app-offline"))};const W={fid:F.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:W,registrationPromise:function(T,F){return kt.apply(this,arguments)}(T,W)}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:lr(T)}:{installationEntry:F}}function kt(){return(kt=(0,g.Z)(function*(T,F){try{return Xn(T,yield Be(T,F))}catch(W){throw $e(W)&&409===W.customData.serverCode?yield Mr(T):yield Xn(T,{fid:F.fid,registrationStatus:0}),W}})).apply(this,arguments)}function lr(T){return mi.apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(T){let F=yield yi(T);for(;1===F.registrationStatus;)yield Rt(100),F=yield yi(T);if(0===F.registrationStatus){const{installationEntry:W,registrationPromise:ue}=yield Vn(T);return ue||W}return F})).apply(this,arguments)}function yi(T){return qt(T,F=>{if(!F)throw qe.create("installation-not-found");return Cr(F)})}function Cr(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function en(T,F){return we.apply(this,arguments)}function we(){return(we=(0,g.Z)(function*({appConfig:T,platformLoggerProvider:F},W){const ue=Ee(T,W),Me=Ze(T,W),rt=F.getImmediate({optional:!0});rt&&Me.append("x-firebase-client",rt.getPlatformInfoString());const Qt={method:"POST",headers:Me,body:JSON.stringify({installation:{sdkVersion:he}})},Wt=yield Ve(()=>fetch(ue,Qt));if(Wt.ok)return re(yield Wt.json());throw yield ut("Generate Auth Token",Wt)})).apply(this,arguments)}function Ee(T,{fid:F}){return`${Qe(T)}/${F}/authTokens:generate`}function pe(T){return ot.apply(this,arguments)}function ot(){return(ot=(0,g.Z)(function*(T,F=!1){let W;const ue=yield qt(T.appConfig,rt=>{if(!an(rt))throw qe.create("not-registered");const _t=rt.authToken;if(!F&&Vr(_t))return rt;if(1===_t.requestStatus)return W=Ue(T,F),rt;{if(!navigator.onLine)throw qe.create("app-offline");const Qt=rn(rt);return W=yn(T,Qt),Qt}});return W?yield W:ue.authToken})).apply(this,arguments)}function Ue(T,F){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(T,F){let W=yield wt(T.appConfig);for(;1===W.authToken.requestStatus;)yield Rt(100),W=yield wt(T.appConfig);const ue=W.authToken;return 0===ue.requestStatus?pe(T,F):ue})).apply(this,arguments)}function wt(T){return qt(T,F=>{if(!an(F))throw qe.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function yn(T,F){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(T,F){try{const W=yield en(T,F),ue=Object.assign(Object.assign({},F),{authToken:W});return yield Xn(T.appConfig,ue),W}catch(W){if(!$e(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const ue=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Xn(T.appConfig,ue)}else yield Mr(T.appConfig);throw W}})).apply(this,arguments)}function an(T){return void 0!==T&&2===T.registrationStatus}function Vr(T){return 2===T.requestStatus&&!function(T){const F=Date.now();return F<T.creationTime||T.creationTime+T.expiresIn<F+36e5}(T)}function rn(T){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:F})}function ei(){return(ei=(0,g.Z)(function*(T){const F=T,{installationEntry:W,registrationPromise:ue}=yield Vn(F.appConfig);return ue?ue.catch(console.error):pe(F).catch(console.error),W.fid})).apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(T,F=!1){const W=T;return yield Ci(W.appConfig),(yield pe(W,F)).token})).apply(this,arguments)}function Ci(T){return zr.apply(this,arguments)}function zr(){return(zr=(0,g.Z)(function*(T){const{registrationPromise:F}=yield Vn(T);F&&(yield F)})).apply(this,arguments)}function dr(T){return qe.create("missing-app-config-values",{valueName:T})}const as="installations";(0,Se._registerComponent)(new de.wA(as,T=>{const F=T.getProvider("app").getImmediate();return{app:F,appConfig:function(T){if(!T||!T.options)throw dr("App Configuration");if(!T.name)throw dr("App Name");const F=["projectId","apiKey","appId"];for(const W of F)if(!T.options[W])throw dr(W);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(F),platformLoggerProvider:(0,Se._getProvider)(F,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Se._registerComponent)(new de.wA("installations-internal",T=>{const F=T.getProvider("app").getImmediate(),W=(0,Se._getProvider)(F,as).getImmediate();return{getId:()=>function(T){return ei.apply(this,arguments)}(W),getToken:Me=>function(T){return Pi.apply(this,arguments)}(W,Me)}},"PRIVATE")),(0,Se.registerVersion)(ae,J),(0,Se.registerVersion)(ae,J,"esm2017");const Hn="@firebase/remote-config",tr=new be.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class kr{constructor(F,W,ue,Me){this.client=F,this.storage=W,this.storageCache=ue,this.logger=Me}isCachedDataFresh(F,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ue=Date.now()-W,Me=ue<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Me}.`),Me}fetch(F){var W=this;return(0,g.Z)(function*(){const[ue,Me]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Me&&W.isCachedDataFresh(F.cacheMaxAgeMillis,ue))return Me;F.eTag=Me&&Me.eTag;const rt=yield W.client.fetch(F),_t=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===rt.status&&_t.push(W.storage.setLastSuccessfulFetchResponse(rt)),yield Promise.all(_t),rt})()}}function _r(T=navigator){return T.languages&&T.languages[0]||T.language}class ne{constructor(F,W,ue,Me,rt,_t){this.firebaseInstallations=F,this.sdkVersion=W,this.namespace=ue,this.projectId=Me,this.apiKey=rt,this.appId=_t}fetch(F){var W=this;return(0,g.Z)(function*(){const[ue,Me]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,Qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Wt={sdk_version:W.sdkVersion,app_instance_id:ue,app_instance_id_token:Me,app_id:W.appId,language_code:_r()},xr={method:"POST",headers:Qt,body:JSON.stringify(Wt)},Br=fetch(_t,xr),Ts=new Promise((ea,ha)=>{F.signal.addEventListener(()=>{const ul=new Error("The operation was aborted.");ul.name="AbortError",ha(ul)})});let Ys;try{yield Promise.race([Br,Ts]),Ys=yield Br}catch(ea){let ha="fetch-client-network";throw"AbortError"===ea.name&&(ha="fetch-timeout"),tr.create(ha,{originalErrorMessage:ea.message})}let ks=Ys.status;const so=Ys.headers.get("ETag")||void 0;let Ma,As;if(200===Ys.status){let ea;try{ea=yield Ys.json()}catch(ha){throw tr.create("fetch-client-parse",{originalErrorMessage:ha.message})}Ma=ea.entries,As=ea.state}if("INSTANCE_STATE_UNSPECIFIED"===As?ks=500:"NO_CHANGE"===As?ks=304:("NO_TEMPLATE"===As||"EMPTY_CONFIG"===As)&&(Ma={}),304!==ks&&200!==ks)throw tr.create("fetch-status",{httpStatus:ks});return{status:ks,eTag:so,config:Ma}})()}}class Ie{constructor(F,W){this.client=F,this.storage=W}fetch(F){var W=this;return(0,g.Z)(function*(){const ue=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(F,ue)})()}attemptFetch(F,{throttleEndTimeMillis:W,backoffCount:ue}){var Me=this;return(0,g.Z)(function*(){yield function(T,F){return new Promise((W,ue)=>{const Me=Math.max(F-Date.now(),0),rt=setTimeout(W,Me);T.addEventListener(()=>{clearTimeout(rt),ue(tr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,W);try{const rt=yield Me.client.fetch(F);return yield Me.storage.deleteThrottleMetadata(),rt}catch(rt){if(!function(T){if(!(T instanceof be.ZR&&T.customData))return!1;const F=Number(T.customData.httpStatus);return 429===F||500===F||503===F||504===F}(rt))throw rt;const _t={throttleEndTimeMillis:Date.now()+(0,be.$s)(ue),backoffCount:ue+1};return yield Me.storage.setThrottleMetadata(_t),Me.attemptFetch(F,_t)}})()}}class An{constructor(F,W,ue,Me,rt){this.app=F,this._client=W,this._storageCache=ue,this._storage=Me,this._logger=rt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function sn(T,F){const W=T.target.error||void 0;return tr.create(F,{originalErrorMessage:W&&W.message})}const hr="app_namespace_store";class ao{constructor(F,W,ue,Me=function(){return new Promise((T,F)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=ue=>{F(sn(ue,"storage-open"))},W.onsuccess=ue=>{T(ue.target.result)},W.onupgradeneeded=ue=>{const Me=ue.target.result;switch(ue.oldVersion){case 0:Me.createObjectStore(hr,{keyPath:"compositeKey"})}}}catch(W){F(tr.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=F,this.appName=W,this.namespace=ue,this.openDbPromise=Me}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var W=this;return(0,g.Z)(function*(){const ue=yield W.openDbPromise;return new Promise((Me,rt)=>{const Qt=ue.transaction([hr],"readonly").objectStore(hr),Wt=W.createCompositeKey(F);try{const xr=Qt.get(Wt);xr.onerror=Br=>{rt(sn(Br,"storage-get"))},xr.onsuccess=Br=>{const Ts=Br.target.result;Me(Ts?Ts.value:void 0)}}catch(xr){rt(tr.create("storage-get",{originalErrorMessage:xr&&xr.message}))}})})()}set(F,W){var ue=this;return(0,g.Z)(function*(){const Me=yield ue.openDbPromise;return new Promise((rt,_t)=>{const Wt=Me.transaction([hr],"readwrite").objectStore(hr),xr=ue.createCompositeKey(F);try{const Br=Wt.put({compositeKey:xr,value:W});Br.onerror=Ts=>{_t(sn(Ts,"storage-set"))},Br.onsuccess=()=>{rt()}}catch(Br){_t(tr.create("storage-set",{originalErrorMessage:Br&&Br.message}))}})})()}delete(F){var W=this;return(0,g.Z)(function*(){const ue=yield W.openDbPromise;return new Promise((Me,rt)=>{const Qt=ue.transaction([hr],"readwrite").objectStore(hr),Wt=W.createCompositeKey(F);try{const xr=Qt.delete(Wt);xr.onerror=Br=>{rt(sn(Br,"storage-delete"))},xr.onsuccess=()=>{Me()}}catch(xr){rt(tr.create("storage-delete",{originalErrorMessage:xr&&xr.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Wi{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,g.Z)(function*(){const W=F.storage.getLastFetchStatus(),ue=F.storage.getLastSuccessfulFetchTimestampMillis(),Me=F.storage.getActiveConfig(),rt=yield W;rt&&(F.lastFetchStatus=rt);const _t=yield ue;_t&&(F.lastSuccessfulFetchTimestampMillis=_t);const Qt=yield Me;Qt&&(F.activeConfig=Qt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function yo(){return Js.apply(this,arguments)}function Js(){return(Js=(0,g.Z)(function*(){if(!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,Se._registerComponent)(new de.wA("remote-config",function(F,{instanceIdentifier:W}){const ue=F.getProvider("app").getImmediate(),Me=F.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw tr.create("registration-window");if(!(0,be.hl)())throw tr.create("indexed-db-unavailable");const{projectId:rt,apiKey:_t,appId:Qt}=ue.options;if(!rt)throw tr.create("registration-project-id");if(!_t)throw tr.create("registration-api-key");if(!Qt)throw tr.create("registration-app-id");const Wt=new ao(Qt,ue.name,W=W||"firebase"),xr=new Wi(Wt),Br=new Fe.Yd(Hn);Br.logLevel=Fe.in.ERROR;const Ts=new ne(Me,Se.SDK_VERSION,W,rt,_t,Qt),Ys=new Ie(Ts,Wt),ks=new kr(Ys,Wt,xr,Br),so=new An(ue,ks,xr,Wt,Br);return function(T){const F=(0,be.m9)(T);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(so),so},"PUBLIC").setMultipleInstances(!0)),(0,Se.registerVersion)(Hn,"0.3.1"),(0,Se.registerVersion)(Hn,"0.3.1","esm2017");const zi="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",cs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ds="google.c.a.c_id",hs="google.c.a.c_l",vo="google.c.a.ts",fs="google.c.a.e";var _i=(()=>{return(T=_i||(_i={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",_i;var T})();function Zi(T){const F=new Uint8Array(T);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Es(T){const W=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ue=atob(W),Me=new Uint8Array(ue.length);for(let rt=0;rt<ue.length;++rt)Me[rt]=ue.charCodeAt(rt);return Me}const Rs="fcm_token_details_db",qs="fcm_token_object_Store";function ws(T){return ai.apply(this,arguments)}function ai(){return(ai=(0,g.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(rt=>rt.name).includes(Rs))return null;let F=null;return(yield(0,ve.openDb)(Rs,5,function(){var ue=(0,g.Z)(function*(Me){var rt;if(Me.oldVersion<2||!Me.objectStoreNames.contains(qs))return;const _t=Me.transaction.objectStore(qs),Qt=yield _t.index("fcmSenderId").get(T);if(yield _t.clear(),Qt)if(2===Me.oldVersion){const Wt=Qt;if(!Wt.auth||!Wt.p256dh||!Wt.endpoint)return;F={token:Wt.fcmToken,createTime:null!==(rt=Wt.createTime)&&void 0!==rt?rt:Date.now(),subscriptionOptions:{auth:Wt.auth,p256dh:Wt.p256dh,endpoint:Wt.endpoint,swScope:Wt.swScope,vapidKey:"string"==typeof Wt.vapidKey?Wt.vapidKey:Zi(Wt.vapidKey)}}}else if(3===Me.oldVersion){const Wt=Qt;F={token:Wt.fcmToken,createTime:Wt.createTime,subscriptionOptions:{auth:Zi(Wt.auth),p256dh:Zi(Wt.p256dh),endpoint:Wt.endpoint,swScope:Wt.swScope,vapidKey:Zi(Wt.vapidKey)}}}else if(4===Me.oldVersion){const Wt=Qt;F={token:Wt.fcmToken,createTime:Wt.createTime,subscriptionOptions:{auth:Zi(Wt.auth),p256dh:Zi(Wt.p256dh),endpoint:Wt.endpoint,swScope:Wt.swScope,vapidKey:Zi(Wt.vapidKey)}}}});return function(Me){return ue.apply(this,arguments)}}())).close(),yield(0,ve.deleteDb)(Rs),yield(0,ve.deleteDb)("fcm_vapid_details_db"),yield(0,ve.deleteDb)("undefined"),uo(F)?F:null})).apply(this,arguments)}function uo(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:F}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const qr="firebase-messaging-store";let ns=null;function P(){return ns||(ns=(0,ve.openDb)("firebase-messaging-database",1,T=>{switch(T.oldVersion){case 0:T.createObjectStore(qr)}})),ns}function G(T){return N.apply(this,arguments)}function N(){return(N=(0,g.Z)(function*(T){const F=$t(T),ue=yield(yield P()).transaction(qr).objectStore(qr).get(F);if(ue)return ue;{const Me=yield ws(T.appConfig.senderId);if(Me)return yield z(T,Me),Me}})).apply(this,arguments)}function z(T,F){return ye.apply(this,arguments)}function ye(){return(ye=(0,g.Z)(function*(T,F){const W=$t(T),Me=(yield P()).transaction(qr,"readwrite");return yield Me.objectStore(qr).put(F,W),yield Me.complete,F})).apply(this,arguments)}function Ke(T){return ft.apply(this,arguments)}function ft(){return(ft=(0,g.Z)(function*(T){const F=$t(T),ue=(yield P()).transaction(qr,"readwrite");yield ue.objectStore(qr).delete(F),yield ue.complete})).apply(this,arguments)}function $t({appConfig:T}){return T.appId}const Mt=new be.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vr(T,F){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(T,F){const W=yield Fr(T),ue=Ms(F),Me={method:"POST",headers:W,body:JSON.stringify(ue)};let rt;try{rt=yield(yield fetch(ni(T.appConfig),Me)).json()}catch(_t){throw Mt.create("token-subscribe-failed",{errorInfo:_t})}if(rt.error)throw Mt.create("token-subscribe-failed",{errorInfo:rt.error.message});if(!rt.token)throw Mt.create("token-subscribe-no-token");return rt.token})).apply(this,arguments)}function Er(T,F){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,g.Z)(function*(T,F){const W=yield Fr(T),ue=Ms(F.subscriptionOptions),Me={method:"PATCH",headers:W,body:JSON.stringify(ue)};let rt;try{rt=yield(yield fetch(`${ni(T.appConfig)}/${F.token}`,Me)).json()}catch(_t){throw Mt.create("token-update-failed",{errorInfo:_t})}if(rt.error)throw Mt.create("token-update-failed",{errorInfo:rt.error.message});if(!rt.token)throw Mt.create("token-update-no-token");return rt.token})).apply(this,arguments)}function ui(T,F){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(T,F){const ue={method:"DELETE",headers:yield Fr(T)};try{const rt=yield(yield fetch(`${ni(T.appConfig)}/${F}`,ue)).json();if(rt.error)throw Mt.create("token-unsubscribe-failed",{errorInfo:rt.error.message})}catch(Me){throw Mt.create("token-unsubscribe-failed",{errorInfo:Me})}})).apply(this,arguments)}function ni({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Fr(T){return Li.apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*({appConfig:T,installations:F}){const W=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function Ms({p256dh:T,auth:F,endpoint:W,vapidKey:ue}){const Me={web:{endpoint:W,auth:F,p256dh:T}};return ue!==cs&&(Me.web.applicationPubKey=ue),Me}const Ai=6048e5;function ri(T){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,g.Z)(function*(T){const F=yield Z(T.swRegistration,T.vapidKey),W={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:F.endpoint,auth:Zi(F.getKey("auth")),p256dh:Zi(F.getKey("p256dh"))},ue=yield G(T.firebaseDependencies);if(ue){if(De(ue.subscriptionOptions,W))return Date.now()>=ue.createTime+Ai?Mo(T,{token:ue.token,createTime:Date.now(),subscriptionOptions:W}):ue.token;try{yield ui(T.firebaseDependencies,ue.token)}catch(Me){console.warn(Me)}return j(T.firebaseDependencies,W)}return j(T.firebaseDependencies,W)})).apply(this,arguments)}function Ro(T){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(T){const F=yield G(T.firebaseDependencies);F&&(yield ui(T.firebaseDependencies,F.token),yield Ke(T.firebaseDependencies));const W=yield T.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Mo(T,F){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(function*(T,F){try{const W=yield Er(T.firebaseDependencies,F),ue=Object.assign(Object.assign({},F),{token:W,createTime:Date.now()});return yield z(T.firebaseDependencies,ue),W}catch(W){throw yield Ro(T),W}})).apply(this,arguments)}function j(T,F){return k.apply(this,arguments)}function k(){return(k=(0,g.Z)(function*(T,F){const ue={token:yield vr(T,F),createTime:Date.now(),subscriptionOptions:F};return yield z(T,ue),ue.token})).apply(this,arguments)}function Z(T,F){return oe.apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(T,F){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Es(F)})})).apply(this,arguments)}function De(T,F){return F.vapidKey===T.vapidKey&&F.endpoint===T.endpoint&&F.auth===T.auth&&F.p256dh===T.p256dh}function se(T){const F={from:T.from,collapseKey:T.collapse_key,messageId:T.fcm_message_id};return function(T,F){if(!F.notification)return;T.notification={};const W=F.notification.title;W&&(T.notification.title=W);const ue=F.notification.body;ue&&(T.notification.body=ue);const Me=F.notification.image;Me&&(T.notification.image=Me)}(F,T),function(T,F){!F.data||(T.data=F.data)}(F,T),function(T,F){if(!F.fcmOptions)return;T.fcmOptions={};const W=F.fcmOptions.link;W&&(T.fcmOptions.link=W);const ue=F.fcmOptions.analytics_label;ue&&(T.fcmOptions.analyticsLabel=ue)}(F,T),F}function kn(T){return"object"==typeof T&&!!T&&ds in T}function wn(T,F){const W=[];for(let ue=0;ue<T.length;ue++)W.push(T.charAt(ue)),ue<F.length&&W.push(F.charAt(ue));return W.join("")}function wr(T){return Mt.create("missing-app-config-values",{valueName:T})}wn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class rr{constructor(F,W,ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Me=function(T){if(!T||!T.options)throw wr("App Configuration Object");if(!T.name)throw wr("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:W}=T;for(const ue of F)if(!W[ue])throw wr(ue);return{appName:T.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Me,installations:W,analyticsProvider:ue}}_delete(){return Promise.resolve()}}function Fn(T){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(zi,{scope:ts}),T.swRegistration.update().catch(()=>{})}catch(F){throw Mt.create("failed-service-worker-registration",{browserErrorMessage:F.message})}})).apply(this,arguments)}function Vi(T,F){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(T,F){if(!F&&!T.swRegistration&&(yield Fn(T)),F||!T.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw Mt.create("invalid-sw-registration");T.swRegistration=F}})).apply(this,arguments)}function Or(T,F){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(T,F){F?T.vapidKey=F:T.vapidKey||(T.vapidKey=cs)})).apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(T,F){if(!navigator)throw Mt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mt.create("permission-blocked");return yield Or(T,null==F?void 0:F.vapidKey),yield Vi(T,null==F?void 0:F.serviceWorkerRegistration),ri(T)})).apply(this,arguments)}function Ui(T,F,W){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(T,F,W){const ue=S(F);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(ue,{message_id:W[ds],message_name:W[hs],message_time:W[vo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function S(T){switch(T){case _i.NOTIFICATION_CLICKED:return"notification_open";case _i.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function I(){return(I=(0,g.Z)(function*(T,F){const W=F.data;if(!W.isFirebaseMessaging)return;T.onMessageHandler&&W.messageType===_i.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(se(W)):T.onMessageHandler.next(se(W)));const ue=W.data;kn(ue)&&"1"===ue[fs]&&(yield Ui(T,W.messageType,ue))})).apply(this,arguments)}const $="@firebase/messaging";function Dr(){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(){return"undefined"!=typeof window&&(0,be.hl)()&&(yield(0,be.eu)())&&(0,be.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Se._registerComponent)(new de.wA("messaging",T=>{const F=new rr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function(T,F){return I.apply(this,arguments)}(F,W)),F},"PUBLIC")),(0,Se._registerComponent)(new de.wA("messaging-internal",T=>{const F=T.getProvider("messaging").getImmediate();return{getToken:ue=>function(T,F){return ir.apply(this,arguments)}(F,ue)}},"PRIVATE")),(0,Se.registerVersion)($,"0.9.2"),(0,Se.registerVersion)($,"0.9.2","esm2017");const zs="analytics",Qr="firebase_id",il="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ko="https://www.googletagmanager.com/gtag/js",Bi=new Fe.Yd("@firebase/analytics");function ru(T){return Promise.all(T.map(F=>F.catch(W=>W)))}function oa(T,F){const W=document.createElement("script");W.src=`${Ko}?l=${T}&id=${F}`,W.async=!0,document.head.appendChild(W)}function Ca(T,F,W,ue,Me,rt){return Po.apply(this,arguments)}function Po(){return(Po=(0,g.Z)(function*(T,F,W,ue,Me,rt){const _t=ue[Me];try{if(_t)yield F[_t];else{const Wt=(yield ru(W)).find(xr=>xr.measurementId===Me);Wt&&(yield F[Wt.appId])}}catch(Qt){Bi.error(Qt)}T("config",Me,rt)})).apply(this,arguments)}function ko(T,F,W,ue,Me){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(T,F,W,ue,Me){try{let rt=[];if(Me&&Me.send_to){let _t=Me.send_to;Array.isArray(_t)||(_t=[_t]);const Qt=yield ru(W);for(const Wt of _t){const xr=Qt.find(Ts=>Ts.measurementId===Wt),Br=xr&&F[xr.appId];if(!Br){rt=[];break}rt.push(Br)}}0===rt.length&&(rt=Object.values(F)),yield Promise.all(rt),T("event",ue,Me||{})}catch(rt){Bi.error(rt)}})).apply(this,arguments)}function Iu(){const T=window.document.getElementsByTagName("script");for(const F of Object.values(T))if(F.src&&F.src.includes(Ko))return F;return null}const Ir=new be.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ba=new class{constructor(F={},W=1e3){this.throttleMetadata=F,this.intervalMillis=W}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,W){this.throttleMetadata[F]=W}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Ml(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Jr(T){return ja.apply(this,arguments)}function ja(){return(ja=(0,g.Z)(function*(T){var F;const{appId:W,apiKey:ue}=T,Me={method:"GET",headers:Ml(ue)},rt=il.replace("{app-id}",W),_t=yield fetch(rt,Me);if(200!==_t.status&&304!==_t.status){let Qt="";try{const Wt=yield _t.json();(null===(F=Wt.error)||void 0===F?void 0:F.message)&&(Qt=Wt.error.message)}catch(Wt){}throw Ir.create("config-fetch-failed",{httpStatus:_t.status,responseMessage:Qt})}return _t.json()})).apply(this,arguments)}function Da(T){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(T,F=Ba,W){const{appId:ue,apiKey:Me,measurementId:rt}=T.options;if(!ue)throw Ir.create("no-app-id");if(!Me){if(rt)return{measurementId:rt,appId:ue};throw Ir.create("no-api-key")}const _t=F.getThrottleMetadata(ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qt=new hi;return setTimeout((0,g.Z)(function*(){Qt.abort()}),void 0!==W?W:6e4),iu({appId:ue,apiKey:Me,measurementId:rt},_t,Qt,F)})).apply(this,arguments)}function iu(T,F,W){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(T,{throttleEndTimeMillis:F,backoffCount:W},ue,Me=Ba){const{appId:rt,measurementId:_t}=T;try{yield aa(ue,F)}catch(Qt){if(_t)return Bi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${Qt.message}]`),{appId:rt,measurementId:_t};throw Qt}try{const Qt=yield Jr(T);return Me.deleteThrottleMetadata(rt),Qt}catch(Qt){if(!Cu(Qt)){if(Me.deleteThrottleMetadata(rt),_t)return Bi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${Qt.message}]`),{appId:rt,measurementId:_t};throw Qt}const Wt=503===Number(Qt.customData.httpStatus)?(0,be.$s)(W,Me.intervalMillis,30):(0,be.$s)(W,Me.intervalMillis),xr={throttleEndTimeMillis:Date.now()+Wt,backoffCount:W+1};return Me.setThrottleMetadata(rt,xr),Bi.debug(`Calling attemptFetch again in ${Wt} millis`),iu(T,xr,ue,Me)}})).apply(this,arguments)}function aa(T,F){return new Promise((W,ue)=>{const Me=Math.max(F-Date.now(),0),rt=setTimeout(W,Me);T.addEventListener(()=>{clearTimeout(rt),ue(Ir.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Cu(T){if(!(T instanceof be.ZR&&T.customData))return!1;const F=Number(T.customData.httpStatus);return 429===F||500===F||503===F||504===F}class hi{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}function ho(){return Os.apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(){if(!(0,be.hl)())return Bi.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,be.eu)()}catch(T){return Bi.warn(Ir.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(T,F,W,ue,Me,rt,_t){var Qt;const Wt=Da(T);Wt.then(ks=>{W[ks.measurementId]=ks.appId,T.options.measurementId&&ks.measurementId!==T.options.measurementId&&Bi.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${ks.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ks=>Bi.error(ks)),F.push(Wt);const xr=ho().then(ks=>{if(ks)return ue.getId()}),[Br,Ts]=yield Promise.all([Wt,xr]);Iu()||oa(rt,Br.measurementId),Me("js",new Date);const Ys=null!==(Qt=null==_t?void 0:_t.config)&&void 0!==Qt?Qt:{};return Ys.origin="firebase",Ys.update=!0,null!=Ts&&(Ys[Qr]=Ts),Me("config",Br.measurementId,Ys),Br.measurementId})).apply(this,arguments)}class Dt{constructor(F){this.app=F}_delete(){return delete Sr[this.app.options.appId],Promise.resolve()}}let Sr={},la=[];const wo={};let Aa,At,zt="dataLayer",et=!1;function C(T,F,W){!function(){const T=[];if((0,be.ru)()&&T.push("This is a browser extension environment."),(0,be.zI)()||T.push("Cookies are not available."),T.length>0){const F=T.map((ue,Me)=>`(${Me+1}) ${ue}`).join(" "),W=Ir.create("invalid-analytics-context",{errorInfo:F});Bi.warn(W.message)}}();const ue=T.options.appId;if(!ue)throw Ir.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Ir.create("no-api-key");Bi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sr[ue])throw Ir.create("already-exists",{id:ue});if(!et){!function(T){let F=[];Array.isArray(window[T])?F=window[T]:window[T]=F}(zt);const{wrappedGtag:rt,gtagCore:_t}=function(T,F,W,ue,Me){let rt=function(..._t){window[ue].push(arguments)};return window[Me]&&"function"==typeof window[Me]&&(rt=window[Me]),window[Me]=function(T,F,W,ue){function rt(){return(rt=(0,g.Z)(function*(_t,Qt,Wt){try{"event"===_t?yield ko(T,F,W,Qt,Wt):"config"===_t?yield Ca(T,F,W,ue,Qt,Wt):T("set",Qt)}catch(xr){Bi.error(xr)}})).apply(this,arguments)}return function(_t,Qt,Wt){return rt.apply(this,arguments)}}(rt,T,F,W),{gtagCore:rt,wrappedGtag:window[Me]}}(Sr,la,wo,zt,"gtag");At=rt,Aa=_t,et=!0}return Sr[ue]=function(T,F,W,ue,Me,rt,_t){return ua.apply(this,arguments)}(T,la,wo,F,Aa,zt,W),new Dt(T)}function _(){return(_=(0,g.Z)(function*(T,F,W,ue,Me){if(Me&&Me.global)T("event",W,ue);else{const rt=yield F;T("event",W,Object.assign(Object.assign({},ue),{send_to:rt}))}})).apply(this,arguments)}function xt(){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(){if((0,be.ru)()||!(0,be.zI)()||!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch(T){return!1}})).apply(this,arguments)}const $i="@firebase/analytics";(0,Se._registerComponent)(new de.wA(zs,(F,{options:W})=>C(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,Se._registerComponent)(new de.wA("analytics-internal",function(F){try{const W=F.getProvider(zs).getImmediate();return{logEvent:(ue,Me,rt)=>function(T,F,W,ue){T=(0,be.m9)(T),function(T,F,W,ue,Me){return _.apply(this,arguments)}(At,Sr[T.app.options.appId],F,W,ue).catch(Me=>Bi.error(Me))}(W,ue,Me,rt)}}catch(W){throw Ir.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,Se.registerVersion)($i,"0.7.2"),(0,Se.registerVersion)($i,"0.7.2","esm2017");var Qi=B(7771),xi=B(3637),Jo=B(3342),Ri=B(309),Ha=B(3101);const uc=new D.GfV("7.1.1"),ca="__angularfire_symbol__analyticsIsSupported",Du="__angularfire_symbol__remoteConfigIsSupported",Zt="__angularfire_symbol__messagingIsSupported";function Tu(T,F,W){if(F){if(1===F.length)return F[0];const rt=F.filter(_t=>_t.app===W);if(1===rt.length)return rt[0]}return W.container.getProvider(T).getImmediate({optional:!0})}globalThis[ca]||(globalThis[ca]=xt().then(T=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=T)),globalThis[Zt]||(globalThis[Zt]=Dr().then(T=>globalThis.__angularfire_symbol__messagingIsSupportedValue=T)),globalThis[Du]||(globalThis[Du]=yo().then(T=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=T));const Sa=(T,F)=>{const W=F?[F]:(0,O.C6)(),ue=[];return W.forEach(Me=>{Me.container.getProvider(T).instances.forEach(_t=>{ue.includes(_t)||ue.push(_t)})}),ue};function xa(){}class Au{constructor(F,W=Qi.N){this.zone=F,this.delegate=W}now(){return this.delegate.now()}schedule(F,W,ue){const Me=this.zone;return this.delegate.schedule(function(_t){Me.runGuarded(()=>{F.apply(this,[_t])})},W,ue)}}class ro{constructor(F){this.zone=F,this.task=null}call(F,W){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xa,{},xa,xa)),W.pipe((0,Jo.b)({next:ue,complete:ue,error:ue})).subscribe(F).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let io=(()=>{class T{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Au(Zone.current)),this.insideAngular=W.run(()=>new Au(Zone.current,xi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(W){return new(W||T)(D.LFG(D.R0b))},T.\u0275prov=D.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Bo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Ra(T){return T.pipe((0,Ri.QV)(Bo().outsideAngular))}function Ol(T){return Bo(),function(T){return function(W){return(W=W.lift(new ro(T.ngZone))).pipe((0,Ha.R)(T.outsideAngular),(0,Ri.QV)(T.insideAngular))}}(Bo())(T)}},6575:(Pt,Ye,B)=>{"use strict";B.d(Ye,{F0:()=>Yi,Bz:()=>Os,lC:()=>Yo});var D=B(8583),O=B(3018),g=B(9765),Se=B(7971);class be extends g.xQ{constructor(v){super(),this._value=v}get value(){return this.getValue()}_subscribe(v){const _=super._subscribe(v);return _&&!_.closed&&v.next(this._value),_}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Se.N;return this._value}next(v){super.next(this._value=v)}}var de=B(4869),Fe=B(9796),ve=B(7393);class ae extends ve.L{notifyNext(v,_,R,L,q){this.destination.next(_)}notifyError(v,_){this.destination.error(v)}notifyComplete(v){this.destination.complete()}}class J extends ve.L{constructor(v,_,R){super(),this.parent=v,this.outerValue=_,this.outerIndex=R,this.index=0}_next(v){this.parent.notifyNext(this.outerValue,v,this.outerIndex,this.index++,this)}_error(v){this.parent.notifyError(v,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var X=B(7444),he=B(7574);function ge(C,v,_,R,L=new J(C,_,R)){if(!L.closed)return v instanceof he.y?v.subscribe(L):(0,X.s)(v)(L)}var ke=B(6693);const He={};class me{constructor(v){this.resultSelector=v}call(v,_){return _.subscribe(new Le(v,this.resultSelector))}}class Le extends ae{constructor(v,_){super(v),this.resultSelector=_,this.active=0,this.values=[],this.observables=[]}_next(v){this.values.push(He),this.observables.push(v)}_complete(){const v=this.observables,_=v.length;if(0===_)this.destination.complete();else{this.active=_,this.toRespond=_;for(let R=0;R<_;R++)this.add(ge(this,v[R],void 0,R))}}notifyComplete(v){0==(this.active-=1)&&this.destination.complete()}notifyNext(v,_,R){const L=this.values,ie=this.toRespond?L[R]===He?--this.toRespond:this.toRespond:0;L[R]=_,0===ie&&(this.resultSelector?this._tryResultSelector(L):this.destination.next(L.slice()))}_tryResultSelector(v){let _;try{_=this.resultSelector.apply(this,v)}catch(R){return void this.destination.error(R)}this.destination.next(_)}}var qe=B(4402),$e=B(9193);function Qe(C){return new he.y(v=>{let _;try{_=C()}catch(L){return void v.error(L)}return(_?(0,qe.D)(_):(0,$e.c)()).subscribe(v)})}var re=B(5917),ut=B(3410),Gt=B(8071),vt=B(2441),Ze=B(5345);function Ve(C){return function(_){const R=new Re(C),L=_.lift(R);return R.caught=L}}class Re{constructor(v){this.selector=v}call(v,_){return _.subscribe(new fe(v,this.selector,this.caught))}}class fe extends Ze.Ds{constructor(v,_,R){super(v),this.selector=_,this.caught=R}error(v){if(!this.isStopped){let _;try{_=this.selector(v,this.caught)}catch(q){return void super.error(q)}this._unsubscribeAndRecycle();const R=new Ze.IY(this);this.add(R);const L=(0,Ze.ft)(_,R);L!==R&&this.add(L)}}}var Te=B(9773);function Be(C,v){return(0,Te.zg)(C,v,1)}var Ge=B(5435),Rt=B(7108);function Xt(C){return function(_){return 0===C?(0,$e.c)():_.lift(new $n(C))}}class $n{constructor(v){if(this.total=v,this.total<0)throw new Rt.W}call(v,_){return _.subscribe(new jt(v,this.total))}}class jt extends ve.L{constructor(v,_){super(v),this.total=_,this.ring=new Array,this.count=0}_next(v){const _=this.ring,R=this.total,L=this.count++;_.length<R?_.push(v):_[L%R]=v}_complete(){const v=this.destination;let _=this.count;if(_>0){const R=this.count>=this.total?this.total:this.count,L=this.ring;for(let q=0;q<R;q++){const ie=_++%R;v.next(L[ie])}}v.complete()}}var xn=B(4635),Zn=B(5242),cn=B(4487),Tr=B(5319);class Lt{constructor(v){this.callback=v}call(v,_){return _.subscribe(new tn(v,this.callback))}}class tn extends ve.L{constructor(v,_){super(v),this.add(new Tr.w(_))}}var Mn=B(8002),Wn=B(3190),Tn=B(5257),Rr=B(9761),pr=B(2145),hn=B(8049),mn=B(3342),Nn=B(1307),Cn=B(3282);class Xn{constructor(v,_){this.id=v,this.url=_}}class vn extends Xn{constructor(v,_,R="imperative",L=null){super(v,_),this.navigationTrigger=R,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mr extends Xn{constructor(v,_,R){super(v,_),this.urlAfterRedirects=R}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oi extends Xn{constructor(v,_,R){super(v,_),this.reason=R}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qt extends Xn{constructor(v,_,R){super(v,_),this.error=R}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lt extends Xn{constructor(v,_,R,L){super(v,_),this.urlAfterRedirects=R,this.state=L}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vn extends Xn{constructor(v,_,R,L){super(v,_),this.urlAfterRedirects=R,this.state=L}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends Xn{constructor(v,_,R,L,q){super(v,_),this.urlAfterRedirects=R,this.state=L,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class er extends Xn{constructor(v,_,R,L){super(v,_),this.urlAfterRedirects=R,this.state=L}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class En extends Xn{constructor(v,_,R,L){super(v,_),this.urlAfterRedirects=R,this.state=L}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ft{constructor(v){this.route=v}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kt{constructor(v){this.route=v}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lr{constructor(v){this.snapshot=v}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mi{constructor(v){this.snapshot=v}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yi{constructor(v){this.snapshot=v}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cr{constructor(v){this.snapshot=v}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hr{constructor(v,_,R){this.routerEvent=v,this.position=_,this.anchor=R}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const en="primary";class we{constructor(v){this.params=v||{}}has(v){return Object.prototype.hasOwnProperty.call(this.params,v)}get(v){if(this.has(v)){const _=this.params[v];return Array.isArray(_)?_[0]:_}return null}getAll(v){if(this.has(v)){const _=this.params[v];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Ee(C){return new we(C)}const pe="ngNavigationCancelingError";function ot(C){const v=Error("NavigationCancelingError: "+C);return v[pe]=!0,v}function Tt(C,v,_){const R=_.path.split("/");if(R.length>C.length||"full"===_.pathMatch&&(v.hasChildren()||R.length<C.length))return null;const L={};for(let q=0;q<R.length;q++){const ie=R[q],Ce=C[q];if(ie.startsWith(":"))L[ie.substring(1)]=Ce;else if(ie!==Ce.path)return null}return{consumed:C.slice(0,R.length),posParams:L}}function yn(C,v){const _=C?Object.keys(C):void 0,R=v?Object.keys(v):void 0;if(!_||!R||_.length!=R.length)return!1;let L;for(let q=0;q<_.length;q++)if(L=_[q],!Jn(C[L],v[L]))return!1;return!0}function Jn(C,v){if(Array.isArray(C)&&Array.isArray(v)){if(C.length!==v.length)return!1;const _=[...C].sort(),R=[...v].sort();return _.every((L,q)=>R[q]===L)}return C===v}function an(C){return Array.prototype.concat.apply([],C)}function Vr(C){return C.length>0?C[C.length-1]:null}function rn(C,v){for(const _ in C)C.hasOwnProperty(_)&&v(C[_],_)}function gr(C){return(0,O.CqO)(C)?C:(0,O.QGY)(C)?(0,qe.D)(Promise.resolve(C)):(0,re.of)(C)}const ei={exact:function zr(C,v,_){if(!dr(C.segments,v.segments)||!oi(C.segments,v.segments,_)||C.numberOfChildren!==v.numberOfChildren)return!1;for(const R in v.children)if(!C.children[R]||!zr(C.children[R],v.children[R],_))return!1;return!0},subset:cr},os={exact:function(C,v){return yn(C,v)},subset:function(C,v){return Object.keys(v).length<=Object.keys(C).length&&Object.keys(v).every(_=>Jn(C[_],v[_]))},ignored:()=>!0};function Pi(C,v,_){return ei[_.paths](C.root,v.root,_.matrixParams)&&os[_.queryParams](C.queryParams,v.queryParams)&&!("exact"===_.fragment&&C.fragment!==v.fragment)}function cr(C,v,_){return jr(C,v,v.segments,_)}function jr(C,v,_,R){if(C.segments.length>_.length){const L=C.segments.slice(0,_.length);return!(!dr(L,_)||v.hasChildren()||!oi(L,_,R))}if(C.segments.length===_.length){if(!dr(C.segments,_)||!oi(C.segments,_,R))return!1;for(const L in v.children)if(!C.children[L]||!cr(C.children[L],v.children[L],R))return!1;return!0}{const L=_.slice(0,C.segments.length),q=_.slice(C.segments.length);return!!(dr(C.segments,L)&&oi(C.segments,L,R)&&C.children[en])&&jr(C.children[en],v,q,R)}}function oi(C,v,_){return v.every((R,L)=>os[_](C[L].parameters,R.parameters))}class $r{constructor(v,_,R){this.root=v,this.queryParams=_,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ee(this.queryParams)),this._queryParamMap}toString(){return Vt.serialize(this)}}class Kt{constructor(v,_){this.segments=v,this.children=_,this.parent=null,rn(_,(R,L)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ht(this)}}class Gr{constructor(v,_){this.path=v,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Ee(this.parameters)),this._parameterMap}toString(){return nn(this)}}function dr(C,v){return C.length===v.length&&C.every((_,R)=>_.path===v[R].path)}class On{}class bt{parse(v){const _=new Oe(v);return new $r(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(v){var C;return`${`/${Hn(v.root,!0)}`}${function(C){const v=Object.keys(C).map(_=>{const R=C[_];return Array.isArray(R)?R.map(L=>`${yr(_)}=${yr(L)}`).join("&"):`${yr(_)}=${yr(R)}`}).filter(_=>!!_);return v.length?`?${v.join("&")}`:""}(v.queryParams)}${"string"==typeof v.fragment?`#${C=v.fragment,encodeURI(C)}`:""}`}}const Vt=new bt;function Ht(C){return C.segments.map(v=>nn(v)).join("/")}function Hn(C,v){if(!C.hasChildren())return Ht(C);if(v){const _=C.children[en]?Hn(C.children[en],!1):"",R=[];return rn(C.children,(L,q)=>{q!==en&&R.push(`${q}:${Hn(L,!1)}`)}),R.length>0?`${_}(${R.join("//")})`:_}{const _=function(C,v){let _=[];return rn(C.children,(R,L)=>{L===en&&(_=_.concat(v(R,L)))}),rn(C.children,(R,L)=>{L!==en&&(_=_.concat(v(R,L)))}),_}(C,(R,L)=>L===en?[Hn(C.children[en],!1)]:[`${L}:${Hn(R,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[en]?`${Ht(C)}/${_[0]}`:`${Ht(C)}/(${_.join("//")})`}}function Zr(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yr(C){return Zr(C).replace(/%3B/gi,";")}function Un(C){return Zr(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tr(C){return decodeURIComponent(C)}function es(C){return tr(C.replace(/\+/g,"%20"))}function nn(C){return`${Un(C.path)}${function(C){return Object.keys(C).map(v=>`;${Un(v)}=${Un(C[v])}`).join("")}(C.parameters)}`}const vs=/^[^\/()?;=#]+/;function Kr(C){const v=C.match(vs);return v?v[0]:""}const Ar=/^[^=?&#]+/,Yr=/^[^?&#]+/;class Oe{constructor(v){this.url=v,this.remaining=v}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const v={};if(this.consumeOptional("?"))do{this.parseQueryParam(v)}while(this.consumeOptional("&"));return v}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const v=[];for(this.peekStartsWith("(")||v.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),v.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(v.length>0||Object.keys(_).length>0)&&(R[en]=new Kt(v,_)),R}parseSegment(){const v=Kr(this.remaining);if(""===v&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(v),new Gr(tr(v),this.parseMatrixParams())}parseMatrixParams(){const v={};for(;this.consumeOptional(";");)this.parseParam(v);return v}parseParam(v){const _=Kr(this.remaining);if(!_)return;this.capture(_);let R="";if(this.consumeOptional("=")){const L=Kr(this.remaining);L&&(R=L,this.capture(R))}v[tr(_)]=tr(R)}parseQueryParam(v){const _=function(C){const v=C.match(Ar);return v?v[0]:""}(this.remaining);if(!_)return;this.capture(_);let R="";if(this.consumeOptional("=")){const ie=function(C){const v=C.match(Yr);return v?v[0]:""}(this.remaining);ie&&(R=ie,this.capture(R))}const L=es(_),q=es(R);if(v.hasOwnProperty(L)){let ie=v[L];Array.isArray(ie)||(ie=[ie],v[L]=ie),ie.push(q)}else v[L]=q}parseParens(v){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=Kr(this.remaining),L=this.remaining[R.length];if("/"!==L&&")"!==L&&";"!==L)throw new Error(`Cannot parse url '${this.url}'`);let q;R.indexOf(":")>-1?(q=R.substr(0,R.indexOf(":")),this.capture(q),this.capture(":")):v&&(q=en);const ie=this.parseChildren();_[q]=1===Object.keys(ie).length?ie[en]:new Kt([],ie),this.consumeOptional("//")}return _}peekStartsWith(v){return this.remaining.startsWith(v)}consumeOptional(v){return!!this.peekStartsWith(v)&&(this.remaining=this.remaining.substring(v.length),!0)}capture(v){if(!this.consumeOptional(v))throw new Error(`Expected "${v}".`)}}class We{constructor(v){this._root=v}get root(){return this._root.value}parent(v){const _=this.pathFromRoot(v);return _.length>1?_[_.length-2]:null}children(v){const _=Xe(v,this._root);return _?_.children.map(R=>R.value):[]}firstChild(v){const _=Xe(v,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(v){const _=Et(v,this._root);return _.length<2?[]:_[_.length-2].children.map(L=>L.value).filter(L=>L!==v)}pathFromRoot(v){return Et(v,this._root).map(_=>_.value)}}function Xe(C,v){if(C===v.value)return v;for(const _ of v.children){const R=Xe(C,_);if(R)return R}return null}function Et(C,v){if(C===v.value)return[v];for(const _ of v.children){const R=Et(C,_);if(R.length)return R.unshift(v),R}return[]}class Ct{constructor(v,_){this.value=v,this.children=_}toString(){return`TreeNode(${this.value})`}}function Ot(C){const v={};return C&&C.children.forEach(_=>v[_.value.outlet]=_),v}class Gn extends We{constructor(v,_){super(v),this.snapshot=_,Ie(this,v)}toString(){return this.snapshot.toString()}}function pn(C,v){const _=function(C,v){const ie=new ce([],{},{},"",{},en,v,null,C.root,-1,{});return new Q("",new Ct(ie,[]))}(C,v),R=new be([new Gr("",{})]),L=new be({}),q=new be({}),ie=new be({}),Ce=new be(""),at=new kr(R,L,ie,Ce,q,en,v,_.root);return at.snapshot=_.root,new Gn(new Ct(at,[]),_)}class kr{constructor(v,_,R,L,q,ie,Ce,at){this.url=v,this.params=_,this.queryParams=R,this.fragment=L,this.data=q,this.outlet=ie,this.component=Ce,this._futureSnapshot=at}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mn.U)(v=>Ee(v)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mn.U)(v=>Ee(v)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _r(C,v="emptyOnly"){const _=C.pathFromRoot;let R=0;if("always"!==v)for(R=_.length-1;R>=1;){const L=_[R],q=_[R-1];if(L.routeConfig&&""===L.routeConfig.path)R--;else{if(q.component)break;R--}}return function(C){return C.reduce((v,_)=>({params:Object.assign(Object.assign({},v.params),_.params),data:Object.assign(Object.assign({},v.data),_.data),resolve:Object.assign(Object.assign({},v.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(R))}class ce{constructor(v,_,R,L,q,ie,Ce,at,ht,Kn,fn){this.url=v,this.params=_,this.queryParams=R,this.fragment=L,this.data=q,this.outlet=ie,this.component=Ce,this.routeConfig=at,this._urlSegment=ht,this._lastPathIndex=Kn,this._resolve=fn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ee(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ee(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q extends We{constructor(v,_){super(_),this.url=v,Ie(this,_)}toString(){return it(this._root)}}function Ie(C,v){v.value._routerState=C,v.children.forEach(_=>Ie(C,_))}function it(C){const v=C.children.length>0?` { ${C.children.map(it).join(", ")} } `:"";return`${C.value}${v}`}function Bt(C){if(C.snapshot){const v=C.snapshot,_=C._futureSnapshot;C.snapshot=_,yn(v.queryParams,_.queryParams)||C.queryParams.next(_.queryParams),v.fragment!==_.fragment&&C.fragment.next(_.fragment),yn(v.params,_.params)||C.params.next(_.params),function(C,v){if(C.length!==v.length)return!1;for(let _=0;_<C.length;++_)if(!yn(C[_],v[_]))return!1;return!0}(v.url,_.url)||C.url.next(_.url),yn(v.data,_.data)||C.data.next(_.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function An(C,v){return yn(C.params,v.params)&&function(C,v){return dr(C,v)&&C.every((_,R)=>yn(_.parameters,v[R].parameters))}(C.url,v.url)&&!(!C.parent!=!v.parent)&&(!C.parent||An(C.parent,v.parent))}function hr(C,v,_){if(_&&C.shouldReuseRoute(v.value,_.value.snapshot)){const R=_.value;R._futureSnapshot=v.value;const L=function(C,v,_){return v.children.map(R=>{for(const L of _.children)if(C.shouldReuseRoute(R.value,L.value.snapshot))return hr(C,R,L);return hr(C,R)})}(C,v,_);return new Ct(R,L)}{if(C.shouldAttach(v.value)){const q=C.retrieve(v.value);if(null!==q){const ie=q.route;return ti(v,ie),ie}}const R=function(C){return new kr(new be(C.url),new be(C.params),new be(C.queryParams),new be(C.fragment),new be(C.data),C.outlet,C.component,C)}(v.value),L=v.children.map(q=>hr(C,q));return new Ct(R,L)}}function ti(C,v){if(C.value.routeConfig!==v.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(C.children.length!==v.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");v.value._futureSnapshot=C.value;for(let _=0;_<C.children.length;++_)ti(C.children[_],v.children[_])}function Wi(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function Hs(C){return"object"==typeof C&&null!=C&&C.outlets}function Gs(C,v,_,R,L){let q={};return R&&rn(R,(ie,Ce)=>{q[Ce]=Array.isArray(ie)?ie.map(at=>`${at}`):`${ie}`}),new $r(_.root===C?v:ls(_.root,C,v),q,L)}function ls(C,v,_){const R={};return rn(C.children,(L,q)=>{R[q]=L===v?_:ls(L,v,_)}),new Kt(C.segments,R)}class yo{constructor(v,_,R){if(this.isAbsolute=v,this.numberOfDoubleDots=_,this.commands=R,v&&R.length>0&&Wi(R[0]))throw new Error("Root segment cannot have matrix parameters");const L=R.find(Hs);if(L&&L!==Vr(R))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zi{constructor(v,_,R){this.segmentGroup=v,this.processChildren=_,this.index=R}}function ds(C,v,_){if(C||(C=new Kt([],{})),0===C.segments.length&&C.hasChildren())return hs(C,v,_);const R=function(C,v,_){let R=0,L=v;const q={match:!1,pathIndex:0,commandIndex:0};for(;L<C.segments.length;){if(R>=_.length)return q;const ie=C.segments[L],Ce=_[R];if(Hs(Ce))break;const at=`${Ce}`,ht=R<_.length-1?_[R+1]:null;if(L>0&&void 0===at)break;if(at&&ht&&"object"==typeof ht&&void 0===ht.outlets){if(!Zi(at,ht,ie))return q;R+=2}else{if(!Zi(at,{},ie))return q;R++}L++}return{match:!0,pathIndex:L,commandIndex:R}}(C,v,_),L=_.slice(R.commandIndex);if(R.match&&R.pathIndex<C.segments.length){const q=new Kt(C.segments.slice(0,R.pathIndex),{});return q.children[en]=new Kt(C.segments.slice(R.pathIndex),C.children),hs(q,0,L)}return R.match&&0===L.length?new Kt(C.segments,{}):R.match&&!C.hasChildren()?fs(C,v,_):R.match?hs(C,0,L):fs(C,v,_)}function hs(C,v,_){if(0===_.length)return new Kt(C.segments,{});{const R=function(C){return Hs(C[0])?C[0].outlets:{[en]:C}}(_),L={};return rn(R,(q,ie)=>{"string"==typeof q&&(q=[q]),null!==q&&(L[ie]=ds(C.children[ie],v,q))}),rn(C.children,(q,ie)=>{void 0===R[ie]&&(L[ie]=q)}),new Kt(C.segments,L)}}function fs(C,v,_){const R=C.segments.slice(0,v);let L=0;for(;L<_.length;){const q=_[L];if(Hs(q)){const at=Ia(q.outlets);return new Kt(R,at)}if(0===L&&Wi(_[0])){R.push(new Gr(C.segments[v].path,_i(_[0]))),L++;continue}const ie=Hs(q)?q.outlets[en]:`${q}`,Ce=L<_.length-1?_[L+1]:null;ie&&Ce&&Wi(Ce)?(R.push(new Gr(ie,_i(Ce))),L+=2):(R.push(new Gr(ie,{})),L++)}return new Kt(R,{})}function Ia(C){const v={};return rn(C,(_,R)=>{"string"==typeof _&&(_=[_]),null!==_&&(v[R]=fs(new Kt([],{}),0,_))}),v}function _i(C){const v={};return rn(C,(_,R)=>v[R]=`${_}`),v}function Zi(C,v,_){return C==_.path&&yn(v,_.parameters)}class Rs{constructor(v,_,R,L){this.routeReuseStrategy=v,this.futureState=_,this.currState=R,this.forwardEvent=L}activate(v){const _=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,R,v),Bt(this.futureState.root),this.activateChildRoutes(_,R,v)}deactivateChildRoutes(v,_,R){const L=Ot(_);v.children.forEach(q=>{const ie=q.value.outlet;this.deactivateRoutes(q,L[ie],R),delete L[ie]}),rn(L,(q,ie)=>{this.deactivateRouteAndItsChildren(q,R)})}deactivateRoutes(v,_,R){const L=v.value,q=_?_.value:null;if(L===q)if(L.component){const ie=R.getContext(L.outlet);ie&&this.deactivateChildRoutes(v,_,ie.children)}else this.deactivateChildRoutes(v,_,R);else q&&this.deactivateRouteAndItsChildren(_,R)}deactivateRouteAndItsChildren(v,_){this.routeReuseStrategy.shouldDetach(v.value.snapshot)?this.detachAndStoreRouteSubtree(v,_):this.deactivateRouteAndOutlet(v,_)}detachAndStoreRouteSubtree(v,_){const R=_.getContext(v.value.outlet);if(R&&R.outlet){const L=R.outlet.detach(),q=R.children.onOutletDeactivated();this.routeReuseStrategy.store(v.value.snapshot,{componentRef:L,route:v,contexts:q})}}deactivateRouteAndOutlet(v,_){const R=_.getContext(v.value.outlet),L=R&&v.value.component?R.children:_,q=Ot(v);for(const ie of Object.keys(q))this.deactivateRouteAndItsChildren(q[ie],L);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(v,_,R){const L=Ot(_);v.children.forEach(q=>{this.activateRoutes(q,L[q.value.outlet],R),this.forwardEvent(new Cr(q.value.snapshot))}),v.children.length&&this.forwardEvent(new mi(v.value.snapshot))}activateRoutes(v,_,R){const L=v.value,q=_?_.value:null;if(Bt(L),L===q)if(L.component){const ie=R.getOrCreateContext(L.outlet);this.activateChildRoutes(v,_,ie.children)}else this.activateChildRoutes(v,_,R);else if(L.component){const ie=R.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const Ce=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),ie.children.onOutletReAttached(Ce.contexts),ie.attachRef=Ce.componentRef,ie.route=Ce.route.value,ie.outlet&&ie.outlet.attach(Ce.componentRef,Ce.route.value),vi(Ce.route)}else{const Ce=function(C){for(let v=C.parent;v;v=v.parent){const _=v.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(L.snapshot),at=Ce?Ce.module.componentFactoryResolver:null;ie.attachRef=null,ie.route=L,ie.resolver=at,ie.outlet&&ie.outlet.activateWith(L,at),this.activateChildRoutes(v,null,ie.children)}}else this.activateChildRoutes(v,null,R)}}function vi(C){Bt(C.value),C.children.forEach(vi)}class ws{constructor(v,_){this.routes=v,this.module=_}}function ai(C){return"function"==typeof C}function Ti(C){return C instanceof $r}const G=Symbol("INITIAL_VALUE");function N(){return(0,Wn.w)(C=>function(...C){let v,_;return(0,de.K)(C[C.length-1])&&(_=C.pop()),"function"==typeof C[C.length-1]&&(v=C.pop()),1===C.length&&(0,Fe.k)(C[0])&&(C=C[0]),(0,ke.n)(C,_).lift(new me(v))}(C.map(v=>v.pipe((0,Tn.q)(1),(0,Rr.O)(G)))).pipe((0,pr.R)((v,_)=>{let R=!1;return _.reduce((L,q,ie)=>L!==G?L:(q===G&&(R=!0),R||!1!==q&&ie!==_.length-1&&!Ti(q)?L:q),v)},G),(0,Ge.h)(v=>v!==G),(0,Mn.U)(v=>Ti(v)?v:!0===v),(0,Tn.q)(1)))}let z=(()=>{class C{}return C.\u0275fac=function(_){return new(_||C)},C.\u0275cmp=O.Xpm({type:C,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,R){1&_&&O._UZ(0,"router-outlet")},directives:function(){return[Yo]},encapsulation:2}),C})();function ye(C,v=""){for(let _=0;_<C.length;_++){const R=C[_];Ke(R,ft(v,R))}}function Ke(C,v){C.children&&ye(C.children,v)}function ft(C,v){return v?C||v.path?C&&!v.path?`${C}/`:!C&&v.path?v.path:`${C}/${v.path}`:"":C}function $t(C){const v=C.children&&C.children.map($t),_=v?Object.assign(Object.assign({},C),{children:v}):Object.assign({},C);return!_.component&&(v||_.loadChildren)&&_.outlet&&_.outlet!==en&&(_.component=z),_}function Ut(C){return C.outlet||en}function Mt(C,v){const _=C.filter(R=>Ut(R)===v);return _.push(...C.filter(R=>Ut(R)!==v)),_}const vr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Bn(C,v,_){var R;if(""===v.path)return"full"===v.pathMatch&&(C.hasChildren()||_.length>0)?Object.assign({},vr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const q=(v.matcher||Tt)(_,C,v);if(!q)return Object.assign({},vr);const ie={};rn(q.posParams,(at,ht)=>{ie[ht]=at.path});const Ce=q.consumed.length>0?Object.assign(Object.assign({},ie),q.consumed[q.consumed.length-1].parameters):ie;return{matched:!0,consumedSegments:q.consumed,lastChild:q.consumed.length,parameters:Ce,positionalParamSegments:null!==(R=q.posParams)&&void 0!==R?R:{}}}function Er(C,v,_,R,L="corrected"){if(_.length>0&&function(C,v,_){return _.some(R=>Fr(C,v,R)&&Ut(R)!==en)}(C,_,R)){const ie=new Kt(v,function(C,v,_,R){const L={};L[en]=R,R._sourceSegment=C,R._segmentIndexShift=v.length;for(const q of _)if(""===q.path&&Ut(q)!==en){const ie=new Kt([],{});ie._sourceSegment=C,ie._segmentIndexShift=v.length,L[Ut(q)]=ie}return L}(C,v,R,new Kt(_,C.children)));return ie._sourceSegment=C,ie._segmentIndexShift=v.length,{segmentGroup:ie,slicedSegments:[]}}if(0===_.length&&function(C,v,_){return _.some(R=>Fr(C,v,R))}(C,_,R)){const ie=new Kt(C.segments,function(C,v,_,R,L,q){const ie={};for(const Ce of R)if(Fr(C,_,Ce)&&!L[Ut(Ce)]){const at=new Kt([],{});at._sourceSegment=C,at._segmentIndexShift="legacy"===q?C.segments.length:v.length,ie[Ut(Ce)]=at}return Object.assign(Object.assign({},L),ie)}(C,v,_,R,C.children,L));return ie._sourceSegment=C,ie._segmentIndexShift=v.length,{segmentGroup:ie,slicedSegments:_}}const q=new Kt(C.segments,C.children);return q._sourceSegment=C,q._segmentIndexShift=v.length,{segmentGroup:q,slicedSegments:_}}function Fr(C,v,_){return(!(C.hasChildren()||v.length>0)||"full"!==_.pathMatch)&&""===_.path}function Li(C,v,_,R){return!!(Ut(C)===R||R!==en&&Fr(v,_,C))&&("**"===C.path||Bn(v,C,_).matched)}function Ms(C,v,_){return 0===v.length&&!C.children[_]}class Ai{constructor(v){this.segmentGroup=v||null}}class ri{constructor(v){this.urlTree=v}}function Ws(C){return new he.y(v=>v.error(new Ai(C)))}function Ro(C){return new he.y(v=>v.error(new ri(C)))}function un(C){return new he.y(v=>v.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${C}'`)))}class j{constructor(v,_,R,L,q){this.configLoader=_,this.urlSerializer=R,this.urlTree=L,this.config=q,this.allowRedirects=!0,this.ngModule=v.get(O.h0i)}apply(){const v=Er(this.urlTree.root,[],[],this.config).segmentGroup,_=new Kt(v.segments,v.children);return this.expandSegmentGroup(this.ngModule,this.config,_,en).pipe((0,Mn.U)(q=>this.createUrlTree(Z(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ve(q=>{if(q instanceof ri)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof Ai?this.noMatchError(q):q}))}match(v){return this.expandSegmentGroup(this.ngModule,this.config,v.root,en).pipe((0,Mn.U)(L=>this.createUrlTree(Z(L),v.queryParams,v.fragment))).pipe(Ve(L=>{throw L instanceof Ai?this.noMatchError(L):L}))}noMatchError(v){return new Error(`Cannot match any routes. URL Segment: '${v.segmentGroup}'`)}createUrlTree(v,_,R){const L=v.segments.length>0?new Kt([],{[en]:v}):v;return new $r(L,_,R)}expandSegmentGroup(v,_,R,L){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(v,_,R).pipe((0,Mn.U)(q=>new Kt([],q))):this.expandSegment(v,R,_,R.segments,L,!0)}expandChildren(v,_,R){const L=[];for(const q of Object.keys(R.children))"primary"===q?L.unshift(q):L.push(q);return(0,qe.D)(L).pipe(Be(q=>{const ie=R.children[q],Ce=Mt(_,q);return this.expandSegmentGroup(v,Ce,ie,q).pipe((0,Mn.U)(at=>({segment:at,outlet:q})))}),(0,pr.R)((q,ie)=>(q[ie.outlet]=ie.segment,q),{}),function(C,v){const _=arguments.length>=2;return R=>R.pipe(C?(0,Ge.h)((L,q)=>C(L,q,R)):cn.y,Xt(1),_?(0,Zn.d)(v):(0,xn.T)(()=>new ut.K))}())}expandSegment(v,_,R,L,q,ie){return(0,qe.D)(R).pipe(Be(Ce=>this.expandSegmentAgainstRoute(v,_,R,Ce,L,q,ie).pipe(Ve(ht=>{if(ht instanceof Ai)return(0,re.of)(null);throw ht}))),(0,hn.P)(Ce=>!!Ce),Ve((Ce,at)=>{if(Ce instanceof ut.K||"EmptyError"===Ce.name){if(Ms(_,L,q))return(0,re.of)(new Kt([],{}));throw new Ai(_)}throw Ce}))}expandSegmentAgainstRoute(v,_,R,L,q,ie,Ce){return Li(L,_,q,ie)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(v,_,L,q,ie):Ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(v,_,R,L,q,ie):Ws(_):Ws(_)}expandSegmentAgainstRouteUsingRedirect(v,_,R,L,q,ie){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(v,R,L,ie):this.expandRegularSegmentAgainstRouteUsingRedirect(v,_,R,L,q,ie)}expandWildCardWithParamsAgainstRouteUsingRedirect(v,_,R,L){const q=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?Ro(q):this.lineralizeSegments(R,q).pipe((0,Te.zg)(ie=>{const Ce=new Kt(ie,{});return this.expandSegment(v,Ce,_,ie,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(v,_,R,L,q,ie){const{matched:Ce,consumedSegments:at,lastChild:ht,positionalParamSegments:Kn}=Bn(_,L,q);if(!Ce)return Ws(_);const fn=this.applyRedirectCommands(at,L.redirectTo,Kn);return L.redirectTo.startsWith("/")?Ro(fn):this.lineralizeSegments(L,fn).pipe((0,Te.zg)(Ln=>this.expandSegment(v,_,R,Ln.concat(q.slice(ht)),ie,!1)))}matchSegmentAgainstRoute(v,_,R,L,q){if("**"===R.path)return R.loadChildren?(R._loadedConfig?(0,re.of)(R._loadedConfig):this.configLoader.load(v.injector,R)).pipe((0,Mn.U)(Ln=>(R._loadedConfig=Ln,new Kt(L,{})))):(0,re.of)(new Kt(L,{}));const{matched:ie,consumedSegments:Ce,lastChild:at}=Bn(_,R,L);if(!ie)return Ws(_);const ht=L.slice(at);return this.getChildConfig(v,R,L).pipe((0,Te.zg)(fn=>{const Ln=fn.module,xt=fn.routes,{segmentGroup:ps,slicedSegments:ji}=Er(_,Ce,ht,xt),Ps=new Kt(ps.segments,ps.children);if(0===ji.length&&Ps.hasChildren())return this.expandChildren(Ln,xt,Ps).pipe((0,Mn.U)($i=>new Kt(Ce,$i)));if(0===xt.length&&0===ji.length)return(0,re.of)(new Kt(Ce,{}));const bo=Ut(R)===q;return this.expandSegment(Ln,Ps,xt,ji,bo?en:q,!0).pipe((0,Mn.U)(Qo=>new Kt(Ce.concat(Qo.segments),Qo.children)))}))}getChildConfig(v,_,R){return _.children?(0,re.of)(new ws(_.children,v)):_.loadChildren?void 0!==_._loadedConfig?(0,re.of)(_._loadedConfig):this.runCanLoadGuards(v.injector,_,R).pipe((0,Te.zg)(L=>{return L?this.configLoader.load(v.injector,_).pipe((0,Mn.U)(q=>(_._loadedConfig=q,q))):(C=_,new he.y(v=>v.error(ot(`Cannot load children because the guard of the route "path: '${C.path}'" returned false`))));var C})):(0,re.of)(new ws([],v))}runCanLoadGuards(v,_,R){const L=_.canLoad;if(!L||0===L.length)return(0,re.of)(!0);const q=L.map(ie=>{const Ce=v.get(ie);let at;if((C=Ce)&&ai(C.canLoad))at=Ce.canLoad(_,R);else{if(!ai(Ce))throw new Error("Invalid CanLoad guard");at=Ce(_,R)}var C;return gr(at)});return(0,re.of)(q).pipe(N(),(0,mn.b)(ie=>{if(!Ti(ie))return;const Ce=ot(`Redirecting to "${this.urlSerializer.serialize(ie)}"`);throw Ce.url=ie,Ce}),(0,Mn.U)(ie=>!0===ie))}lineralizeSegments(v,_){let R=[],L=_.root;for(;;){if(R=R.concat(L.segments),0===L.numberOfChildren)return(0,re.of)(R);if(L.numberOfChildren>1||!L.children[en])return un(v.redirectTo);L=L.children[en]}}applyRedirectCommands(v,_,R){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),v,R)}applyRedirectCreatreUrlTree(v,_,R,L){const q=this.createSegmentGroup(v,_.root,R,L);return new $r(q,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(v,_){const R={};return rn(v,(L,q)=>{if("string"==typeof L&&L.startsWith(":")){const Ce=L.substring(1);R[q]=_[Ce]}else R[q]=L}),R}createSegmentGroup(v,_,R,L){const q=this.createSegments(v,_.segments,R,L);let ie={};return rn(_.children,(Ce,at)=>{ie[at]=this.createSegmentGroup(v,Ce,R,L)}),new Kt(q,ie)}createSegments(v,_,R,L){return _.map(q=>q.path.startsWith(":")?this.findPosParam(v,q,L):this.findOrReturn(q,R))}findPosParam(v,_,R){const L=R[_.path.substring(1)];if(!L)throw new Error(`Cannot redirect to '${v}'. Cannot find '${_.path}'.`);return L}findOrReturn(v,_){let R=0;for(const L of _){if(L.path===v.path)return _.splice(R),L;R++}return v}}function Z(C){const v={};for(const R of Object.keys(C.children)){const q=Z(C.children[R]);(q.segments.length>0||q.hasChildren())&&(v[R]=q)}return function(C){if(1===C.numberOfChildren&&C.children[en]){const v=C.children[en];return new Kt(C.segments.concat(v.segments),v.children)}return C}(new Kt(C.segments,v))}class De{constructor(v){this.path=v,this.route=this.path[this.path.length-1]}}class se{constructor(v,_){this.component=v,this.route=_}}function Je(C,v,_){const R=C._root;return wn(R,v?v._root:null,_,[R.value])}function gt(C,v,_){const R=function(C){if(!C)return null;for(let v=C.parent;v;v=v.parent){const _=v.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(v);return(R?R.module.injector:_).get(C)}function wn(C,v,_,R,L={canDeactivateChecks:[],canActivateChecks:[]}){const q=Ot(v);return C.children.forEach(ie=>{(function(C,v,_,R,L={canDeactivateChecks:[],canActivateChecks:[]}){const q=C.value,ie=v?v.value:null,Ce=_?_.getContext(C.value.outlet):null;if(ie&&q.routeConfig===ie.routeConfig){const at=function(C,v,_){if("function"==typeof _)return _(C,v);switch(_){case"pathParamsChange":return!dr(C.url,v.url);case"pathParamsOrQueryParamsChange":return!dr(C.url,v.url)||!yn(C.queryParams,v.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!An(C,v)||!yn(C.queryParams,v.queryParams);case"paramsChange":default:return!An(C,v)}}(ie,q,q.routeConfig.runGuardsAndResolvers);at?L.canActivateChecks.push(new De(R)):(q.data=ie.data,q._resolvedData=ie._resolvedData),wn(C,v,q.component?Ce?Ce.children:null:_,R,L),at&&Ce&&Ce.outlet&&Ce.outlet.isActivated&&L.canDeactivateChecks.push(new se(Ce.outlet.component,ie))}else ie&&rr(v,Ce,L),L.canActivateChecks.push(new De(R)),wn(C,null,q.component?Ce?Ce.children:null:_,R,L)})(ie,q[ie.value.outlet],_,R.concat([ie.value]),L),delete q[ie.value.outlet]}),rn(q,(ie,Ce)=>rr(ie,_.getContext(Ce),L)),L}function rr(C,v,_){const R=Ot(C),L=C.value;rn(R,(q,ie)=>{rr(q,L.component?v?v.children.getContext(ie):null:v,_)}),_.canDeactivateChecks.push(new se(L.component&&v&&v.outlet&&v.outlet.isActivated?v.outlet.component:null,L))}class Ui{}function eo(C){return new he.y(v=>v.error(C))}class A{constructor(v,_,R,L,q,ie){this.rootComponentType=v,this.config=_,this.urlTree=R,this.url=L,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=ie}recognize(){const v=Er(this.urlTree.root,[],[],this.config.filter(ie=>void 0===ie.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,v,en);if(null===_)return null;const R=new ce([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new Ct(R,_),q=new Q(this.url,L);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(v){const _=v.value,R=_r(_,this.paramsInheritanceStrategy);_.params=Object.freeze(R.params),_.data=Object.freeze(R.data),v.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(v,_,R){return 0===_.segments.length&&_.hasChildren()?this.processChildren(v,_):this.processSegment(v,_,_.segments,R)}processChildren(v,_){const R=[];for(const q of Object.keys(_.children)){const ie=_.children[q],Ce=Mt(v,q),at=this.processSegmentGroup(Ce,ie,q);if(null===at)return null;R.push(...at)}const L=mt(R);return L.sort((v,_)=>v.value.outlet===en?-1:_.value.outlet===en?1:v.value.outlet.localeCompare(_.value.outlet)),L}processSegment(v,_,R,L){for(const q of v){const ie=this.processSegmentAgainstRoute(q,_,R,L);if(null!==ie)return ie}return Ms(_,R,L)?[]:null}processSegmentAgainstRoute(v,_,R,L){if(v.redirectTo||!Li(v,_,R,L))return null;let q,ie=[],Ce=[];if("**"===v.path){const xt=R.length>0?Vr(R).parameters:{};q=new ce(R,xt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,di(v),Ut(v),v.component,v,fr(_),Dr(_)+R.length,Si(v))}else{const xt=Bn(_,v,R);if(!xt.matched)return null;ie=xt.consumedSegments,Ce=R.slice(xt.lastChild),q=new ce(ie,xt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,di(v),Ut(v),v.component,v,fr(_),Dr(_)+ie.length,Si(v))}const at=(C=v).children?C.children:C.loadChildren?C._loadedConfig.routes:[],{segmentGroup:ht,slicedSegments:Kn}=Er(_,ie,Ce,at.filter(xt=>void 0===xt.redirectTo),this.relativeLinkResolution);var C;if(0===Kn.length&&ht.hasChildren()){const xt=this.processChildren(at,ht);return null===xt?null:[new Ct(q,xt)]}if(0===at.length&&0===Kn.length)return[new Ct(q,[])];const fn=Ut(v)===L,Ln=this.processSegment(at,ht,Kn,fn?en:L);return null===Ln?null:[new Ct(q,Ln)]}}function Pe(C){const v=C.value.routeConfig;return v&&""===v.path&&void 0===v.redirectTo}function mt(C){const v=[],_=new Set;for(const R of C){if(!Pe(R)){v.push(R);continue}const L=v.find(q=>R.value.routeConfig===q.value.routeConfig);void 0!==L?(L.children.push(...R.children),_.add(L)):v.push(R)}for(const R of _){const L=mt(R.children);v.push(new Ct(R.value,L))}return v.filter(R=>!_.has(R))}function fr(C){let v=C;for(;v._sourceSegment;)v=v._sourceSegment;return v}function Dr(C){let v=C,_=v._segmentIndexShift?v._segmentIndexShift:0;for(;v._sourceSegment;)v=v._sourceSegment,_+=v._segmentIndexShift?v._segmentIndexShift:0;return _-1}function di(C){return C.data||{}}function Si(C){return C.resolve||{}}function to(C){return(0,Wn.w)(v=>{const _=C(v);return _?(0,qe.D)(_).pipe((0,Mn.U)(()=>v)):(0,re.of)(v)})}class Qr extends class{shouldDetach(v){return!1}store(v,_){}shouldAttach(v){return!1}retrieve(v){return null}shouldReuseRoute(v,_){return v.routeConfig===_.routeConfig}}{}const Eo=new O.OlP("ROUTES");class Zo{constructor(v,_,R,L){this.loader=v,this.compiler=_,this.onLoadStartListener=R,this.onLoadEndListener=L}load(v,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const L=this.loadModuleFactory(_.loadChildren).pipe((0,Mn.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(_);const ie=q.create(v);return new ws(an(ie.injector.get(Eo,void 0,O.XFs.Self|O.XFs.Optional)).map($t),ie)}),Ve(q=>{throw _._loader$=void 0,q}));return _._loader$=new vt.c(L,()=>new g.xQ).pipe((0,Nn.x)()),_._loader$}loadModuleFactory(v){return"string"==typeof v?(0,qe.D)(this.loader.load(v)):gr(v()).pipe((0,Te.zg)(_=>_ instanceof O.YKP?(0,re.of)(_):(0,qe.D)(this.compiler.compileModuleAsync(_))))}}class il{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ko,this.attachRef=null}}class Ko{constructor(){this.contexts=new Map}onChildOutletCreated(v,_){const R=this.getOrCreateContext(v);R.outlet=_,this.contexts.set(v,R)}onChildOutletDestroyed(v){const _=this.getContext(v);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let _=this.getContext(v);return _||(_=new il,this.contexts.set(v,_)),_}getContext(v){return this.contexts.get(v)||null}}class ru{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,_){return v}}function oa(C){throw C}function Oo(C,v,_){return v.parse("/")}function Ca(C,v){return(0,re.of)(null)}const Po={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ko={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Yi=(()=>{class C{constructor(_,R,L,q,ie,Ce,at,ht){this.rootComponentType=_,this.urlSerializer=R,this.rootContexts=L,this.location=q,this.config=ht,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new g.xQ,this.errorHandler=oa,this.malformedUriErrorHandler=Oo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ca,afterPreactivation:Ca},this.urlHandlingStrategy=new ru,this.routeReuseStrategy=new Qr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ie.get(O.h0i),this.console=ie.get(O.c2e);const Ln=ie.get(O.R0b);this.isNgZoneEnabled=Ln instanceof O.R0b&&O.R0b.isInAngularZone(),this.resetConfig(ht),this.currentUrlTree=new $r(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Zo(Ce,at,xt=>this.triggerEvent(new Ft(xt)),xt=>this.triggerEvent(new kt(xt))),this.routerState=pn(this.currentUrlTree,this.rootComponentType),this.transitions=new be({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const R=this.events;return _.pipe((0,Ge.h)(L=>0!==L.id),(0,Mn.U)(L=>Object.assign(Object.assign({},L),{extractedUrl:this.urlHandlingStrategy.extract(L.rawUrl)})),(0,Wn.w)(L=>{let q=!1,ie=!1;return(0,re.of)(L).pipe((0,mn.b)(Ce=>{this.currentNavigation={id:Ce.id,initialUrl:Ce.currentRawUrl,extractedUrl:Ce.extractedUrl,trigger:Ce.source,extras:Ce.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Wn.w)(Ce=>{const at=this.browserUrlTree.toString(),ht=!this.navigated||Ce.extractedUrl.toString()!==at||at!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ht)&&this.urlHandlingStrategy.shouldProcessUrl(Ce.rawUrl))return Lo(Ce.source)&&(this.browserUrlTree=Ce.extractedUrl),(0,re.of)(Ce).pipe((0,Wn.w)(fn=>{const Ln=this.transitions.getValue();return R.next(new vn(fn.id,this.serializeUrl(fn.extractedUrl),fn.source,fn.restoredState)),Ln!==this.transitions.getValue()?$e.E:Promise.resolve(fn)}),function(C,v,_,R){return(0,Wn.w)(L=>function(C,v,_,R,L){return new j(C,v,_,R,L).apply()}(C,v,_,L.extractedUrl,R).pipe((0,Mn.U)(q=>Object.assign(Object.assign({},L),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mn.b)(fn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:fn.urlAfterRedirects})}),function(C,v,_,R,L){return(0,Te.zg)(q=>function(C,v,_,R,L="emptyOnly",q="legacy"){try{const ie=new A(C,v,_,R,L,q).recognize();return null===ie?eo(new Ui):(0,re.of)(ie)}catch(ie){return eo(ie)}}(C,v,q.urlAfterRedirects,_(q.urlAfterRedirects),R,L).pipe((0,Mn.U)(ie=>Object.assign(Object.assign({},q),{targetSnapshot:ie}))))}(this.rootComponentType,this.config,fn=>this.serializeUrl(fn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mn.b)(fn=>{"eager"===this.urlUpdateStrategy&&(fn.extras.skipLocationChange||this.setBrowserUrl(fn.urlAfterRedirects,fn),this.browserUrlTree=fn.urlAfterRedirects);const Ln=new lt(fn.id,this.serializeUrl(fn.extractedUrl),this.serializeUrl(fn.urlAfterRedirects),fn.targetSnapshot);R.next(Ln)}));if(ht&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ln,extractedUrl:xt,source:ps,restoredState:ji,extras:Ps}=Ce,bo=new vn(Ln,this.serializeUrl(xt),ps,ji);R.next(bo);const qn=pn(xt,this.rootComponentType).snapshot;return(0,re.of)(Object.assign(Object.assign({},Ce),{targetSnapshot:qn,urlAfterRedirects:xt,extras:Object.assign(Object.assign({},Ps),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ce.rawUrl,this.browserUrlTree=Ce.urlAfterRedirects,Ce.resolve(null),$e.E}),to(Ce=>{const{targetSnapshot:at,id:ht,extractedUrl:Kn,rawUrl:fn,extras:{skipLocationChange:Ln,replaceUrl:xt}}=Ce;return this.hooks.beforePreactivation(at,{navigationId:ht,appliedUrlTree:Kn,rawUrlTree:fn,skipLocationChange:!!Ln,replaceUrl:!!xt})}),(0,mn.b)(Ce=>{const at=new Vn(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot);this.triggerEvent(at)}),(0,Mn.U)(Ce=>Object.assign(Object.assign({},Ce),{guards:Je(Ce.targetSnapshot,Ce.currentSnapshot,this.rootContexts)})),function(C,v){return(0,Te.zg)(_=>{const{targetSnapshot:R,currentSnapshot:L,guards:{canActivateChecks:q,canDeactivateChecks:ie}}=_;return 0===ie.length&&0===q.length?(0,re.of)(Object.assign(Object.assign({},_),{guardsResult:!0})):function(C,v,_,R){return(0,qe.D)(C).pipe((0,Te.zg)(L=>function(C,v,_,R,L){const q=v&&v.routeConfig?v.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,re.of)(!0);const ie=q.map(Ce=>{const at=gt(Ce,v,L);let ht;if(function(C){return C&&ai(C.canDeactivate)}(at))ht=gr(at.canDeactivate(C,v,_,R));else{if(!ai(at))throw new Error("Invalid CanDeactivate guard");ht=gr(at(C,v,_,R))}return ht.pipe((0,hn.P)())});return(0,re.of)(ie).pipe(N())}(L.component,L.route,_,v,R)),(0,hn.P)(L=>!0!==L,!0))}(ie,R,L,C).pipe((0,Te.zg)(Ce=>Ce&&function(C){return"boolean"==typeof C}(Ce)?function(C,v,_,R){return(0,qe.D)(v).pipe(Be(L=>(0,Gt.z)(function(C,v){return null!==C&&v&&v(new lr(C)),(0,re.of)(!0)}(L.route.parent,R),function(C,v){return null!==C&&v&&v(new yi(C)),(0,re.of)(!0)}(L.route,R),function(C,v,_){const R=v[v.length-1],q=v.slice(0,v.length-1).reverse().map(ie=>function(C){const v=C.routeConfig?C.routeConfig.canActivateChild:null;return v&&0!==v.length?{node:C,guards:v}:null}(ie)).filter(ie=>null!==ie).map(ie=>Qe(()=>{const Ce=ie.guards.map(at=>{const ht=gt(at,ie.node,_);let Kn;if(function(C){return C&&ai(C.canActivateChild)}(ht))Kn=gr(ht.canActivateChild(R,C));else{if(!ai(ht))throw new Error("Invalid CanActivateChild guard");Kn=gr(ht(R,C))}return Kn.pipe((0,hn.P)())});return(0,re.of)(Ce).pipe(N())}));return(0,re.of)(q).pipe(N())}(C,L.path,_),function(C,v,_){const R=v.routeConfig?v.routeConfig.canActivate:null;if(!R||0===R.length)return(0,re.of)(!0);const L=R.map(q=>Qe(()=>{const ie=gt(q,v,_);let Ce;if(function(C){return C&&ai(C.canActivate)}(ie))Ce=gr(ie.canActivate(v,C));else{if(!ai(ie))throw new Error("Invalid CanActivate guard");Ce=gr(ie(v,C))}return Ce.pipe((0,hn.P)())}));return(0,re.of)(L).pipe(N())}(C,L.route,_))),(0,hn.P)(L=>!0!==L,!0))}(R,q,C,v):(0,re.of)(Ce)),(0,Mn.U)(Ce=>Object.assign(Object.assign({},_),{guardsResult:Ce})))})}(this.ngModule.injector,Ce=>this.triggerEvent(Ce)),(0,mn.b)(Ce=>{if(Ti(Ce.guardsResult)){const ht=ot(`Redirecting to "${this.serializeUrl(Ce.guardsResult)}"`);throw ht.url=Ce.guardsResult,ht}const at=new zn(Ce.id,this.serializeUrl(Ce.extractedUrl),this.serializeUrl(Ce.urlAfterRedirects),Ce.targetSnapshot,!!Ce.guardsResult);this.triggerEvent(at)}),(0,Ge.h)(Ce=>!!Ce.guardsResult||(this.restoreHistory(Ce),this.cancelNavigationTransition(Ce,""),!1)),to(Ce=>{if(Ce.guards.canActivateChecks.length)return(0,re.of)(Ce).pipe((0,mn.b)(at=>{const ht=new er(at.id,this.serializeUrl(at.extractedUrl),this.serializeUrl(at.urlAfterRedirects),at.targetSnapshot);this.triggerEvent(ht)}),(0,Wn.w)(at=>{let ht=!1;return(0,re.of)(at).pipe(function(C,v){return(0,Te.zg)(_=>{const{targetSnapshot:R,guards:{canActivateChecks:L}}=_;if(!L.length)return(0,re.of)(_);let q=0;return(0,qe.D)(L).pipe(Be(ie=>function(C,v,_,R){return function(C,v,_,R){const L=Object.keys(C);if(0===L.length)return(0,re.of)({});const q={};return(0,qe.D)(L).pipe((0,Te.zg)(ie=>function(C,v,_,R){const L=gt(C,v,R);return gr(L.resolve?L.resolve(v,_):L(v,_))}(C[ie],v,_,R).pipe((0,mn.b)(Ce=>{q[ie]=Ce}))),Xt(1),(0,Te.zg)(()=>Object.keys(q).length===L.length?(0,re.of)(q):$e.E))}(C._resolve,C,v,R).pipe((0,Mn.U)(q=>(C._resolvedData=q,C.data=Object.assign(Object.assign({},C.data),_r(C,_).resolve),null)))}(ie.route,R,C,v)),(0,mn.b)(()=>q++),Xt(1),(0,Te.zg)(ie=>q===L.length?(0,re.of)(_):$e.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mn.b)({next:()=>ht=!0,complete:()=>{ht||(this.restoreHistory(at),this.cancelNavigationTransition(at,"At least one route resolver didn't emit any value."))}}))}),(0,mn.b)(at=>{const ht=new En(at.id,this.serializeUrl(at.extractedUrl),this.serializeUrl(at.urlAfterRedirects),at.targetSnapshot);this.triggerEvent(ht)}))}),to(Ce=>{const{targetSnapshot:at,id:ht,extractedUrl:Kn,rawUrl:fn,extras:{skipLocationChange:Ln,replaceUrl:xt}}=Ce;return this.hooks.afterPreactivation(at,{navigationId:ht,appliedUrlTree:Kn,rawUrlTree:fn,skipLocationChange:!!Ln,replaceUrl:!!xt})}),(0,Mn.U)(Ce=>{const at=function(C,v,_){const R=hr(C,v._root,_?_._root:void 0);return new Gn(R,v)}(this.routeReuseStrategy,Ce.targetSnapshot,Ce.currentRouterState);return Object.assign(Object.assign({},Ce),{targetRouterState:at})}),(0,mn.b)(Ce=>{this.currentUrlTree=Ce.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ce.urlAfterRedirects,Ce.rawUrl),this.routerState=Ce.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ce.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ce),this.browserUrlTree=Ce.urlAfterRedirects)}),((C,v,_)=>(0,Mn.U)(R=>(new Rs(v,R.targetRouterState,R.currentRouterState,_).activate(C),R)))(this.rootContexts,this.routeReuseStrategy,Ce=>this.triggerEvent(Ce)),(0,mn.b)({next(){q=!0},complete(){q=!0}}),function(C){return v=>v.lift(new Lt(C))}(()=>{if(!q&&!ie){const Ce=`Navigation ID ${L.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(L),this.cancelNavigationTransition(L,Ce)):this.cancelNavigationTransition(L,Ce)}this.currentNavigation=null}),Ve(Ce=>{if(ie=!0,function(C){return C&&C[pe]}(Ce)){const at=Ti(Ce.url);at||(this.navigated=!0,this.restoreHistory(L,!0));const ht=new Oi(L.id,this.serializeUrl(L.extractedUrl),Ce.message);R.next(ht),at?setTimeout(()=>{const Kn=this.urlHandlingStrategy.merge(Ce.url,this.rawUrlTree),fn={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Lo(L.source)};this.scheduleNavigation(Kn,"imperative",null,fn,{resolve:L.resolve,reject:L.reject,promise:L.promise})},0):L.resolve(!1)}else{this.restoreHistory(L,!0);const at=new qt(L.id,this.serializeUrl(L.extractedUrl),Ce);R.next(at);try{L.resolve(this.errorHandler(Ce))}catch(ht){L.reject(ht)}}return $e.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}getTransition(){const _=this.transitions.value;return _.urlAfterRedirects=this.browserUrlTree,_}setTransition(_){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const R=this.extractLocationChangeInfoFromEvent(_);this.shouldScheduleNavigation(this.lastLocationChangeInfo,R)&&setTimeout(()=>{const{source:L,state:q,urlTree:ie}=R,Ce={replaceUrl:!0};if(q){const at=Object.assign({},q);delete at.navigationId,delete at.\u0275routerPageId,0!==Object.keys(at).length&&(Ce.state=at)}this.scheduleNavigation(ie,L,q,Ce)},0),this.lastLocationChangeInfo=R}))}extractLocationChangeInfoFromEvent(_){var R;return{source:"popstate"===_.type?"popstate":"hashchange",urlTree:this.parseUrl(_.url),state:(null===(R=_.state)||void 0===R?void 0:R.navigationId)?_.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(_,R){if(!_)return!0;const L=R.urlTree.toString()===_.urlTree.toString();return R.transitionId!==_.transitionId||!L||!("hashchange"===R.source&&"popstate"===_.source||"popstate"===R.source&&"hashchange"===_.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){ye(_),this.config=_.map($t),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,R={}){const{relativeTo:L,queryParams:q,fragment:ie,queryParamsHandling:Ce,preserveFragment:at}=R,ht=L||this.routerState.root,Kn=at?this.currentUrlTree.fragment:ie;let fn=null;switch(Ce){case"merge":fn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":fn=this.currentUrlTree.queryParams;break;default:fn=q||null}return null!==fn&&(fn=this.removeEmptyProps(fn)),function(C,v,_,R,L){if(0===_.length)return Gs(v.root,v.root,v,R,L);const q=function(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new yo(!0,0,C);let v=0,_=!1;const R=C.reduce((L,q,ie)=>{if("object"==typeof q&&null!=q){if(q.outlets){const Ce={};return rn(q.outlets,(at,ht)=>{Ce[ht]="string"==typeof at?at.split("/"):at}),[...L,{outlets:Ce}]}if(q.segmentPath)return[...L,q.segmentPath]}return"string"!=typeof q?[...L,q]:0===ie?(q.split("/").forEach((Ce,at)=>{0==at&&"."===Ce||(0==at&&""===Ce?_=!0:".."===Ce?v++:""!=Ce&&L.push(Ce))}),L):[...L,q]},[]);return new yo(_,v,R)}(_);if(q.toRoot())return Gs(v.root,new Kt([],{}),v,R,L);const ie=function(C,v,_){if(C.isAbsolute)return new zi(v.root,!0,0);if(-1===_.snapshot._lastPathIndex){const q=_.snapshot._urlSegment;return new zi(q,q===v.root,0)}const R=Wi(C.commands[0])?0:1;return function(C,v,_){let R=C,L=v,q=_;for(;q>L;){if(q-=L,R=R.parent,!R)throw new Error("Invalid number of '../'");L=R.segments.length}return new zi(R,!1,L-q)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+R,C.numberOfDoubleDots)}(q,v,C),Ce=ie.processChildren?hs(ie.segmentGroup,ie.index,q.commands):ds(ie.segmentGroup,ie.index,q.commands);return Gs(ie.segmentGroup,Ce,v,R,L)}(ht,this.currentUrlTree,_,fn,null!=Kn?Kn:null)}navigateByUrl(_,R={skipLocationChange:!1}){const L=Ti(_)?_:this.parseUrl(_),q=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,R)}navigate(_,R={skipLocationChange:!1}){return function(C){for(let v=0;v<C.length;v++){const _=C[v];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${v}`)}}(_),this.navigateByUrl(this.createUrlTree(_,R),R)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let R;try{R=this.urlSerializer.parse(_)}catch(L){R=this.malformedUriErrorHandler(L,this.urlSerializer,_)}return R}isActive(_,R){let L;if(L=!0===R?Object.assign({},Po):!1===R?Object.assign({},ko):R,Ti(_))return Pi(this.currentUrlTree,_,L);const q=this.parseUrl(_);return Pi(this.currentUrlTree,q,L)}removeEmptyProps(_){return Object.keys(_).reduce((R,L)=>{const q=_[L];return null!=q&&(R[L]=q),R},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new Mr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,R,L,q,ie){var Ce,at;if(this.disposed)return Promise.resolve(!1);const ht=this.getTransition(),Kn=Lo(R)&&ht&&!Lo(ht.source),xt=(this.lastSuccessfulId===ht.id||this.currentNavigation?ht.rawUrl:ht.urlAfterRedirects).toString()===_.toString();if(Kn&&xt)return Promise.resolve(!0);let ps,ji,Ps;ie?(ps=ie.resolve,ji=ie.reject,Ps=ie.promise):Ps=new Promise((Qo,$i)=>{ps=Qo,ji=$i});const bo=++this.navigationId;let qn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(L=this.location.getState()),qn=L&&L.\u0275routerPageId?L.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(Ce=this.browserPageId)&&void 0!==Ce?Ce:0:(null!==(at=this.browserPageId)&&void 0!==at?at:0)+1):qn=0,this.setTransition({id:bo,targetPageId:qn,source:R,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:q,resolve:ps,reject:ji,promise:Ps,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ps.catch(Qo=>Promise.reject(Qo))}setBrowserUrl(_,R){const L=this.urlSerializer.serialize(_),q=Object.assign(Object.assign({},R.extras.state),this.generateNgRouterState(R.id,R.targetPageId));this.location.isCurrentPathEqualTo(L)||R.extras.replaceUrl?this.location.replaceState(L,"",q):this.location.go(L,"",q)}restoreHistory(_,R=!1){var L,q;if("computed"===this.canceledNavigationResolution){const ie=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(L=this.currentNavigation)||void 0===L?void 0:L.finalUrl)||0===ie?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===ie&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ie)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,R){const L=new Oi(_.id,this.serializeUrl(_.extractedUrl),R);this.triggerEvent(L),_.resolve(!1)}generateNgRouterState(_,R){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:R}:{navigationId:_}}}return C.\u0275fac=function(_){return new(_||C)(O.LFG(O.DyG),O.LFG(On),O.LFG(Ko),O.LFG(D.Ye),O.LFG(O.zs3),O.LFG(O.v3s),O.LFG(O.Sil),O.LFG(void 0))},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac}),C})();function Lo(C){return"imperative"!==C}let Yo=(()=>{class C{constructor(_,R,L,q,ie){this.parentContexts=_,this.location=R,this.resolver=L,this.changeDetector=ie,this.activated=null,this._activatedRoute=null,this.activateEvents=new O.vpe,this.deactivateEvents=new O.vpe,this.name=q||en,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,_}attach(_,R){this.activated=_,this._activatedRoute=R,this.location.insert(_.hostView)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,R){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const ie=(R=R||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),Ce=this.parentContexts.getOrCreateContext(this.name).children,at=new Ba(_,Ce,this.location.injector);this.activated=this.location.createComponent(ie,this.location.length,at),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(_){return new(_||C)(O.Y36(Ko),O.Y36(O.s_b),O.Y36(O._Vd),O.$8M("name"),O.Y36(O.sBO))},C.\u0275dir=O.lG2({type:C,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),C})();class Ba{constructor(v,_,R){this.route=v,this.childContexts=_,this.parent=R}get(v,_){return v===kr?this.route:v===Ko?this.childContexts:this.parent.get(v,_)}}class Ml{}class ja{preload(v,_){return(0,re.of)(null)}}let Da=(()=>{class C{constructor(_,R,L,q,ie){this.router=_,this.injector=q,this.preloadingStrategy=ie,this.loader=new Zo(R,L,ht=>_.triggerEvent(new Ft(ht)),ht=>_.triggerEvent(new kt(ht)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ge.h)(_=>_ instanceof Mr),Be(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(O.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,R){const L=[];for(const q of R)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const ie=q._loadedConfig;L.push(this.processRoutes(ie.module,ie.routes))}else q.loadChildren&&!q.canLoad?L.push(this.preloadConfig(_,q)):q.children&&L.push(this.processRoutes(_,q.children));return(0,qe.D)(L).pipe((0,Cn.J)(),(0,Mn.U)(q=>{}))}preloadConfig(_,R){return this.preloadingStrategy.preload(R,()=>(R._loadedConfig?(0,re.of)(R._loadedConfig):this.loader.load(_.injector,R)).pipe((0,Te.zg)(q=>(R._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return C.\u0275fac=function(_){return new(_||C)(O.LFG(Yi),O.LFG(O.v3s),O.LFG(O.Sil),O.LFG(O.zs3),O.LFG(Ml))},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac}),C})(),Uo=(()=>{class C{constructor(_,R,L={}){this.router=_,this.viewportScroller=R,this.options=L,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},L.scrollPositionRestoration=L.scrollPositionRestoration||"disabled",L.anchorScrolling=L.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof vn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof Mr&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Hr&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,R){this.router.triggerEvent(new Hr(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return C.\u0275fac=function(_){return new(_||C)(O.LFG(Yi),O.LFG(D.EM),O.LFG(void 0))},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac}),C})();const Zs=new O.OlP("ROUTER_CONFIGURATION"),aa=new O.OlP("ROUTER_FORROOT_GUARD"),hi=[D.Ye,{provide:On,useClass:bt},{provide:Yi,useFactory:function(C,v,_,R,L,q,ie,Ce={},at,ht){const Kn=new Yi(null,C,v,_,R,L,q,an(ie));return at&&(Kn.urlHandlingStrategy=at),ht&&(Kn.routeReuseStrategy=ht),function(C,v){C.errorHandler&&(v.errorHandler=C.errorHandler),C.malformedUriErrorHandler&&(v.malformedUriErrorHandler=C.malformedUriErrorHandler),C.onSameUrlNavigation&&(v.onSameUrlNavigation=C.onSameUrlNavigation),C.paramsInheritanceStrategy&&(v.paramsInheritanceStrategy=C.paramsInheritanceStrategy),C.relativeLinkResolution&&(v.relativeLinkResolution=C.relativeLinkResolution),C.urlUpdateStrategy&&(v.urlUpdateStrategy=C.urlUpdateStrategy)}(Ce,Kn),Ce.enableTracing&&Kn.events.subscribe(fn=>{var Ln,xt;null===(Ln=console.group)||void 0===Ln||Ln.call(console,`Router Event: ${fn.constructor.name}`),console.log(fn.toString()),console.log(fn),null===(xt=console.groupEnd)||void 0===xt||xt.call(console)}),Kn},deps:[On,Ko,D.Ye,O.zs3,O.v3s,O.Sil,Eo,Zs,[class{},new O.FiY],[class{},new O.FiY]]},Ko,{provide:kr,useFactory:function(C){return C.routerState.root},deps:[Yi]},{provide:O.v3s,useClass:O.EAV},Da,ja,class{preload(v,_){return _().pipe(Ve(()=>(0,re.of)(null)))}},{provide:Zs,useValue:{enableTracing:!1}}];function ho(){return new O.PXZ("Router",Yi)}let Os=(()=>{class C{constructor(_,R){}static forRoot(_,R){return{ngModule:C,providers:[hi,Sr(_),{provide:aa,useFactory:Dt,deps:[[Yi,new O.FiY,new O.tp0]]},{provide:Zs,useValue:R||{}},{provide:D.S$,useFactory:ua,deps:[D.lw,[new O.tBr(D.mr),new O.FiY],Zs]},{provide:Uo,useFactory:Ta,deps:[Yi,D.EM,Zs]},{provide:Ml,useExisting:R&&R.preloadingStrategy?R.preloadingStrategy:ja},{provide:O.PXZ,multi:!0,useFactory:ho},[on,{provide:O.ip1,multi:!0,useFactory:Aa,deps:[on]},{provide:et,useFactory:At,deps:[on]},{provide:O.tb,multi:!0,useExisting:et}]]}}static forChild(_){return{ngModule:C,providers:[Sr(_)]}}}return C.\u0275fac=function(_){return new(_||C)(O.LFG(aa,8),O.LFG(Yi,8))},C.\u0275mod=O.oAB({type:C}),C.\u0275inj=O.cJS({}),C})();function Ta(C,v,_){return _.scrollOffset&&v.setOffset(_.scrollOffset),new Uo(C,v,_)}function ua(C,v,_={}){return _.useHash?new D.Do(C,v):new D.b0(C,v)}function Dt(C){return"guarded"}function Sr(C){return[{provide:O.deG,multi:!0,useValue:C},{provide:Eo,multi:!0,useValue:C}]}let on=(()=>{class C{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new g.xQ}appInitializer(){return this.injector.get(D.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let R=null;const L=new Promise(Ce=>R=Ce),q=this.injector.get(Yi),ie=this.injector.get(Zs);return"disabled"===ie.initialNavigation?(q.setUpLocationChangeListener(),R(!0)):"enabled"===ie.initialNavigation||"enabledBlocking"===ie.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,re.of)(null):(this.initNavigation=!0,R(!0),this.resultOfPreactivationDone),q.initialNavigation()):R(!0),L})}bootstrapListener(_){const R=this.injector.get(Zs),L=this.injector.get(Da),q=this.injector.get(Uo),ie=this.injector.get(Yi),Ce=this.injector.get(O.z2F);_===Ce.components[0]&&(("enabledNonBlocking"===R.initialNavigation||void 0===R.initialNavigation)&&ie.initialNavigation(),L.setUpPreloading(),q.init(),ie.resetRootComponentType(Ce.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return C.\u0275fac=function(_){return new(_||C)(O.LFG(O.zs3))},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac}),C})();function Aa(C){return C.appInitializer.bind(C)}function At(C){return C.bootstrapListener.bind(C)}const et=new O.OlP("Router Initializer")},4486:(Pt,Ye,B)=>{"use strict";B.d(Ye,{Z:()=>He});var D=B(3854),O=B(6034),g=B(5452),Se=B(5601);class be{constructor(me,Le){this._delegate=me,this.firebase=Le,(0,g._addComponent)(me,new O.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,g.deleteApp)(this._delegate)))}_getService(me,Le=g._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(me);return!$e.isInitialized()&&"EXPLICIT"===(null===(qe=$e.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Le})}_removeServiceInstance(me,Le=g._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Le)}_addComponent(me){(0,g._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,g._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fe=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function ae(){const je=function(je){const me={},Le={__esModule:!0,initializeApp:function(vt,Ze={}){const Ve=g.initializeApp(vt,Ze);if((0,D.r3)(me,Ve.name))return me[Ve.name];const Re=new je(Ve,Le);return me[Ve.name]=Re,Re},app:$e,registerVersion:g.registerVersion,setLogLevel:g.setLogLevel,onLog:g.onLog,apps:null,SDK_VERSION:g.SDK_VERSION,INTERNAL:{registerComponent:function(vt){const Ze=vt.name,Ve=Ze.replace("-compat","");if(g._registerComponent(vt)&&"PUBLIC"===vt.type){const Re=(fe=$e())=>{if("function"!=typeof fe[Ve])throw Fe.create("invalid-app-argument",{appName:Ze});return fe[Ve]()};void 0!==vt.serviceProps&&(0,D.ZB)(Re,vt.serviceProps),Le[Ve]=Re,je.prototype[Ve]=function(...fe){return this._getService.bind(this,Ze).apply(this,vt.multipleInstances?fe:[])}}return"PUBLIC"===vt.type?Le[Ve]:null},removeApp:function(vt){delete me[vt]},useAsService:function(vt,Ze){return"serverAuth"===Ze?null:Ze},modularAPIs:g}};function $e(vt){if(!(0,D.r3)(me,vt=vt||g._DEFAULT_ENTRY_NAME))throw Fe.create("no-app",{appName:vt});return me[vt]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function(){return Object.keys(me).map(vt=>me[vt])}}),$e.App=je,Le}(be);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function(Le){(0,D.ZB)(je,Le)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),je}(),X=new Se.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){X.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&X.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=J;(0,g.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(Pt,Ye,B)=>{"use strict";B.r(Ye),B.d(Ye,{FirebaseError:()=>Se.ZR,SDK_VERSION:()=>Rr,_DEFAULT_ENTRY_NAME:()=>$n,_addComponent:()=>cn,_addOrOverwriteComponent:()=>In,_apps:()=>xn,_clearComponents:()=>tn,_components:()=>Zn,_getProvider:()=>dn,_registerComponent:()=>Tr,_removeServiceInstance:()=>Lt,deleteApp:()=>Nn,getApp:()=>hn,getApps:()=>mn,initializeApp:()=>pr,onLog:()=>vn,registerVersion:()=>Xn,setLogLevel:()=>Mr});var D=B(8239),O=B(6034),g=B(5601),Se=B(3854);class be{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(Vn=>{if(function(qt){const lt=qt.getComponent();return"VERSION"===(null==lt?void 0:lt.type)}(Vn)){const zn=Vn.getImmediate();return`${zn.library}/${zn.version}`}return null}).filter(Vn=>Vn).join(" ")}}const Fe="@firebase/app",ae=new g.Yd("@firebase/app"),$n="[DEFAULT]",jt={[Fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xn=new Map,Zn=new Map;function cn(qt,lt){try{qt.container.addComponent(lt)}catch(Vn){ae.debug(`Component ${lt.name} failed to register with FirebaseApp ${qt.name}`,Vn)}}function In(qt,lt){qt.container.addOrOverwriteComponent(lt)}function Tr(qt){const lt=qt.name;if(Zn.has(lt))return ae.debug(`There were multiple attempts to register component ${lt}.`),!1;Zn.set(lt,qt);for(const Vn of xn.values())cn(Vn,qt);return!0}function dn(qt,lt){return qt.container.getProvider(lt)}function Lt(qt,lt,Vn=$n){dn(qt,lt).clearInstance(Vn)}function tn(){Zn.clear()}const Wn=new Se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Tn{constructor(lt,Vn,zn){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},Vn),this._name=Vn.name,this._automaticDataCollectionEnabled=Vn.automaticDataCollectionEnabled,this._container=zn,this.container.addComponent(new O.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const Rr="9.1.3";function pr(qt,lt={}){"object"!=typeof lt&&(lt={name:lt});const Vn=Object.assign({name:$n,automaticDataCollectionEnabled:!1},lt),zn=Vn.name;if("string"!=typeof zn||!zn)throw Wn.create("bad-app-name",{appName:String(zn)});const er=xn.get(zn);if(er){if((0,Se.vZ)(qt,er.options)&&(0,Se.vZ)(Vn,er.config))return er;throw Wn.create("duplicate-app",{appName:zn})}const En=new O.H0(zn);for(const kt of Zn.values())En.addComponent(kt);const Ft=new Tn(qt,Vn,En);return xn.set(zn,Ft),Ft}function hn(qt=$n){const lt=xn.get(qt);if(!lt)throw Wn.create("no-app",{appName:qt});return lt}function mn(){return Array.from(xn.values())}function Nn(qt){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,D.Z)(function*(qt){const lt=qt.name;xn.has(lt)&&(xn.delete(lt),yield Promise.all(qt.container.getProviders().map(Vn=>Vn.delete())),qt.isDeleted=!0)})).apply(this,arguments)}function Xn(qt,lt,Vn){var zn;let er=null!==(zn=jt[qt])&&void 0!==zn?zn:qt;Vn&&(er+=`-${Vn}`);const En=er.match(/\s|\//),Ft=lt.match(/\s|\//);if(En||Ft){const kt=[`Unable to register library "${er}" with version "${lt}":`];return En&&kt.push(`library name "${er}" contains illegal characters (whitespace or "/")`),En&&Ft&&kt.push("and"),Ft&&kt.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void ae.warn(kt.join(" "))}Tr(new O.wA(`${er}-version`,()=>({library:er,version:lt}),"VERSION"))}function vn(qt,lt){if(null!==qt&&"function"!=typeof qt)throw Wn.create("invalid-log-argument");(0,g.Am)(qt,lt)}function Mr(qt){(0,g.Ub)(qt)}Tr(new O.wA("platform-logger",lt=>new be(lt),"PRIVATE")),Xn(Fe,"0.7.4",""),Xn(Fe,"0.7.4","esm2017"),Xn("fire-js","")},6034:(Pt,Ye,B)=>{"use strict";B.d(Ye,{wA:()=>g,H0:()=>ve});var D=B(4762),O=B(3854),g=function(){function ae(J,X,he){this.name=J,this.instanceFactory=X,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ae.prototype.setInstantiationMode=function(J){return this.instantiationMode=J,this},ae.prototype.setMultipleInstances=function(J){return this.multipleInstances=J,this},ae.prototype.setServiceProps=function(J){return this.serviceProps=J,this},ae.prototype.setInstanceCreatedCallback=function(J){return this.onInstanceCreated=J,this},ae}(),Se="[DEFAULT]",be=function(){function ae(J,X){this.name=J,this.container=X,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ae.prototype.get=function(J){var X=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(X)){var he=new O.BH;if(this.instancesDeferred.set(X,he),this.isInitialized(X)||this.shouldAutoInitialize())try{var ge=this.getOrInitializeService({instanceIdentifier:X});ge&&he.resolve(ge)}catch(ke){}}return this.instancesDeferred.get(X).promise},ae.prototype.getImmediate=function(J){var X,he=this.normalizeInstanceIdentifier(null==J?void 0:J.identifier),ge=null!==(X=null==J?void 0:J.optional)&&void 0!==X&&X;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(ge)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(ke){if(ge)return null;throw ke}},ae.prototype.getComponent=function(){return this.component},ae.prototype.setComponent=function(J){var X,he;if(J.name!==this.name)throw Error("Mismatching Component "+J.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=J,this.shouldAutoInitialize()){if(function(ae){return"EAGER"===ae.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:Se})}catch($e){}try{for(var ge=(0,D.XA)(this.instancesDeferred.entries()),ke=ge.next();!ke.done;ke=ge.next()){var He=(0,D.CR)(ke.value,2),me=He[1],Le=this.normalizeInstanceIdentifier(He[0]);try{var qe=this.getOrInitializeService({instanceIdentifier:Le});me.resolve(qe)}catch($e){}}}catch($e){X={error:$e}}finally{try{ke&&!ke.done&&(he=ge.return)&&he.call(ge)}finally{if(X)throw X.error}}}},ae.prototype.clearInstance=function(J){void 0===J&&(J=Se),this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)},ae.prototype.delete=function(){return(0,D.mG)(this,void 0,void 0,function(){var J;return(0,D.Jh)(this,function(X){switch(X.label){case 0:return J=Array.from(this.instances.values()),[4,Promise.all((0,D.ev)((0,D.ev)([],(0,D.CR)(J.filter(function(he){return"INTERNAL"in he}).map(function(he){return he.INTERNAL.delete()}))),(0,D.CR)(J.filter(function(he){return"_delete"in he}).map(function(he){return he._delete()}))))];case 1:return X.sent(),[2]}})})},ae.prototype.isComponentSet=function(){return null!=this.component},ae.prototype.isInitialized=function(J){return void 0===J&&(J=Se),this.instances.has(J)},ae.prototype.getOptions=function(J){return void 0===J&&(J=Se),this.instancesOptions.get(J)||{}},ae.prototype.initialize=function(J){var X,he;void 0===J&&(J={});var ge=J.options,ke=void 0===ge?{}:ge,He=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(He))throw Error(this.name+"("+He+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var je=this.getOrInitializeService({instanceIdentifier:He,options:ke});try{for(var me=(0,D.XA)(this.instancesDeferred.entries()),Le=me.next();!Le.done;Le=me.next()){var qe=(0,D.CR)(Le.value,2),Qe=qe[1];He===this.normalizeInstanceIdentifier(qe[0])&&Qe.resolve(je)}}catch(ut){X={error:ut}}finally{try{Le&&!Le.done&&(he=me.return)&&he.call(me)}finally{if(X)throw X.error}}return je},ae.prototype.onInit=function(J,X){var he,ge=this.normalizeInstanceIdentifier(X),ke=null!==(he=this.onInitCallbacks.get(ge))&&void 0!==he?he:new Set;ke.add(J),this.onInitCallbacks.set(ge,ke);var He=this.instances.get(ge);return He&&J(He,ge),function(){ke.delete(J)}},ae.prototype.invokeOnInitCallbacks=function(J,X){var he,ge,ke=this.onInitCallbacks.get(X);if(ke)try{for(var He=(0,D.XA)(ke),je=He.next();!je.done;je=He.next()){var me=je.value;try{me(J,X)}catch(Le){}}}catch(Le){he={error:Le}}finally{try{je&&!je.done&&(ge=He.return)&&ge.call(He)}finally{if(he)throw he.error}}},ae.prototype.getOrInitializeService=function(J){var X=J.instanceIdentifier,he=J.options,ge=void 0===he?{}:he,ke=this.instances.get(X);if(!ke&&this.component&&(ke=this.component.instanceFactory(this.container,{instanceIdentifier:de(X),options:ge}),this.instances.set(X,ke),this.instancesOptions.set(X,ge),this.invokeOnInitCallbacks(ke,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,ke)}catch(He){}return ke||null},ae.prototype.normalizeInstanceIdentifier=function(J){return void 0===J&&(J=Se),this.component?this.component.multipleInstances?J:Se:J},ae.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ae}();function de(ae){return ae===Se?void 0:ae}var ve=function(){function ae(J){this.name=J,this.providers=new Map}return ae.prototype.addComponent=function(J){var X=this.getProvider(J.name);if(X.isComponentSet())throw new Error("Component "+J.name+" has already been registered with "+this.name);X.setComponent(J)},ae.prototype.addOrOverwriteComponent=function(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)},ae.prototype.getProvider=function(J){if(this.providers.has(J))return this.providers.get(J);var X=new be(J,this);return this.providers.set(J,X),X},ae.prototype.getProviders=function(){return Array.from(this.providers.values())},ae}()},5601:(Pt,Ye,B)=>{"use strict";B.d(Ye,{in:()=>O,Yd:()=>Fe,Ub:()=>ve,Am:()=>ae});const D=[];var O=(()=>{return(J=O||(O={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",O;var J})();const g={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},Se=O.INFO,be={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},de=(J,X,...he)=>{if(X<J.logLevel)return;const ge=(new Date).toISOString(),ke=be[X];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${X})`);console[ke](`[${ge}]  ${J.name}:`,...he)};class Fe{constructor(X){this.name=X,this._logLevel=Se,this._logHandler=de,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(X){if(!(X in O))throw new TypeError(`Invalid value "${X}" assigned to \`logLevel\``);this._logLevel=X}setLogLevel(X){this._logLevel="string"==typeof X?g[X]:X}get logHandler(){return this._logHandler}set logHandler(X){if("function"!=typeof X)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=X}get userLogHandler(){return this._userLogHandler}set userLogHandler(X){this._userLogHandler=X}debug(...X){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...X),this._logHandler(this,O.DEBUG,...X)}log(...X){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...X),this._logHandler(this,O.VERBOSE,...X)}info(...X){this._userLogHandler&&this._userLogHandler(this,O.INFO,...X),this._logHandler(this,O.INFO,...X)}warn(...X){this._userLogHandler&&this._userLogHandler(this,O.WARN,...X),this._logHandler(this,O.WARN,...X)}error(...X){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...X),this._logHandler(this,O.ERROR,...X)}}function ve(J){D.forEach(X=>{X.setLogLevel(J)})}function ae(J,X){for(const he of D){let ge=null;X&&X.level&&(ge=g[X.level]),he.userLogHandler=null===J?null:(ke,He,...je)=>{const me=je.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch(qe){return null}}).filter(Le=>Le).join(" ");He>=(null!=ge?ge:ke.logLevel)&&J({level:O[He].toLowerCase(),message:me,args:je,type:ke.name})}}}},3854:(Pt,Ye,B)=>{"use strict";B.d(Ye,{BH:()=>ge,LL:()=>Ge,ZR:()=>Be,zI:()=>Re,US:()=>de,tV:()=>ae,$s:()=>yi,r3:()=>dn,Sg:()=>ke,ne:()=>Nn,vZ:()=>Wn,ZB:()=>X,pd:()=>hn,m9:()=>en,z$:()=>He,jU:()=>Le,ru:()=>qe,d:()=>Qe,xb:()=>tn,w1:()=>re,hl:()=>Ze,uI:()=>je,UG:()=>me,b$:()=>$e,G6:()=>vt,Mn:()=>ut,xO:()=>Rr,zd:()=>pr,eu:()=>Ve});const Se=function(we){const Ee=[];let pe=0;for(let ot=0;ot<we.length;ot++){let Ue=we.charCodeAt(ot);Ue<128?Ee[pe++]=Ue:Ue<2048?(Ee[pe++]=Ue>>6|192,Ee[pe++]=63&Ue|128):55296==(64512&Ue)&&ot+1<we.length&&56320==(64512&we.charCodeAt(ot+1))?(Ue=65536+((1023&Ue)<<10)+(1023&we.charCodeAt(++ot)),Ee[pe++]=Ue>>18|240,Ee[pe++]=Ue>>12&63|128,Ee[pe++]=Ue>>6&63|128,Ee[pe++]=63&Ue|128):(Ee[pe++]=Ue>>12|224,Ee[pe++]=Ue>>6&63|128,Ee[pe++]=63&Ue|128)}return Ee},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(we,Ee){if(!Array.isArray(we))throw Error("encodeByteArray takes an array as a parameter");this.init_();const pe=Ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,ot=[];for(let Ue=0;Ue<we.length;Ue+=3){const Tt=we[Ue],wt=Ue+1<we.length,yn=wt?we[Ue+1]:0,Jn=Ue+2<we.length,an=Jn?we[Ue+2]:0;let rn=(15&yn)<<2|an>>6,gr=63&an;Jn||(gr=64,wt||(rn=64)),ot.push(pe[Tt>>2],pe[(3&Tt)<<4|yn>>4],pe[rn],pe[gr])}return ot.join("")},encodeString(we,Ee){return this.HAS_NATIVE_SUPPORT&&!Ee?btoa(we):this.encodeByteArray(Se(we),Ee)},decodeString(we,Ee){return this.HAS_NATIVE_SUPPORT&&!Ee?atob(we):function(we){const Ee=[];let pe=0,ot=0;for(;pe<we.length;){const Ue=we[pe++];if(Ue<128)Ee[ot++]=String.fromCharCode(Ue);else if(Ue>191&&Ue<224){const Tt=we[pe++];Ee[ot++]=String.fromCharCode((31&Ue)<<6|63&Tt)}else if(Ue>239&&Ue<365){const Jn=((7&Ue)<<18|(63&we[pe++])<<12|(63&we[pe++])<<6|63&we[pe++])-65536;Ee[ot++]=String.fromCharCode(55296+(Jn>>10)),Ee[ot++]=String.fromCharCode(56320+(1023&Jn))}else{const Tt=we[pe++],wt=we[pe++];Ee[ot++]=String.fromCharCode((15&Ue)<<12|(63&Tt)<<6|63&wt)}}return Ee.join("")}(this.decodeStringToByteArray(we,Ee))},decodeStringToByteArray(we,Ee){this.init_();const pe=Ee?this.charToByteMapWebSafe_:this.charToByteMap_,ot=[];for(let Ue=0;Ue<we.length;){const Tt=pe[we.charAt(Ue++)],yn=Ue<we.length?pe[we.charAt(Ue)]:0;++Ue;const an=Ue<we.length?pe[we.charAt(Ue)]:64;++Ue;const Pn=Ue<we.length?pe[we.charAt(Ue)]:64;if(++Ue,null==Tt||null==yn||null==an||null==Pn)throw Error();ot.push(Tt<<2|yn>>4),64!==an&&(ot.push(yn<<4&240|an>>2),64!==Pn&&ot.push(an<<6&192|Pn))}return ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let we=0;we<this.ENCODED_VALS.length;we++)this.byteToCharMap_[we]=this.ENCODED_VALS.charAt(we),this.charToByteMap_[this.byteToCharMap_[we]]=we,this.byteToCharMapWebSafe_[we]=this.ENCODED_VALS_WEBSAFE.charAt(we),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[we]]=we,we>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(we)]=we,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(we)]=we)}}},ve=function(we){return function(we){const Ee=Se(we);return de.encodeByteArray(Ee,!0)}(we).replace(/\./g,"")},ae=function(we){try{return de.decodeString(we,!0)}catch(Ee){console.error("base64Decode failed: ",Ee)}return null};function X(we,Ee){if(!(Ee instanceof Object))return Ee;switch(Ee.constructor){case Date:return new Date(Ee.getTime());case Object:void 0===we&&(we={});break;case Array:we=[];break;default:return Ee}for(const pe in Ee)!Ee.hasOwnProperty(pe)||!he(pe)||(we[pe]=X(we[pe],Ee[pe]));return we}function he(we){return"__proto__"!==we}class ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ee,pe)=>{this.resolve=Ee,this.reject=pe})}wrapCallback(Ee){return(pe,ot)=>{pe?this.reject(pe):this.resolve(ot),"function"==typeof Ee&&(this.promise.catch(()=>{}),1===Ee.length?Ee(pe):Ee(pe,ot))}}}function ke(we,Ee){if(we.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ot=Ee||"demo-project",Ue=we.iat||0,Tt=we.sub||we.user_id;if(!Tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${ot}`,aud:ot,iat:Ue,exp:Ue+3600,auth_time:Ue,sub:Tt,user_id:Tt,firebase:{sign_in_provider:"custom",identities:{}}},we);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(wt)),""].join(".")}function He(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(we){return!1}}function Le(){return"object"==typeof self&&self.self===self}function qe(){const we="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof we&&void 0!==we.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){return He().indexOf("Electron/")>=0}function re(){const we=He();return we.indexOf("MSIE ")>=0||we.indexOf("Trident/")>=0}function ut(){return He().indexOf("MSAppHost/")>=0}function vt(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function Ve(){return new Promise((we,Ee)=>{try{let pe=!0;const ot="validate-browser-context-for-indexeddb-analytics-module",Ue=self.indexedDB.open(ot);Ue.onsuccess=()=>{Ue.result.close(),pe||self.indexedDB.deleteDatabase(ot),we(!0)},Ue.onupgradeneeded=()=>{pe=!1},Ue.onerror=()=>{var Tt;Ee((null===(Tt=Ue.error)||void 0===Tt?void 0:Tt.message)||"")}}catch(pe){Ee(pe)}})}function Re(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Be extends Error{constructor(Ee,pe,ot){super(pe),this.code=Ee,this.customData=ot,this.name="FirebaseError",Object.setPrototypeOf(this,Be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(Ee,pe,ot){this.service=Ee,this.serviceName=pe,this.errors=ot}create(Ee,...pe){const ot=pe[0]||{},Ue=`${this.service}/${Ee}`,Tt=this.errors[Ee],wt=Tt?function(we,Ee){return we.replace(Xt,(pe,ot)=>{const Ue=Ee[ot];return null!=Ue?String(Ue):`<${ot}?>`})}(Tt,ot):"Error";return new Be(Ue,`${this.serviceName}: ${wt} (${Ue}).`,ot)}}const Xt=/\{\$([^}]+)}/g;function dn(we,Ee){return Object.prototype.hasOwnProperty.call(we,Ee)}function tn(we){for(const Ee in we)if(Object.prototype.hasOwnProperty.call(we,Ee))return!1;return!0}function Wn(we,Ee){if(we===Ee)return!0;const pe=Object.keys(we),ot=Object.keys(Ee);for(const Ue of pe){if(!ot.includes(Ue))return!1;const Tt=we[Ue],wt=Ee[Ue];if(Tn(Tt)&&Tn(wt)){if(!Wn(Tt,wt))return!1}else if(Tt!==wt)return!1}for(const Ue of ot)if(!pe.includes(Ue))return!1;return!0}function Tn(we){return null!==we&&"object"==typeof we}function Rr(we){const Ee=[];for(const[pe,ot]of Object.entries(we))Array.isArray(ot)?ot.forEach(Ue=>{Ee.push(encodeURIComponent(pe)+"="+encodeURIComponent(Ue))}):Ee.push(encodeURIComponent(pe)+"="+encodeURIComponent(ot));return Ee.length?"&"+Ee.join("&"):""}function pr(we){const Ee={};return we.replace(/^\?/,"").split("&").forEach(ot=>{if(ot){const[Ue,Tt]=ot.split("=");Ee[decodeURIComponent(Ue)]=decodeURIComponent(Tt)}}),Ee}function hn(we){const Ee=we.indexOf("?");if(!Ee)return"";const pe=we.indexOf("#",Ee);return we.substring(Ee,pe>0?pe:void 0)}function Nn(we,Ee){const pe=new Cn(we,Ee);return pe.subscribe.bind(pe)}class Cn{constructor(Ee,pe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=pe,this.task.then(()=>{Ee(this)}).catch(ot=>{this.error(ot)})}next(Ee){this.forEachObserver(pe=>{pe.next(Ee)})}error(Ee){this.forEachObserver(pe=>{pe.error(Ee)}),this.close(Ee)}complete(){this.forEachObserver(Ee=>{Ee.complete()}),this.close()}subscribe(Ee,pe,ot){let Ue;if(void 0===Ee&&void 0===pe&&void 0===ot)throw new Error("Missing Observer.");Ue=function(we,Ee){if("object"!=typeof we||null===we)return!1;for(const pe of["next","error","complete"])if(pe in we&&"function"==typeof we[pe])return!0;return!1}(Ee)?Ee:{next:Ee,error:pe,complete:ot},void 0===Ue.next&&(Ue.next=Mr),void 0===Ue.error&&(Ue.error=Mr),void 0===Ue.complete&&(Ue.complete=Mr);const Tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ue.error(this.finalError):Ue.complete()}catch(wt){}}),this.observers.push(Ue),Tt}unsubscribeOne(Ee){void 0===this.observers||void 0===this.observers[Ee]||(delete this.observers[Ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ee){if(!this.finalized)for(let pe=0;pe<this.observers.length;pe++)this.sendOne(pe,Ee)}sendOne(Ee,pe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ee])try{pe(this.observers[Ee])}catch(ot){"undefined"!=typeof console&&console.error&&console.error(ot)}})}close(Ee){this.finalized||(this.finalized=!0,void 0!==Ee&&(this.finalError=Ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mr(){}function yi(we,Ee=1e3,pe=2){const ot=Ee*Math.pow(pe,we),Ue=Math.round(.5*ot*(Math.random()-.5)*2);return Math.min(144e5,ot+Ue)}function en(we){return we&&we._delegate?we._delegate:we}},2329:(Pt,Ye,B)=>{"use strict";B.d(Ye,{Mq:()=>D.getApp,C6:()=>D.getApps});var D=B(5452);(0,D.registerVersion)("firebase","9.1.3","app")},7841:(Pt,Ye,B)=>{"use strict";B.d(Ye,{Z:()=>D.Z});var D=B(4486);D.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(Pt,Ye,B)=>{"use strict";B.r(Ye);var D=B(8239),O=B(4486),g=B(3854),Se=B(5452),be=B(4762),de=B(5601),Fe=B(6034);const He=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new g.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new de.Yd("@firebase/auth");function $e(y,...d){qe.logLevel<=de.in.ERROR&&qe.error(`Auth (${Se.SDK_VERSION}): ${y}`,...d)}function Qe(y,...d){throw vt(y,...d)}function re(y,...d){return vt(y,...d)}function ut(y,d,h){const w=Object.assign(Object.assign({},je()),{[d]:h});return new g.LL("auth","Firebase",w).create(d,{appName:y.name})}function Gt(y,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&Qe(y,"argument-error"),ut(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(y,...d){if("string"!=typeof y){const h=d[0],w=[...d.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(h,...w)}return me.create(y,...d)}function Ze(y,d,...h){if(!y)throw vt(d,...h)}function Ve(y){const d="INTERNAL ASSERTION FAILED: "+y;throw $e(d),new Error(d)}function Re(y,d){y||Ve(d)}const fe=new Map;function Te(y){Re(y instanceof Function,"Expected a class definition");let d=fe.get(y);return d?(Re(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,fe.set(y,d),d)}function Rt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Xt(){return"http:"===$n()||"https:"===$n()}function $n(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Zn{constructor(d,h){this.shortDelay=d,this.longDelay=h,Re(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,g.uI)()||(0,g.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,g.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function cn(y,d){Re(y.emulator,"Emulator should always be set here");const{url:h}=y.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class In{static initialize(d,h,w){this.fetchImpl=d,h&&(this.headersImpl=h),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dn=new Zn(3e4,6e4);function Lt(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function tn(y,d,h,w){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,D.Z)(function*(y,d,h,w,V={}){return Wn(y,V,()=>{let K={},Ae={};w&&("GET"===d?Ae=w:K={body:JSON.stringify(w)});const nt=(0,g.xO)(Object.assign({key:y.config.apiKey},Ae)).slice(1),St=new(In.headers());return St.set("Content-Type","application/json"),St.set("X-Client-Version",y._getSdkClientVersion()),y.languageCode&&St.set("X-Firebase-Locale",y.languageCode),In.fetch()(hn(y,y.config.apiHost,h,nt),Object.assign({method:d,headers:St,referrerPolicy:"no-referrer"},K))})})).apply(this,arguments)}function Wn(y,d,h){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,D.Z)(function*(y,d,h){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Tr),d);try{const V=new mn(y),K=yield Promise.race([h(),V.promise]);V.clearNetworkTimeout();const Ae=yield K.json();if("needConfirmation"in Ae)throw Nn(y,"account-exists-with-different-credential",Ae);if(K.ok&&!("errorMessage"in Ae))return Ae;{const nt=K.ok?Ae.errorMessage:Ae.error.message,[St,Jt]=nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw Nn(y,"credential-already-in-use",Ae);if("EMAIL_EXISTS"===St)throw Nn(y,"email-already-in-use",Ae);const Dn=w[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(Jt)throw ut(y,Dn,Jt);Qe(y,Dn)}}catch(V){if(V instanceof g.ZR)throw V;Qe(y,"network-request-failed")}})).apply(this,arguments)}function Rr(y,d,h,w){return pr.apply(this,arguments)}function pr(){return(pr=(0,D.Z)(function*(y,d,h,w,V={}){const K=yield tn(y,d,h,w,V);return"mfaPendingCredential"in K&&Qe(y,"multi-factor-auth-required",{serverResponse:K}),K})).apply(this,arguments)}function hn(y,d,h,w){const V=`${d}${h}?${w}`;return y.config.emulator?cn(y.config,V):`${y.config.apiScheme}://${V}`}class mn{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,w)=>{this.timer=setTimeout(()=>w(re(this.auth,"timeout")),dn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(y,d,h){const w={appName:y.name};h.email&&(w.email=h.email),h.phoneNumber&&(w.phoneNumber=h.phoneNumber);const V=re(y,d,w);return V.customData._tokenResponse=h,V}function Xn(){return(Xn=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function vn(y,d){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Oi(y,d){return qt.apply(this,arguments)}function qt(){return(qt=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function lt(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function er(){return(er=(0,D.Z)(function*(y,d=!1){const h=(0,g.m9)(y),w=yield h.getIdToken(d),V=Ft(w);Ze(V&&V.exp&&V.auth_time&&V.iat,h.auth,"internal-error");const K="object"==typeof V.firebase?V.firebase:void 0,Ae=null==K?void 0:K.sign_in_provider;return{claims:V,token:w,authTime:lt(En(V.auth_time)),issuedAtTime:lt(En(V.iat)),expirationTime:lt(En(V.exp)),signInProvider:Ae||null,signInSecondFactor:(null==K?void 0:K.sign_in_second_factor)||null}})).apply(this,arguments)}function En(y){return 1e3*Number(y)}function Ft(y){const[d,h,w]=y.split(".");if(void 0===d||void 0===h||void 0===w)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,g.tV)(h);return V?JSON.parse(V):($e("Failed to decode base64 JWT payload"),null)}catch(V){return $e("Caught error parsing JWT payload as JSON",V),null}}function lr(y,d){return mi.apply(this,arguments)}function mi(){return(mi=(0,D.Z)(function*(y,d,h=!1){if(h)return d;try{return yield d}catch(w){throw w instanceof g.ZR&&yi(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function yi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Cr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const V=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const w=this.getInterval(d);this.timerId=setTimeout((0,D.Z)(function*(){yield h.iteration()}),w)}iteration(){var d=this;return(0,D.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h.code&&d.schedule(!0))}d.schedule()})()}}class Hr{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=lt(this.lastLoginAt),this.creationTime=lt(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(y){return we.apply(this,arguments)}function we(){return(we=(0,D.Z)(function*(y){var d;const h=y.auth,w=yield y.getIdToken(),V=yield lr(y,Oi(h,{idToken:w}));Ze(null==V?void 0:V.users.length,h,"internal-error");const K=V.users[0];y._notifyReloadListener(K);const Ae=(null===(d=K.providerUserInfo)||void 0===d?void 0:d.length)?Ue(K.providerUserInfo):[],nt=ot(y.providerData,Ae),Dn=!!y.isAnonymous&&!(y.email&&K.passwordHash||(null==nt?void 0:nt.length)),Sn={uid:K.localId,displayName:K.displayName||null,photoURL:K.photoUrl||null,email:K.email||null,emailVerified:K.emailVerified||!1,phoneNumber:K.phoneNumber||null,tenantId:K.tenantId||null,providerData:nt,metadata:new Hr(K.createdAt,K.lastLoginAt),isAnonymous:Dn};Object.assign(y,Sn)})).apply(this,arguments)}function pe(){return(pe=(0,D.Z)(function*(y){const d=(0,g.m9)(y);yield en(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ot(y,d){return[...y.filter(w=>!d.some(V=>V.providerId===w.providerId)),...d]}function Ue(y){return y.map(d=>{var{providerId:h}=d,w=(0,be._T)(d,["providerId"]);return{providerId:h,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function wt(){return(wt=(0,D.Z)(function*(y,d){const h=yield Wn(y,{},()=>{const w=(0,g.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:V,apiKey:K}=y.config,Ae=hn(y,V,"/v1/token",`key=${K}`);return In.fetch()(Ae,{method:"POST",headers:{"X-Client-Version":y._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:w})});return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class yn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){Ze(d.idToken,"internal-error"),Ze(void 0!==d.idToken,"internal-error"),Ze(void 0!==d.refreshToken,"internal-error");const h="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function(y){const d=Ft(y);return Ze(d,"internal-error"),Ze(void 0!==d.exp,"internal-error"),Ze(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}getToken(d,h=!1){var w=this;return(0,D.Z)(function*(){return Ze(!w.accessToken||w.refreshToken,d,"user-token-expired"),h||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(d,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var w=this;return(0,D.Z)(function*(){const{accessToken:V,refreshToken:K,expiresIn:Ae}=yield function(y,d){return wt.apply(this,arguments)}(d,h);w.updateTokensAndExpiration(V,K,Number(Ae))})()}updateTokensAndExpiration(d,h,w){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(d,h){const{refreshToken:w,accessToken:V,expirationTime:K}=h,Ae=new yn;return w&&(Ze("string"==typeof w,"internal-error",{appName:d}),Ae.refreshToken=w),V&&(Ze("string"==typeof V,"internal-error",{appName:d}),Ae.accessToken=V),K&&(Ze("number"==typeof K,"internal-error",{appName:d}),Ae.expirationTime=K),Ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new yn,this.toJSON())}_performRefresh(){return Ve("not implemented")}}function Jn(y,d){Ze("string"==typeof y||void 0===y,"internal-error",{appName:d})}class an{constructor(d){var{uid:h,auth:w,stsTokenManager:V}=d,K=(0,be._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=w,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=K.displayName||null,this.email=K.email||null,this.emailVerified=K.emailVerified||!1,this.phoneNumber=K.phoneNumber||null,this.photoURL=K.photoURL||null,this.isAnonymous=K.isAnonymous||!1,this.tenantId=K.tenantId||null,this.metadata=new Hr(K.createdAt||void 0,K.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,D.Z)(function*(){const w=yield lr(h,h.stsTokenManager.getToken(h.auth,d));return Ze(w,h.auth,"internal-error"),h.accessToken!==w&&(h.accessToken=w,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),w})()}getIdTokenResult(d){return function(y){return er.apply(this,arguments)}(this,d)}reload(){return function(y){return pe.apply(this,arguments)}(this)}_assign(d){this!==d&&(Ze(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new an(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var w=this;return(0,D.Z)(function*(){let V=!1;d.idToken&&d.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(d),V=!0),h&&(yield en(w)),yield w.auth._persistUserIfCurrent(w),V&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var d=this;return(0,D.Z)(function*(){const h=yield d.getIdToken();return yield lr(d,function(y,d){return Xn.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var w,V,K,Ae,nt,St,Jt,Dn;const Sn=null!==(w=h.displayName)&&void 0!==w?w:void 0,ys=null!==(V=h.email)&&void 0!==V?V:void 0,po=null!==(K=h.phoneNumber)&&void 0!==K?K:void 0,ct=null!==(Ae=h.photoURL)&&void 0!==Ae?Ae:void 0,ml=null!==(nt=h.tenantId)&&void 0!==nt?nt:void 0,Go=null!==(St=h._redirectEventId)&&void 0!==St?St:void 0,wh=null!==(Jt=h.createdAt)&&void 0!==Jt?Jt:void 0,Vu=null!==(Dn=h.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:lu,emailVerified:wd,isAnonymous:cu,providerData:Cc,stsTokenManager:Dc}=h;Ze(lu&&Dc,d,"internal-error");const Uu=yn.fromJSON(this.name,Dc);Ze("string"==typeof lu,d,"internal-error"),Jn(Sn,d.name),Jn(ys,d.name),Ze("boolean"==typeof wd,d,"internal-error"),Ze("boolean"==typeof cu,d,"internal-error"),Jn(po,d.name),Jn(ct,d.name),Jn(ml,d.name),Jn(Go,d.name),Jn(wh,d.name),Jn(Vu,d.name);const bi=new an({uid:lu,auth:d,email:ys,emailVerified:wd,displayName:Sn,isAnonymous:cu,photoURL:ct,phoneNumber:po,tenantId:ml,stsTokenManager:Uu,createdAt:wh,lastLoginAt:Vu});return Cc&&Array.isArray(Cc)&&(bi.providerData=Cc.map(bh=>Object.assign({},bh))),Go&&(bi._redirectEventId=Go),bi}static _fromIdTokenResponse(d,h,w=!1){return(0,D.Z)(function*(){const V=new yn;V.updateFromServerResponse(h);const K=new an({uid:h.localId,auth:d,stsTokenManager:V,isAnonymous:w});return yield en(K),K})()}}const Pn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(h,w){var V=this;return(0,D.Z)(function*(){V.storage[h]=w})()}_get(h){var w=this;return(0,D.Z)(function*(){const V=w.storage[h];return void 0===V?null:V})()}_remove(h){var w=this;return(0,D.Z)(function*(){delete w.storage[h]})()}_addListener(h,w){}_removeListener(h,w){}}return y.type="NONE",y})();function rn(y,d,h){return`firebase:${y}:${d}:${h}`}class gr{constructor(d,h,w){this.persistence=d,this.auth=h,this.userKey=w;const{config:V,name:K}=this.auth;this.fullUserKey=rn(this.userKey,V.apiKey,K),this.fullPersistenceKey=rn("persistence",V.apiKey,K),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?an._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,D.Z)(function*(){if(h.persistence===d)return;const w=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,w?h.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,w="authUser"){return(0,D.Z)(function*(){if(!h.length)return new gr(Te(Pn),d,w);const V=(yield Promise.all(h.map(function(){var Jt=(0,D.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return Jt.apply(this,arguments)}}()))).filter(Jt=>Jt);let K=V[0]||Te(Pn);const Ae=rn(w,d.config.apiKey,d.name);let nt=null;for(const Jt of h)try{const Dn=yield Jt._get(Ae);if(Dn){const Sn=an._fromJSON(d,Dn);Jt!==K&&(nt=Sn),K=Jt;break}}catch(Dn){}const St=V.filter(Jt=>Jt._shouldAllowMigration);return K._shouldAllowMigration&&St.length?(K=St[0],nt&&(yield K._set(Ae,nt.toJSON())),yield Promise.all(h.map(function(){var Jt=(0,D.Z)(function*(Dn){if(Dn!==K)try{yield Dn._remove(Ae)}catch(Sn){}});return function(Dn){return Jt.apply(this,arguments)}}())),new gr(K,d,w)):new gr(K,d,w)})()}}function Xr(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Ci(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(ei(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Nr(d))return"Blackberry";if(cr(d))return"Webos";if(os(d))return"Safari";if((d.includes("chrome/")||Pi(d))&&!d.includes("edge/"))return"Chrome";if(zr(d))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function ei(y=(0,g.z$)()){return/firefox\//i.test(y)}function os(y=(0,g.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Pi(y=(0,g.z$)()){return/crios\//i.test(y)}function Ci(y=(0,g.z$)()){return/iemobile/i.test(y)}function zr(y=(0,g.z$)()){return/android/i.test(y)}function Nr(y=(0,g.z$)()){return/blackberry/i.test(y)}function cr(y=(0,g.z$)()){return/webos/i.test(y)}function jr(y=(0,g.z$)()){return/iphone|ipad|ipod/i.test(y)}function Gr(y=(0,g.z$)()){return jr(y)||zr(y)||cr(y)||Nr(y)||/windows phone/i.test(y)||Ci(y)}function dr(y,d=[]){let h;switch(y){case"Browser":h=Xr((0,g.z$)());break;case"Worker":h=`${Xr((0,g.z$)())}-${y}`;break;default:h=y}const w=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${Se.SDK_VERSION}/${w}`}class as{constructor(d,h){this.app=d,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bt(this),this.idTokenSubscription=new bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=h.sdkClientVersion}_initializeWithPersistence(d,h){var w=this;return h&&(this._popupRedirectResolver=Te(h)),this._initializationPromise=this.queue((0,D.Z)(function*(){var V;w._deleted||(w.persistenceManager=yield gr.create(w,d),!w._deleted&&((null===(V=w._popupRedirectResolver)||void 0===V?void 0:V._shouldInitProactively)&&(yield w._popupRedirectResolver._initialize(w)),yield w.initializeCurrentUser(h),!w._deleted&&(w._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h)}})()}initializeCurrentUser(d){var h=this;return(0,D.Z)(function*(){var w;let V=yield h.assertedPersistence.getCurrentUser();if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const K=null===(w=h.redirectUser)||void 0===w?void 0:w._redirectEventId,Ae=null==V?void 0:V._redirectEventId,nt=yield h.tryRedirectSignIn(d);(!K||K===Ae)&&(null==nt?void 0:nt.user)&&(V=nt.user)}return V?V._redirectEventId?(Ze(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===V._redirectEventId?h.directlySetCurrentUser(V):h.reloadAndSetCurrentUserOrClear(V)):h.reloadAndSetCurrentUserOrClear(V):h.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var h=this;return(0,D.Z)(function*(){let w=null;try{w=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch(V){yield h._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,D.Z)(function*(){try{yield en(d)}catch(w){if("auth/network-request-failed"!==w.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,D.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,D.Z)(function*(){const w=d?(0,g.m9)(d):null;return w&&Ze(w.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(w&&w._clone(h))})()}_updateCurrentUser(d){var h=this;return(0,D.Z)(function*(){if(!h._deleted)return d&&Ze(h.tenantId===d.tenantId,h,"tenant-id-mismatch"),h.queue((0,D.Z)(function*(){yield h.directlySetCurrentUser(d),h.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var h=this;return this.queue((0,D.Z)(function*(){yield h.assertedPersistence.setPersistence(Te(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new g.LL("auth","Firebase",d())}onAuthStateChanged(d,h,w){return this.registerStateListener(this.authStateSubscription,d,h,w)}onIdTokenChanged(d,h,w){return this.registerStateListener(this.idTokenSubscription,d,h,w)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var w=this;return(0,D.Z)(function*(){const V=yield w.getOrInitRedirectPersistenceManager(h);return null===d?V.removeCurrentUser():V.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,D.Z)(function*(){if(!h.redirectPersistenceManager){const w=d&&Te(d)||h._popupRedirectResolver;Ze(w,h,"argument-error"),h.redirectPersistenceManager=yield gr.create(h,[Te(w._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,D.Z)(function*(){var w,V;return h._isInitialized&&(yield h.queue((0,D.Z)(function*(){}))),(null===(w=h._currentUser)||void 0===w?void 0:w._redirectEventId)===d?h._currentUser:(null===(V=h.redirectUser)||void 0===V?void 0:V._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,D.Z)(function*(){if(d===h.currentUser)return h.queue((0,D.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,w,V){if(this._deleted)return()=>{};const K="function"==typeof h?h:h.next.bind(h),Ae=this._isInitialized?Promise.resolve():this._initializationPromise;return Ze(Ae,this,"internal-error"),Ae.then(()=>K(this.currentUser)),"function"==typeof h?d.addObserver(h,w,V):d.addObserver(h)}directlySetCurrentUser(d){var h=this;return(0,D.Z)(function*(){h.currentUser&&h.currentUser!==d&&(h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh()),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function On(y){return(0,g.m9)(y)}class bt{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,g.ne)(h=>this.observer=h)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ht(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function Zr(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class mr{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return Ve("not implemented")}_getIdTokenResponse(d){return Ve("not implemented")}_linkToIdToken(d,h){return Ve("not implemented")}_getReauthenticationResolver(d){return Ve("not implemented")}}function Un(y,d){return tr.apply(this,arguments)}function tr(){return(tr=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:resetPassword",Lt(y,d))})).apply(this,arguments)}function es(y,d){return nn.apply(this,arguments)}function nn(){return(nn=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function js(y,d){return us.apply(this,arguments)}function us(){return(us=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:update",Lt(y,d))})).apply(this,arguments)}function Kr(){return(Kr=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithPassword",Lt(y,d))})).apply(this,arguments)}function Ar(y,d){return ki.apply(this,arguments)}function ki(){return(ki=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:sendOobCode",Lt(y,d))})).apply(this,arguments)}function Yr(y,d){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,D.Z)(function*(y,d){return Ar(y,d)})).apply(this,arguments)}function Oe(y,d){return We.apply(this,arguments)}function We(){return(We=(0,D.Z)(function*(y,d){return Ar(y,d)})).apply(this,arguments)}function Xe(y,d){return Et.apply(this,arguments)}function Et(){return(Et=(0,D.Z)(function*(y,d){return Ar(y,d)})).apply(this,arguments)}function Ct(y,d){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(function*(y,d){return Ar(y,d)})).apply(this,arguments)}function pn(){return(pn=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",Lt(y,d))})).apply(this,arguments)}function kr(){return(kr=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithEmailLink",Lt(y,d))})).apply(this,arguments)}class _r extends mr{constructor(d,h,w,V=null){super("password",w),this._email=d,this._password=h,this._tenantId=V}static _fromEmailAndPassword(d,h){return new _r(d,h,"password")}static _fromEmailAndCode(d,h,w=null){return new _r(d,h,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if((null==h?void 0:h.email)&&(null==h?void 0:h.password)){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,D.Z)(function*(){switch(h.signInMethod){case"password":return function(y,d){return Kr.apply(this,arguments)}(d,{returnSecureToken:!0,email:h._email,password:h._password});case"emailLink":return function(y,d){return pn.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:Qe(d,"internal-error")}})()}_linkToIdToken(d,h){var w=this;return(0,D.Z)(function*(){switch(w.signInMethod){case"password":return es(d,{idToken:h,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(y,d){return kr.apply(this,arguments)}(d,{idToken:h,email:w._email,oobCode:w._password});default:Qe(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ne(y,d){return ce.apply(this,arguments)}function ce(){return(ce=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithIdp",Lt(y,d))})).apply(this,arguments)}class Ie extends mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new Ie(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):Qe("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:V}=h,K=(0,be._T)(h,["providerId","signInMethod"]);if(!w||!V)return null;const Ae=new Ie(w,V);return Ae.idToken=K.idToken||void 0,Ae.accessToken=K.accessToken||void 0,Ae.secret=K.secret,Ae.nonce=K.nonce,Ae.pendingToken=K.pendingToken||null,Ae}_getIdTokenResponse(d){return ne(d,this.buildRequest())}_linkToIdToken(d,h){const w=this.buildRequest();return w.idToken=h,ne(d,w)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,ne(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,g.xO)(h)}return d}}function it(y,d){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:sendVerificationCode",Lt(y,d))})).apply(this,arguments)}function sn(){return(sn=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,d))})).apply(this,arguments)}function ti(){return(ti=(0,D.Z)(function*(y,d){const h=yield Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,d));if(h.temporaryProof)throw Nn(y,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const $s={USER_NOT_FOUND:"user-not-found"};function ao(){return(ao=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithPhoneNumber",Lt(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),$s)})).apply(this,arguments)}class Wi extends mr{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new Wi({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new Wi({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function(y,d){return sn.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function(y,d){return ti.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function(y,d){return ao.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:w,verificationCode:V}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:w,code:V}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:w,phoneNumber:V,temporaryProof:K}=d;return w||h||V||K?new Wi({verificationId:h,verificationCode:w,phoneNumber:V,temporaryProof:K}):null}}class ls{constructor(d){var h,w,V,K,Ae,nt;const St=(0,g.zd)((0,g.pd)(d)),Jt=null!==(h=St.apiKey)&&void 0!==h?h:null,Dn=null!==(w=St.oobCode)&&void 0!==w?w:null,Sn=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=St.mode)&&void 0!==V?V:null);Ze(Jt&&Dn&&Sn,"argument-error"),this.apiKey=Jt,this.operation=Sn,this.code=Dn,this.continueUrl=null!==(K=St.continueUrl)&&void 0!==K?K:null,this.languageCode=null!==(Ae=St.languageCode)&&void 0!==Ae?Ae:null,this.tenantId=null!==(nt=St.tenantId)&&void 0!==nt?nt:null}static parseLink(d){const h=function(y){const d=(0,g.zd)((0,g.pd)(y)).link,h=d?(0,g.zd)((0,g.pd)(d)).deep_link_id:null,w=(0,g.zd)((0,g.pd)(y)).deep_link_id;return(w?(0,g.zd)((0,g.pd)(w)).link:null)||w||h||d||y}(d);try{return new ls(h)}catch(w){return null}}}let Js=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(h,w){return _r._fromEmailAndPassword(h,w)}static credentialWithLink(h,w){const V=ls.parseLink(w);return Ze(V,"argument-error"),_r._fromEmailAndCode(h,V.code,V.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class zi{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ts extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class cs extends ts{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return Ze("providerId"in h&&"signInMethod"in h,"argument-error"),Ie._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return Ze(d.idToken||d.accessToken,"argument-error"),Ie._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return cs.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return cs.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:w,oauthTokenSecret:V,pendingToken:K,nonce:Ae,providerId:nt}=d;if(!w&&!V&&!h&&!K||!nt)return null;try{return new cs(nt)._credential({idToken:h,accessToken:w,nonce:Ae,pendingToken:K})}catch(St){return null}}}let _o=(()=>{class y extends ts{constructor(){super("facebook.com")}static credential(h){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ds=(()=>{class y extends ts{constructor(){super("google.com"),this.addScope("profile")}static credential(h,w){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:w})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:w,oauthAccessToken:V}=h;if(!w&&!V)return null;try{return y.credential(w,V)}catch(K){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),hs=(()=>{class y extends ts{constructor(){super("github.com")}static credential(h){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class fs extends mr{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return ne(d,this.buildRequest())}_linkToIdToken(d,h){const w=this.buildRequest();return w.idToken=h,ne(d,w)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,ne(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:V,pendingToken:K}=h;return w&&V&&K&&w===V?new fs(w,K):null}static _create(d,h){return new fs(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Zi=(()=>{class y extends ts{constructor(){super("twitter.com")}static credential(h,w){return Ie._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:w})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:w,oauthTokenSecret:V}=h;if(!w||!V)return null;try{return y.credential(w,V)}catch(K){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Es(y,d){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signUp",Lt(y,d))})).apply(this,arguments)}class vi{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,w,V=!1){return(0,D.Z)(function*(){const K=yield an._fromIdTokenResponse(d,w,V),Ae=qs(w);return new vi({user:K,providerId:Ae,_tokenResponse:w,operationType:h})})()}static _forOperation(d,h,w){return(0,D.Z)(function*(){yield d._updateTokensIfNecessary(w,!0);const V=qs(w);return new vi({user:d,providerId:V,_tokenResponse:w,operationType:h})})()}}function qs(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ai(){return(ai=(0,D.Z)(function*(y){var d;const h=On(y);if(yield h._initializationPromise,null===(d=h.currentUser)||void 0===d?void 0:d.isAnonymous)return new vi({user:h.currentUser,providerId:null,operationType:"signIn"});const w=yield Es(h,{returnSecureToken:!0}),V=yield vi._fromIdTokenResponse(h,"signIn",w,!0);return yield h._updateCurrentUser(V.user),V})).apply(this,arguments)}class uo extends g.ZR{constructor(d,h,w,V){var K;super(h.code,h.message),this.operationType=w,this.user=V,this.name="FirebaseError",Object.setPrototypeOf(this,uo.prototype),this.appName=d.name,this.code=h.code,this.tenantId=null!==(K=d.tenantId)&&void 0!==K?K:void 0,this.serverResponse=h.customData.serverResponse}static _fromErrorAndOperation(d,h,w,V){return new uo(d,h,w,V)}}function Ti(y,d,h,w){return("reauthenticate"===d?h._getReauthenticationResolver(y):h._getIdTokenResponse(y)).catch(K=>{throw"auth/multi-factor-auth-required"===K.code?uo._fromErrorAndOperation(y,K,d,w):K})}function Xs(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function ns(){return(ns=(0,D.Z)(function*(y,d){const h=(0,g.m9)(y);yield N(!0,h,d);const{providerUserInfo:w}=yield vn(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),V=Xs(w||[]);return h.providerData=h.providerData.filter(K=>V.has(K.providerId)),V.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function P(y,d){return G.apply(this,arguments)}function G(){return(G=(0,D.Z)(function*(y,d,h=!1){const w=yield lr(y,d._linkToIdToken(y.auth,yield y.getIdToken()),h);return vi._forOperation(y,"link",w)})).apply(this,arguments)}function N(y,d,h){return z.apply(this,arguments)}function z(){return(z=(0,D.Z)(function*(y,d,h){yield en(d);const V=!1===y?"provider-already-linked":"no-such-provider";Ze(Xs(d.providerData).has(h)===y,d.auth,V)})).apply(this,arguments)}function ye(y,d){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,D.Z)(function*(y,d,h=!1){const{auth:w}=y,V="reauthenticate";try{const K=yield lr(y,Ti(w,V,d,y),h);Ze(K.idToken,w,"internal-error");const Ae=Ft(K.idToken);Ze(Ae,w,"internal-error");const{sub:nt}=Ae;return Ze(y.uid===nt,w,"user-mismatch"),vi._forOperation(y,V,K)}catch(K){throw"auth/user-not-found"===(null==K?void 0:K.code)&&Qe(w,"user-mismatch"),K}})).apply(this,arguments)}function ft(y,d){return $t.apply(this,arguments)}function $t(){return($t=(0,D.Z)(function*(y,d,h=!1){const w="signIn",V=yield Ti(y,w,d),K=yield vi._fromIdTokenResponse(y,w,V);return h||(yield y._updateCurrentUser(K.user)),K})).apply(this,arguments)}function Ut(y,d){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,D.Z)(function*(y,d){return ft(On(y),d)})).apply(this,arguments)}function vr(y,d){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,D.Z)(function*(y,d){const h=(0,g.m9)(y);return yield N(!1,h,d.providerId),P(h,d)})).apply(this,arguments)}function Er(y,d){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,D.Z)(function*(y,d){return ye((0,g.m9)(y),d)})).apply(this,arguments)}function ui(y,d){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,D.Z)(function*(y,d){return Rr(y,"POST","/v1/accounts:signInWithCustomToken",Lt(y,d))})).apply(this,arguments)}function Fr(){return(Fr=(0,D.Z)(function*(y,d){const h=On(y),w=yield ui(h,{token:d,returnSecureToken:!0}),V=yield vi._fromIdTokenResponse(h,"signIn",w);return yield h._updateCurrentUser(V.user),V})).apply(this,arguments)}class Li{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?Ms._fromServerResponse(d,h):Qe(d,"internal-error")}}class Ms extends Li{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new Ms(h)}}function Ai(y,d,h){var w;Ze((null===(w=h.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Ze(void 0===h.dynamicLinkDomain||h.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Ze(h.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(Ze(h.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function Ws(){return(Ws=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y),V={requestType:"PASSWORD_RESET",email:d};h&&Ai(w,V,h),yield Oe(w,V)})).apply(this,arguments)}function un(){return(un=(0,D.Z)(function*(y,d,h){yield Un((0,g.m9)(y),{oobCode:d,newPassword:h})})).apply(this,arguments)}function No(){return(No=(0,D.Z)(function*(y,d){yield js((0,g.m9)(y),{oobCode:d})})).apply(this,arguments)}function j(y,d){return k.apply(this,arguments)}function k(){return(k=(0,D.Z)(function*(y,d){const h=(0,g.m9)(y),w=yield Un(h,{oobCode:d}),V=w.requestType;switch(Ze(V,h,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ze(w.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ze(w.mfaInfo,h,"internal-error");default:Ze(w.email,h,"internal-error")}let K=null;return w.mfaInfo&&(K=Li._fromServerResponse(On(h),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:K},operation:V}})).apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(y,d){const{data:h}=yield j((0,g.m9)(y),d);return h.email})).apply(this,arguments)}function se(){return(se=(0,D.Z)(function*(y,d,h){const w=On(y),V=yield Es(w,{returnSecureToken:!0,email:d,password:h}),K=yield vi._fromIdTokenResponse(w,"signIn",V);return yield w._updateCurrentUser(K.user),K})).apply(this,arguments)}function gt(){return(gt=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y),V={requestType:"EMAIL_SIGNIN",email:d};Ze(h.handleCodeInApp,w,"argument-error"),h&&Ai(w,V,h),yield Xe(w,V)})).apply(this,arguments)}function nr(){return(nr=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y),V=Js.credentialWithLink(d,h||Rt());return Ze(V._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ut(w,V)})).apply(this,arguments)}function wr(y,d){return rr.apply(this,arguments)}function rr(){return(rr=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:createAuthUri",Lt(y,d))})).apply(this,arguments)}function ii(){return(ii=(0,D.Z)(function*(y,d){const w={identifier:d,continueUri:Xt()?Rt():"http://localhost"},{signinMethods:V}=yield wr((0,g.m9)(y),w);return V||[]})).apply(this,arguments)}function li(){return(li=(0,D.Z)(function*(y,d){const h=(0,g.m9)(y),V={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&Ai(h.auth,V,d);const{email:K}=yield Yr(h.auth,V);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function br(){return(br=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y),K={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};h&&Ai(w.auth,K,h);const{email:Ae}=yield Ct(w.auth,K);Ae!==y.email&&(yield y.reload())})).apply(this,arguments)}function ci(y,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,D.Z)(function*(y,d){return tn(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function eo(){return(eo=(0,D.Z)(function*(y,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const w=(0,g.m9)(y),K={idToken:yield w.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Ae=yield lr(w,ci(w.auth,K));w.displayName=Ae.displayName||null,w.photoURL=Ae.photoUrl||null;const nt=w.providerData.find(({providerId:St})=>"password"===St);nt&&(nt.displayName=w.displayName,nt.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Ae)})).apply(this,arguments)}function I(y,d,h){return $.apply(this,arguments)}function $(){return($=(0,D.Z)(function*(y,d,h){const{auth:w}=y,K={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(K.email=d),h&&(K.password=h);const Ae=yield lr(y,es(w,K));yield y._updateTokensIfNecessary(Ae,!0)})).apply(this,arguments)}class mt{constructor(d,h,w={}){this.isNewUser=d,this.providerId=h,this.profile=w}}class bn extends mt{constructor(d,h,w,V){super(d,h,w),this.username=V}}class fr extends mt{constructor(d,h){super(d,"facebook.com",h)}}class Dr extends bn{constructor(d,h){super(d,"github.com",h,"string"==typeof(null==h?void 0:h.login)?null==h?void 0:h.login:null)}}class di extends mt{constructor(d,h){super(d,"google.com",h)}}class Si extends bn{constructor(d,h,w){super(d,"twitter.com",h,w)}}function Ki(y){const{user:d,_tokenResponse:h}=y;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function(y){var d,h;if(!y)return null;const{providerId:w}=y,V=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},K=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Ae=null===(h=null===(d=Ft(y.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Ae)return new mt(K,"anonymous"!==Ae&&"custom"!==Ae?Ae:null)}if(!w)return null;switch(w){case"facebook.com":return new fr(K,V);case"github.com":return new Dr(K,V);case"google.com":return new di(K,V);case"twitter.com":return new Si(K,V,y.screenName||null);case"custom":case"anonymous":return new mt(K,null);default:return new mt(K,w,V)}}(h)}class Eo{constructor(d,h){this.type=d,this.credential=h}static _fromIdtoken(d){return new Eo("enroll",d)}static _fromMfaPendingCredential(d){return new Eo("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,w;if(null==d?void 0:d.multiFactorSession){if(null===(h=d.multiFactorSession)||void 0===h?void 0:h.pendingCredential)return Eo._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(w=d.multiFactorSession)||void 0===w?void 0:w.idToken)return Eo._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Zo{constructor(d,h,w){this.session=d,this.hints=h,this.signInResolver=w}static _fromError(d,h){const w=On(d),V=(h.serverResponse.mfaInfo||[]).map(Ae=>Li._fromServerResponse(w,Ae));Ze(h.serverResponse.mfaPendingCredential,w,"internal-error");const K=Eo._fromMfaPendingCredential(h.serverResponse.mfaPendingCredential);return new Zo(K,V,function(){var Ae=(0,D.Z)(function*(nt){const St=yield nt._process(w,K);delete h.serverResponse.mfaInfo,delete h.serverResponse.mfaPendingCredential;const Jt=Object.assign(Object.assign({},h.serverResponse),{idToken:St.idToken,refreshToken:St.refreshToken});switch(h.operationType){case"signIn":const Dn=yield vi._fromIdTokenResponse(w,h.operationType,Jt);return yield w._updateCurrentUser(Dn.user),Dn;case"reauthenticate":return Ze(h.user,w,"internal-error"),vi._forOperation(h.user,h.operationType,Jt);default:Qe(w,"internal-error")}});return function(nt){return Ae.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,D.Z)(function*(){return h.signInResolver(d)})()}}function Ko(y,d){return tn(y,"POST","/v2/accounts/mfaEnrollment:start",Lt(y,d))}class oa{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(w=>Li._fromServerResponse(d.auth,w)))})}static _fromUser(d){return new oa(d)}getSession(){var d=this;return(0,D.Z)(function*(){return Eo._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,h){var w=this;return(0,D.Z)(function*(){const V=d,K=yield w.getSession(),Ae=yield lr(w.user,V._process(w.user.auth,K,h));return yield w.user._updateTokensIfNecessary(Ae),w.user.reload()})()}unenroll(d){var h=this;return(0,D.Z)(function*(){const w="string"==typeof d?d:d.uid,V=yield h.user.getIdToken(),K=yield lr(h.user,function(y,d){return tn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(y,d))}(h.user.auth,{idToken:V,mfaEnrollmentId:w}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Ae})=>Ae!==w),yield h.user._updateTokensIfNecessary(K);try{yield h.user.reload()}catch(Ae){if("auth/user-token-expired"!==Ae.code)throw Ae}})()}}const Oo=new WeakMap,Po="__sak";class ko{constructor(d,h){this.storage=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Po,"1"),this.storage.removeItem(Po),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}}const Vo=(()=>{class y extends ko{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(h,w)=>this.onStorageEvent(h,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,g.z$)();return os(y)||jr(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Gr(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const w of Object.keys(this.listeners)){const V=this.storage.getItem(w),K=this.localCache[w];V!==K&&h(w,K,V)}}onStorageEvent(h,w=!1){if(!h.key)return void this.forAllChangedKeys((nt,St,Jt)=>{this.notifyListeners(nt,Jt)});const V=h.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nt=this.storage.getItem(V);if(h.newValue!==nt)null!==h.newValue?this.storage.setItem(V,h.newValue):this.storage.removeItem(V);else if(this.localCache[V]===h.newValue&&!w)return}const K=()=>{const nt=this.storage.getItem(V);!w&&this.localCache[V]===nt||this.notifyListeners(V,nt)},Ae=this.storage.getItem(V);(0,g.w1)()&&10===document.documentMode&&Ae!==h.newValue&&h.newValue!==h.oldValue?setTimeout(K,10):K()}notifyListeners(h,w){this.localCache[h]=w;const V=this.listeners[h];if(V)for(const K of Array.from(V))K(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,w,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:w,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(w)}_removeListener(h,w){this.listeners[h]&&(this.listeners[h].delete(w),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,w){var V=()=>super._set,K=this;return(0,D.Z)(function*(){yield V().call(K,h,w),K.localCache[h]=JSON.stringify(w)})()}_get(h){var w=()=>super._get,V=this;return(0,D.Z)(function*(){const K=yield w().call(V,h);return V.localCache[h]=JSON.stringify(K),K})()}_remove(h){var w=()=>super._remove,V=this;return(0,D.Z)(function*(){yield w().call(V,h),delete V.localCache[h]})()}}return y.type="LOCAL",y})(),co=(()=>{class y extends ko{constructor(){super(window.sessionStorage,"SESSION")}_addListener(h,w){}_removeListener(h,w){}}return y.type="SESSION",y})();let Yo=(()=>{class y{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const w=this.receivers.find(K=>K.isListeningto(h));if(w)return w;const V=new y(h);return this.receivers.push(V),V}isListeningto(h){return this.eventTarget===h}handleEvent(h){var w=this;return(0,D.Z)(function*(){const V=h,{eventId:K,eventType:Ae,data:nt}=V.data,St=w.handlersMap[Ae];if(!(null==St?void 0:St.size))return;V.ports[0].postMessage({status:"ack",eventId:K,eventType:Ae});const Jt=Array.from(St).map(function(){var Sn=(0,D.Z)(function*(ys){return ys(V.origin,nt)});return function(ys){return Sn.apply(this,arguments)}}()),Dn=yield function(y){return Promise.all(y.map(function(){var d=(0,D.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(w){return{fulfilled:!1,reason:w}}});return function(h){return d.apply(this,arguments)}}()))}(Jt);V.ports[0].postMessage({status:"done",eventId:K,eventType:Ae,response:Dn})})()}_subscribe(h,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(w)}_unsubscribe(h,w){this.handlersMap[h]&&w&&this.handlersMap[h].delete(w),(!w||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ba(y="",d=10){let h="";for(let w=0;w<d;w++)h+=Math.floor(10*Math.random());return y+h}class Ml{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,w=50){var V=this;return(0,D.Z)(function*(){const K="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!K)throw new Error("connection_unavailable");let Ae,nt;return new Promise((St,Jt)=>{const Dn=Ba("",20);K.port1.start();const Sn=setTimeout(()=>{Jt(new Error("unsupported_event"))},w);nt={messageChannel:K,onMessage(ys){const po=ys;if(po.data.eventId===Dn)switch(po.data.status){case"ack":clearTimeout(Sn),Ae=setTimeout(()=>{Jt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ae),St(po.data.response);break;default:clearTimeout(Sn),clearTimeout(Ae),Jt(new Error("invalid_response"))}}},V.handlers.add(nt),K.port1.addEventListener("message",nt.onMessage),V.target.postMessage({eventType:d,eventId:Dn,data:h},[K.port2])}).finally(()=>{nt&&V.removeMessageHandler(nt)})})()}}function Jr(){return window}function Da(){return void 0!==Jr().WorkerGlobalScope&&"function"==typeof Jr().importScripts}function iu(){return(iu=(0,D.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Cu="firebaseLocalStorageDb",ho="firebaseLocalStorage",Os="fbase_key";class Ta{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function ua(y,d){return y.transaction([ho],d?"readwrite":"readonly").objectStore(ho)}function Sr(){const y=indexedDB.open(Cu,1);return new Promise((d,h)=>{y.addEventListener("error",()=>{h(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(ho,{keyPath:Os})}catch(V){h(V)}}),y.addEventListener("success",(0,D.Z)(function*(){const w=y.result;w.objectStoreNames.contains(ho)?d(w):(w.close(),yield function(){const y=indexedDB.deleteDatabase(Cu);return new Ta(y).toPromise()}(),d(yield Sr()))}))})}function la(y,d,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,D.Z)(function*(y,d,h){const w=ua(y,!0).put({[Os]:d,value:h});return new Ta(w).toPromise()})).apply(this,arguments)}function on(){return(on=(0,D.Z)(function*(y,d){const h=ua(y,!1).get(d),w=yield new Ta(h).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Aa(y,d){const h=ua(y,!0).delete(d);return new Ta(h).toPromise()}const fi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,D.Z)(function*(){return h.db||(h.db=yield Sr()),h.db})()}_withRetries(h){var w=this;return(0,D.Z)(function*(){let V=0;for(;;)try{const K=yield w._openDb();return yield h(K)}catch(K){if(V++>3)throw K;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,D.Z)(function*(){return Da()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,D.Z)(function*(){h.receiver=Yo._getInstance(Da()?self:null),h.receiver._subscribe("keyChanged",function(){var w=(0,D.Z)(function*(V,K){return{keyProcessed:(yield h._poll()).includes(K.key)}});return function(V,K){return w.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var w=(0,D.Z)(function*(V,K){return["keyChanged"]});return function(V,K){return w.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,D.Z)(function*(){var w,V;if(h.activeServiceWorker=yield function(){return iu.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Ml(h.activeServiceWorker);const K=yield h.sender._send("ping",{},800);!K||(null===(w=K[0])||void 0===w?void 0:w.fulfilled)&&(null===(V=K[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var w=this;return(0,D.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:h},w.serviceWorkerReceiverAvailable?800:50)}catch(V){}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const h=yield Sr();return yield la(h,Po,"1"),yield Aa(h,Po),!0}catch(h){}return!1})()}_withPendingWrite(h){var w=this;return(0,D.Z)(function*(){w.pendingWrites++;try{yield h()}finally{w.pendingWrites--}})()}_set(h,w){var V=this;return(0,D.Z)(function*(){return V._withPendingWrite((0,D.Z)(function*(){return yield V._withRetries(K=>la(K,h,w)),V.localCache[h]=w,V.notifyServiceWorker(h)}))})()}_get(h){var w=this;return(0,D.Z)(function*(){const V=yield w._withRetries(K=>function(y,d){return on.apply(this,arguments)}(K,h));return w.localCache[h]=V,V})()}_remove(h){var w=this;return(0,D.Z)(function*(){return w._withPendingWrite((0,D.Z)(function*(){return yield w._withRetries(V=>Aa(V,h)),delete w.localCache[h],w.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,D.Z)(function*(){const w=yield h._withRetries(Ae=>{const nt=ua(Ae,!1).getAll();return new Ta(nt).toPromise()});if(!w)return[];if(0!==h.pendingWrites)return[];const V=[],K=new Set;for(const{fbase_key:Ae,value:nt}of w)K.add(Ae),JSON.stringify(h.localCache[Ae])!==JSON.stringify(nt)&&(h.notifyListeners(Ae,nt),V.push(Ae));for(const Ae of Object.keys(h.localCache))h.localCache[Ae]&&!K.has(Ae)&&(h.notifyListeners(Ae,null),V.push(Ae));return V})()}notifyListeners(h,w){this.localCache[h]=w;const V=this.listeners[h];if(V)for(const K of Array.from(V))K(w)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(w)}_removeListener(h,w){this.listeners[h]&&(this.listeners[h].delete(w),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function C(y,d){return tn(y,"POST","/v2/accounts/mfaSignIn:start",Lt(y,d))}function R(){return(R=(0,D.Z)(function*(y){return(yield tn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function q(y){return new Promise((d,h)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=d,w.onerror=V=>{const K=re("internal-error");K.customData=V,h(K)},w.type="text/javascript",w.charset="UTF-8",function(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(w)})}function ie(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ht=1e12;class Kn{constructor(d){this.auth=d,this.counter=ht,this._widgets=new Map}render(d,h){const w=this.counter;return this._widgets.set(w,new fn(d,this.auth.name,h||{})),this.counter++,w}reset(d){var h;const w=d||ht;null===(h=this._widgets.get(w))||void 0===h||h.delete(),this._widgets.delete(w)}getResponse(d){var h;return(null===(h=this._widgets.get(d||ht))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,D.Z)(function*(){var w;return null===(w=h._widgets.get(d||ht))||void 0===w||w.execute(),""})()}}class fn{constructor(d,h,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof d?document.getElementById(d):d;Ze(V,"argument-error",{appName:h}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)d.push(h.charAt(Math.floor(Math.random()*h.length)));return d.join("")}();const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xt=ie("rcb"),ps=new Zn(3e4,6e4);class Ps{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Jr().grecaptcha}load(d,h=""){return Ze((y=h).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),d,"argument-error"),this.shouldResolveImmediately(h)?Promise.resolve(Jr().grecaptcha):new Promise((w,V)=>{const K=Jr().setTimeout(()=>{V(re(d,"network-request-failed"))},ps.get());Jr()[xt]=()=>{Jr().clearTimeout(K),delete Jr()[xt];const nt=Jr().grecaptcha;if(!nt)return void V(re(d,"internal-error"));const St=nt.render;nt.render=(Jt,Dn)=>{const Sn=St(Jt,Dn);return this.counter++,Sn},this.hostLanguage=h,w(nt)},q(`https://www.google.com/recaptcha/api.js??${(0,g.xO)({onload:xt,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(K),V(re(d,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Jr().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qn{load(d){return(0,D.Z)(function*(){return new Kn(d)})()}clearedOneInstance(){}}const Qo="recaptcha",$i={theme:"light",type:"image"};class $a{constructor(d,h=Object.assign({},$i),w){this.parameters=h,this.type=Qo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=On(w),this.isInvisible="invisible"===this.parameters.size,Ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof d?document.getElementById(d):d;Ze(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qn:new Ps,this.validateStartingState()}verify(){var d=this;return(0,D.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),w=d.getAssertedRecaptcha();return w.getResponse(h)||new Promise(K=>{const Ae=nt=>{!nt||(d.tokenChangeListeners.delete(Ae),K(nt))};d.tokenChangeListeners.add(Ae),d.isInvisible&&w.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){Ze(!this.parameters.sitekey,this.auth,"argument-error"),Ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(w=>w(h)),"function"==typeof d)d(h);else if("string"==typeof d){const w=Jr()[d];"function"==typeof w&&w(h)}}}assertNotDestroyed(){Ze(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const w=document.createElement("div");h.appendChild(w),h=w}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.Z)(function*(){Ze(Xt()&&!Da(),d.auth,"internal-error"),yield function(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function(y){return R.apply(this,arguments)}(d.auth);Ze(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return Ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qi{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=Wi._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function Jo(){return(Jo=(0,D.Z)(function*(y,d,h){const w=On(y),V=yield ca(w,d,(0,g.m9)(h));return new Qi(V,K=>Ut(w,K))})).apply(this,arguments)}function Ha(){return(Ha=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y);yield N(!1,w,"phone");const V=yield ca(w.auth,d,(0,g.m9)(h));return new Qi(V,K=>vr(w,K))})).apply(this,arguments)}function ol(){return(ol=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y),V=yield ca(w.auth,d,(0,g.m9)(h));return new Qi(V,K=>Er(w,K))})).apply(this,arguments)}function ca(y,d,h){return da.apply(this,arguments)}function da(){return(da=(0,D.Z)(function*(y,d,h){var w;const V=yield h.verify();try{let K;if(Ze("string"==typeof V,y,"argument-error"),Ze(h.type===Qo,y,"argument-error"),K="string"==typeof d?{phoneNumber:d}:d,"session"in K){const Ae=K.session;if("phoneNumber"in K)return Ze("enroll"===Ae.type,y,"internal-error"),(yield Ko(y,{idToken:Ae.credential,phoneEnrollmentInfo:{phoneNumber:K.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{Ze("signin"===Ae.type,y,"internal-error");const nt=(null===(w=K.multiFactorHint)||void 0===w?void 0:w.uid)||K.multiFactorUid;return Ze(nt,y,"missing-multi-factor-info"),(yield C(y,{mfaPendingCredential:Ae.credential,mfaEnrollmentId:nt,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ae}=yield it(y,{phoneNumber:K.phoneNumber,recaptchaToken:V});return Ae}}finally{h._reset()}})).apply(this,arguments)}function al(){return(al=(0,D.Z)(function*(y,d){yield P((0,g.m9)(y),d)})).apply(this,arguments)}let Zt=(()=>{class y{constructor(h){this.providerId=y.PROVIDER_ID,this.auth=On(h)}verifyPhoneNumber(h,w){return ca(this.auth,h,(0,g.m9)(w))}static credential(h,w){return Wi._fromVerification(h,w)}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:w,temporaryProof:V}=h;return w&&V?Wi._fromTokenResponse(w,V):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function no(y,d){return d?Te(d):(Ze(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ks extends mr{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ne(d,this._buildIdpRequest())}_linkToIdToken(d,h){return ne(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return ne(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function Nl(y){return ft(y.auth,new Ks(y),y.bypassAuthState)}function Ei(y){const{auth:d,user:h}=y;return Ze(h,d,"internal-error"),ye(h,new Ks(y),y.bypassAuthState)}function Tu(y){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,D.Z)(function*(y){const{auth:d,user:h}=y;return Ze(h,d,"internal-error"),P(h,new Ks(y),y.bypassAuthState)})).apply(this,arguments)}class xa{constructor(d,h,w,V,K=!1){this.auth=d,this.resolver=w,this.user=V,this.bypassAuthState=K,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,D.Z)(function*(w,V){d.pendingPromise={resolve:w,reject:V};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(K){d.reject(K)}});return function(w,V){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,D.Z)(function*(){const{urlResponse:w,sessionId:V,postBody:K,tenantId:Ae,error:nt,type:St}=d;if(nt)return void h.reject(nt);const Jt={auth:h.auth,requestUri:w,sessionId:V,tenantId:Ae||void 0,postBody:K||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(St)(Jt))}catch(Dn){h.reject(Dn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Nl;case"linkViaPopup":case"linkViaRedirect":return Tu;case"reauthViaPopup":case"reauthViaRedirect":return Ei;default:Qe(this.auth,"internal-error")}}resolve(d){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Re(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Au=new Zn(2e3,1e4);function io(){return(io=(0,D.Z)(function*(y,d,h){const w=On(y);Gt(y,d,zi);const V=no(w,h);return new Ds(w,"signInViaPopup",d,V).executeNotNull()})).apply(this,arguments)}function Xo(){return(Xo=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y);Gt(w.auth,d,zi);const V=no(w.auth,h);return new Ds(w.auth,"reauthViaPopup",d,V,w).executeNotNull()})).apply(this,arguments)}function Ra(){return(Ra=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y);Gt(w.auth,d,zi);const V=no(w.auth,h);return new Ds(w.auth,"linkViaPopup",d,V,w).executeNotNull()})).apply(this,arguments)}let Ds=(()=>{class y extends xa{constructor(h,w,V,K,Ae){super(h,w,K,Ae),this.provider=V,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var h=this;return(0,D.Z)(function*(){const w=yield h.execute();return Ze(w,h.auth,"internal-error"),w})()}onExecution(){var h=this;return(0,D.Z)(function*(){Re(1===h.filter.length,"Popup operations only handle one event");const w=Ba();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],w),h.authWindow.associatedEvent=w,h.resolver._originValidation(h.auth).catch(V=>{h.reject(V)}),h.resolver._isIframeWebStorageSupported(h.auth,V=>{V||h.reject(re(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const h=()=>{var w,V;this.pollId=(null===(V=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===V?void 0:V.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(h,Au.get())};h()}}return y.currentPopupAction=null,y})();const si=new Map;class ch extends xa{constructor(d,h,w=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,w),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,D.Z)(function*(){let w=si.get(h.auth._key());if(!w){try{const K=(yield function(y,d){return T.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;w=()=>Promise.resolve(K)}catch(V){w=()=>Promise.reject(V)}si.set(h.auth._key(),w)}return w()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,w=this;return(0,D.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(w,d);if("unknown"!==d.type){if(d.eventId){const V=yield w.auth._redirectUserForId(d.eventId);if(V)return w.user=V,h().call(w,d);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function T(){return(T=(0,D.Z)(function*(y,d){const h=rt(d),w="true"===(yield Me(y)._get(h));return yield Me(y)._remove(h),w})).apply(this,arguments)}function F(y,d){return W.apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(y,d){return Me(y)._set(rt(d),"true")})).apply(this,arguments)}function Me(y){return Te(y._redirectPersistence)}function rt(y){return rn("pendingRedirect",y.config.apiKey,y.name)}function Wt(){return(Wt=(0,D.Z)(function*(y,d,h){const w=On(y);Gt(y,d,zi);const V=no(w,h);return yield F(V,w),V._openRedirect(w,d,"signInViaRedirect")})).apply(this,arguments)}function Ts(){return(Ts=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y);Gt(w.auth,d,zi);const V=no(w.auth,h);yield F(V,w.auth);const K=yield ul(w);return V._openRedirect(w.auth,d,"reauthViaRedirect",K)})).apply(this,arguments)}function so(){return(so=(0,D.Z)(function*(y,d,h){const w=(0,g.m9)(y);Gt(w.auth,d,zi);const V=no(w.auth,h);yield N(!1,w,d.providerId),yield F(V,w.auth);const K=yield ul(w);return V._openRedirect(w.auth,d,"linkViaRedirect",K)})).apply(this,arguments)}function As(){return(As=(0,D.Z)(function*(y,d){return yield On(y)._initializationPromise,ea(y,d,!1)})).apply(this,arguments)}function ea(y,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,D.Z)(function*(y,d,h=!1){const w=On(y),V=no(w,d),Ae=yield new ch(w,V,h).execute();return Ae&&!h&&(delete Ae.user._redirectEventId,yield w._persistUserIfCurrent(Ae.user),yield w._setRedirectUser(null,d)),Ae})).apply(this,arguments)}function ul(y){return jo.apply(this,arguments)}function jo(){return(jo=(0,D.Z)(function*(y){const d=Ba(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class Ga{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(d,w)&&(h=!0,this.sendToConsumer(d,w),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Na(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var w;if(d.error&&!Na(d)){const V=(null===(w=d.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";h.onError(re(this.auth,V))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const w=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&w}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qa(d))}saveEventToCache(d){this.cachedEventUids.add(qa(d)),this.lastProcessedEventTime=Date.now()}}function qa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function Na({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Hi(y){return ll.apply(this,arguments)}function ll(){return(ll=(0,D.Z)(function*(y,d={}){return tn(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fs=/^https?/;function Su(){return(Su=(0,D.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Hi(y);for(const h of d)try{if(nd(h))return}catch(w){}Qe(y,"unauthorized-domain")})).apply(this,arguments)}function nd(y){const d=Rt(),{protocol:h,hostname:w}=new URL(d);if(y.startsWith("chrome-extension://")){const Ae=new URL(y);return""===Ae.hostname&&""===w?"chrome-extension:"===h&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Ae.hostname===w}if(!Fs.test(h))return!1;if(Pl.test(y))return w===y;const V=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(w)}const cc=new Zn(3e4,6e4);function kl(){const y=Jr().___jsl;if(null==y?void 0:y.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let h=0;h<y.CP.length;h++)y.CP[h]=null}let ta=null;function Fl(y){return ta=ta||function(y){return new Promise((d,h)=>{var w,V,K;function Ae(){kl(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{kl(),h(re(y,"network-request-failed"))},timeout:cc.get()})}if(null===(V=null===(w=Jr().gapi)||void 0===w?void 0:w.iframes)||void 0===V?void 0:V.Iframe)d(gapi.iframes.getContext());else{if(!(null===(K=Jr().gapi)||void 0===K?void 0:K.load)){const nt=ie("iframefcb");return Jr()[nt]=()=>{gapi.load?Ae():h(re(y,"network-request-failed"))},q(`https://apis.google.com/js/api.js?onload=${nt}`)}Ae()}}).catch(d=>{throw ta=null,d})}(y),ta}const Wa=new Zn(5e3,15e3),rd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function id(y){const d=y.config;Ze(d.authDomain,y,"auth-domain-config-required");const h=d.emulator?cn(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:d.apiKey,appName:y.name,v:Se.SDK_VERSION},V=dc.get(y.config.apiHost);V&&(w.eid=V);const K=y._getFrameworks();return K.length&&(w.fw=K.join(",")),`${h}?${(0,g.xO)(w).slice(1)}`}function za(){return(za=(0,D.Z)(function*(y){const d=yield Fl(y),h=Jr().gapi;return Ze(h,y,"internal-error"),d.open({where:document.body,url:id(y),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rd,dontclear:!0},w=>new Promise(function(){var V=(0,D.Z)(function*(K,Ae){yield w.restyle({setHideOnLeave:!1});const nt=re(y,"network-request-failed"),St=Jr().setTimeout(()=>{Ae(nt)},Wa.get());function Jt(){Jr().clearTimeout(St),K(w)}w.ping(Jt).then(Jt,()=>{Ae(nt)})});return function(K,Ae){return V.apply(this,arguments)}}()))})).apply(this,arguments)}const Ru={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class od{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Za(y,d,h,w,V,K){Ze(y.config.authDomain,y,"auth-domain-config-required"),Ze(y.config.apiKey,y,"invalid-api-key");const Ae={apiKey:y.config.apiKey,appName:y.name,authType:h,redirectUrl:w,v:Se.SDK_VERSION,eventId:V};if(d instanceof zi){d.setDefaultLanguage(y.languageCode),Ae.providerId=d.providerId||"",(0,g.xb)(d.getCustomParameters())||(Ae.customParameters=JSON.stringify(d.getCustomParameters()));for(const[St,Jt]of Object.entries(K||{}))Ae[St]=Jt}if(d instanceof ts){const St=d.getScopes().filter(Jt=>""!==Jt);St.length>0&&(Ae.scopes=St.join(","))}y.tenantId&&(Ae.tid=y.tenantId);const nt=Ae;for(const St of Object.keys(nt))void 0===nt[St]&&delete nt[St];return`${function({config:y}){return y.emulator?cn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,g.xO)(nt).slice(1)}`}const su="webStorageSupport";class Mu extends class{constructor(d){this.factorId=d}_process(d,h,w){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,w);case"signin":return this._finalizeSignIn(d,h.credential);default:return Ve("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Mu(d)}_finalizeEnroll(d,h,w){return function(y,d){return tn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(y,d))}(d,{idToken:h,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function(y,d){return tn(y,"POST","/v2/accounts/mfaSignIn:finalize",Lt(y,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nu=(()=>{class y{constructor(){}static assertion(h){return Mu._fromCredential(h)}}return y.FACTOR_ID="phone",y})();var y,Oa="@firebase/auth";class ud{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,D.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(w=>{var V;d((null===(V=w)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);!h||(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ou(){return window}function na(){return(na=(0,D.Z)(function*(y,d,h){var w;const{BuildInfo:V}=Ou();Re(d.sessionId,"AuthEvent did not contain a session ID");const K=yield Gf(d.sessionId),Ae={};return jr()?Ae.ibi=V.packageName:zr()?Ae.apn=V.packageName:Qe(y,"operation-not-supported-in-this-environment"),V.displayName&&(Ae.appDisplayName=V.displayName),Ae.sessionId=K,Za(y,h,d.type,void 0,null!==(w=d.eventId)&&void 0!==w?w:void 0,Ae)})).apply(this,arguments)}function Ji(){return(Ji=(0,D.Z)(function*(y){const{BuildInfo:d}=Ou(),h={};jr()?h.iosBundleId=d.packageName:zr()?h.androidPackageName=d.packageName:Qe(y,"operation-not-supported-in-this-environment"),yield Hi(y,h)})).apply(this,arguments)}function Mi(){return(Mi=(0,D.Z)(function*(y,d,h){const{cordova:w}=Ou();let V=()=>{};try{yield new Promise((K,Ae)=>{let nt=null;function St(){var Sn;K();const ys=null===(Sn=w.plugins.browsertab)||void 0===Sn?void 0:Sn.close;"function"==typeof ys&&ys(),"function"==typeof(null==h?void 0:h.close)&&h.close()}function Jt(){nt||(nt=window.setTimeout(()=>{Ae(re(y,"redirect-cancelled-by-user"))},2e3))}function Dn(){"visible"===(null==document?void 0:document.visibilityState)&&Jt()}d.addPassiveListener(St),document.addEventListener("resume",Jt,!1),zr()&&document.addEventListener("visibilitychange",Dn,!1),V=()=>{d.removePassiveListener(St),document.removeEventListener("resume",Jt,!1),document.removeEventListener("visibilitychange",Dn,!1),nt&&window.clearTimeout(nt)}})}finally{V()}})).apply(this,arguments)}function Gf(y){return fo.apply(this,arguments)}function fo(){return(fo=(0,D.Z)(function*(y){const d=qf(y),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(V=>V.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qf(y){if(Re(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),h=new Uint8Array(d);for(let w=0;w<y.length;w++)h[w]=y.charCodeAt(w);return h}y="Browser",(0,Se._registerComponent)(new Fe.wA("auth",(d,{options:h})=>{const w=d.getProvider("app").getImmediate(),{apiKey:V,authDomain:K}=w.options;return(Ae=>{Ze(V&&!V.includes(":"),"invalid-api-key",{appName:Ae.name}),Ze(!(null==K?void 0:K.includes(":")),"argument-error",{appName:Ae.name});const nt={apiKey:V,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dr(y)},St=new as(Ae,nt);return function(y,d){const h=(null==d?void 0:d.persistence)||[],w=(Array.isArray(h)?h:[h]).map(Te);(null==d?void 0:d.errorMap)&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(w,null==d?void 0:d.popupRedirectResolver)}(St,h),St})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,w)=>{d.getProvider("auth-internal").initialize()})),(0,Se._registerComponent)(new Fe.wA("auth-internal",d=>{const h=On(d.getProvider("auth").getImmediate());return new ud(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Se.registerVersion)(Oa,"0.18.3",void 0),(0,Se.registerVersion)(Oa,"0.18.3","esm2017");class Wf extends Ga{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,D.Z)(function*(){yield d.initPromise})()}}function Wr(y){return ku.apply(this,arguments)}function ku(){return(ku=(0,D.Z)(function*(y){const d=yield pa()._get(Fu(y));return d&&(yield pa()._remove(Fu(y))),d})).apply(this,arguments)}function Io(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const w=Math.floor(Math.random()*d.length);y.push(d.charAt(w))}return y.join("")}function pa(){return Te(Vo)}function Fu(y){return rn("authEvent",y.config.apiKey,y.name)}function gc(y){if(!(null==y?void 0:y.includes("?")))return{};const[d,...h]=y.split("?");return(0,g.zd)(h.join("?"))}function yc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:re("no-auth-event")}}function vc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ec(y=(0,g.z$)()){return!("file:"!==vc()&&"ionic:"!==vc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function jl(){try{const y=self.localStorage,d=Ba();if(y)return y.setItem(d,"1"),y.removeItem(d),!function(y=(0,g.z$)()){return(0,g.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,g.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,g.hl)()}catch(y){return Lu()&&(0,g.hl)()}return!1}function Lu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function wi(){return("http:"===vc()||"https:"===vc()||(0,g.ru)()||Ec())&&!((0,g.b$)()||(0,g.UG)())&&jl()&&!Lu()}function pd(){return Ec()&&"undefined"!=typeof document}function $l(){return($l=(0,D.Z)(function*(){return!!pd()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Co={LOCAL:"local",NONE:"none",SESSION:"session"},au=Ze,gd="persistence";function bc(y){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,D.Z)(function*(y){yield y._initializationPromise;const d=Yf(),h=rn(gd,y.config.apiKey,y.name);(null==d?void 0:d.sessionStorage)&&d.sessionStorage.setItem(h,y._getPersistence())})).apply(this,arguments)}function Yf(){return"undefined"!=typeof window?window:null}const pl=Ze;class Gi{constructor(){this.browserResolver=Te(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=co,this._completeRedirectFn=ea}_openPopup(d,h,w,V){var K=this;return(0,D.Z)(function*(){var Ae;Re(null===(Ae=K.eventManagers[d._key()])||void 0===Ae?void 0:Ae.manager,"_initialize() not called before _openPopup()");const nt=Za(d,h,w,Rt(),V);return function(y,d,h,w=500,V=600){const K=Math.max((window.screen.availHeight-V)/2,0).toString(),Ae=Math.max((window.screen.availWidth-w)/2,0).toString();let nt="";const St=Object.assign(Object.assign({},Ru),{width:w.toString(),height:V.toString(),top:K,left:Ae}),Jt=(0,g.z$)().toLowerCase();h&&(nt=Pi(Jt)?"_blank":h),ei(Jt)&&(d=d||"http://localhost",St.scrollbars="yes");const Dn=Object.entries(St).reduce((ys,[po,ct])=>`${ys}${po}=${ct},`,"");if(function(y=(0,g.z$)()){var d;return jr(y)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Jt)&&"_self"!==nt)return function(y,d){const h=document.createElement("a");h.href=y,h.target=d;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(w)}(d||"",nt),new od(null);const Sn=window.open(d||"",nt,Dn);Ze(Sn,y,"popup-blocked");try{Sn.focus()}catch(ys){}return new od(Sn)}(d,nt,Ba())})()}_openRedirect(d,h,w,V){var K=this;return(0,D.Z)(function*(){return yield K._originValidation(d),y=Za(d,h,w,Rt(),V),Jr().location.href=y,new Promise(()=>{});var y})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:V,promise:K}=this.eventManagers[h];return V?Promise.resolve(V):(Re(K,"If manager is not set, promise should be"),K)}const w=this.initAndGetManager(d);return this.eventManagers[h]={promise:w},w}initAndGetManager(d){var h=this;return(0,D.Z)(function*(){const w=yield function(y){return za.apply(this,arguments)}(d),V=new Ga(d);return w.register("authEvent",K=>(Ze(null==K?void 0:K.authEvent,d,"invalid-auth-event"),{status:V.onEvent(K.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:V},h.iframes[d._key()]=w,V})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send(su,{type:su},V=>{var K;const Ae=null===(K=null==V?void 0:V[0])||void 0===K?void 0:K[su];void 0!==Ae&&h(!!Ae),Qe(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function(y){return Su.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return Gr()||os()||jr()}}),this.cordovaResolver=Te(class{constructor(){this._redirectPersistence=co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ea}_initialize(d){var h=this;return(0,D.Z)(function*(){const w=d._key();let V=h.eventManagers.get(w);return V||(V=new Wf(d),h.eventManagers.set(w,V),h.attachCallbackListeners(d,V)),V})()}_openPopup(d){Qe(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,w,V){var K=this;return(0,D.Z)(function*(){!function(y){var d,h,w,V,K,Ae,nt,St,Jt,Dn;const Sn=Ou();Ze("function"==typeof(null===(d=null==Sn?void 0:Sn.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ze(void 0!==(null===(h=null==Sn?void 0:Sn.BuildInfo)||void 0===h?void 0:h.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ze("function"==typeof(null===(K=null===(V=null===(w=null==Sn?void 0:Sn.cordova)||void 0===w?void 0:w.plugins)||void 0===V?void 0:V.browsertab)||void 0===K?void 0:K.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ze("function"==typeof(null===(St=null===(nt=null===(Ae=null==Sn?void 0:Sn.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===St?void 0:St.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ze("function"==typeof(null===(Dn=null===(Jt=null==Sn?void 0:Sn.cordova)||void 0===Jt?void 0:Jt.InAppBrowser)||void 0===Dn?void 0:Dn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Ae=yield K._initialize(d);yield Ae.initialized(),Ae.resetRedirect(),si.clear(),yield K._originValidation(d);const nt=function(y,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:Io(),postBody:null,tenantId:y.tenantId,error:re(y,"no-auth-event")}}(d,w,V);yield function(y,d){return pa()._set(Fu(y),d)}(d,nt);const St=yield function(y,d,h){return na.apply(this,arguments)}(d,nt,h),Jt=yield function(y){const{cordova:d}=Ou();return new Promise(h=>{d.plugins.browsertab.isAvailable(w=>{let V=null;w?d.plugins.browsertab.openUrl(y):V=d.InAppBrowser.open(y,function(y=(0,g.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),h(V)})})}(St);return function(y,d,h){return Mi.apply(this,arguments)}(d,Ae,Jt)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function(y){return Ji.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:w,handleOpenURL:V,BuildInfo:K}=Ou(),Ae=setTimeout((0,D.Z)(function*(){yield Wr(d),h.onEvent(yc())}),500),nt=function(){var Dn=(0,D.Z)(function*(Sn){clearTimeout(Ae);const ys=yield Wr(d);let po=null;ys&&(null==Sn?void 0:Sn.url)&&(po=function(y,d){var h,w;const V=function(y){const d=gc(y),h=d.link?decodeURIComponent(d.link):void 0,w=gc(h).link,V=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return gc(V).link||V||w||h||y}(d);if(V.includes("/__/auth/callback")){const K=gc(V),Ae=K.firebaseError?function(y){try{return JSON.parse(y)}catch(d){return null}}(decodeURIComponent(K.firebaseError)):null,nt=null===(w=null===(h=null==Ae?void 0:Ae.code)||void 0===h?void 0:h.split("auth/"))||void 0===w?void 0:w[1],St=nt?re(nt):null;return St?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:V,postBody:null}}return null}(ys,Sn.url)),h.onEvent(po||yc())});return function(ys){return Dn.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,nt);const St=V,Jt=`${K.packageName.toLowerCase()}://`;Ou().handleOpenURL=function(){var Dn=(0,D.Z)(function*(Sn){if(Sn.toLowerCase().startsWith(Jt)&&nt({url:Sn}),"function"==typeof St)try{St(Sn)}catch(ys){console.error(ys)}});return function(Sn){return Dn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=co,this._completeRedirectFn=ea}_initialize(d){var h=this;return(0,D.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,w,V){var K=this;return(0,D.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._openPopup(d,h,w,V)})()}_openRedirect(d,h,w,V){var K=this;return(0,D.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._openRedirect(d,h,w,V)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return pd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,D.Z)(function*(){if(d.underlyingResolver)return;const h=yield function(){return $l.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function Hl(y){return y.unwrap()}function Eh(y){return ga(y)}function ga(y){const{_tokenResponse:d}=y instanceof g.ZR?y.customData:y;if(!d)return null;if(!(y instanceof g.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Zt.credentialFromResult(y);const h=d.providerId;if(!h||"password"===h)return null;let w;switch(h){case"google.com":w=ds;break;case"facebook.com":w=_o;break;case"github.com":w=hs;break;case"twitter.com":w=Zi;break;default:const{oauthIdToken:V,oauthAccessToken:K,oauthTokenSecret:Ae,pendingToken:nt,nonce:St}=d;return K||Ae||V||nt?nt?h.startsWith("saml.")?fs._create(h,nt):Ie._fromParams({providerId:h,signInMethod:h,pendingToken:nt,idToken:V,accessToken:K}):new cs(h).credential({idToken:V,accessToken:K,rawNonce:St}):null}return y instanceof g.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function oo(y,d){return d.catch(h=>{throw h instanceof g.ZR&&function(y,d){var h;const w=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new _d(y,function(y,d){var h;const w=(0,g.m9)(y),V=d;return Ze(d.operationType,w,"argument-error"),Ze(null===(h=V.serverResponse)||void 0===h?void 0:h.mfaPendingCredential,w,"argument-error"),Zo._fromError(w,V)}(y,d));else if(w){const V=ga(d),K=d;V&&(K.credential=V,K.tenantId=w.tenantId||void 0,K.email=w.email||void 0,K.phoneNumber=w.phoneNumber||void 0)}}(y,h),h}).then(h=>{const V=h.user;return{operationType:h.operationType,credential:Eh(h),additionalUserInfo:Ki(h),user:Ss.getOrCreate(V)}})}function md(y,d){return yd.apply(this,arguments)}function yd(){return(yd=(0,D.Z)(function*(y,d){const h=yield d;return{verificationId:h.verificationId,confirm:w=>oo(y,h.confirm(w))}})).apply(this,arguments)}class _d{constructor(d,h){this.resolver=h,this.auth=function(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return oo(Hl(this.auth),this.resolver.resolveSignIn(d))}}class Ss{constructor(d){this._delegate=d,this.multiFactor=function(y){const d=(0,g.m9)(y);return Oo.has(d)||Oo.set(d,oa._fromUser(d)),Oo.get(d)}(d)}static getOrCreate(d){return Ss.USER_MAP.has(d)||Ss.USER_MAP.set(d,new Ss(d)),Ss.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,D.Z)(function*(){return oo(h.auth,vr(h._delegate,d))})()}linkWithPhoneNumber(d,h){var w=this;return(0,D.Z)(function*(){return md(w.auth,function(y,d,h){return Ha.apply(this,arguments)}(w._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,D.Z)(function*(){return oo(h.auth,function(y,d,h){return Ra.apply(this,arguments)}(h._delegate,d,Gi))})()}linkWithRedirect(d){var h=this;return(0,D.Z)(function*(){return yield bc(On(h.auth)),function(y,d,h){return function(y,d,h){return so.apply(this,arguments)}(y,d,h)}(h._delegate,d,Gi)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,D.Z)(function*(){return oo(h.auth,Er(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return md(this.auth,function(y,d,h){return ol.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return oo(this.auth,function(y,d,h){return Xo.apply(this,arguments)}(this._delegate,d,Gi))}reauthenticateWithRedirect(d){var h=this;return(0,D.Z)(function*(){return yield bc(On(h.auth)),function(y,d,h){return function(y,d,h){return Ts.apply(this,arguments)}(y,d,h)}(h._delegate,d,Gi)})()}sendEmailVerification(d){return function(y,d){return li.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,D.Z)(function*(){return yield function(y,d){return ns.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function(y,d){return I((0,g.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function(y,d){return I((0,g.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function(y,d){return al.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function(y,d){return eo.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function(y,d,h){return br.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ss.USER_MAP=new WeakMap;const gl=Ze;let vd=(()=>{class y{constructor(h,w){if(this.app=h,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:V}=h.options;gl(V,"invalid-api-key",{appName:h.name});let K=[Pn];if("undefined"!=typeof window){K=function(y,d){const h=Yf();if(!(null==h?void 0:h.sessionStorage))return[];const w=rn(gd,y,d);switch(h.sessionStorage.getItem(w)){case Co.NONE:return[Pn];case Co.LOCAL:return[fi,co];case Co.SESSION:return[co];default:return[]}}(V,h.name);for(const nt of[fi,Vo,co])K.includes(nt)||K.push(nt)}gl(V,"invalid-api-key",{appName:h.name});const Ae="undefined"!=typeof window?Gi:void 0;this._delegate=w.initialize({options:{persistence:K,popupRedirectResolver:Ae}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ss.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,w){!function(y,d,h){const w=On(y);Ze(w._canInitEmulator,w,"emulator-config-failed"),Ze(/^https?:\/\//.test(d),w,"invalid-emulator-scheme");const V=!!(null==h?void 0:h.disableWarnings),K=Ht(d),{host:Ae,port:nt}=function(y){const d=Ht(y),h=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!h)return{host:"",port:null};const w=h[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(w);if(V){const K=V[1];return{host:K,port:Zr(w.substr(K.length+1))}}{const[K,Ae]=w.split(":");return{host:K,port:Zr(Ae)}}}(d);w.config.emulator={url:`${K}//${Ae}${null===nt?"":`:${nt}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Ae,port:nt,protocol:K.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function(){function y(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,h,w)}applyActionCode(h){return function(y,d){return No.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return j(this._delegate,h)}confirmPasswordReset(h,w){return function(y,d,h){return un.apply(this,arguments)}(this._delegate,h,w)}createUserWithEmailAndPassword(h,w){var V=this;return(0,D.Z)(function*(){return oo(V._delegate,function(y,d,h){return se.apply(this,arguments)}(V._delegate,h,w))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function(y,d){return ii.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function(y,d){const h=ls.parseLink(d);return"EMAIL_SIGNIN"===(null==h?void 0:h.operation)}(0,h)}getRedirectResult(){var h=this;return(0,D.Z)(function*(){gl(wi(),h._delegate,"operation-not-supported-in-this-environment");const w=yield function(y,d){return As.apply(this,arguments)}(h._delegate,Gi);return w?oo(h._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function(y,d){On(y)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,w,V){const{next:K,error:Ae,complete:nt}=ma(h,w,V);return this._delegate.onAuthStateChanged(K,Ae,nt)}onIdTokenChanged(h,w,V){const{next:K,error:Ae,complete:nt}=ma(h,w,V);return this._delegate.onIdTokenChanged(K,Ae,nt)}sendSignInLinkToEmail(h,w){return function(y,d,h){return gt.apply(this,arguments)}(this._delegate,h,w)}sendPasswordResetEmail(h,w){return function(y,d,h){return Ws.apply(this,arguments)}(this._delegate,h,w||void 0)}setPersistence(h){var w=this;return(0,D.Z)(function*(){let V;switch(function(y,d){au(Object.values(Co).includes(d),y,"invalid-persistence-type"),(0,g.b$)()?au(d!==Co.SESSION,y,"unsupported-persistence-type"):(0,g.UG)()?au(d===Co.NONE,y,"unsupported-persistence-type"):Lu()?au(d===Co.NONE||d===Co.LOCAL&&(0,g.hl)(),y,"unsupported-persistence-type"):au(d===Co.NONE||jl(),y,"unsupported-persistence-type")}(w._delegate,h),h){case Co.SESSION:V=co;break;case Co.LOCAL:V=(yield Te(fi)._isAvailable())?fi:Vo;break;case Co.NONE:V=Pn;break;default:return Qe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(V)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return oo(this._delegate,function(y){return ai.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return oo(this._delegate,Ut(this._delegate,h))}signInWithCustomToken(h){return oo(this._delegate,function(y,d){return Fr.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,w){return oo(this._delegate,function(y,d,h){return Ut((0,g.m9)(y),Js.credential(d,h))}(this._delegate,h,w))}signInWithEmailLink(h,w){return oo(this._delegate,function(y,d,h){return nr.apply(this,arguments)}(this._delegate,h,w))}signInWithPhoneNumber(h,w){return md(this._delegate,function(y,d,h){return Jo.apply(this,arguments)}(this._delegate,h,w))}signInWithPopup(h){var w=this;return(0,D.Z)(function*(){return gl(wi(),w._delegate,"operation-not-supported-in-this-environment"),oo(w._delegate,function(y,d,h){return io.apply(this,arguments)}(w._delegate,h,Gi))})()}signInWithRedirect(h){var w=this;return(0,D.Z)(function*(){return gl(wi(),w._delegate,"operation-not-supported-in-this-environment"),yield bc(w._delegate),function(y,d,h){return function(y,d,h){return Wt.apply(this,arguments)}(y,d,h)}(w._delegate,h,Gi)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function(y,d){return oe.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Co,y})();function ma(y,d,h){let w=y;"function"!=typeof y&&({next:w,error:d,complete:h}=y);const V=w;return{next:Ae=>V(Ae&&Ss.getOrCreate(Ae)),error:d,complete:h}}class Ed{constructor(){this.providerId="phone",this._delegate=new Zt(Hl(O.Z.auth()))}static credential(d,h){return Zt.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}Ed.PHONE_SIGN_IN_METHOD=Zt.PHONE_SIGN_IN_METHOD,Ed.PROVIDER_ID=Zt.PROVIDER_ID;const Ho=Ze;class uu{constructor(d,h,w=O.Z.app()){var V;Ho(null===(V=w.options)||void 0===V?void 0:V.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new $a(d,h,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new Fe.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),w=d.getProvider("auth");return new vd(h,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Js,FacebookAuthProvider:_o,GithubAuthProvider:hs,GoogleAuthProvider:ds,OAuthProvider:cs,PhoneAuthProvider:Ed,PhoneMultiFactorGenerator:Nu,RecaptchaVerifier:uu,TwitterAuthProvider:Zi,Auth:vd,AuthCredential:mr,Error:g.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.1.6")}(O.Z)},6676:function(Pt,Ye){!function(B){"use strict";function D(me){return Array.prototype.slice.call(me)}function O(me){return new Promise(function(Le,qe){me.onsuccess=function(){Le(me.result)},me.onerror=function(){qe(me.error)}})}function g(me,Le,qe){var $e,Qe=new Promise(function(re,ut){O($e=me[Le].apply(me,qe)).then(re,ut)});return Qe.request=$e,Qe}function Se(me,Le,qe){var $e=g(me,Le,qe);return $e.then(function(Qe){if(Qe)return new J(Qe,$e.request)})}function be(me,Le,qe){qe.forEach(function($e){Object.defineProperty(me.prototype,$e,{get:function(){return this[Le][$e]},set:function(Qe){this[Le][$e]=Qe}})})}function de(me,Le,qe,$e){$e.forEach(function(Qe){Qe in qe.prototype&&(me.prototype[Qe]=function(){return g(this[Le],Qe,arguments)})})}function Fe(me,Le,qe,$e){$e.forEach(function(Qe){Qe in qe.prototype&&(me.prototype[Qe]=function(){return this[Le][Qe].apply(this[Le],arguments)})})}function ve(me,Le,qe,$e){$e.forEach(function(Qe){Qe in qe.prototype&&(me.prototype[Qe]=function(){return Se(this[Le],Qe,arguments)})})}function ae(me){this._index=me}function J(me,Le){this._cursor=me,this._request=Le}function X(me){this._store=me}function he(me){this._tx=me,this.complete=new Promise(function(Le,qe){me.oncomplete=function(){Le()},me.onerror=function(){qe(me.error)},me.onabort=function(){qe(me.error)}})}function ge(me,Le,qe){this._db=me,this.oldVersion=Le,this.transaction=new he(qe)}function ke(me){this._db=me}be(ae,"_index",["name","keyPath","multiEntry","unique"]),de(ae,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ve(ae,"_index",IDBIndex,["openCursor","openKeyCursor"]),be(J,"_cursor",["direction","key","primaryKey","value"]),de(J,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(me){me in IDBCursor.prototype&&(J.prototype[me]=function(){var Le=this,qe=arguments;return Promise.resolve().then(function(){return Le._cursor[me].apply(Le._cursor,qe),O(Le._request).then(function($e){if($e)return new J($e,Le._request)})})})}),X.prototype.createIndex=function(){return new ae(this._store.createIndex.apply(this._store,arguments))},X.prototype.index=function(){return new ae(this._store.index.apply(this._store,arguments))},be(X,"_store",["name","keyPath","indexNames","autoIncrement"]),de(X,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ve(X,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Fe(X,"_store",IDBObjectStore,["deleteIndex"]),he.prototype.objectStore=function(){return new X(this._tx.objectStore.apply(this._tx,arguments))},be(he,"_tx",["objectStoreNames","mode"]),Fe(he,"_tx",IDBTransaction,["abort"]),ge.prototype.createObjectStore=function(){return new X(this._db.createObjectStore.apply(this._db,arguments))},be(ge,"_db",["name","version","objectStoreNames"]),Fe(ge,"_db",IDBDatabase,["deleteObjectStore","close"]),ke.prototype.transaction=function(){return new he(this._db.transaction.apply(this._db,arguments))},be(ke,"_db",["name","version","objectStoreNames"]),Fe(ke,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(me){[X,ae].forEach(function(Le){me in Le.prototype&&(Le.prototype[me.replace("open","iterate")]=function(){var qe=D(arguments),$e=qe[qe.length-1],Qe=this._store||this._index,re=Qe[me].apply(Qe,qe.slice(0,-1));re.onsuccess=function(){$e(re.result)}})})}),[ae,X].forEach(function(me){me.prototype.getAll||(me.prototype.getAll=function(Le,qe){var $e=this,Qe=[];return new Promise(function(re){$e.iterateCursor(Le,function(ut){ut?(Qe.push(ut.value),void 0===qe||Qe.length!=qe?ut.continue():re(Qe)):re(Qe)})})})}),B.openDb=function(me,Le,qe){var $e=g(indexedDB,"open",[me,Le]),Qe=$e.request;return Qe&&(Qe.onupgradeneeded=function(re){qe&&qe(new ge(Qe.result,re.oldVersion,Qe.transaction))}),$e.then(function(re){return new ke(re)})},B.deleteDb=function(me){return g(indexedDB,"deleteDatabase",[me])},Object.defineProperty(B,"__esModule",{value:!0})}(Ye)},7574:(Pt,Ye,B)=>{"use strict";B.d(Ye,{y:()=>X});var D=B(7393),g=B(9181),Se=B(6490),de=B(6554),Fe=B(4487);var J=B(2494);let X=(()=>{class ge{constructor(He){this._isScalar=!1,He&&(this._subscribe=He)}lift(He){const je=new ge;return je.source=this,je.operator=He,je}subscribe(He,je,me){const{operator:Le}=this,qe=function(ge,ke,He){if(ge){if(ge instanceof D.L)return ge;if(ge[g.b])return ge[g.b]()}return ge||ke||He?new D.L(ge,ke,He):new D.L(Se.c)}(He,je,me);if(qe.add(Le?Le.call(qe,this.source):this.source||J.v.useDeprecatedSynchronousErrorHandling&&!qe.syncErrorThrowable?this._subscribe(qe):this._trySubscribe(qe)),J.v.useDeprecatedSynchronousErrorHandling&&qe.syncErrorThrowable&&(qe.syncErrorThrowable=!1,qe.syncErrorThrown))throw qe.syncErrorValue;return qe}_trySubscribe(He){try{return this._subscribe(He)}catch(je){J.v.useDeprecatedSynchronousErrorHandling&&(He.syncErrorThrown=!0,He.syncErrorValue=je),function(ge){for(;ge;){const{closed:ke,destination:He,isStopped:je}=ge;if(ke||je)return!1;ge=He&&He instanceof D.L?He:null}return!0}(He)?He.error(je):console.warn(je)}}forEach(He,je){return new(je=he(je))((me,Le)=>{let qe;qe=this.subscribe($e=>{try{He($e)}catch(Qe){Le(Qe),qe&&qe.unsubscribe()}},Le,me)})}_subscribe(He){const{source:je}=this;return je&&je.subscribe(He)}[de.L](){return this}pipe(...He){return 0===He.length?this:function(ge){return 0===ge.length?Fe.y:1===ge.length?ge[0]:function(He){return ge.reduce((je,me)=>me(je),He)}}(He)(this)}toPromise(He){return new(He=he(He))((je,me)=>{let Le;this.subscribe(qe=>Le=qe,qe=>me(qe),()=>je(Le))})}}return ge.create=ke=>new ge(ke),ge})();function he(ge){if(ge||(ge=J.v.Promise||Promise),!ge)throw new Error("no Promise impl found");return ge}},6490:(Pt,Ye,B)=>{"use strict";B.d(Ye,{c:()=>g});var D=B(2494),O=B(4449);const g={closed:!0,next(Se){},error(Se){if(D.v.useDeprecatedSynchronousErrorHandling)throw Se;(0,O.z)(Se)},complete(){}}},9765:(Pt,Ye,B)=>{"use strict";B.d(Ye,{Yc:()=>Fe,xQ:()=>ve});var D=B(7574),O=B(7393),g=B(5319),Se=B(7971),be=B(8858),de=B(9181);class Fe extends O.L{constructor(X){super(X),this.destination=X}}let ve=(()=>{class J extends D.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[de.b](){return new Fe(this)}lift(he){const ge=new ae(this,this);return ge.operator=he,ge}next(he){if(this.closed)throw new Se.N;if(!this.isStopped){const{observers:ge}=this,ke=ge.length,He=ge.slice();for(let je=0;je<ke;je++)He[je].next(he)}}error(he){if(this.closed)throw new Se.N;this.hasError=!0,this.thrownError=he,this.isStopped=!0;const{observers:ge}=this,ke=ge.length,He=ge.slice();for(let je=0;je<ke;je++)He[je].error(he);this.observers.length=0}complete(){if(this.closed)throw new Se.N;this.isStopped=!0;const{observers:he}=this,ge=he.length,ke=he.slice();for(let He=0;He<ge;He++)ke[He].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(he){if(this.closed)throw new Se.N;return super._trySubscribe(he)}_subscribe(he){if(this.closed)throw new Se.N;return this.hasError?(he.error(this.thrownError),g.w.EMPTY):this.isStopped?(he.complete(),g.w.EMPTY):(this.observers.push(he),new be.W(this,he))}asObservable(){const he=new D.y;return he.source=this,he}}return J.create=(X,he)=>new ae(X,he),J})();class ae extends ve{constructor(X,he){super(),this.destination=X,this.source=he}next(X){const{destination:he}=this;he&&he.next&&he.next(X)}error(X){const{destination:he}=this;he&&he.error&&this.destination.error(X)}complete(){const{destination:X}=this;X&&X.complete&&this.destination.complete()}_subscribe(X){const{source:he}=this;return he?this.source.subscribe(X):g.w.EMPTY}}},8858:(Pt,Ye,B)=>{"use strict";B.d(Ye,{W:()=>O});var D=B(5319);class O extends D.w{constructor(Se,be){super(),this.subject=Se,this.subscriber=be,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Se=this.subject,be=Se.observers;if(this.subject=null,!be||0===be.length||Se.isStopped||Se.closed)return;const de=be.indexOf(this.subscriber);-1!==de&&be.splice(de,1)}}},7393:(Pt,Ye,B)=>{"use strict";B.d(Ye,{L:()=>Fe});var D=B(9105),O=B(6490),g=B(5319),Se=B(9181),be=B(2494),de=B(4449);class Fe extends g.w{constructor(J,X,he){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=O.c;break;case 1:if(!J){this.destination=O.c;break}if("object"==typeof J){J instanceof Fe?(this.syncErrorThrowable=J.syncErrorThrowable,this.destination=J,J.add(this)):(this.syncErrorThrowable=!0,this.destination=new ve(this,J));break}default:this.syncErrorThrowable=!0,this.destination=new ve(this,J,X,he)}}[Se.b](){return this}static create(J,X,he){const ge=new Fe(J,X,he);return ge.syncErrorThrowable=!1,ge}next(J){this.isStopped||this._next(J)}error(J){this.isStopped||(this.isStopped=!0,this._error(J))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(J){this.destination.next(J)}_error(J){this.destination.error(J),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:J}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=J,this}}class ve extends Fe{constructor(J,X,he,ge){super(),this._parentSubscriber=J;let ke,He=this;(0,D.m)(X)?ke=X:X&&(ke=X.next,he=X.error,ge=X.complete,X!==O.c&&(He=Object.create(X),(0,D.m)(He.unsubscribe)&&this.add(He.unsubscribe.bind(He)),He.unsubscribe=this.unsubscribe.bind(this))),this._context=He,this._next=ke,this._error=he,this._complete=ge}next(J){if(!this.isStopped&&this._next){const{_parentSubscriber:X}=this;be.v.useDeprecatedSynchronousErrorHandling&&X.syncErrorThrowable?this.__tryOrSetError(X,this._next,J)&&this.unsubscribe():this.__tryOrUnsub(this._next,J)}}error(J){if(!this.isStopped){const{_parentSubscriber:X}=this,{useDeprecatedSynchronousErrorHandling:he}=be.v;if(this._error)he&&X.syncErrorThrowable?(this.__tryOrSetError(X,this._error,J),this.unsubscribe()):(this.__tryOrUnsub(this._error,J),this.unsubscribe());else if(X.syncErrorThrowable)he?(X.syncErrorValue=J,X.syncErrorThrown=!0):(0,de.z)(J),this.unsubscribe();else{if(this.unsubscribe(),he)throw J;(0,de.z)(J)}}}complete(){if(!this.isStopped){const{_parentSubscriber:J}=this;if(this._complete){const X=()=>this._complete.call(this._context);be.v.useDeprecatedSynchronousErrorHandling&&J.syncErrorThrowable?(this.__tryOrSetError(J,X),this.unsubscribe()):(this.__tryOrUnsub(X),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(J,X){try{J.call(this._context,X)}catch(he){if(this.unsubscribe(),be.v.useDeprecatedSynchronousErrorHandling)throw he;(0,de.z)(he)}}__tryOrSetError(J,X,he){if(!be.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{X.call(this._context,he)}catch(ge){return be.v.useDeprecatedSynchronousErrorHandling?(J.syncErrorValue=ge,J.syncErrorThrown=!0,!0):((0,de.z)(ge),!0)}return!1}_unsubscribe(){const{_parentSubscriber:J}=this;this._context=null,this._parentSubscriber=null,J.unsubscribe()}}},5319:(Pt,Ye,B)=>{"use strict";B.d(Ye,{w:()=>de});var D=B(9796),O=B(1555),g=B(9105);const be=(()=>{function ve(ae){return Error.call(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((J,X)=>`${X+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae,this}return ve.prototype=Object.create(Error.prototype),ve})();class de{constructor(ae){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ae&&(this._ctorUnsubscribe=!0,this._unsubscribe=ae)}unsubscribe(){let ae;if(this.closed)return;let{_parentOrParents:J,_ctorUnsubscribe:X,_unsubscribe:he,_subscriptions:ge}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,J instanceof de)J.remove(this);else if(null!==J)for(let ke=0;ke<J.length;++ke)J[ke].remove(this);if((0,g.m)(he)){X&&(this._unsubscribe=void 0);try{he.call(this)}catch(ke){ae=ke instanceof be?Fe(ke.errors):[ke]}}if((0,D.k)(ge)){let ke=-1,He=ge.length;for(;++ke<He;){const je=ge[ke];if((0,O.K)(je))try{je.unsubscribe()}catch(me){ae=ae||[],me instanceof be?ae=ae.concat(Fe(me.errors)):ae.push(me)}}}if(ae)throw new be(ae)}add(ae){let J=ae;if(!ae)return de.EMPTY;switch(typeof ae){case"function":J=new de(ae);case"object":if(J===this||J.closed||"function"!=typeof J.unsubscribe)return J;if(this.closed)return J.unsubscribe(),J;if(!(J instanceof de)){const ge=J;J=new de,J._subscriptions=[ge]}break;default:throw new Error("unrecognized teardown "+ae+" added to Subscription.")}let{_parentOrParents:X}=J;if(null===X)J._parentOrParents=this;else if(X instanceof de){if(X===this)return J;J._parentOrParents=[X,this]}else{if(-1!==X.indexOf(this))return J;X.push(this)}const he=this._subscriptions;return null===he?this._subscriptions=[J]:he.push(J),J}remove(ae){const J=this._subscriptions;if(J){const X=J.indexOf(ae);-1!==X&&J.splice(X,1)}}}var ve;function Fe(ve){return ve.reduce((ae,J)=>ae.concat(J instanceof be?J.errors:J),[])}de.EMPTY=((ve=new de).closed=!0,ve)},2494:(Pt,Ye,B)=>{"use strict";B.d(Ye,{v:()=>O});let D=!1;const O={Promise:void 0,set useDeprecatedSynchronousErrorHandling(g){if(g){const Se=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Se.stack)}else D&&console.log("RxJS: Back to a better error behavior. Thank you. <3");D=g},get useDeprecatedSynchronousErrorHandling(){return D}}},5345:(Pt,Ye,B)=>{"use strict";B.d(Ye,{IY:()=>Se,Ds:()=>de,ft:()=>ve});var D=B(7393),O=B(7574),g=B(7444);class Se extends D.L{constructor(J){super(),this.parent=J}_next(J){this.parent.notifyNext(J)}_error(J){this.parent.notifyError(J),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class de extends D.L{notifyNext(J){this.destination.next(J)}notifyError(J){this.destination.error(J)}notifyComplete(){this.destination.complete()}}function ve(ae,J){if(J.closed)return;if(ae instanceof O.y)return ae.subscribe(J);let X;try{X=(0,g.s)(ae)(J)}catch(he){J.error(he)}return X}},2441:(Pt,Ye,B)=>{"use strict";B.d(Ye,{c:()=>be,N:()=>de});var D=B(9765),O=B(7574),g=B(5319),Se=B(1307);class be extends O.y{constructor(X,he){super(),this.source=X,this.subjectFactory=he,this._refCount=0,this._isComplete=!1}_subscribe(X){return this.getSubject().subscribe(X)}getSubject(){const X=this._subject;return(!X||X.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let X=this._connection;return X||(this._isComplete=!1,X=this._connection=new g.w,X.add(this.source.subscribe(new Fe(this.getSubject(),this))),X.closed&&(this._connection=null,X=g.w.EMPTY)),X}refCount(){return(0,Se.x)()(this)}}const de=(()=>{const J=be.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:J._subscribe},_isComplete:{value:J._isComplete,writable:!0},getSubject:{value:J.getSubject},connect:{value:J.connect},refCount:{value:J.refCount}}})();class Fe extends D.Yc{constructor(X,he){super(X),this.connectable=he}_error(X){this._unsubscribe(),super._error(X)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const X=this.connectable;if(X){this.connectable=null;const he=X._connection;X._refCount=0,X._subject=null,X._connection=null,he&&he.unsubscribe()}}}},8071:(Pt,Ye,B)=>{"use strict";B.d(Ye,{z:()=>Se});var D=B(5917),O=B(3282);function Se(...be){return(0,O.J)(1)((0,D.of)(...be))}},9193:(Pt,Ye,B)=>{"use strict";B.d(Ye,{E:()=>O,c:()=>g});var D=B(7574);const O=new D.y(be=>be.complete());function g(be){return be?function(be){return new D.y(de=>be.schedule(()=>de.complete()))}(be):O}},4402:(Pt,Ye,B)=>{"use strict";B.d(Ye,{D:()=>He});var D=B(7574),O=B(7444),g=B(5319),Se=B(6554),Fe=B(4087),ve=B(377),X=B(4072),he=B(9489);function He(je,me){return me?function(je,me){if(null!=je){if(function(je){return je&&"function"==typeof je[Se.L]}(je))return function(je,me){return new D.y(Le=>{const qe=new g.w;return qe.add(me.schedule(()=>{const $e=je[Se.L]();qe.add($e.subscribe({next(Qe){qe.add(me.schedule(()=>Le.next(Qe)))},error(Qe){qe.add(me.schedule(()=>Le.error(Qe)))},complete(){qe.add(me.schedule(()=>Le.complete()))}}))})),qe})}(je,me);if((0,X.t)(je))return function(je,me){return new D.y(Le=>{const qe=new g.w;return qe.add(me.schedule(()=>je.then($e=>{qe.add(me.schedule(()=>{Le.next($e),qe.add(me.schedule(()=>Le.complete()))}))},$e=>{qe.add(me.schedule(()=>Le.error($e)))}))),qe})}(je,me);if((0,he.z)(je))return(0,Fe.r)(je,me);if(function(je){return je&&"function"==typeof je[ve.hZ]}(je)||"string"==typeof je)return function(je,me){if(!je)throw new Error("Iterable cannot be null");return new D.y(Le=>{const qe=new g.w;let $e;return qe.add(()=>{$e&&"function"==typeof $e.return&&$e.return()}),qe.add(me.schedule(()=>{$e=je[ve.hZ](),qe.add(me.schedule(function(){if(Le.closed)return;let Qe,re;try{const ut=$e.next();Qe=ut.value,re=ut.done}catch(ut){return void Le.error(ut)}re?Le.complete():(Le.next(Qe),this.schedule())}))})),qe})}(je,me)}throw new TypeError((null!==je&&typeof je||je)+" is not observable")}(je,me):je instanceof D.y?je:new D.y((0,O.s)(je))}},6693:(Pt,Ye,B)=>{"use strict";B.d(Ye,{n:()=>Se});var D=B(7574),O=B(5015),g=B(4087);function Se(be,de){return de?(0,g.r)(be,de):new D.y((0,O.V)(be))}},6682:(Pt,Ye,B)=>{"use strict";B.d(Ye,{T:()=>be});var D=B(7574),O=B(4869),g=B(3282),Se=B(6693);function be(...de){let Fe=Number.POSITIVE_INFINITY,ve=null,ae=de[de.length-1];return(0,O.K)(ae)?(ve=de.pop(),de.length>1&&"number"==typeof de[de.length-1]&&(Fe=de.pop())):"number"==typeof ae&&(Fe=de.pop()),null===ve&&1===de.length&&de[0]instanceof D.y?de[0]:(0,g.J)(Fe)((0,Se.n)(de,ve))}},5917:(Pt,Ye,B)=>{"use strict";B.d(Ye,{of:()=>Se});var D=B(4869),O=B(6693),g=B(4087);function Se(...be){let de=be[be.length-1];return(0,D.K)(de)?(be.pop(),(0,g.r)(be,de)):(0,O.n)(be)}},5242:(Pt,Ye,B)=>{"use strict";B.d(Ye,{d:()=>O});var D=B(7393);function O(be=null){return de=>de.lift(new g(be))}class g{constructor(de){this.defaultValue=de}call(de,Fe){return Fe.subscribe(new Se(de,this.defaultValue))}}class Se extends D.L{constructor(de,Fe){super(de),this.defaultValue=Fe,this.isEmpty=!0}_next(de){this.isEmpty=!1,this.destination.next(de)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(Pt,Ye,B)=>{"use strict";B.d(Ye,{h:()=>O});var D=B(7393);function O(be,de){return function(ve){return ve.lift(new g(be,de))}}class g{constructor(de,Fe){this.predicate=de,this.thisArg=Fe}call(de,Fe){return Fe.subscribe(new Se(de,this.predicate,this.thisArg))}}class Se extends D.L{constructor(de,Fe,ve){super(de),this.predicate=Fe,this.thisArg=ve,this.count=0}_next(de){let Fe;try{Fe=this.predicate.call(this.thisArg,de,this.count++)}catch(ve){return void this.destination.error(ve)}Fe&&this.destination.next(de)}}},8049:(Pt,Ye,B)=>{"use strict";B.d(Ye,{P:()=>Fe});var D=B(3410),O=B(5435),g=B(5257),Se=B(5242),be=B(4635),de=B(4487);function Fe(ve,ae){const J=arguments.length>=2;return X=>X.pipe(ve?(0,O.h)((he,ge)=>ve(he,ge,X)):de.y,(0,g.q)(1),J?(0,Se.d)(ae):(0,be.T)(()=>new D.K))}},8002:(Pt,Ye,B)=>{"use strict";B.d(Ye,{U:()=>O});var D=B(7393);function O(be,de){return function(ve){if("function"!=typeof be)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ve.lift(new g(be,de))}}class g{constructor(de,Fe){this.project=de,this.thisArg=Fe}call(de,Fe){return Fe.subscribe(new Se(de,this.project,this.thisArg))}}class Se extends D.L{constructor(de,Fe,ve){super(de),this.project=Fe,this.count=0,this.thisArg=ve||this}_next(de){let Fe;try{Fe=this.project.call(this.thisArg,de,this.count++)}catch(ve){return void this.destination.error(ve)}this.destination.next(Fe)}}},3282:(Pt,Ye,B)=>{"use strict";B.d(Ye,{J:()=>g});var D=B(9773),O=B(4487);function g(Se=Number.POSITIVE_INFINITY){return(0,D.zg)(O.y,Se)}},9773:(Pt,Ye,B)=>{"use strict";B.d(Ye,{zg:()=>Se});var D=B(8002),O=B(4402),g=B(5345);function Se(ve,ae,J=Number.POSITIVE_INFINITY){return"function"==typeof ae?X=>X.pipe(Se((he,ge)=>(0,O.D)(ve(he,ge)).pipe((0,D.U)((ke,He)=>ae(he,ke,ge,He))),J)):("number"==typeof ae&&(J=ae),X=>X.lift(new be(ve,J)))}class be{constructor(ae,J=Number.POSITIVE_INFINITY){this.project=ae,this.concurrent=J}call(ae,J){return J.subscribe(new de(ae,this.project,this.concurrent))}}class de extends g.Ds{constructor(ae,J,X=Number.POSITIVE_INFINITY){super(ae),this.project=J,this.concurrent=X,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ae){this.active<this.concurrent?this._tryNext(ae):this.buffer.push(ae)}_tryNext(ae){let J;const X=this.index++;try{J=this.project(ae,X)}catch(he){return void this.destination.error(he)}this.active++,this._innerSub(J)}_innerSub(ae){const J=new g.IY(this),X=this.destination;X.add(J);const he=(0,g.ft)(ae,J);he!==J&&X.add(he)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ae){this.destination.next(ae)}notifyComplete(){const ae=this.buffer;this.active--,ae.length>0?this._next(ae.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Pt,Ye,B)=>{"use strict";B.d(Ye,{ht:()=>X,QV:()=>ae});var D=B(7393),O=B(9193),g=B(5917),Se=B(7574);class ve{constructor(ke,He,je){this.kind=ke,this.value=He,this.error=je,this.hasValue="N"===ke}observe(ke){switch(this.kind){case"N":return ke.next&&ke.next(this.value);case"E":return ke.error&&ke.error(this.error);case"C":return ke.complete&&ke.complete()}}do(ke,He,je){switch(this.kind){case"N":return ke&&ke(this.value);case"E":return He&&He(this.error);case"C":return je&&je()}}accept(ke,He,je){return ke&&"function"==typeof ke.next?this.observe(ke):this.do(ke,He,je)}toObservable(){switch(this.kind){case"N":return(0,g.of)(this.value);case"E":return ge=this.error,new Se.y(He=>He.error(ge));case"C":return(0,O.c)()}var ge;throw new Error("unexpected notification kind value")}static createNext(ke){return void 0!==ke?new ve("N",ke):ve.undefinedValueNotification}static createError(ke){return new ve("E",void 0,ke)}static createComplete(){return ve.completeNotification}}function ae(ge,ke=0){return function(je){return je.lift(new J(ge,ke))}}ve.completeNotification=new ve("C"),ve.undefinedValueNotification=new ve("N",void 0);class J{constructor(ke,He=0){this.scheduler=ke,this.delay=He}call(ke,He){return He.subscribe(new X(ke,this.scheduler,this.delay))}}class X extends D.L{constructor(ke,He,je=0){super(ke),this.scheduler=He,this.delay=je}static dispatch(ke){const{notification:He,destination:je}=ke;He.observe(je),this.unsubscribe()}scheduleMessage(ke){this.destination.add(this.scheduler.schedule(X.dispatch,this.delay,new he(ke,this.destination)))}_next(ke){this.scheduleMessage(ve.createNext(ke))}_error(ke){this.scheduleMessage(ve.createError(ke)),this.unsubscribe()}_complete(){this.scheduleMessage(ve.createComplete()),this.unsubscribe()}}class he{constructor(ke,He){this.notification=ke,this.destination=He}}},1307:(Pt,Ye,B)=>{"use strict";B.d(Ye,{x:()=>O});var D=B(7393);function O(){return function(de){return de.lift(new g(de))}}class g{constructor(de){this.connectable=de}call(de,Fe){const{connectable:ve}=this;ve._refCount++;const ae=new Se(de,ve),J=Fe.subscribe(ae);return ae.closed||(ae.connection=ve.connect()),J}}class Se extends D.L{constructor(de,Fe){super(de),this.connectable=Fe}_unsubscribe(){const{connectable:de}=this;if(!de)return void(this.connection=null);this.connectable=null;const Fe=de._refCount;if(Fe<=0)return void(this.connection=null);if(de._refCount=Fe-1,Fe>1)return void(this.connection=null);const{connection:ve}=this,ae=de._connection;this.connection=null,ae&&(!ve||ae===ve)&&ae.unsubscribe()}}},2145:(Pt,Ye,B)=>{"use strict";B.d(Ye,{R:()=>O});var D=B(7393);function O(be,de){let Fe=!1;return arguments.length>=2&&(Fe=!0),function(ae){return ae.lift(new g(be,de,Fe))}}class g{constructor(de,Fe,ve=!1){this.accumulator=de,this.seed=Fe,this.hasSeed=ve}call(de,Fe){return Fe.subscribe(new Se(de,this.accumulator,this.seed,this.hasSeed))}}class Se extends D.L{constructor(de,Fe,ve,ae){super(de),this.accumulator=Fe,this._seed=ve,this.hasSeed=ae,this.index=0}get seed(){return this._seed}set seed(de){this.hasSeed=!0,this._seed=de}_next(de){if(this.hasSeed)return this._tryNext(de);this.seed=de,this.destination.next(de)}_tryNext(de){const Fe=this.index++;let ve;try{ve=this.accumulator(this.seed,de,Fe)}catch(ae){this.destination.error(ae)}this.seed=ve,this.destination.next(ve)}}},2066:(Pt,Ye,B)=>{"use strict";B.d(Ye,{d:()=>ae});var D=B(9765),O=B(7771),g=B(5319),Se=B(309),be=B(7971),de=B(8858);class Fe extends D.xQ{constructor(he=Number.POSITIVE_INFINITY,ge=Number.POSITIVE_INFINITY,ke){super(),this.scheduler=ke,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=he<1?1:he,this._windowTime=ge<1?1:ge,ge===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(he){if(!this.isStopped){const ge=this._events;ge.push(he),ge.length>this._bufferSize&&ge.shift()}super.next(he)}nextTimeWindow(he){this.isStopped||(this._events.push(new ve(this._getNow(),he)),this._trimBufferThenGetEvents()),super.next(he)}_subscribe(he){const ge=this._infiniteTimeWindow,ke=ge?this._events:this._trimBufferThenGetEvents(),He=this.scheduler,je=ke.length;let me;if(this.closed)throw new be.N;if(this.isStopped||this.hasError?me=g.w.EMPTY:(this.observers.push(he),me=new de.W(this,he)),He&&he.add(he=new Se.ht(he,He)),ge)for(let Le=0;Le<je&&!he.closed;Le++)he.next(ke[Le]);else for(let Le=0;Le<je&&!he.closed;Le++)he.next(ke[Le].value);return this.hasError?he.error(this.thrownError):this.isStopped&&he.complete(),me}_getNow(){return(this.scheduler||O.c).now()}_trimBufferThenGetEvents(){const he=this._getNow(),ge=this._bufferSize,ke=this._windowTime,He=this._events,je=He.length;let me=0;for(;me<je&&!(he-He[me].time<ke);)me++;return je>ge&&(me=Math.max(me,je-ge)),me>0&&He.splice(0,me),He}}class ve{constructor(he,ge){this.time=he,this.value=ge}}function ae(X,he,ge){let ke;return ke=X&&"object"==typeof X?X:{bufferSize:X,windowTime:he,refCount:!1,scheduler:ge},He=>He.lift(function({bufferSize:X=Number.POSITIVE_INFINITY,windowTime:he=Number.POSITIVE_INFINITY,refCount:ge,scheduler:ke}){let He,me,je=0,Le=!1,qe=!1;return function(Qe){let re;je++,!He||Le?(Le=!1,He=new Fe(X,he,ke),re=He.subscribe(this),me=Qe.subscribe({next(ut){He.next(ut)},error(ut){Le=!0,He.error(ut)},complete(){qe=!0,me=void 0,He.complete()}}),qe&&(me=void 0)):re=He.subscribe(this),this.add(()=>{je--,re.unsubscribe(),re=void 0,me&&!qe&&ge&&0===je&&(me.unsubscribe(),me=void 0,He=void 0)})}}(ke))}},9761:(Pt,Ye,B)=>{"use strict";B.d(Ye,{O:()=>g});var D=B(8071),O=B(4869);function g(...Se){const be=Se[Se.length-1];return(0,O.K)(be)?(Se.pop(),de=>(0,D.z)(Se,de,be)):de=>(0,D.z)(Se,de)}},3101:(Pt,Ye,B)=>{"use strict";B.d(Ye,{R:()=>me});var D=B(7574);let O=1;const g=Promise.resolve(),Se={};function be(qe){return qe in Se&&(delete Se[qe],!0)}const de={setImmediate(qe){const $e=O++;return Se[$e]=!0,g.then(()=>be($e)&&qe()),$e},clearImmediate(qe){be(qe)}};var ve=B(6465),J=B(6102);const ge=new class extends J.v{flush($e){this.active=!0,this.scheduled=void 0;const{actions:Qe}=this;let re,ut=-1,Gt=Qe.length;$e=$e||Qe.shift();do{if(re=$e.execute($e.state,$e.delay))break}while(++ut<Gt&&($e=Qe.shift()));if(this.active=!1,re){for(;++ut<Gt&&($e=Qe.shift());)$e.unsubscribe();throw re}}}(class extends ve.o{constructor($e,Qe){super($e,Qe),this.scheduler=$e,this.work=Qe}requestAsyncId($e,Qe,re=0){return null!==re&&re>0?super.requestAsyncId($e,Qe,re):($e.actions.push(this),$e.scheduled||($e.scheduled=de.setImmediate($e.flush.bind($e,null))))}recycleAsyncId($e,Qe,re=0){if(null!==re&&re>0||null===re&&this.delay>0)return super.recycleAsyncId($e,Qe,re);0===$e.actions.length&&(de.clearImmediate(Qe),$e.scheduled=void 0)}});var ke=B(9796);class je extends D.y{constructor($e,Qe=0,re=ge){var qe;super(),this.source=$e,this.delayTime=Qe,this.scheduler=re,(!(!(0,ke.k)(qe=Qe)&&qe-parseFloat(qe)+1>=0)||Qe<0)&&(this.delayTime=0),(!re||"function"!=typeof re.schedule)&&(this.scheduler=ge)}static create($e,Qe=0,re=ge){return new je($e,Qe,re)}static dispatch($e){const{source:Qe,subscriber:re}=$e;return this.add(Qe.subscribe(re))}_subscribe($e){return this.scheduler.schedule(je.dispatch,this.delayTime,{source:this.source,subscriber:$e})}}function me(qe,$e=0){return function(re){return re.lift(new Le(qe,$e))}}class Le{constructor($e,Qe){this.scheduler=$e,this.delay=Qe}call($e,Qe){return new je(Qe,this.delay,this.scheduler).subscribe($e)}}},3190:(Pt,Ye,B)=>{"use strict";B.d(Ye,{w:()=>Se});var D=B(8002),O=B(4402),g=B(5345);function Se(Fe,ve){return"function"==typeof ve?ae=>ae.pipe(Se((J,X)=>(0,O.D)(Fe(J,X)).pipe((0,D.U)((he,ge)=>ve(J,he,X,ge))))):ae=>ae.lift(new be(Fe))}class be{constructor(ve){this.project=ve}call(ve,ae){return ae.subscribe(new de(ve,this.project))}}class de extends g.Ds{constructor(ve,ae){super(ve),this.project=ae,this.index=0}_next(ve){let ae;const J=this.index++;try{ae=this.project(ve,J)}catch(X){return void this.destination.error(X)}this._innerSub(ae)}_innerSub(ve){const ae=this.innerSubscription;ae&&ae.unsubscribe();const J=new g.IY(this),X=this.destination;X.add(J),this.innerSubscription=(0,g.ft)(ve,J),this.innerSubscription!==J&&X.add(this.innerSubscription)}_complete(){const{innerSubscription:ve}=this;(!ve||ve.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ve){this.destination.next(ve)}}},5257:(Pt,Ye,B)=>{"use strict";B.d(Ye,{q:()=>Se});var D=B(7393),O=B(7108),g=B(9193);function Se(Fe){return ve=>0===Fe?(0,g.c)():ve.lift(new be(Fe))}class be{constructor(ve){if(this.total=ve,this.total<0)throw new O.W}call(ve,ae){return ae.subscribe(new de(ve,this.total))}}class de extends D.L{constructor(ve,ae){super(ve),this.total=ae,this.count=0}_next(ve){const ae=this.total,J=++this.count;J<=ae&&(this.destination.next(ve),J===ae&&(this.destination.complete(),this.unsubscribe()))}}},3342:(Pt,Ye,B)=>{"use strict";B.d(Ye,{b:()=>Se});var D=B(7393);function O(){}var g=B(9105);function Se(Fe,ve,ae){return function(X){return X.lift(new be(Fe,ve,ae))}}class be{constructor(ve,ae,J){this.nextOrObserver=ve,this.error=ae,this.complete=J}call(ve,ae){return ae.subscribe(new de(ve,this.nextOrObserver,this.error,this.complete))}}class de extends D.L{constructor(ve,ae,J,X){super(ve),this._tapNext=O,this._tapError=O,this._tapComplete=O,this._tapError=J||O,this._tapComplete=X||O,(0,g.m)(ae)?(this._context=this,this._tapNext=ae):ae&&(this._context=ae,this._tapNext=ae.next||O,this._tapError=ae.error||O,this._tapComplete=ae.complete||O)}_next(ve){try{this._tapNext.call(this._context,ve)}catch(ae){return void this.destination.error(ae)}this.destination.next(ve)}_error(ve){try{this._tapError.call(this._context,ve)}catch(ae){return void this.destination.error(ae)}this.destination.error(ve)}_complete(){try{this._tapComplete.call(this._context)}catch(ve){return void this.destination.error(ve)}return this.destination.complete()}}},4635:(Pt,Ye,B)=>{"use strict";B.d(Ye,{T:()=>g});var D=B(3410),O=B(7393);function g(Fe=de){return ve=>ve.lift(new Se(Fe))}class Se{constructor(ve){this.errorFactory=ve}call(ve,ae){return ae.subscribe(new be(ve,this.errorFactory))}}class be extends O.L{constructor(ve,ae){super(ve),this.errorFactory=ae,this.hasValue=!1}_next(ve){this.hasValue=!0,this.destination.next(ve)}_complete(){if(this.hasValue)return this.destination.complete();{let ve;try{ve=this.errorFactory()}catch(ae){ve=ae}this.destination.error(ve)}}}function de(){return new D.K}},4087:(Pt,Ye,B)=>{"use strict";B.d(Ye,{r:()=>g});var D=B(7574),O=B(5319);function g(Se,be){return new D.y(de=>{const Fe=new O.w;let ve=0;return Fe.add(be.schedule(function(){ve!==Se.length?(de.next(Se[ve++]),de.closed||Fe.add(this.schedule())):de.complete()})),Fe})}},6465:(Pt,Ye,B)=>{"use strict";B.d(Ye,{o:()=>g});var D=B(5319);class O extends D.w{constructor(be,de){super()}schedule(be,de=0){return this}}class g extends O{constructor(be,de){super(be,de),this.scheduler=be,this.work=de,this.pending=!1}schedule(be,de=0){if(this.closed)return this;this.state=be;const Fe=this.id,ve=this.scheduler;return null!=Fe&&(this.id=this.recycleAsyncId(ve,Fe,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(ve,this.id,de),this}requestAsyncId(be,de,Fe=0){return setInterval(be.flush.bind(be,this),Fe)}recycleAsyncId(be,de,Fe=0){if(null!==Fe&&this.delay===Fe&&!1===this.pending)return de;clearInterval(de)}execute(be,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Fe=this._execute(be,de);if(Fe)return Fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,de){let ve,Fe=!1;try{this.work(be)}catch(ae){Fe=!0,ve=!!ae&&ae||new Error(ae)}if(Fe)return this.unsubscribe(),ve}_unsubscribe(){const be=this.id,de=this.scheduler,Fe=de.actions,ve=Fe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ve&&Fe.splice(ve,1),null!=be&&(this.id=this.recycleAsyncId(de,be,null)),this.delay=null}}},6102:(Pt,Ye,B)=>{"use strict";B.d(Ye,{v:()=>O});let D=(()=>{class g{constructor(be,de=g.now){this.SchedulerAction=be,this.now=de}schedule(be,de=0,Fe){return new this.SchedulerAction(this,be).schedule(Fe,de)}}return g.now=()=>Date.now(),g})();class O extends D{constructor(Se,be=D.now){super(Se,()=>O.delegate&&O.delegate!==this?O.delegate.now():be()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Se,be=0,de){return O.delegate&&O.delegate!==this?O.delegate.schedule(Se,be,de):super.schedule(Se,be,de)}flush(Se){const{actions:be}=this;if(this.active)return void be.push(Se);let de;this.active=!0;do{if(de=Se.execute(Se.state,Se.delay))break}while(Se=be.shift());if(this.active=!1,de){for(;Se=be.shift();)Se.unsubscribe();throw de}}}},3637:(Pt,Ye,B)=>{"use strict";B.d(Ye,{z:()=>g,P:()=>Se});var D=B(6465);const g=new(B(6102).v)(D.o),Se=g},7771:(Pt,Ye,B)=>{"use strict";B.d(Ye,{c:()=>de,N:()=>be});var D=B(6465),g=B(6102);const be=new class extends g.v{}(class extends D.o{constructor(ve,ae){super(ve,ae),this.scheduler=ve,this.work=ae}schedule(ve,ae=0){return ae>0?super.schedule(ve,ae):(this.delay=ae,this.state=ve,this.scheduler.flush(this),this)}execute(ve,ae){return ae>0||this.closed?super.execute(ve,ae):this._execute(ve,ae)}requestAsyncId(ve,ae,J=0){return null!==J&&J>0||null===J&&this.delay>0?super.requestAsyncId(ve,ae,J):ve.flush(this)}}),de=be},377:(Pt,Ye,B)=>{"use strict";B.d(Ye,{hZ:()=>O});const O="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Pt,Ye,B)=>{"use strict";B.d(Ye,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Pt,Ye,B)=>{"use strict";B.d(Ye,{b:()=>D});const D="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Pt,Ye,B)=>{"use strict";B.d(Ye,{W:()=>O});const O=(()=>{function g(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return g.prototype=Object.create(Error.prototype),g})()},3410:(Pt,Ye,B)=>{"use strict";B.d(Ye,{K:()=>O});const O=(()=>{function g(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return g.prototype=Object.create(Error.prototype),g})()},7971:(Pt,Ye,B)=>{"use strict";B.d(Ye,{N:()=>O});const O=(()=>{function g(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return g.prototype=Object.create(Error.prototype),g})()},4449:(Pt,Ye,B)=>{"use strict";function D(O){setTimeout(()=>{throw O},0)}B.d(Ye,{z:()=>D})},4487:(Pt,Ye,B)=>{"use strict";function D(O){return O}B.d(Ye,{y:()=>D})},9796:(Pt,Ye,B)=>{"use strict";B.d(Ye,{k:()=>D});const D=Array.isArray||(O=>O&&"number"==typeof O.length)},9489:(Pt,Ye,B)=>{"use strict";B.d(Ye,{z:()=>D});const D=O=>O&&"number"==typeof O.length&&"function"!=typeof O},9105:(Pt,Ye,B)=>{"use strict";function D(O){return"function"==typeof O}B.d(Ye,{m:()=>D})},1555:(Pt,Ye,B)=>{"use strict";function D(O){return null!==O&&"object"==typeof O}B.d(Ye,{K:()=>D})},4072:(Pt,Ye,B)=>{"use strict";function D(O){return!!O&&"function"!=typeof O.subscribe&&"function"==typeof O.then}B.d(Ye,{t:()=>D})},4869:(Pt,Ye,B)=>{"use strict";function D(O){return O&&"function"==typeof O.schedule}B.d(Ye,{K:()=>D})},7444:(Pt,Ye,B)=>{"use strict";B.d(Ye,{s:()=>X});var D=B(5015),O=B(4449),Se=B(377),de=B(6554),ve=B(9489),ae=B(4072),J=B(1555);const X=he=>{if(he&&"function"==typeof he[de.L])return(he=>ge=>{const ke=he[de.L]();if("function"!=typeof ke.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ke.subscribe(ge)})(he);if((0,ve.z)(he))return(0,D.V)(he);if((0,ae.t)(he))return(he=>ge=>(he.then(ke=>{ge.closed||(ge.next(ke),ge.complete())},ke=>ge.error(ke)).then(null,O.z),ge))(he);if(he&&"function"==typeof he[Se.hZ])return(he=>ge=>{const ke=he[Se.hZ]();for(;;){let He;try{He=ke.next()}catch(je){return ge.error(je),ge}if(He.done){ge.complete();break}if(ge.next(He.value),ge.closed)break}return"function"==typeof ke.return&&ge.add(()=>{ke.return&&ke.return()}),ge})(he);{const ke=`You provided ${(0,J.K)(he)?"an invalid object":`'${he}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ke)}}},5015:(Pt,Ye,B)=>{"use strict";B.d(Ye,{V:()=>D});const D=O=>g=>{for(let Se=0,be=O.length;Se<be&&!g.closed;Se++)g.next(O[Se]);g.complete()}},6830:(Pt,Ye,B)=>{"use strict";B.r(Ye),B.d(Ye,{AuthModule:()=>eo});var D=B(8583),O=B(6575),g=B(3018),Se=B(4402),be=B(7574),de=B(9796),Fe=B(8002),ve=B(1555);function J(S,A){return new be.y(I=>{const $=S.length;if(0===$)return void I.complete();const Pe=new Array($);let mt=0,bn=0;for(let fr=0;fr<$;fr++){const Dr=(0,Se.D)(S[fr]);let di=!1;I.add(Dr.subscribe({next:Si=>{di||(di=!0,bn++),Pe[fr]=Si},error:Si=>I.error(Si),complete:()=>{mt++,(mt===$||!di)&&(bn===$&&I.next(A?A.reduce((Si,Ki,rs)=>(Si[Ki]=Pe[rs],Si),{}):Pe),I.complete())}}))}})}let X=(()=>{class S{constructor(I,$){this._renderer=I,this._elementRef=$,this.onChange=Pe=>{},this.onTouched=()=>{}}setProperty(I,$){this._renderer.setProperty(this._elementRef.nativeElement,I,$)}registerOnTouched(I){this.onTouched=I}registerOnChange(I){this.onChange=I}setDisabledState(I){this.setProperty("disabled",I)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(g.Qsj),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S}),S})(),he=(()=>{class S extends X{}return S.\u0275fac=function(){let A;return function($){return(A||(A=g.n5z(S)))($||S)}}(),S.\u0275dir=g.lG2({type:S,features:[g.qOj]}),S})();const ge=new g.OlP("NgValueAccessor"),je={provide:ge,useExisting:(0,g.Gpc)(()=>qe),multi:!0},Le=new g.OlP("CompositionEventMode");let qe=(()=>{class S extends X{constructor(I,$,Pe){super(I,$),this._compositionMode=Pe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const S=(0,D.q)()?(0,D.q)().getUserAgent():"";return/android (\d+)/.test(S.toLowerCase())}())}writeValue(I){this.setProperty("value",null==I?"":I)}_handleInput(I){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(I)}_compositionStart(){this._composing=!0}_compositionEnd(I){this._composing=!1,this._compositionMode&&this.onChange(I)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Le,8))},S.\u0275dir=g.lG2({type:S,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(I,$){1&I&&g.NdJ("input",function(mt){return $._handleInput(mt.target.value)})("blur",function(){return $.onTouched()})("compositionstart",function(){return $._compositionStart()})("compositionend",function(mt){return $._compositionEnd(mt.target.value)})},features:[g._Bn([je]),g.qOj]}),S})();function $e(S){return null==S||0===S.length}function Qe(S){return null!=S&&"number"==typeof S.length}const re=new g.OlP("NgValidators"),ut=new g.OlP("NgAsyncValidators"),Gt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vt{static min(A){return S=A,A=>{if($e(A.value)||$e(S))return null;const I=parseFloat(A.value);return!isNaN(I)&&I<S?{min:{min:S,actual:A.value}}:null};var S}static max(A){return S=A,A=>{if($e(A.value)||$e(S))return null;const I=parseFloat(A.value);return!isNaN(I)&&I>S?{max:{max:S,actual:A.value}}:null};var S}static required(A){return $e(A.value)?{required:!0}:null}static requiredTrue(A){return!0===A.value?null:{required:!0}}static email(A){return $e((S=A).value)||Gt.test(S.value)?null:{email:!0};var S}static minLength(A){return S=A,A=>$e(A.value)||!Qe(A.value)?null:A.value.length<S?{minlength:{requiredLength:S,actualLength:A.value.length}}:null;var S}static maxLength(A){return S=A,A=>Qe(A.value)&&A.value.length>S?{maxlength:{requiredLength:S,actualLength:A.value.length}}:null;var S}static pattern(A){return function(S){if(!S)return Xt;let A,I;return"string"==typeof S?(I="","^"!==S.charAt(0)&&(I+="^"),I+=S,"$"!==S.charAt(S.length-1)&&(I+="$"),A=new RegExp(I)):(I=S.toString(),A=S),$=>{if($e($.value))return null;const Pe=$.value;return A.test(Pe)?null:{pattern:{requiredPattern:I,actualValue:Pe}}}}(A)}static nullValidator(A){return null}static compose(A){return Tr(A)}static composeAsync(A){return Lt(A)}}function Xt(S){return null}function $n(S){return null!=S}function jt(S){const A=(0,g.QGY)(S)?(0,Se.D)(S):S;return(0,g.CqO)(A),A}function xn(S){let A={};return S.forEach(I=>{A=null!=I?Object.assign(Object.assign({},A),I):A}),0===Object.keys(A).length?null:A}function Zn(S,A){return A.map(I=>I(S))}function In(S){return S.map(A=>function(S){return!S.validate}(A)?A:I=>A.validate(I))}function Tr(S){if(!S)return null;const A=S.filter($n);return 0==A.length?null:function(I){return xn(Zn(I,A))}}function dn(S){return null!=S?Tr(In(S)):null}function Lt(S){if(!S)return null;const A=S.filter($n);return 0==A.length?null:function(I){return function(...S){if(1===S.length){const A=S[0];if((0,de.k)(A))return J(A,null);if((0,ve.K)(A)&&Object.getPrototypeOf(A)===Object.prototype){const I=Object.keys(A);return J(I.map($=>A[$]),I)}}if("function"==typeof S[S.length-1]){const A=S.pop();return J(S=1===S.length&&(0,de.k)(S[0])?S[0]:S,null).pipe((0,Fe.U)(I=>A(...I)))}return J(S,null)}(Zn(I,A).map(jt)).pipe((0,Fe.U)(xn))}}function tn(S){return null!=S?Lt(In(S)):null}function Mn(S,A){return null===S?[A]:Array.isArray(S)?[...S,A]:[S,A]}function Wn(S){return S._rawValidators}function Tn(S){return S._rawAsyncValidators}function Rr(S){return S?Array.isArray(S)?S:[S]:[]}function pr(S,A){return Array.isArray(S)?S.includes(A):S===A}function hn(S,A){const I=Rr(A);return Rr(S).forEach(Pe=>{pr(I,Pe)||I.push(Pe)}),I}function mn(S,A){return Rr(A).filter(I=>!pr(S,I))}let Nn=(()=>{class S{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(I){this._rawValidators=I||[],this._composedValidatorFn=dn(this._rawValidators)}_setAsyncValidators(I){this._rawAsyncValidators=I||[],this._composedAsyncValidatorFn=tn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(I){this._onDestroyCallbacks.push(I)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(I=>I()),this._onDestroyCallbacks=[]}reset(I){this.control&&this.control.reset(I)}hasError(I,$){return!!this.control&&this.control.hasError(I,$)}getError(I,$){return this.control?this.control.getError(I,$):null}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275dir=g.lG2({type:S}),S})(),Cn=(()=>{class S extends Nn{get formDirective(){return null}get path(){return null}}return S.\u0275fac=function(){let A;return function($){return(A||(A=g.n5z(S)))($||S)}}(),S.\u0275dir=g.lG2({type:S,features:[g.qOj]}),S})();class Xn extends Nn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class vn{constructor(A){this._cd=A}is(A){var I,$,Pe;return"submitted"===A?!!(null===(I=this._cd)||void 0===I?void 0:I.submitted):!!(null===(Pe=null===($=this._cd)||void 0===$?void 0:$.control)||void 0===Pe?void 0:Pe[A])}}let qt=(()=>{class S extends vn{constructor(I){super(I)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Xn,2))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(I,$){2&I&&g.ekj("ng-untouched",$.is("untouched"))("ng-touched",$.is("touched"))("ng-pristine",$.is("pristine"))("ng-dirty",$.is("dirty"))("ng-valid",$.is("valid"))("ng-invalid",$.is("invalid"))("ng-pending",$.is("pending"))},features:[g.qOj]}),S})(),lt=(()=>{class S extends vn{constructor(I){super(I)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Cn,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(I,$){2&I&&g.ekj("ng-untouched",$.is("untouched"))("ng-touched",$.is("touched"))("ng-pristine",$.is("pristine"))("ng-dirty",$.is("dirty"))("ng-valid",$.is("valid"))("ng-invalid",$.is("invalid"))("ng-pending",$.is("pending"))("ng-submitted",$.is("submitted"))},features:[g.qOj]}),S})();function we(S,A){return[...A.path,S]}function Ee(S,A){Tt(S,A),A.valueAccessor.writeValue(S.value),function(S,A){A.valueAccessor.registerOnChange(I=>{S._pendingValue=I,S._pendingChange=!0,S._pendingDirty=!0,"change"===S.updateOn&&an(S,A)})}(S,A),function(S,A){const I=($,Pe)=>{A.valueAccessor.writeValue($),Pe&&A.viewToModelUpdate($)};S.registerOnChange(I),A._registerOnDestroy(()=>{S._unregisterOnChange(I)})}(S,A),function(S,A){A.valueAccessor.registerOnTouched(()=>{S._pendingTouched=!0,"blur"===S.updateOn&&S._pendingChange&&an(S,A),"submit"!==S.updateOn&&S.markAsTouched()})}(S,A),function(S,A){if(A.valueAccessor.setDisabledState){const I=$=>{A.valueAccessor.setDisabledState($)};S.registerOnDisabledChange(I),A._registerOnDestroy(()=>{S._unregisterOnDisabledChange(I)})}}(S,A)}function pe(S,A,I=!0){const $=()=>{};A.valueAccessor&&(A.valueAccessor.registerOnChange($),A.valueAccessor.registerOnTouched($)),wt(S,A),S&&(A._invokeOnDestroyCallbacks(),S._registerOnCollectionChange(()=>{}))}function ot(S,A){S.forEach(I=>{I.registerOnValidatorChange&&I.registerOnValidatorChange(A)})}function Tt(S,A){const I=Wn(S);null!==A.validator?S.setValidators(Mn(I,A.validator)):"function"==typeof I&&S.setValidators([I]);const $=Tn(S);null!==A.asyncValidator?S.setAsyncValidators(Mn($,A.asyncValidator)):"function"==typeof $&&S.setAsyncValidators([$]);const Pe=()=>S.updateValueAndValidity();ot(A._rawValidators,Pe),ot(A._rawAsyncValidators,Pe)}function wt(S,A){let I=!1;if(null!==S){if(null!==A.validator){const Pe=Wn(S);if(Array.isArray(Pe)&&Pe.length>0){const mt=Pe.filter(bn=>bn!==A.validator);mt.length!==Pe.length&&(I=!0,S.setValidators(mt))}}if(null!==A.asyncValidator){const Pe=Tn(S);if(Array.isArray(Pe)&&Pe.length>0){const mt=Pe.filter(bn=>bn!==A.asyncValidator);mt.length!==Pe.length&&(I=!0,S.setAsyncValidators(mt))}}}const $=()=>{};return ot(A._rawValidators,$),ot(A._rawAsyncValidators,$),I}function an(S,A){S._pendingDirty&&S.markAsDirty(),S.setValue(S._pendingValue,{emitModelToViewChange:!1}),A.viewToModelUpdate(S._pendingValue),S._pendingChange=!1}function ei(S,A){if(!S.hasOwnProperty("model"))return!1;const I=S.model;return!!I.isFirstChange()||!Object.is(A,I.currentValue)}function Ci(S,A){if(!A)return null;let I,$,Pe;return Array.isArray(A),A.forEach(mt=>{mt.constructor===qe?I=mt:function(S){return Object.getPrototypeOf(S.constructor)===he}(mt)?$=mt:Pe=mt}),Pe||$||I||null}function zr(S,A){const I=S.indexOf(A);I>-1&&S.splice(I,1)}const cr="VALID",jr="INVALID",oi="PENDING",$r="DISABLED";function Gr(S){return(On(S)?S.validators:S)||null}function Di(S){return Array.isArray(S)?dn(S):S||null}function dr(S,A){return(On(A)?A.asyncValidators:S)||null}function as(S){return Array.isArray(S)?tn(S):S||null}function On(S){return null!=S&&!Array.isArray(S)&&"object"==typeof S}class bt{constructor(A,I){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=A,this._rawAsyncValidators=I,this._composedValidatorFn=Di(this._rawValidators),this._composedAsyncValidatorFn=as(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(A){this._rawValidators=this._composedValidatorFn=A}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(A){this._rawAsyncValidators=this._composedAsyncValidatorFn=A}get parent(){return this._parent}get valid(){return this.status===cr}get invalid(){return this.status===jr}get pending(){return this.status==oi}get disabled(){return this.status===$r}get enabled(){return this.status!==$r}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(A){this._rawValidators=A,this._composedValidatorFn=Di(A)}setAsyncValidators(A){this._rawAsyncValidators=A,this._composedAsyncValidatorFn=as(A)}addValidators(A){this.setValidators(hn(A,this._rawValidators))}addAsyncValidators(A){this.setAsyncValidators(hn(A,this._rawAsyncValidators))}removeValidators(A){this.setValidators(mn(A,this._rawValidators))}removeAsyncValidators(A){this.setAsyncValidators(mn(A,this._rawAsyncValidators))}hasValidator(A){return pr(this._rawValidators,A)}hasAsyncValidator(A){return pr(this._rawAsyncValidators,A)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(A={}){this.touched=!0,this._parent&&!A.onlySelf&&this._parent.markAsTouched(A)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(A=>A.markAllAsTouched())}markAsUntouched(A={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(I=>{I.markAsUntouched({onlySelf:!0})}),this._parent&&!A.onlySelf&&this._parent._updateTouched(A)}markAsDirty(A={}){this.pristine=!1,this._parent&&!A.onlySelf&&this._parent.markAsDirty(A)}markAsPristine(A={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(I=>{I.markAsPristine({onlySelf:!0})}),this._parent&&!A.onlySelf&&this._parent._updatePristine(A)}markAsPending(A={}){this.status=oi,!1!==A.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!A.onlySelf&&this._parent.markAsPending(A)}disable(A={}){const I=this._parentMarkedDirty(A.onlySelf);this.status=$r,this.errors=null,this._forEachChild($=>{$.disable(Object.assign(Object.assign({},A),{onlySelf:!0}))}),this._updateValue(),!1!==A.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},A),{skipPristineCheck:I})),this._onDisabledChange.forEach($=>$(!0))}enable(A={}){const I=this._parentMarkedDirty(A.onlySelf);this.status=cr,this._forEachChild($=>{$.enable(Object.assign(Object.assign({},A),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:A.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},A),{skipPristineCheck:I})),this._onDisabledChange.forEach($=>$(!1))}_updateAncestors(A){this._parent&&!A.onlySelf&&(this._parent.updateValueAndValidity(A),A.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(A){this._parent=A}updateValueAndValidity(A={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cr||this.status===oi)&&this._runAsyncValidator(A.emitEvent)),!1!==A.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!A.onlySelf&&this._parent.updateValueAndValidity(A)}_updateTreeValidity(A={emitEvent:!0}){this._forEachChild(I=>I._updateTreeValidity(A)),this.updateValueAndValidity({onlySelf:!0,emitEvent:A.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$r:cr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(A){if(this.asyncValidator){this.status=oi,this._hasOwnPendingAsyncValidator=!0;const I=jt(this.asyncValidator(this));this._asyncValidationSubscription=I.subscribe($=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors($,{emitEvent:A})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(A,I={}){this.errors=A,this._updateControlsErrors(!1!==I.emitEvent)}get(A){return function(S,A,I){if(null==A||(Array.isArray(A)||(A=A.split(".")),Array.isArray(A)&&0===A.length))return null;let $=S;return A.forEach(Pe=>{$=$ instanceof Ht?$.controls.hasOwnProperty(Pe)?$.controls[Pe]:null:$ instanceof Hn&&$.at(Pe)||null}),$}(this,A)}getError(A,I){const $=I?this.get(I):this;return $&&$.errors?$.errors[A]:null}hasError(A,I){return!!this.getError(A,I)}get root(){let A=this;for(;A._parent;)A=A._parent;return A}_updateControlsErrors(A){this.status=this._calculateStatus(),A&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(A)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?$r:this.errors?jr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oi)?oi:this._anyControlsHaveStatus(jr)?jr:cr}_anyControlsHaveStatus(A){return this._anyControls(I=>I.status===A)}_anyControlsDirty(){return this._anyControls(A=>A.dirty)}_anyControlsTouched(){return this._anyControls(A=>A.touched)}_updatePristine(A={}){this.pristine=!this._anyControlsDirty(),this._parent&&!A.onlySelf&&this._parent._updatePristine(A)}_updateTouched(A={}){this.touched=this._anyControlsTouched(),this._parent&&!A.onlySelf&&this._parent._updateTouched(A)}_isBoxedValue(A){return"object"==typeof A&&null!==A&&2===Object.keys(A).length&&"value"in A&&"disabled"in A}_registerOnCollectionChange(A){this._onCollectionChange=A}_setUpdateStrategy(A){On(A)&&null!=A.updateOn&&(this._updateOn=A.updateOn)}_parentMarkedDirty(A){return!A&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Vt extends bt{constructor(A=null,I,$){super(Gr(I),dr($,I)),this._onChange=[],this._applyFormState(A),this._setUpdateStrategy(I),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(A,I={}){this.value=this._pendingValue=A,this._onChange.length&&!1!==I.emitModelToViewChange&&this._onChange.forEach($=>$(this.value,!1!==I.emitViewToModelChange)),this.updateValueAndValidity(I)}patchValue(A,I={}){this.setValue(A,I)}reset(A=null,I={}){this._applyFormState(A),this.markAsPristine(I),this.markAsUntouched(I),this.setValue(this.value,I),this._pendingChange=!1}_updateValue(){}_anyControls(A){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(A){this._onChange.push(A)}_unregisterOnChange(A){zr(this._onChange,A)}registerOnDisabledChange(A){this._onDisabledChange.push(A)}_unregisterOnDisabledChange(A){zr(this._onDisabledChange,A)}_forEachChild(A){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(A){this._isBoxedValue(A)?(this.value=this._pendingValue=A.value,A.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=A}}class Ht extends bt{constructor(A,I,$){super(Gr(I),dr($,I)),this.controls=A,this._initObservables(),this._setUpdateStrategy(I),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(A,I){return this.controls[A]?this.controls[A]:(this.controls[A]=I,I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange),I)}addControl(A,I,$={}){this.registerControl(A,I),this.updateValueAndValidity({emitEvent:$.emitEvent}),this._onCollectionChange()}removeControl(A,I={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),delete this.controls[A],this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}setControl(A,I,$={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),delete this.controls[A],I&&this.registerControl(A,I),this.updateValueAndValidity({emitEvent:$.emitEvent}),this._onCollectionChange()}contains(A){return this.controls.hasOwnProperty(A)&&this.controls[A].enabled}setValue(A,I={}){this._checkAllValuesPresent(A),Object.keys(A).forEach($=>{this._throwIfControlMissing($),this.controls[$].setValue(A[$],{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I)}patchValue(A,I={}){null!=A&&(Object.keys(A).forEach($=>{this.controls[$]&&this.controls[$].patchValue(A[$],{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I))}reset(A={},I={}){this._forEachChild(($,Pe)=>{$.reset(A[Pe],{onlySelf:!0,emitEvent:I.emitEvent})}),this._updatePristine(I),this._updateTouched(I),this.updateValueAndValidity(I)}getRawValue(){return this._reduceChildren({},(A,I,$)=>(A[$]=I instanceof Vt?I.value:I.getRawValue(),A))}_syncPendingControls(){let A=this._reduceChildren(!1,(I,$)=>!!$._syncPendingControls()||I);return A&&this.updateValueAndValidity({onlySelf:!0}),A}_throwIfControlMissing(A){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[A])throw new Error(`Cannot find form control with name: ${A}.`)}_forEachChild(A){Object.keys(this.controls).forEach(I=>{const $=this.controls[I];$&&A($,I)})}_setUpControls(){this._forEachChild(A=>{A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(A){for(const I of Object.keys(this.controls)){const $=this.controls[I];if(this.contains(I)&&A($))return!0}return!1}_reduceValue(){return this._reduceChildren({},(A,I,$)=>((I.enabled||this.disabled)&&(A[$]=I.value),A))}_reduceChildren(A,I){let $=A;return this._forEachChild((Pe,mt)=>{$=I($,Pe,mt)}),$}_allControlsDisabled(){for(const A of Object.keys(this.controls))if(this.controls[A].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(A){this._forEachChild((I,$)=>{if(void 0===A[$])throw new Error(`Must supply a value for form control with name: '${$}'.`)})}}class Hn extends bt{constructor(A,I,$){super(Gr(I),dr($,I)),this.controls=A,this._initObservables(),this._setUpdateStrategy(I),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(A){return this.controls[A]}push(A,I={}){this.controls.push(A),this._registerControl(A),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}insert(A,I,$={}){this.controls.splice(A,0,I),this._registerControl(I),this.updateValueAndValidity({emitEvent:$.emitEvent})}removeAt(A,I={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),this.controls.splice(A,1),this.updateValueAndValidity({emitEvent:I.emitEvent})}setControl(A,I,$={}){this.controls[A]&&this.controls[A]._registerOnCollectionChange(()=>{}),this.controls.splice(A,1),I&&(this.controls.splice(A,0,I),this._registerControl(I)),this.updateValueAndValidity({emitEvent:$.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(A,I={}){this._checkAllValuesPresent(A),A.forEach(($,Pe)=>{this._throwIfControlMissing(Pe),this.at(Pe).setValue($,{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I)}patchValue(A,I={}){null!=A&&(A.forEach(($,Pe)=>{this.at(Pe)&&this.at(Pe).patchValue($,{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I))}reset(A=[],I={}){this._forEachChild(($,Pe)=>{$.reset(A[Pe],{onlySelf:!0,emitEvent:I.emitEvent})}),this._updatePristine(I),this._updateTouched(I),this.updateValueAndValidity(I)}getRawValue(){return this.controls.map(A=>A instanceof Vt?A.value:A.getRawValue())}clear(A={}){this.controls.length<1||(this._forEachChild(I=>I._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:A.emitEvent}))}_syncPendingControls(){let A=this.controls.reduce((I,$)=>!!$._syncPendingControls()||I,!1);return A&&this.updateValueAndValidity({onlySelf:!0}),A}_throwIfControlMissing(A){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(A))throw new Error(`Cannot find form control at index ${A}`)}_forEachChild(A){this.controls.forEach((I,$)=>{A(I,$)})}_updateValue(){this.value=this.controls.filter(A=>A.enabled||this.disabled).map(A=>A.value)}_anyControls(A){return this.controls.some(I=>I.enabled&&A(I))}_setUpControls(){this._forEachChild(A=>this._registerControl(A))}_checkAllValuesPresent(A){this._forEachChild((I,$)=>{if(void 0===A[$])throw new Error(`Must supply a value for form control at index: ${$}.`)})}_allControlsDisabled(){for(const A of this.controls)if(A.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(A){A.setParent(this),A._registerOnCollectionChange(this._onCollectionChange)}}const Ar={provide:Xn,useExisting:(0,g.Gpc)(()=>Ur)},Yr=(()=>Promise.resolve(null))();let Ur=(()=>{class S extends Xn{constructor(I,$,Pe,mt){super(),this.control=new Vt,this._registered=!1,this.update=new g.vpe,this._parent=I,this._setValidators($),this._setAsyncValidators(Pe),this.valueAccessor=Ci(0,mt)}ngOnChanges(I){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in I&&this._updateDisabled(I),ei(I,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?we(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(I){this.viewModel=I,this.update.emit(I)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ee(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(I){Yr.then(()=>{this.control.setValue(I,{emitViewToModelChange:!1})})}_updateDisabled(I){const $=I.isDisabled.currentValue,Pe=""===$||$&&"false"!==$;Yr.then(()=>{Pe&&!this.control.disabled?this.control.disable():!Pe&&this.control.disabled&&this.control.enable()})}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Cn,9),g.Y36(re,10),g.Y36(ut,10),g.Y36(ge,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Ar]),g.qOj,g.TTD]}),S})(),Oe=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),S})();const Et={provide:ge,useExisting:(0,g.Gpc)(()=>pn),multi:!0};let Ot=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({}),S})(),Gn=(()=>{class S{constructor(){this._accessors=[]}add(I,$){this._accessors.push([I,$])}remove(I){for(let $=this._accessors.length-1;$>=0;--$)if(this._accessors[$][1]===I)return void this._accessors.splice($,1)}select(I){this._accessors.forEach($=>{this._isSameGroup($,I)&&$[1]!==I&&$[1].fireUncheck(I.value)})}_isSameGroup(I,$){return!!I[0].control&&I[0]._parent===$._control._parent&&I[1].name===$.name}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=(0,g.Yz7)({factory:function(){return new S},token:S,providedIn:Ot}),S})(),pn=(()=>{class S extends he{constructor(I,$,Pe,mt){super(I,$),this._registry=Pe,this._injector=mt,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Xn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(I){this._state=I===this.value,this.setProperty("checked",this._state)}registerOnChange(I){this._fn=I,this.onChange=()=>{I(this.value),this._registry.select(this)}}fireUncheck(I){this.writeValue(I)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Gn),g.Y36(g.zs3))},S.\u0275dir=g.lG2({type:S,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(I,$){1&I&&g.NdJ("change",function(){return $.onChange()})("blur",function(){return $.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[g._Bn([Et]),g.qOj]}),S})();const _r=new g.OlP("NgModelWithFormControlWarning"),Q={provide:Cn,useExisting:(0,g.Gpc)(()=>Ie)};let Ie=(()=>{class S extends Cn{constructor(I,$){super(),this.validators=I,this.asyncValidators=$,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(I),this._setAsyncValidators($)}ngOnChanges(I){this._checkFormPresent(),I.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(wt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(I){const $=this.form.get(I.path);return Ee($,I),$.updateValueAndValidity({emitEvent:!1}),this.directives.push(I),$}getControl(I){return this.form.get(I.path)}removeControl(I){pe(I.control||null,I,!1),zr(this.directives,I)}addFormGroup(I){this._setUpFormContainer(I)}removeFormGroup(I){this._cleanUpFormContainer(I)}getFormGroup(I){return this.form.get(I.path)}addFormArray(I){this._setUpFormContainer(I)}removeFormArray(I){this._cleanUpFormContainer(I)}getFormArray(I){return this.form.get(I.path)}updateModel(I,$){this.form.get(I.path).setValue($)}onSubmit(I){return this.submitted=!0,function(S,A){S._syncPendingControls(),A.forEach(I=>{const $=I.control;"submit"===$.updateOn&&$._pendingChange&&(I.viewToModelUpdate($._pendingValue),$._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(I),!1}onReset(){this.resetForm()}resetForm(I){this.form.reset(I),this.submitted=!1}_updateDomValue(){this.directives.forEach(I=>{const $=I.control,Pe=this.form.get(I.path);$!==Pe&&(pe($||null,I),Pe instanceof Vt&&(Ee(Pe,I),I.control=Pe))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(I){const $=this.form.get(I.path);(function(S,A){Tt(S,A)})($,I),$.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(I){if(this.form){const $=this.form.get(I.path);$&&function(S,A){return wt(S,A)}($,I)&&$.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tt(this.form,this),this._oldForm&&wt(this._oldForm,this)}_checkFormPresent(){}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(re,10),g.Y36(ut,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroup",""]],hostBindings:function(I,$){1&I&&g.NdJ("submit",function(mt){return $.onSubmit(mt)})("reset",function(){return $.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Q]),g.qOj,g.TTD]}),S})();const ti={provide:Xn,useExisting:(0,g.Gpc)(()=>$s)};let $s=(()=>{class S extends Xn{constructor(I,$,Pe,mt,bn){super(),this._ngModelWarningConfig=bn,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=I,this._setValidators($),this._setAsyncValidators(Pe),this.valueAccessor=Ci(0,mt)}set isDisabled(I){}ngOnChanges(I){this._added||this._setUpControl(),ei(I,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(I){this.viewModel=I,this.update.emit(I)}get path(){return we(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(Cn,13),g.Y36(re,10),g.Y36(ut,10),g.Y36(ge,10),g.Y36(_r,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([ti]),g.qOj,g.TTD]}),S._ngModelWarningSentOnce=!1,S})(),N=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[[Ot]]}),S})(),z=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[N]}),S})(),ye=(()=>{class S{static withConfig(I){return{ngModule:S,providers:[{provide:_r,useValue:I.warnOnNgModelWithFormControl}]}}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[N]}),S})(),ft=(()=>{class S{group(I,$=null){const Pe=this._reduceControls(I);let fr,mt=null,bn=null;return null!=$&&(function(S){return void 0!==S.asyncValidators||void 0!==S.validators||void 0!==S.updateOn}($)?(mt=null!=$.validators?$.validators:null,bn=null!=$.asyncValidators?$.asyncValidators:null,fr=null!=$.updateOn?$.updateOn:void 0):(mt=null!=$.validator?$.validator:null,bn=null!=$.asyncValidator?$.asyncValidator:null)),new Ht(Pe,{asyncValidators:bn,updateOn:fr,validators:mt})}control(I,$,Pe){return new Vt(I,$,Pe)}array(I,$,Pe){const mt=I.map(bn=>this._createControl(bn));return new Hn(mt,$,Pe)}_reduceControls(I){const $={};return Object.keys(I).forEach(Pe=>{$[Pe]=this._createControl(I[Pe])}),$}_createControl(I){return I instanceof Vt||I instanceof Ht||I instanceof Hn?I:Array.isArray(I)?this.control(I[0],I.length>1?I[1]:null,I.length>2?I[2]:null):this.control(I)}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=(0,g.Yz7)({factory:function(){return new S},token:S,providedIn:ye}),S})();var Ut=B(2340);class Mt{static validarNombre(A){const I=A.value;return null!=I&&I.split(" ").length>2?{nombreInvalido:!0}:null}static validarDni(A){const I=A.value;return null!=I&&I.split(" ").length>1?{dniInvalido:!0}:null}static validarApellido(A){const I=A.value;return null!=I&&I.split(" ").length>3?{apellidoInvalido:!0}:null}static validarEmail(A){return/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(A.value)?null:{emailInvalido:!0}}static validarImg(A){if(A.value){const I=A.value.split("."),$=I[I.length-1];if("jpeg"!=$&&"png"!=$)return{imgInvalida:!0}}return null}}var vr=B(817);function Bn(S,A){1&S&&(g.TgZ(0,"div",14),g._uU(1," * El email es requerido. "),g.qZA())}function Er(S,A){1&S&&(g.TgZ(0,"div",14),g._uU(1," * Debe tener un formato de email v\xe1lido. "),g.qZA())}function Rn(S,A){1&S&&(g.TgZ(0,"div",14),g._uU(1," * La contrase\xf1a debe contener 8 caracteres como minimo. "),g.qZA())}function ui(S,A){1&S&&(g.TgZ(0,"div",14),g._uU(1," * La contrase\xf1a es requerida. "),g.qZA())}function Fi(S,A){if(1&S&&(g.TgZ(0,"div",15),g.TgZ(1,"small"),g._uU(2),g.qZA(),g.qZA()),2&S){const I=g.oxw();g.xp6(2),g.Oqu(I.mensajeError)}}let ni=(()=>{class S{constructor(I,$,Pe){this.fb=I,this.router=$,this.authService=Pe,this.urlLogoEmpresa=Ut.N.urlImgEmpresa,this.mostrarError=!1,this.mensajeError="",this.emailUsuario="",this.passwordUsuario="",this.formulario=this.fb.group({email:["",[vt.required,Mt.validarEmail]],password:["",[vt.required,vt.minLength(8)]]})}onRegistrarse(){setTimeout(()=>{this.router.navigate(["/auth/register"])},500)}ngOnInit(){}ingresar(){const{email:I,password:$}=this.formulario.value;this.authService.signin(I,$).then(Pe=>{this.router.navigate(["home"])}).catch(Pe=>{switch(Pe.code){case"auth/user-not-found":this.mensajeError="No existe el usuario en nuestro registro";break;case"auth/wrong-password":this.mensajeError="La contrase\xf1a es incorrecta";break;default:this.mensajeError=Pe.message}this.mostrarError=!0,setTimeout(()=>{this.resetMensajeError()},2e3)})}resetMensajeError(){this.mostrarError=!1,this.mensajeError=""}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(ft),g.Y36(O.F0),g.Y36(vr.e))},S.\u0275cmp=g.Xpm({type:S,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"row","justify-content-center","mt-1"],[1,"col-4","text-center"],[3,"formGroup","ngSubmit"],[1,"mb-2","img-fluid",3,"src"],[1,"form-floating","mb-2"],["formControlName","email","type","email","id","email","placeholder","name@example.com","name","email","autocomplete","off",1,"form-control"],["for","email"],["class","form-text text-danger",4,"ngIf"],["formControlName","password","type","password","id","password","placeholder","Password","name","password","autocomplete","off",1,"form-control"],["for","password"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],[1,"row","justify-content-around"],["type","submit",1,"btn","btn-lg","btn-primary","mt-4","col-5"],["type","button",1,"btn","btn-lg","btn-primary","mt-4","col-5",3,"click"],[1,"form-text","text-danger"],["role","alert",1,"alert","alert-danger","mt-3"]],template:function(I,$){if(1&I&&(g.TgZ(0,"main",0),g.TgZ(1,"section",1),g.TgZ(2,"form",2),g.NdJ("ngSubmit",function(){return $.ingresar()}),g._UZ(3,"img",3),g.TgZ(4,"div",4),g._UZ(5,"input",5),g.TgZ(6,"label",6),g._uU(7,"Email"),g.qZA(),g.YNc(8,Bn,2,0,"div",7),g.YNc(9,Er,2,0,"div",7),g.qZA(),g.TgZ(10,"div",4),g._UZ(11,"input",8),g.TgZ(12,"label",9),g._uU(13,"Password"),g.qZA(),g.YNc(14,Rn,2,0,"div",7),g.YNc(15,ui,2,0,"div",7),g.qZA(),g.YNc(16,Fi,3,1,"div",10),g.TgZ(17,"div",11),g.TgZ(18,"button",12),g._uU(19," Ingresar "),g.qZA(),g.TgZ(20,"button",13),g.NdJ("click",function(){return $.onRegistrarse()}),g._uU(21," Registrarse "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&I){let Pe,mt,bn,fr;g.xp6(2),g.Q6J("formGroup",$.formulario),g.xp6(1),g.s9C("src",$.urlLogoEmpresa,g.LSH),g.xp6(5),g.Q6J("ngIf",(null==(Pe=$.formulario.get("email"))?null:Pe.hasError("required"))&&(null==(Pe=$.formulario.get("email"))?null:Pe.touched)),g.xp6(1),g.Q6J("ngIf",(null==(mt=$.formulario.get("email"))?null:mt.hasError("emailInvalido"))&&(null==(mt=$.formulario.get("email"))?null:mt.touched)),g.xp6(5),g.Q6J("ngIf",(null==(bn=$.formulario.get("password"))?null:bn.hasError("minlength"))&&(null==(bn=$.formulario.get("password"))?null:bn.touched)),g.xp6(1),g.Q6J("ngIf",(null==(fr=$.formulario.get("password"))?null:fr.hasError("required"))&&(null==(fr=$.formulario.get("password"))?null:fr.touched)),g.xp6(1),g.Q6J("ngIf",$.mostrarError)}},directives:[Oe,lt,Ie,qe,qt,$s,D.O5],styles:[""]}),S})();function Fr(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El nombre no puede contener espacios. "),g.qZA())}function Li(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El nombre es requerido. "),g.qZA())}function Ms(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El email es requerido. "),g.qZA())}function Ai(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * Debe tener un formato de email v\xe1lido. "),g.qZA())}function ri(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," *La contrase\xf1a debe contener 8 caracteres como minimo. "),g.qZA())}function Ws(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," *La contrase\xf1a es requerida. "),g.qZA())}function Ro(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El formato debe ser .jpeg o .png. "),g.qZA())}function un(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La im\xe1gen es requerida. "),g.qZA())}function Mo(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El apellido no puede contener mas de 2 espacios. "),g.qZA())}function No(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El apellido es requerido. "),g.qZA())}function j(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El dni no puede contener espacios. "),g.qZA())}function k(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El dni es requerido. "),g.qZA())}function Z(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La edad es requerida. "),g.qZA())}function oe(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La edad minima es de 18 a\xf1os. "),g.qZA())}function De(S,A){if(1&S){const I=g.EpF();g.TgZ(0,"form",13),g.NdJ("ngSubmit",function(){return g.CHM(I),g.oxw().onSubmit()}),g.TgZ(1,"div",14),g.TgZ(2,"div",15),g.TgZ(3,"div",16),g.TgZ(4,"label",17),g._uU(5,"Nombre"),g.qZA(),g._UZ(6,"input",18),g.qZA(),g.YNc(7,Fr,2,0,"div",19),g.YNc(8,Li,2,0,"div",19),g.TgZ(9,"div",16),g.TgZ(10,"label",20),g._uU(11,"Email"),g.qZA(),g._UZ(12,"input",21),g.qZA(),g.YNc(13,Ms,2,0,"div",19),g.YNc(14,Ai,2,0,"div",19),g.TgZ(15,"div",16),g.TgZ(16,"label",22),g._uU(17,"Password"),g.qZA(),g._UZ(18,"input",23),g.qZA(),g.YNc(19,ri,2,0,"div",19),g.YNc(20,Ws,2,0,"div",19),g.TgZ(21,"div",24),g.TgZ(22,"label",25),g._uU(23,"Fotos de Perfil"),g.TgZ(24,"small"),g._uU(25," (Deben ser 2 im\xe1genes)"),g.qZA(),g.qZA(),g.TgZ(26,"input",26),g.NdJ("change",function(Pe){return g.CHM(I),g.oxw().onFileChangePaciente(Pe)}),g.qZA(),g.qZA(),g.YNc(27,Ro,2,0,"div",19),g.YNc(28,un,2,0,"div",19),g.qZA(),g.TgZ(29,"div",15),g.TgZ(30,"div",16),g.TgZ(31,"label",27),g._uU(32,"Apellido"),g.qZA(),g._UZ(33,"input",28),g.qZA(),g.YNc(34,Mo,2,0,"div",19),g.YNc(35,No,2,0,"div",19),g.TgZ(36,"div",16),g.TgZ(37,"label",29),g._uU(38,"Dni"),g.qZA(),g._UZ(39,"input",30),g.qZA(),g.YNc(40,j,2,0,"div",19),g.YNc(41,k,2,0,"div",19),g.TgZ(42,"div",16),g.TgZ(43,"label",31),g._uU(44,"Edad"),g.qZA(),g._UZ(45,"input",32),g.qZA(),g.YNc(46,Z,2,0,"div",19),g.YNc(47,oe,2,0,"div",19),g.TgZ(48,"div",33),g.TgZ(49,"label",34),g._uU(50,"Obra Social"),g.qZA(),g._UZ(51,"input",35),g.qZA(),g.TgZ(52,"div",14),g.TgZ(53,"button",36),g._uU(54," Registrarse "),g.qZA(),g.TgZ(55,"button",37),g.NdJ("click",function(){return g.CHM(I),g.oxw().onVolver()}),g._uU(56," Volver "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&S){const I=g.oxw();let $,Pe,mt,bn,fr,Dr,di,Si,Ki,rs,lo,Ns,bs,to;g.Q6J("formGroup",I.formularioPaciente),g.xp6(7),g.Q6J("ngIf",(null==($=I.formularioPaciente.get("nombre"))?null:$.hasError("nombreInvalido"))&&(null==($=I.formularioPaciente.get("nombre"))?null:$.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Pe=I.formularioPaciente.get("nombre"))?null:Pe.hasError("required"))&&(null==(Pe=I.formularioPaciente.get("nombre"))?null:Pe.touched)),g.xp6(5),g.Q6J("ngIf",(null==(mt=I.formularioPaciente.get("email"))?null:mt.hasError("required"))&&(null==(mt=I.formularioPaciente.get("email"))?null:mt.touched)),g.xp6(1),g.Q6J("ngIf",(null==(bn=I.formularioPaciente.get("email"))?null:bn.hasError("emailInvalido"))&&(null==(bn=I.formularioPaciente.get("email"))?null:bn.touched)),g.xp6(5),g.Q6J("ngIf",(null==(fr=I.formularioPaciente.get("password"))?null:fr.hasError("minlength"))&&(null==(fr=I.formularioPaciente.get("password"))?null:fr.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Dr=I.formularioPaciente.get("password"))?null:Dr.hasError("required"))&&(null==(Dr=I.formularioPaciente.get("password"))?null:Dr.touched)),g.xp6(7),g.Q6J("ngIf",(null==(di=I.formularioPaciente.get("urlImgs"))?null:di.hasError("imgInvalida"))&&(null==(di=I.formularioPaciente.get("urlImgs"))?null:di.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Si=I.formularioPaciente.get("urlImgs"))?null:Si.hasError("required"))&&(null==(Si=I.formularioPaciente.get("urlImgs"))?null:Si.touched)),g.xp6(6),g.Q6J("ngIf",(null==(Ki=I.formularioPaciente.get("apellido"))?null:Ki.hasError("apellidoInvalido"))&&(null==(Ki=I.formularioPaciente.get("apellido"))?null:Ki.touched)),g.xp6(1),g.Q6J("ngIf",(null==(rs=I.formularioPaciente.get("apellido"))?null:rs.hasError("required"))&&(null==(rs=I.formularioPaciente.get("apellido"))?null:rs.touched)),g.xp6(5),g.Q6J("ngIf",(null==(lo=I.formularioPaciente.get("dni"))?null:lo.hasError("dniInvalido"))&&(null==(lo=I.formularioPaciente.get("dni"))?null:lo.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Ns=I.formularioPaciente.get("dni"))?null:Ns.hasError("required"))&&(null==(Ns=I.formularioPaciente.get("dni"))?null:Ns.touched)),g.xp6(5),g.Q6J("ngIf",(null==(bs=I.formularioPaciente.get("edad"))?null:bs.hasError("required"))&&(null==(bs=I.formularioPaciente.get("edad"))?null:bs.touched)),g.xp6(1),g.Q6J("ngIf",(null==(to=I.formularioPaciente.get("edad"))?null:to.hasError("min"))&&(null==(to=I.formularioPaciente.get("edad"))?null:to.touched)),g.xp6(6),g.Q6J("disabled",I.formularioPaciente.invalid)}}function se(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El nombre no puede contener espacios. "),g.qZA())}function Je(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El nombre es requerido. "),g.qZA())}function Yt(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El email es requerido. "),g.qZA())}function gt(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * Debe tener un formato de email v\xe1lido. "),g.qZA())}function kn(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La contrase\xf1a debe contener 8 caracteres como minimo. "),g.qZA())}function wn(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La contrase\xf1a es requerida. "),g.qZA())}function nr(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El formato debe ser .jpeg o .png. "),g.qZA())}function wr(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La im\xe1gen es requerida. "),g.qZA())}function rr(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El apellido no puede contener mas de 2 espacios. "),g.qZA())}function Fn(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El apellido es requerido. "),g.qZA())}function ii(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El dni no puede contener espacios. "),g.qZA())}function Vi(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * El dni es requerido. "),g.qZA())}function li(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La edad es requerida. "),g.qZA())}function Or(S,A){1&S&&(g.TgZ(0,"div",38),g._uU(1," * La edad minima es de 18 a\xf1os. "),g.qZA())}function br(S,A){if(1&S){const I=g.EpF();g.TgZ(0,"form",13),g.NdJ("ngSubmit",function(){return g.CHM(I),g.oxw().onSubmit()}),g.TgZ(1,"div",14),g.TgZ(2,"div",15),g.TgZ(3,"div",16),g.TgZ(4,"label",17),g._uU(5,"Nombre"),g.qZA(),g._UZ(6,"input",39),g.qZA(),g.YNc(7,se,2,0,"div",19),g.YNc(8,Je,2,0,"div",19),g.TgZ(9,"div",16),g.TgZ(10,"label",20),g._uU(11,"Email"),g.qZA(),g._UZ(12,"input",21),g.qZA(),g.YNc(13,Yt,2,0,"div",19),g.YNc(14,gt,2,0,"div",19),g.TgZ(15,"div",16),g.TgZ(16,"label",22),g._uU(17,"Password"),g.qZA(),g._UZ(18,"input",23),g.qZA(),g.YNc(19,kn,2,0,"div",19),g.YNc(20,wn,2,0,"div",19),g.TgZ(21,"div",24),g.TgZ(22,"label",25),g._uU(23,"Fotos de Perfil"),g.TgZ(24,"small"),g._uU(25," (Debe ser 1 im\xe1gen)"),g.qZA(),g.qZA(),g._UZ(26,"input",40),g.qZA(),g.YNc(27,nr,2,0,"div",19),g.YNc(28,wr,2,0,"div",19),g.qZA(),g.TgZ(29,"div",15),g.TgZ(30,"div",16),g.TgZ(31,"label",27),g._uU(32,"Apellido"),g.qZA(),g._UZ(33,"input",28),g.qZA(),g.YNc(34,rr,2,0,"div",19),g.YNc(35,Fn,2,0,"div",19),g.TgZ(36,"div",16),g.TgZ(37,"label",29),g._uU(38,"Dni"),g.qZA(),g._UZ(39,"input",30),g.qZA(),g.YNc(40,ii,2,0,"div",19),g.YNc(41,Vi,2,0,"div",19),g.TgZ(42,"div",16),g.TgZ(43,"label",31),g._uU(44,"Edad"),g.qZA(),g._UZ(45,"input",32),g.qZA(),g.YNc(46,li,2,0,"div",19),g.YNc(47,Or,2,0,"div",19),g.TgZ(48,"div",33),g.TgZ(49,"label",41),g._uU(50,"Especialidad"),g.qZA(),g._UZ(51,"input",42),g.qZA(),g.TgZ(52,"div",14),g.TgZ(53,"button",36),g._uU(54," Registrarse "),g.qZA(),g.TgZ(55,"button",37),g.NdJ("click",function(){return g.CHM(I),g.oxw().onVolver()}),g._uU(56," Volver "),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&S){const I=g.oxw();let $,Pe,mt,bn,fr,Dr,di,Si,Ki,rs,lo,Ns,bs,to;g.Q6J("formGroup",I.formularioEspecialista),g.xp6(7),g.Q6J("ngIf",(null==($=I.formularioEspecialista.get("nombre"))?null:$.hasError("nombreInvalido"))&&(null==($=I.formularioEspecialista.get("nombre"))?null:$.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Pe=I.formularioEspecialista.get("nombre"))?null:Pe.hasError("required"))&&(null==(Pe=I.formularioEspecialista.get("nombre"))?null:Pe.touched)),g.xp6(5),g.Q6J("ngIf",(null==(mt=I.formularioEspecialista.get("email"))?null:mt.hasError("required"))&&(null==(mt=I.formularioEspecialista.get("email"))?null:mt.touched)),g.xp6(1),g.Q6J("ngIf",(null==(bn=I.formularioEspecialista.get("email"))?null:bn.hasError("emailInvalido"))&&(null==(bn=I.formularioEspecialista.get("email"))?null:bn.touched)),g.xp6(5),g.Q6J("ngIf",(null==(fr=I.formularioEspecialista.get("password"))?null:fr.hasError("minlength"))&&(null==(fr=I.formularioEspecialista.get("password"))?null:fr.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Dr=I.formularioEspecialista.get("password"))?null:Dr.hasError("required"))&&(null==(Dr=I.formularioEspecialista.get("password"))?null:Dr.touched)),g.xp6(7),g.Q6J("ngIf",(null==(di=I.formularioEspecialista.get("urlImg"))?null:di.hasError("imgInvalida"))&&(null==(di=I.formularioEspecialista.get("urlImg"))?null:di.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Si=I.formularioEspecialista.get("urlImg"))?null:Si.hasError("required"))&&(null==(Si=I.formularioEspecialista.get("urlImg"))?null:Si.touched)),g.xp6(6),g.Q6J("ngIf",(null==(Ki=I.formularioEspecialista.get("apellido"))?null:Ki.hasError("apellidoInvalido"))&&(null==(Ki=I.formularioEspecialista.get("apellido"))?null:Ki.touched)),g.xp6(1),g.Q6J("ngIf",(null==(rs=I.formularioEspecialista.get("apellido"))?null:rs.hasError("required"))&&(null==(rs=I.formularioEspecialista.get("apellido"))?null:rs.touched)),g.xp6(5),g.Q6J("ngIf",(null==(lo=I.formularioEspecialista.get("dni"))?null:lo.hasError("dniInvalido"))&&(null==(lo=I.formularioEspecialista.get("dni"))?null:lo.touched)),g.xp6(1),g.Q6J("ngIf",(null==(Ns=I.formularioEspecialista.get("dni"))?null:Ns.hasError("required"))&&(null==(Ns=I.formularioEspecialista.get("dni"))?null:Ns.touched)),g.xp6(5),g.Q6J("ngIf",(null==(bs=I.formularioEspecialista.get("edad"))?null:bs.hasError("required"))&&(null==(bs=I.formularioEspecialista.get("edad"))?null:bs.touched)),g.xp6(1),g.Q6J("ngIf",(null==(to=I.formularioEspecialista.get("edad"))?null:to.hasError("min"))&&(null==(to=I.formularioEspecialista.get("edad"))?null:to.touched)),g.xp6(6),g.Q6J("disabled",I.formularioEspecialista.invalid)}}const ir=[{path:"",children:[{path:"register",component:(()=>{class S{constructor(I,$,Pe){this.fb=I,this.router=$,this.authService=Pe,this.urlImgEspecialista=[],this.urlImgsPaciente=[],this.usuarioPaciente={urlImgs:[],tipoUsuario:"paciente"},this.usuarioEspecialista={urlImgs:[],tipoUsuario:"especialista"},this.urlImgRegisterEmpresa=Ut.N.urlImgRegisterEmpresa,this.tipoUsuario="paciente",this.formularioPaciente=this.fb.group({nombre:["",[vt.required,Mt.validarNombre]],apellido:["",[vt.required,Mt.validarApellido]],edad:["",[vt.required,vt.min(18),vt.max(110)]],dni:["",[vt.required,Mt.validarDni]],obraSocial:["",vt.required],email:["",[vt.required,Mt.validarEmail]],password:["",[vt.required,vt.minLength(8)]],urlImgs:["",[vt.required,Mt.validarImg]]}),this.formularioEspecialista=this.fb.group({nombre:["",[vt.required,Mt.validarNombre]],apellido:["",[vt.required,Mt.validarApellido]],edad:["",[vt.required,vt.min(18),vt.max(110)]],dni:["",[vt.required,Mt.validarDni]],especialidad:["",vt.required],email:["",[vt.required,Mt.validarEmail]],password:["",[vt.required,vt.minLength(8)]],urlImg:["",[vt.required,Mt.validarImg]]})}ngOnInit(){}ngOnChanges(){}onSubmit(){if("paciente"==this.tipoUsuario){const{nombre:I,apellido:$,email:Pe,edad:mt,dni:bn,password:fr,obraSocial:Dr}=this.formularioPaciente.value;this.usuarioPaciente.nombre=I,this.usuarioPaciente.apellido=$,this.usuarioPaciente.email=Pe,this.usuarioPaciente.edad=mt,this.usuarioPaciente.dni=bn,this.usuarioPaciente.password=fr,this.usuarioPaciente.obraSocial=Dr,this.authService.register(this.usuarioPaciente,this.urlImgsPaciente).then(()=>{console.log("a home"),this.router.navigate(["home"])})}else{const{nombre:I,apellido:$,email:Pe,edad:mt,dni:bn,password:fr,especialidad:Dr}=this.formularioEspecialista.value;this.usuarioEspecialista.nombre=I,this.usuarioEspecialista.apellido=$,this.usuarioEspecialista.email=Pe,this.usuarioEspecialista.edad=mt,this.usuarioEspecialista.dni=bn,this.usuarioEspecialista.password=fr,this.usuarioEspecialista.especialidad=Dr,this.authService.register(this.usuarioEspecialista,this.urlImgEspecialista).then(()=>{console.log("a home"),this.router.navigate(["home"])})}}onVolver(){setTimeout(()=>{this.router.navigate(["auth"])},500)}resetFormulario(){this.formularioEspecialista.reset(),this.formularioPaciente.reset()}onFileChangePaciente(I){var $;if(I.target.files)for(const Pe in I.target.files)if(Object.prototype.hasOwnProperty.call(I.target.files,Pe)){const mt=I.target.files[Pe];"image/jpeg"==mt.type||"image/png"==mt.type?"paciente"==this.tipoUsuario?null===($=this.urlImgsPaciente)||void 0===$||$.push(mt):this.urlImgEspecialista=mt:"paciente"==this.tipoUsuario?this.formularioPaciente.get("urlImgs").updateValueAndValidity():this.formularioEspecialista.get("urlImg").updateValueAndValidity()}}}return S.\u0275fac=function(I){return new(I||S)(g.Y36(ft),g.Y36(O.F0),g.Y36(vr.e))},S.\u0275cmp=g.Xpm({type:S,selectors:[["app-register"]],features:[g.TTD],decls:17,vars:5,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-12"],[1,"img-fluid","col-2",3,"src"],[1,"row","justify-content-araound","mb-3","fs-5"],[1,"col-4","me-4"],[1,"form-check","form-check-inline","col-2"],["type","radio","name","tipoUsuario","id","pacienteCheck","value","paciente","checked","",1,"form-check-input",3,"ngModel","click","ngModelChange"],["for","inlineRadio1",1,"form-check-label"],[1,"form-check","form-check-inline","col-2","ms-3"],["type","radio","name","tipoUsuario","id","especialista","value","especialista",1,"form-check-input",3,"ngModel","click","ngModelChange"],["for","inlineRadio2",1,"form-check-label"],["class","col-12",3,"formGroup","ngSubmit",4,"ngIf"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"row","justify-content-around"],[1,"col-5"],[1,"input-group","mb-3"],["for","nombre",1,"input-group-text"],["formControlName","nombre","type","text","id","nombre","name","nombre","autocomplete","off",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],["for","email",1,"input-group-text"],["formControlName","email","type","email","id","email","name","email","autocomplete","off",1,"form-control"],["for","password",1,"input-group-text"],["formControlName","password","type","password","id","password","name","password","autocomplete","off",1,"form-control"],[1,"mb-4"],["for","foto",1,"form-label"],["formControlName","urlImgs","type","file","id","foto","multiple","multiple",1,"form-control",3,"change"],["for","apellido",1,"input-group-text"],["formControlName","apellido","type","text","id","apellido","name","apellido","autocomplete","off",1,"form-control"],["for","dni",1,"input-group-text"],["formControlName","dni","type","text","id","dni","name","dni","autocomplete","off",1,"form-control","form-control-sm"],["for","edad",1,"input-group-text"],["formControlName","edad","type","edad","id","edad","name","edad","autocomplete","off",1,"form-control"],[1,"input-group","mb-5"],["for","obraSocial",1,"input-group-text"],["formControlName","obraSocial","type","text","id","obraSocial","name","obraSocial","autocomplete","off",1,"form-control"],["type","submit",1,"btn","btn-success","btn-lg","col-4",3,"disabled"],["type","button",1,"btn","btn-primary","btn-lg","col-4",3,"click"],[1,"form-text","text-danger"],["formControlName","nombre","type","text","id","nombre","name","nombre","autocomplete","off",1,"form-control"],["formControlName","urlImg","type","file","id","foto",1,"form-control"],["for","especialidad",1,"input-group-text"],["formControlName","especialidad","type","text","id","especialidad","name","especialidad","autocomplete","off",1,"form-control"]],template:function(I,$){1&I&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",1),g._UZ(4,"img",3),g.qZA(),g.qZA(),g.TgZ(5,"div",4),g._UZ(6,"div",5),g.TgZ(7,"div",6),g.TgZ(8,"input",7),g.NdJ("click",function(){return $.resetFormulario()})("ngModelChange",function(mt){return $.tipoUsuario=mt}),g.qZA(),g.TgZ(9,"label",8),g._uU(10,"Paciente"),g.qZA(),g.qZA(),g.TgZ(11,"div",9),g.TgZ(12,"input",10),g.NdJ("click",function(){return $.resetFormulario()})("ngModelChange",function(mt){return $.tipoUsuario=mt}),g.qZA(),g.TgZ(13,"label",11),g._uU(14,"Especialista"),g.qZA(),g.qZA(),g.qZA(),g.YNc(15,De,57,16,"form",12),g.YNc(16,br,57,16,"form",12),g.qZA(),g.qZA()),2&I&&(g.xp6(4),g.s9C("src",$.urlImgRegisterEmpresa,g.LSH),g.xp6(4),g.Q6J("ngModel",$.tipoUsuario),g.xp6(4),g.Q6J("ngModel",$.tipoUsuario),g.xp6(3),g.Q6J("ngIf","paciente"==$.tipoUsuario),g.xp6(1),g.Q6J("ngIf","especialista"==$.tipoUsuario))},directives:[pn,qe,qt,Ur,D.O5,Oe,lt,Ie,$s],styles:[""]}),S})()},{path:"login",component:ni},{path:"",redirectTo:"login",pathMatch:"full"}]}];let Ui=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[[O.Bz.forChild(ir)],O.Bz]}),S})(),eo=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[[D.ez,Ui,ye,z]]}),S})()},817:(Pt,Ye,B)=>{"use strict";B.d(Ye,{e:()=>No});var D=B(8239),O=B(3018),g=B(3820),Se=B(4028),be=B(4290),de=B(7574),Fe=B(5917),ve=B(4402),ae=B(7393),J=B(3637);class he{constructor(k,Z){this.dueTime=k,this.scheduler=Z}call(k,Z){return Z.subscribe(new ge(k,this.dueTime,this.scheduler))}}class ge extends ae.L{constructor(k,Z,oe){super(k),this.dueTime=Z,this.scheduler=oe,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(k){this.clearDebounce(),this.lastValue=k,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ke,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:k}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(k)}}clearDebounce(){const k=this.debouncedSubscription;null!==k&&(this.remove(k),k.unsubscribe(),this.debouncedSubscription=null)}}function ke(j){j.debouncedNext()}var He=B(8002),je=B(3190),me=B(6643),Le=B(8939),qe=B(4486),$e=B(5452),Qe=B(3854),re=B(6034),ut=(()=>{return(j=ut||(ut={}))[j.NO_ERROR=0]="NO_ERROR",j[j.NETWORK_ERROR=1]="NETWORK_ERROR",j[j.ABORT=2]="ABORT",ut;var j})();const Gt="firebasestorage.googleapis.com",vt="storageBucket";class Re extends Qe.ZR{constructor(k,Z){super(fe(k),`Firebase Storage: ${Z} (${fe(k)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Re.prototype)}_codeEquals(k){return fe(k)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(k){this.customData.serverResponse=k,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function fe(j){return"storage/"+j}function Te(){return new Re("unknown","An unknown error occurred, please check the error payload for server response.")}function xn(){return new Re("canceled","User canceled the upload/download.")}function Tr(){return new Re("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Lt(){return new Re("no-download-url","The given file does not have any download URLs.")}function tn(j){return new Re("invalid-argument",j)}function Mn(){return new Re("app-deleted","The Firebase app was deleted.")}function Wn(j){return new Re("invalid-root-operation","The operation '"+j+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tn(j,k){return new Re("invalid-format","String does not match format '"+j+"': "+k)}function Rr(j){throw new Re("internal-error","Internal error: "+j)}class pr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ut.NO_ERROR,this.sendPromise_=new Promise(k=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ut.ABORT,k()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ut.NETWORK_ERROR,k()}),this.xhr_.addEventListener("load",()=>{k()})})}send(k,Z,oe,De){if(this.sent_)throw Rr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Z,k,!0),void 0!==De)for(const se in De)De.hasOwnProperty(se)&&this.xhr_.setRequestHeader(se,De[se].toString());return void 0!==oe?this.xhr_.send(oe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(k){return-1}}getResponseText(){if(!this.sent_)throw Rr("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(k){return this.xhr_.getResponseHeader(k)}addUploadProgressListener(k){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",k)}removeUploadProgressListener(k){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",k)}}class mn{createConnection(){return new pr}}class Nn{constructor(k,Z){this.bucket=k,this.path_=Z}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const k=encodeURIComponent;return"/b/"+k(this.bucket)+"/o/"+k(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(k,Z){let oe;try{oe=Nn.makeFromUrl(k,Z)}catch(De){return new Nn(k,"")}if(""===oe.path)return oe;throw new Re("invalid-default-bucket","Invalid default bucket '"+k+"'.")}static makeFromUrl(k,Z){let oe=null;const De="([A-Za-z0-9.\\-_]+)",Yt=new RegExp("^gs://"+De+"(/(.*))?$","i");function kn(ci){ci.path_=decodeURIComponent(ci.path)}const nr=Z.replace(/[.]/g,"\\."),br=[{regex:Yt,indices:{bucket:1,path:3},postModify:function(ci){"/"===ci.path.charAt(ci.path.length-1)&&(ci.path_=ci.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${nr}/v[A-Za-z0-9_]+/b/${De}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:kn},{regex:new RegExp(`^https?://${Z===Gt?"(?:storage.googleapis.com|storage.cloud.google.com)":Z}/${De}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:kn}];for(let ci=0;ci<br.length;ci++){const ir=br[ci],Ui=ir.regex.exec(k);if(Ui){let S=Ui[ir.indices.path];S||(S=""),oe=new Nn(Ui[ir.indices.bucket],S),ir.postModify(oe);break}}if(null==oe)throw new Re("invalid-url","Invalid URL '"+k+"'.");return oe}}class Cn{constructor(k){this.promise_=Promise.reject(k)}getPromise(){return this.promise_}cancel(k=!1){}}function lt(j){return"string"==typeof j||j instanceof String}function Vn(j){return zn()&&j instanceof Blob}function zn(){return"undefined"!=typeof Blob}function er(j,k,Z,oe){if(oe<k)throw tn(`Invalid value for '${j}'. Expected ${k} or greater.`);if(oe>Z)throw tn(`Invalid value for '${j}'. Expected ${Z} or less.`)}function En(j,k,Z){let oe=k;return null==Z&&(oe=`https://${k}`),`${Z}://${oe}/v0${j}`}function Ft(j){const k=encodeURIComponent;let Z="?";for(const oe in j)j.hasOwnProperty(oe)&&(Z=Z+(k(oe)+"=")+k(j[oe])+"&");return Z=Z.slice(0,-1),Z}class kt{constructor(k,Z,oe,De,se,Je,Yt,gt,kn,wn,nr){this.url_=k,this.method_=Z,this.headers_=oe,this.body_=De,this.successCodes_=se,this.additionalRetryCodes_=Je,this.callback_=Yt,this.errorCallback_=gt,this.timeout_=kn,this.progressCallback_=wn,this.pool_=nr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((wr,rr)=>{this.resolve_=wr,this.reject_=rr,this.start_()})}start_(){const Z=(oe,De)=>{const se=this.resolve_,Je=this.reject_,Yt=De.connection;if(De.wasSuccessCode)try{const gt=this.callback_(Yt,Yt.getResponseText());void 0!==gt?se(gt):se()}catch(gt){Je(gt)}else if(null!==Yt){const gt=Te();gt.serverResponse=Yt.getResponseText(),Je(this.errorCallback_?this.errorCallback_(Yt,gt):gt)}else Je(De.canceled?this.appDelete_?Mn():xn():new Re("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?Z(0,new lr(!1,null,!0)):this.backoffId_=function(j,k,Z){let oe=1,De=null,se=!1,Je=0;function Yt(){return 2===Je}let gt=!1;function kn(...Fn){gt||(gt=!0,k.apply(null,Fn))}function wn(Fn){De=setTimeout(()=>{De=null,j(nr,Yt())},Fn)}function nr(Fn,...ii){if(gt)return;if(Fn)return void kn.call(null,Fn,...ii);if(Yt()||se)return void kn.call(null,Fn,...ii);let li;oe<64&&(oe*=2),1===Je?(Je=2,li=0):li=1e3*(oe+Math.random()),wn(li)}let wr=!1;function rr(Fn){wr||(wr=!0,!gt&&(null!==De?(Fn||(Je=2),clearTimeout(De),wn(0)):Fn||(Je=1)))}return wn(0),setTimeout(()=>{se=!0,rr(!0)},Z),rr}((oe,De)=>{if(De)return void oe(!1,new lr(!1,null,!0));const se=this.pool_.createConnection();this.pendingConnection_=se;const Je=Yt=>{null!==this.progressCallback_&&this.progressCallback_(Yt.loaded,Yt.lengthComputable?Yt.total:-1)};null!==this.progressCallback_&&se.addUploadProgressListener(Je),se.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&se.removeUploadProgressListener(Je),this.pendingConnection_=null;const Yt=se.getErrorCode()===ut.NO_ERROR,gt=se.getStatus();if(!Yt||this.isRetryStatusCode_(gt)){const wn=se.getErrorCode()===ut.ABORT;return void oe(!1,new lr(!1,null,wn))}const kn=-1!==this.successCodes_.indexOf(gt);oe(!0,new lr(kn,se))})},Z,this.timeout_)}getPromise(){return this.promise_}cancel(k){this.canceled_=!0,this.appDelete_=k||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(k){const Z=k>=500&&k<600,De=-1!==[408,429].indexOf(k),se=-1!==this.additionalRetryCodes_.indexOf(k);return Z||De||se}}class lr{constructor(k,Z,oe){this.wasSuccessCode=k,this.connection=Z,this.canceled=!!oe}}function Ee(...j){const k="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==k){const Z=new k;for(let oe=0;oe<j.length;oe++)Z.append(j[oe]);return Z.getBlob()}if(zn())return new Blob(j);throw new Re("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ue={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tt{constructor(k,Z){this.data=k,this.contentType=Z||null}}function wt(j,k){switch(j){case Ue.RAW:return new Tt(yn(k));case Ue.BASE64:case Ue.BASE64URL:return new Tt(an(j,k));case Ue.DATA_URL:return new Tt(function(j){const k=new Vr(j);return k.base64?an(Ue.BASE64,k.rest):function(j){let k;try{k=decodeURIComponent(j)}catch(Z){throw Tn(Ue.DATA_URL,"Malformed data URL.")}return yn(k)}(k.rest)}(k),function(j){return new Vr(j).contentType}(k))}throw Te()}function yn(j){const k=[];for(let Z=0;Z<j.length;Z++){let oe=j.charCodeAt(Z);oe<=127?k.push(oe):oe<=2047?k.push(192|oe>>6,128|63&oe):55296==(64512&oe)?Z<j.length-1&&56320==(64512&j.charCodeAt(Z+1))?(oe=65536|(1023&oe)<<10|1023&j.charCodeAt(++Z),k.push(240|oe>>18,128|oe>>12&63,128|oe>>6&63,128|63&oe)):k.push(239,191,189):56320==(64512&oe)?k.push(239,191,189):k.push(224|oe>>12,128|oe>>6&63,128|63&oe)}return new Uint8Array(k)}function an(j,k){switch(j){case Ue.BASE64:{const De=-1!==k.indexOf("-"),se=-1!==k.indexOf("_");if(De||se)throw Tn(j,"Invalid character '"+(De?"-":"_")+"' found: is it base64url encoded?");break}case Ue.BASE64URL:{const De=-1!==k.indexOf("+"),se=-1!==k.indexOf("/");if(De||se)throw Tn(j,"Invalid character '"+(De?"+":"/")+"' found: is it base64 encoded?");k=k.replace(/-/g,"+").replace(/_/g,"/");break}}let Z;try{Z=function(j){return atob(j)}(k)}catch(De){throw Tn(j,"Invalid character found")}const oe=new Uint8Array(Z.length);for(let De=0;De<Z.length;De++)oe[De]=Z.charCodeAt(De);return oe}class Vr{constructor(k){this.base64=!1,this.contentType=null;const Z=k.match(/^data:([^,]+)?,/);if(null===Z)throw Tn(Ue.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const oe=Z[1]||null;null!=oe&&(this.base64=function(j,k){return j.length>=k.length&&j.substring(j.length-k.length)===k}(oe,";base64"),this.contentType=this.base64?oe.substring(0,oe.length-";base64".length):oe),this.rest=k.substring(k.indexOf(",")+1)}}class Xr{constructor(k,Z){let oe=0,De="";Vn(k)?(this.data_=k,oe=k.size,De=k.type):k instanceof ArrayBuffer?(Z?this.data_=new Uint8Array(k):(this.data_=new Uint8Array(k.byteLength),this.data_.set(new Uint8Array(k))),oe=this.data_.length):k instanceof Uint8Array&&(Z?this.data_=k:(this.data_=new Uint8Array(k.length),this.data_.set(k)),oe=k.length),this.size_=oe,this.type_=De}size(){return this.size_}type(){return this.type_}slice(k,Z){if(Vn(this.data_)){const De=function(j,k,Z){return j.webkitSlice?j.webkitSlice(k,Z):j.mozSlice?j.mozSlice(k,Z):j.slice?j.slice(k,Z):null}(this.data_,k,Z);return null===De?null:new Xr(De)}{const oe=new Uint8Array(this.data_.buffer,k,Z-k);return new Xr(oe,!0)}}static getBlob(...k){if(zn()){const Z=k.map(oe=>oe instanceof Xr?oe.data_:oe);return new Xr(Ee.apply(null,Z))}{const Z=k.map(Je=>lt(Je)?wt(Ue.RAW,Je).data:Je.data_);let oe=0;Z.forEach(Je=>{oe+=Je.byteLength});const De=new Uint8Array(oe);let se=0;return Z.forEach(Je=>{for(let Yt=0;Yt<Je.length;Yt++)De[se++]=Je[Yt]}),new Xr(De,!0)}}uploadData(){return this.data_}}function ei(j){let k;try{k=JSON.parse(j)}catch(Z){return null}return function(j){return"object"==typeof j&&!Array.isArray(j)}(k)?k:null}function Ci(j){const k=j.lastIndexOf("/",j.length-2);return-1===k?j:j.slice(k+1)}function zr(j,k){return k}class Nr{constructor(k,Z,oe,De){this.server=k,this.local=Z||k,this.writable=!!oe,this.xform=De||zr}}let cr=null;function oi(){if(cr)return cr;const j=[];j.push(new Nr("bucket")),j.push(new Nr("generation")),j.push(new Nr("metageneration")),j.push(new Nr("name","fullPath",!0));const Z=new Nr("name");Z.xform=function(se,Je){return function(j){return!lt(j)||j.length<2?j:Ci(j)}(Je)},j.push(Z);const De=new Nr("size");return De.xform=function(se,Je){return void 0!==Je?Number(Je):Je},j.push(De),j.push(new Nr("timeCreated")),j.push(new Nr("updated")),j.push(new Nr("md5Hash",null,!0)),j.push(new Nr("cacheControl",null,!0)),j.push(new Nr("contentDisposition",null,!0)),j.push(new Nr("contentEncoding",null,!0)),j.push(new Nr("contentLanguage",null,!0)),j.push(new Nr("contentType",null,!0)),j.push(new Nr("metadata","customMetadata",!0)),cr=j,cr}function Gr(j,k,Z){const oe=ei(k);return null===oe?null:function(j,k,Z){const oe={type:"file"},De=Z.length;for(let se=0;se<De;se++){const Je=Z[se];oe[Je.local]=Je.xform(oe,k[Je.server])}return function(j,k){Object.defineProperty(j,"ref",{get:function(){const se=new Nn(j.bucket,j.fullPath);return k._makeStorageReference(se)}})}(oe,j),oe}(j,oe,Z)}function dr(j,k){const Z={},oe=k.length;for(let De=0;De<oe;De++){const se=k[De];se.writable&&(Z[se.server]=j[se.local])}return JSON.stringify(Z)}const as="prefixes";class Ht{constructor(k,Z,oe,De){this.url=k,this.method=Z,this.handler=oe,this.timeout=De,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hn(j){if(!j)throw Te()}function Zr(j,k){return function(oe,De){const se=Gr(j,De,k);return Hn(null!==se),se}}function Un(j){return function(Z,oe){let De;return De=401===Z.getStatus()?Z.getResponseText().includes("Firebase App Check token is invalid")?new Re("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Re("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===Z.getStatus()?function(j){return new Re("quota-exceeded","Quota for bucket '"+j+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(j.bucket):403===Z.getStatus()?function(j){return new Re("unauthorized","User does not have permission to access '"+j+"'.")}(j.path):oe,De.serverResponse=oe.serverResponse,De}}function tr(j){const k=Un(j);return function(oe,De){let se=k(oe,De);return 404===oe.getStatus()&&(se=function(j){return new Re("object-not-found","Object '"+j+"' does not exist.")}(j.path)),se.serverResponse=De.serverResponse,se}}function es(j,k,Z){const De=En(k.fullServerUrl(),j.host,j._protocol),Je=j.maxOperationRetryTime,Yt=new Ht(De,"GET",Zr(j,Z),Je);return Yt.errorHandler=tr(k),Yt}function nn(j,k,Z,oe,De){const se={};se.prefix=k.isRoot?"":k.path+"/",Z&&Z.length>0&&(se.delimiter=Z),oe&&(se.pageToken=oe),De&&(se.maxResults=De);const Yt=En(k.bucketOnlyServerUrl(),j.host,j._protocol),kn=j.maxOperationRetryTime,wn=new Ht(Yt,"GET",function(j,k){return function(oe,De){const se=function(j,k,Z){const oe=ei(Z);return null===oe?null:function(j,k,Z){const oe={prefixes:[],items:[],nextPageToken:Z.nextPageToken};if(Z[as])for(const De of Z[as]){const se=De.replace(/\/$/,""),Je=j._makeStorageReference(new Nn(k,se));oe.prefixes.push(Je)}if(Z.items)for(const De of Z.items){const se=j._makeStorageReference(new Nn(k,De.name));oe.items.push(se)}return oe}(j,k,oe)}(j,k,De);return Hn(null!==se),se}}(j,k.bucket),kn);return wn.urlParams=se,wn.errorHandler=Un(k),wn}function js(j,k,Z){const De=En(k.fullServerUrl(),j.host,j._protocol),Je=j.maxOperationRetryTime,Yt=new Ht(De,"GET",function(j,k){return function(oe,De){const se=Gr(j,De,k);return Hn(null!==se),function(j,k,Z,oe){const De=ei(k);if(null===De||!lt(De.downloadTokens))return null;const se=De.downloadTokens;if(0===se.length)return null;const Je=encodeURIComponent;return se.split(",").map(kn=>{const nr=j.fullPath;return En("/b/"+Je(j.bucket)+"/o/"+Je(nr),Z,oe)+Ft({alt:"media",token:kn})})[0]}(se,De,j.host,j._protocol)}}(j,Z),Je);return Yt.errorHandler=tr(k),Yt}function us(j,k,Z,oe){const se=En(k.fullServerUrl(),j.host,j._protocol),Yt=dr(Z,oe),kn=j.maxOperationRetryTime,wn=new Ht(se,"PATCH",Zr(j,oe),kn);return wn.headers={"Content-Type":"application/json; charset=utf-8"},wn.body=Yt,wn.errorHandler=tr(k),wn}function vs(j,k){const oe=En(k.fullServerUrl(),j.host,j._protocol),Yt=new Ht(oe,"DELETE",function(gt,kn){},j.maxOperationRetryTime);return Yt.successCodes=[200,204],Yt.errorHandler=tr(k),Yt}function Ar(j,k,Z){const oe=Object.assign({},Z);return oe.fullPath=j.path,oe.size=k.size(),oe.contentType||(oe.contentType=function(j,k){return k&&k.type()||"application/octet-stream"}(0,k)),oe}class Yr{constructor(k,Z,oe,De){this.current=k,this.total=Z,this.finalized=!!oe,this.metadata=De||null}}function Ur(j,k){let Z=null;try{Z=j.getResponseHeader("X-Goog-Upload-Status")}catch(De){Hn(!1)}return Hn(!!Z&&-1!==(k||["active"]).indexOf(Z)),Z}const Ct={STATE_CHANGED:"state_changed"},Ot={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gn(j){switch(j){case"running":case"pausing":case"canceling":return Ot.RUNNING;case"paused":return Ot.PAUSED;case"success":return Ot.SUCCESS;case"canceled":return Ot.CANCELED;case"error":default:return Ot.ERROR}}class pn{constructor(k,Z,oe){if("function"==typeof k||null!=Z||null!=oe)this.next=k,this.error=null!=Z?Z:void 0,this.complete=null!=oe?oe:void 0;else{const se=k;this.next=se.next,this.error=se.error,this.complete=se.complete}}}function gn(j){return(...k)=>{Promise.resolve().then(()=>j(...k))}}class kr{constructor(k,Z,oe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=k,this._blob=Z,this._metadata=oe,this._mappings=oi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=De=>{this._request=void 0,this._chunkMultiplier=1,De._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=De,this._transition("error"))},this._metadataErrorHandler=De=>{this._request=void 0,De._codeEquals("canceled")?this.completeTransitions_():(this._error=De,this._transition("error"))},this._promise=new Promise((De,se)=>{this._resolve=De,this._reject=se,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const k=this._transferred;return Z=>this._updateProgress(k+Z)}_shouldDoResumable(k){return k.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(k){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Z,oe])=>{switch(this._state){case"running":k(Z,oe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((k,Z)=>{const oe=function(j,k,Z,oe,De){const se=k.bucketOnlyServerUrl(),Je=Ar(k,oe,De),Yt={name:Je.fullPath},gt=En(se,j.host,j._protocol),wn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${oe.size()}`,"X-Goog-Upload-Header-Content-Type":Je.contentType,"Content-Type":"application/json; charset=utf-8"},nr=dr(Je,Z),Fn=new Ht(gt,"POST",function(ii){let Vi;Ur(ii);try{Vi=ii.getResponseHeader("X-Goog-Upload-URL")}catch(li){Hn(!1)}return Hn(lt(Vi)),Vi},j.maxUploadRetryTime);return Fn.urlParams=Yt,Fn.headers=wn,Fn.body=nr,Fn.errorHandler=Un(k),Fn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(oe,k,Z);this._request=De,De.getPromise().then(se=>{this._request=void 0,this._uploadUrl=se,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const k=this._uploadUrl;this._resolveToken((Z,oe)=>{const De=function(j,k,Z,oe){const gt=new Ht(Z,"POST",function(kn){const wn=Ur(kn,["active","final"]);let nr=null;try{nr=kn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(rr){Hn(!1)}nr||Hn(!1);const wr=Number(nr);return Hn(!isNaN(wr)),new Yr(wr,oe.size(),"final"===wn)},j.maxUploadRetryTime);return gt.headers={"X-Goog-Upload-Command":"query"},gt.errorHandler=Un(k),gt}(this._ref.storage,this._ref._location,k,this._blob),se=this._ref.storage._makeRequest(De,Z,oe);this._request=se,se.getPromise().then(Je=>{Je=Je,this._request=void 0,this._updateProgress(Je.current),this._needToFetchStatus=!1,Je.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const k=262144*this._chunkMultiplier,Z=new Yr(this._transferred,this._blob.size()),oe=this._uploadUrl;this._resolveToken((De,se)=>{let Je;try{Je=function(j,k,Z,oe,De,se,Je,Yt){const gt=new Yr(0,0);if(Je?(gt.current=Je.current,gt.total=Je.total):(gt.current=0,gt.total=oe.size()),oe.size()!==gt.total)throw new Re("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const kn=gt.total-gt.current;let wn=kn;De>0&&(wn=Math.min(wn,De));const nr=gt.current,Fn={"X-Goog-Upload-Command":wn===kn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${gt.current}`},ii=oe.slice(nr,nr+wn);if(null===ii)throw Tr();const br=new Ht(Z,"POST",function(ci,ir){const Ui=Ur(ci,["active","final"]),eo=gt.current+wn,S=oe.size();let A;return A="final"===Ui?Zr(k,se)(ci,ir):null,new Yr(eo,S,"final"===Ui,A)},k.maxUploadRetryTime);return br.headers=Fn,br.body=ii.uploadData(),br.progressCallback=Yt||null,br.errorHandler=Un(j),br}(this._ref._location,this._ref.storage,oe,this._blob,k,this._mappings,Z,this._makeProgressCallback())}catch(gt){return this._error=gt,void this._transition("error")}const Yt=this._ref.storage._makeRequest(Je,De,se);this._request=Yt,Yt.getPromise().then(gt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(gt.current),gt.finalized?(this._metadata=gt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((k,Z)=>{const oe=es(this._ref.storage,this._ref._location,this._mappings),De=this._ref.storage._makeRequest(oe,k,Z);this._request=De,De.getPromise().then(se=>{this._request=void 0,this._metadata=se,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((k,Z)=>{const oe=function(j,k,Z,oe,De){const se=k.bucketOnlyServerUrl(),Je={"X-Goog-Upload-Protocol":"multipart"},gt=function(){let br="";for(let ci=0;ci<2;ci++)br+=Math.random().toString().slice(2);return br}();Je["Content-Type"]="multipart/related; boundary="+gt;const kn=Ar(k,oe,De),wn=dr(kn,Z),rr=Xr.getBlob("--"+gt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wn+"\r\n--"+gt+"\r\nContent-Type: "+kn.contentType+"\r\n\r\n",oe,"\r\n--"+gt+"--");if(null===rr)throw Tr();const Fn={name:kn.fullPath},ii=En(se,j.host,j._protocol),li=j.maxUploadRetryTime,Or=new Ht(ii,"POST",Zr(j,Z),li);return Or.urlParams=Fn,Or.headers=Je,Or.body=rr.uploadData(),Or.errorHandler=Un(k),Or}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),De=this._ref.storage._makeRequest(oe,k,Z);this._request=De,De.getPromise().then(se=>{this._request=void 0,this._metadata=se,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(k){const Z=this._transferred;this._transferred=k,this._transferred!==Z&&this._notifyObservers()}_transition(k){if(this._state!==k)switch(k){case"canceling":case"pausing":this._state=k,void 0!==this._request&&this._request.cancel();break;case"running":const Z="paused"===this._state;this._state=k,Z&&(this._notifyObservers(),this._start());break;case"paused":this._state=k,this._notifyObservers();break;case"canceled":this._error=xn(),this._state=k,this._notifyObservers();break;case"error":case"success":this._state=k,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const k=Gn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:k,metadata:this._metadata,task:this,ref:this._ref}}on(k,Z,oe,De){const se=new pn(Z||void 0,oe||void 0,De||void 0);return this._addObserver(se),()=>{this._removeObserver(se)}}then(k,Z){return this._promise.then(k,Z)}catch(k){return this.then(null,k)}_addObserver(k){this._observers.push(k),this._notifyObserver(k)}_removeObserver(k){const Z=this._observers.indexOf(k);-1!==Z&&this._observers.splice(Z,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Z=>{this._notifyObserver(Z)})}_finishPromise(){if(void 0!==this._resolve){let k=!0;switch(Gn(this._state)){case Ot.SUCCESS:gn(this._resolve.bind(null,this.snapshot))();break;case Ot.CANCELED:case Ot.ERROR:gn(this._reject.bind(null,this._error))();break;default:k=!1}k&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(k){switch(Gn(this._state)){case Ot.RUNNING:case Ot.PAUSED:k.next&&gn(k.next.bind(k,this.snapshot))();break;case Ot.SUCCESS:k.complete&&gn(k.complete.bind(k))();break;case Ot.CANCELED:case Ot.ERROR:k.error&&gn(k.error.bind(k,this._error))();break;default:k.error&&gn(k.error.bind(k,this._error))()}}resume(){const k="paused"===this._state||"pausing"===this._state;return k&&this._transition("running"),k}pause(){const k="running"===this._state;return k&&this._transition("pausing"),k}cancel(){const k="running"===this._state||"pausing"===this._state;return k&&this._transition("canceling"),k}}class _r{constructor(k,Z){this._service=k,this._location=Z instanceof Nn?Z:Nn.makeFromUrl(Z,k.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(k,Z){return new _r(k,Z)}get root(){const k=new Nn(this._location.bucket,"");return this._newRef(this._service,k)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ci(this._location.path)}get storage(){return this._service}get parent(){const k=function(j){if(0===j.length)return null;const k=j.lastIndexOf("/");return-1===k?"":j.slice(0,k)}(this._location.path);if(null===k)return null;const Z=new Nn(this._location.bucket,k);return new _r(this._service,Z)}_throwIfRoot(k){if(""===this._location.path)throw Wn(k)}}function it(j,k,Z){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,D.Z)(function*(j,k,Z){const De=yield An(j,{pageToken:Z});k.prefixes.push(...De.prefixes),k.items.push(...De.items),null!=De.nextPageToken&&(yield it(j,k,De.nextPageToken))})).apply(this,arguments)}function An(j,k){return sn.apply(this,arguments)}function sn(){return(sn=(0,D.Z)(function*(j,k){null!=k&&"number"==typeof k.maxResults&&er("options.maxResults",1,1e3,k.maxResults);const Z=k||{},oe=nn(j.storage,j._location,"/",Z.pageToken,Z.maxResults);return(yield j.storage.makeRequestWithTokens(oe)).getPromise()})).apply(this,arguments)}function ti(){return(ti=(0,D.Z)(function*(j){j._throwIfRoot("getMetadata");const k=es(j.storage,j._location,oi());return(yield j.storage.makeRequestWithTokens(k)).getPromise()})).apply(this,arguments)}function xo(){return(xo=(0,D.Z)(function*(j,k){j._throwIfRoot("updateMetadata");const Z=us(j.storage,j._location,k,oi());return(yield j.storage.makeRequestWithTokens(Z)).getPromise()})).apply(this,arguments)}function Wi(){return(Wi=(0,D.Z)(function*(j){j._throwIfRoot("getDownloadURL");const k=js(j.storage,j._location,oi());return(yield j.storage.makeRequestWithTokens(k)).getPromise().then(Z=>{if(null===Z)throw Lt();return Z})})).apply(this,arguments)}function Gs(){return(Gs=(0,D.Z)(function*(j){j._throwIfRoot("deleteObject");const k=vs(j.storage,j._location);return(yield j.storage.makeRequestWithTokens(k)).getPromise()})).apply(this,arguments)}function ls(j,k){const Z=function(j,k){const Z=k.split("/").filter(oe=>oe.length>0).join("/");return 0===j.length?Z:j+"/"+Z}(j._location.path,k),oe=new Nn(j._location.bucket,Z);return new _r(j.storage,oe)}function zi(j,k){if(j instanceof ds){const Z=j;if(null==Z._bucket)throw new Re("no-default-bucket","No default bucket found. Did you set the '"+vt+"' property when initializing the app?");const oe=new _r(Z,Z._bucket);return null!=k?zi(oe,k):oe}return void 0!==k?ls(j,k):j}function ts(j,k){if(k&&function(j){return/^[A-Za-z]+:\/\//.test(j)}(k)){if(j instanceof ds)return function(j,k){return new _r(j,k)}(j,k);throw tn("To use ref(service, url), the first argument must be a Storage instance.")}return zi(j,k)}function cs(j,k){const Z=null==k?void 0:k[vt];return null==Z?null:Nn.makeFromBucketSpec(Z,j)}class ds{constructor(k,Z,oe,De,se,Je){this.app=k,this._authProvider=Z,this._appCheckProvider=oe,this._pool=De,this._url=se,this._firebaseVersion=Je,this._bucket=null,this._host=Gt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=se?Nn.makeFromBucketSpec(se,this._host):cs(this._host,this.app.options)}get host(){return this._host}set host(k){this._host=k,this._bucket=null!=this._url?Nn.makeFromBucketSpec(this._url,k):cs(k,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(k){er("time",0,Number.POSITIVE_INFINITY,k),this._maxUploadRetryTime=k}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(k){er("time",0,Number.POSITIVE_INFINITY,k),this._maxOperationRetryTime=k}_getAuthToken(){var k=this;return(0,D.Z)(function*(){if(k._overrideAuthToken)return k._overrideAuthToken;const Z=k._authProvider.getImmediate({optional:!0});if(Z){const oe=yield Z.getToken();if(null!==oe)return oe.accessToken}return null})()}_getAppCheckToken(){var k=this;return(0,D.Z)(function*(){const Z=k._appCheckProvider.getImmediate({optional:!0});return Z?(yield Z.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(k=>k.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(k){return new _r(this,k)}_makeRequest(k,Z,oe){if(this._deleted)return new Cn(Mn());{const De=function(j,k,Z,oe,De,se){const Je=Ft(j.urlParams),Yt=j.url+Je,gt=Object.assign({},j.headers);return function(j,k){k&&(j["X-Firebase-GMPID"]=k)}(gt,k),function(j,k){null!==k&&k.length>0&&(j.Authorization="Firebase "+k)}(gt,Z),function(j,k){j["X-Firebase-Storage-Version"]="webjs/"+(null!=k?k:"AppManager")}(gt,se),function(j,k){null!==k&&(j["X-Firebase-AppCheck"]=k)}(gt,oe),new kt(Yt,j.method,gt,j.body,j.successCodes,j.additionalRetryCodes,j.handler,j.errorHandler,j.timeout,j.progressCallback,De)}(k,this._appId,Z,oe,this._pool,this._firebaseVersion);return this._requests.add(De),De.getPromise().then(()=>this._requests.delete(De),()=>this._requests.delete(De)),De}}makeRequestWithTokens(k){var Z=this;return(0,D.Z)(function*(){const[oe,De]=yield Promise.all([Z._getAuthToken(),Z._getAppCheckToken()]);return Z._makeRequest(k,oe,De)})()}}const hs="@firebase/storage";function uo(j,k){return ts(j=(0,Qe.m9)(j),k)}(0,$e._registerComponent)(new re.wA("storage",function(j,{instanceIdentifier:k}){const Z=j.getProvider("app").getImmediate(),oe=j.getProvider("auth-internal"),De=j.getProvider("app-check-internal");return new ds(Z,oe,De,new mn,k,$e.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,$e.registerVersion)(hs,"0.8.4",""),(0,$e.registerVersion)(hs,"0.8.4","esm2017");class G{constructor(k,Z,oe){this._delegate=k,this.task=Z,this.ref=oe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class N{constructor(k,Z){this._delegate=k,this._ref=Z,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new G(this._delegate.snapshot,this,this._ref)}then(k,Z){return this._delegate.then(oe=>{if(k)return k(new G(oe,this,this._ref))},Z)}on(k,Z,oe,De){let se;return Z&&(se="function"==typeof Z?Je=>Z(new G(Je,this,this._ref)):{next:Z.next?Je=>Z.next(new G(Je,this,this._ref)):void 0,complete:Z.complete||void 0,error:Z.error||void 0}),this._delegate.on(k,se,oe||void 0,De||void 0)}}class z{constructor(k,Z){this._delegate=k,this._service=Z}get prefixes(){return this._delegate.prefixes.map(k=>new ye(k,this._service))}get items(){return this._delegate.items.map(k=>new ye(k,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ye{constructor(k,Z){this._delegate=k,this.storage=Z}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(k){const Z=function(j,k){return ls(j,k)}(this._delegate,k);return new ye(Z,this.storage)}get root(){return new ye(this._delegate.root,this.storage)}get parent(){const k=this._delegate.parent;return null==k?null:new ye(k,this.storage)}put(k,Z){return this._throwIfRoot("put"),new N(function(j,k,Z){return function(j,k,Z){return j._throwIfRoot("uploadBytesResumable"),new kr(j,new Xr(k),Z)}(j=(0,Qe.m9)(j),k,Z)}(this._delegate,k,Z),this)}putString(k,Z=Ue.RAW,oe){this._throwIfRoot("putString");const De=wt(Z,k),se=Object.assign({},oe);return null==se.contentType&&null!=De.contentType&&(se.contentType=De.contentType),new N(new kr(this._delegate,new Xr(De.data,!0),se),this)}listAll(){return(j=this._delegate,function(j){const k={prefixes:[],items:[]};return it(j,k).then(()=>k)}(j=(0,Qe.m9)(j))).then(k=>new z(k,this.storage));var j}list(k){return function(j,k){return An(j=(0,Qe.m9)(j),k)}(this._delegate,k||void 0).then(Z=>new z(Z,this.storage))}getMetadata(){return function(j){return ti.apply(this,arguments)}((0,Qe.m9)(this._delegate))}updateMetadata(k){return function(j,k){return function(j,k){return xo.apply(this,arguments)}(j=(0,Qe.m9)(j),k)}(this._delegate,k)}getDownloadURL(){return function(j){return Wi.apply(this,arguments)}((0,Qe.m9)(this._delegate))}delete(){return this._throwIfRoot("delete"),function(j){return Gs.apply(this,arguments)}((0,Qe.m9)(this._delegate))}_throwIfRoot(k){if(""===this._delegate._location.path)throw Wn(k)}}class Ke{constructor(k,Z){this.app=k,this._delegate=Z}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(k){if(ft(k))throw tn("ref() expected a child path but got a URL, use refFromURL instead.");return new ye(uo(this._delegate,k),this)}refFromURL(k){if(!ft(k))throw tn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Nn.makeFromUrl(k,this._delegate.host)}catch(Z){throw tn("refFromUrl() expected a valid full URL but got an invalid one.")}return new ye(uo(this._delegate,k),this)}setMaxUploadRetryTime(k){this._delegate.maxUploadRetryTime=k}setMaxOperationRetryTime(k){this._delegate.maxOperationRetryTime=k}useEmulator(k,Z,oe={}){!function(j,k,Z,oe={}){!function(j,k,Z,oe={}){j.host=`${k}:${Z}`,j._protocol="http";const{mockUserToken:De}=oe;De&&(j._overrideAuthToken="string"==typeof De?De:(0,Qe.Sg)(De,j.app.options.projectId))}(j,k,Z,oe)}(this._delegate,k,Z,oe)}}function ft(j){return/^[A-Za-z]+:\/\//.test(j)}function vr(j,{instanceIdentifier:k}){const Z=j.getProvider("app-compat").getImmediate(),oe=j.getProvider("storage").getImmediate({identifier:k});return new Ke(Z,oe)}!function(j){const k={TaskState:Ot,TaskEvent:Ct,StringFormat:Ue,Storage:Ke,Reference:ye};j.INTERNAL.registerComponent(new re.wA("storage-compat",vr,"PUBLIC").setServiceProps(k).setMultipleInstances(!0)),j.registerVersion("@firebase/storage-compat","0.1.4")}(qe.Z);var Er=B(2965);function Fi(j){const k=function(j){return new de.y(k=>{const Z=Je=>k.next(Je);Z(j.snapshot);const se=j.on("state_changed",Z);return j.then(Je=>{Z(Je),k.complete()},Je=>{Z(j.snapshot),(Je=>{k.error(Je)})(Je)}),function(){se()}}).pipe(function(j,k=J.P){return Z=>Z.lift(new he(j,k))}(0))}(j);return{task:j,then:j.then.bind(j),catch:j.catch.bind(j),pause:j.pause.bind(j),cancel:j.cancel.bind(j),resume:j.resume.bind(j),snapshotChanges:()=>k,percentageChanges:()=>k.pipe((0,He.U)(Z=>Z.bytesTransferred/Z.totalBytes*100))}}function ni(j){return{getDownloadURL:()=>(0,Fe.of)(void 0).pipe(me.fc,(0,je.w)(()=>j.getDownloadURL()),me.iC),getMetadata:()=>(0,Fe.of)(void 0).pipe(me.fc,(0,je.w)(()=>j.getMetadata()),me.iC),delete:()=>(0,ve.D)(j.delete()),child:k=>ni(j.child(k)),updateMetadata:k=>(0,ve.D)(j.updateMetadata(k)),put:(k,Z)=>Fi(j.put(k,Z)),putString:(k,Z,oe)=>Fi(j.putString(k,Z,oe)),list:k=>(0,ve.D)(j.list(k)),listAll:()=>(0,ve.D)(j.listAll())}}B(7841);const Fr=new O.OlP("angularfire2.storageBucket"),Li=new O.OlP("angularfire2.storage.maxUploadRetryTime"),Ms=new O.OlP("angularfire2.storage.maxOperationRetryTime"),Ai=new O.OlP("angularfire2.storage.use-emulator");let ri=(()=>{class j{constructor(Z,oe,De,se,Je,Yt,gt,kn,wn,nr){const wr=(0,Le.on)(Z,Je,oe);this.storage=(0,Le.cc)(`${wr.name}.storage.${De}`,"AngularFireStorage",wr.name,()=>{const rr=Je.runOutsideAngular(()=>wr.storage(De||void 0)),Fn=wn;return Fn&&rr.useEmulator(...Fn),gt&&rr.setMaxUploadRetryTime(gt),kn&&rr.setMaxOperationRetryTime(kn),rr},[gt,kn])}ref(Z){return ni(this.storage.ref(Z))}refFromURL(Z){return ni(this.storage.refFromURL(Z))}upload(Z,oe,De){return ni(this.storage.ref(Z)).put(oe,De)}}return j.\u0275fac=function(Z){return new(Z||j)(O.LFG(Le.Dh),O.LFG(Le.xv,8),O.LFG(Fr,8),O.LFG(O.Lbi),O.LFG(O.R0b),O.LFG(me.HU),O.LFG(Li,8),O.LFG(Ms,8),O.LFG(Ai,8),O.LFG(Er.nm,8))},j.\u0275prov=O.Yz7({token:j,factory:j.\u0275fac,providedIn:"any"}),j})(),Mo=(()=>{class j{constructor(Z){this.storage=Z}uploadFilePublic(Z){return this.storage.ref(`usuarios-temp/temp-${Z.name}`).put(Z)}}return j.\u0275fac=function(Z){return new(Z||j)(O.LFG(ri))},j.\u0275prov=O.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),No=(()=>{class j{constructor(Z,oe,De,se){this.afAuth=Z,this.usuariosService=oe,this.fns=De,this.storageService=se,this.statusUserChangedEvent=new O.vpe,this.currentUserChangedEvent=new O.vpe,this.hasLogged=!1,this.mostrarHeader=!1,this.afAuth.authState.subscribe(Je=>{this.mostrarHeader=!0,this.setCurrentUser(Je),this.setHasLogged(!(!Je||!Je.emailVerified))})}setCurrentUser(Z){null!=Z&&(this.currentUser=Z,this.currentUserChangedEvent.emit(Z))}setHasLogged(Z){this.hasLogged=Z,this.statusUserChangedEvent.emit(Z)}logout(){return this.mostrarHeader=!1,this.afAuth.signOut()}signin(Z,oe){return this.afAuth.signInWithEmailAndPassword(Z,oe).then(De=>{var se;if(null==De)throw new Error("El email o la contrase\xf1a son incorrectas");if(!(null===(se=De.user)||void 0===se?void 0:se.emailVerified))throw new Error("El email no est\xe1 verificado, por favor revise su correo.");return De}).catch(De=>{throw De})}register(Z,oe){var De=this;return(0,D.Z)(function*(){return De.afAuth.createUserWithEmailAndPassword(Z.email,Z.password).then(se=>{var Je,Yt,gt,kn;switch(Z.tipoUsuario){case"paciente":De.fns.httpsCallable("addPacienteRole")({email:null===(Je=se.user)||void 0===Je?void 0:Je.email}).toPromise().then(Fn=>console.log(Fn));break;case"especialista":De.fns.httpsCallable("addEspecialistaRole")({email:null===(Yt=se.user)||void 0===Yt?void 0:Yt.email}).toPromise().then(Fn=>console.log(Fn));break;case"administrador":De.fns.httpsCallable("addAdminRole")({email:null===(gt=se.user)||void 0===gt?void 0:gt.email}).toPromise().then(Fn=>console.log(Fn))}null===(kn=se.user)||void 0===kn||kn.sendEmailVerification();const wn=Object.assign({},Z);for(const nr in oe)if(Object.prototype.hasOwnProperty.call(oe,nr)){const wr=oe[nr];console.log(wr),console.log(oe),De.storageService.uploadFilePublic(wr).then(rr=>{var Fn;null===(Fn=wn.urlImgs)||void 0===Fn||Fn.push(rr.metadata.fullPath)})}De.usuariosService.crearUsuarios(wn)})})()}getUserAuthState(){return this.afAuth.authState}}return j.\u0275fac=function(Z){return new(Z||j)(O.LFG(g.zQ),O.LFG(Se.i),O.LFG(be.l4),O.LFG(Mo))},j.\u0275prov=O.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})()},4028:(Pt,Ye,B)=>{"use strict";B.d(Ye,{i:()=>g});var D=B(3018),O=B(166);let g=(()=>{class Se{constructor(de){this.db=de,this.usuariosRef=this.db.collection("usuarios")}obtenerCurrentUsuario(de){return this.db.collection("usuarios",ve=>ve.where("email","==",`${de}`)).valueChanges()}crearUsuarios(de){return this.usuariosRef.add(Object.assign({},de))}obtenerUsuarios(){return this.usuariosRef.valueChanges()}}return Se.\u0275fac=function(de){return new(de||Se)(D.LFG(O.ST))},Se.\u0275prov=D.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},2340:(Pt,Ye,B)=>{"use strict";B.d(Ye,{N:()=>D});const D={firebase:{projectId:"labiv-tp-final",appId:"1:596421808876:web:0550f7049af0c06a90cbc9",storageBucket:"labiv-tp-final.appspot.com",apiKey:"AIzaSyAnfgTdq2HiHPkd9ZCPRfUYOWpCT09o0TM",authDomain:"labiv-tp-final.firebaseapp.com",messagingSenderId:"596421808876"},production:!0,nombreEmpresa:"Cl\xednica OnLine",urlImgEmpresa:"../assets/img-login.png",urlImgLogoEmpresa:"../assets/img-logo.png",urlImgRegisterEmpresa:"../assets/img-register.png"}},8707:(Pt,Ye,B)=>{"use strict";var D=B(8583),O=B(3018);class g extends D.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends g{static makeCurrent(){(0,D.HT)(new Se)}onAndCancel(ce,Q,Ie){return ce.addEventListener(Q,Ie,!1),()=>{ce.removeEventListener(Q,Ie,!1)}}dispatchEvent(ce,Q){ce.dispatchEvent(Q)}remove(ce){ce.parentNode&&ce.parentNode.removeChild(ce)}createElement(ce,Q){return(Q=Q||this.getDefaultDocument()).createElement(ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ce){return ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(ce){return ce instanceof DocumentFragment}getGlobalEventTarget(ce,Q){return"window"===Q?window:"document"===Q?ce:"body"===Q?ce.body:null}getBaseHref(ce){const Q=(be=be||document.querySelector("base"),be?be.getAttribute("href"):null);return null==Q?null:function(ne){Fe=Fe||document.createElement("a"),Fe.setAttribute("href",ne);const ce=Fe.pathname;return"/"===ce.charAt(0)?ce:`/${ce}`}(Q)}resetBaseElement(){be=null}getUserAgent(){return window.navigator.userAgent}getCookie(ce){return(0,D.Mx)(document.cookie,ce)}}let Fe,be=null;const ae=new O.OlP("TRANSITION_ID"),X=[{provide:O.ip1,useFactory:function(ne,ce,Q){return()=>{Q.get(O.CZH).donePromise.then(()=>{const Ie=(0,D.q)(),it=ce.querySelectorAll(`style[ng-transition="${ne}"]`);for(let Bt=0;Bt<it.length;Bt++)Ie.remove(it[Bt])})}},deps:[ae,D.K0,O.zs3],multi:!0}];class he{static init(){(0,O.VLi)(new he)}addToWindow(ce){O.dqk.getAngularTestability=(Ie,it=!0)=>{const Bt=ce.findTestabilityInTree(Ie,it);if(null==Bt)throw new Error("Could not find testability for element.");return Bt},O.dqk.getAllAngularTestabilities=()=>ce.getAllTestabilities(),O.dqk.getAllAngularRootElements=()=>ce.getAllRootElements(),O.dqk.frameworkStabilizers||(O.dqk.frameworkStabilizers=[]),O.dqk.frameworkStabilizers.push(Ie=>{const it=O.dqk.getAllAngularTestabilities();let Bt=it.length,An=!1;const sn=function(hr){An=An||hr,Bt--,0==Bt&&Ie(An)};it.forEach(function(hr){hr.whenStable(sn)})})}findTestabilityInTree(ce,Q,Ie){if(null==Q)return null;const it=ce.getTestability(Q);return null!=it?it:Ie?(0,D.q)().isShadowRoot(Q)?this.findTestabilityInTree(ce,Q.host,!0):this.findTestabilityInTree(ce,Q.parentElement,!0):null}}let ge=(()=>{class ne{build(){return new XMLHttpRequest}}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})();const fe=new O.OlP("EventManagerPlugins");let Te=(()=>{class ne{constructor(Q,Ie){this._zone=Ie,this._eventNameToPlugin=new Map,Q.forEach(it=>it.manager=this),this._plugins=Q.slice().reverse()}addEventListener(Q,Ie,it){return this._findPluginFor(Ie).addEventListener(Q,Ie,it)}addGlobalEventListener(Q,Ie,it){return this._findPluginFor(Ie).addGlobalEventListener(Q,Ie,it)}getZone(){return this._zone}_findPluginFor(Q){const Ie=this._eventNameToPlugin.get(Q);if(Ie)return Ie;const it=this._plugins;for(let Bt=0;Bt<it.length;Bt++){const An=it[Bt];if(An.supports(Q))return this._eventNameToPlugin.set(Q,An),An}throw new Error(`No event manager plugin found for event ${Q}`)}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(fe),O.LFG(O.R0b))},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class Be{constructor(ce){this._doc=ce}addGlobalEventListener(ce,Q,Ie){const it=(0,D.q)().getGlobalEventTarget(this._doc,ce);if(!it)throw new Error(`Unsupported event target ${it} for event ${Q}`);return this.addEventListener(it,Q,Ie)}}let Ge=(()=>{class ne{constructor(){this._stylesSet=new Set}addStyles(Q){const Ie=new Set;Q.forEach(it=>{this._stylesSet.has(it)||(this._stylesSet.add(it),Ie.add(it))}),this.onStylesAdded(Ie)}onStylesAdded(Q){}getAllStyles(){return Array.from(this._stylesSet)}}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})(),Rt=(()=>{class ne extends Ge{constructor(Q){super(),this._doc=Q,this._hostNodes=new Map,this._hostNodes.set(Q.head,[])}_addStylesToHost(Q,Ie,it){Q.forEach(Bt=>{const An=this._doc.createElement("style");An.textContent=Bt,it.push(Ie.appendChild(An))})}addHost(Q){const Ie=[];this._addStylesToHost(this._stylesSet,Q,Ie),this._hostNodes.set(Q,Ie)}removeHost(Q){const Ie=this._hostNodes.get(Q);Ie&&Ie.forEach(Xt),this._hostNodes.delete(Q)}onStylesAdded(Q){this._hostNodes.forEach((Ie,it)=>{this._addStylesToHost(Q,it,Ie)})}ngOnDestroy(){this._hostNodes.forEach(Q=>Q.forEach(Xt))}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(D.K0))},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})();function Xt(ne){(0,D.q)().remove(ne)}const $n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jt=/%COMP%/g;function Lt(ne,ce,Q){for(let Ie=0;Ie<ce.length;Ie++){let it=ce[Ie];Array.isArray(it)?Lt(ne,it,Q):(it=it.replace(jt,ne),Q.push(it))}return Q}function tn(ne){return ce=>{if("__ngUnwrap__"===ce)return ne;!1===ne(ce)&&(ce.preventDefault(),ce.returnValue=!1)}}let Wn=(()=>{class ne{constructor(Q,Ie,it){this.eventManager=Q,this.sharedStylesHost=Ie,this.appId=it,this.rendererByCompId=new Map,this.defaultRenderer=new Tn(Q)}createRenderer(Q,Ie){if(!Q||!Ie)return this.defaultRenderer;switch(Ie.encapsulation){case O.ifc.Emulated:{let it=this.rendererByCompId.get(Ie.id);return it||(it=new mn(this.eventManager,this.sharedStylesHost,Ie,this.appId),this.rendererByCompId.set(Ie.id,it)),it.applyToHost(Q),it}case 1:case O.ifc.ShadowDom:return new Nn(this.eventManager,this.sharedStylesHost,Q,Ie);default:if(!this.rendererByCompId.has(Ie.id)){const it=Lt(Ie.id,Ie.styles,[]);this.sharedStylesHost.addStyles(it),this.rendererByCompId.set(Ie.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(Te),O.LFG(Rt),O.LFG(O.AFp))},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class Tn{constructor(ce){this.eventManager=ce,this.data=Object.create(null)}destroy(){}createElement(ce,Q){return Q?document.createElementNS($n[Q]||Q,ce):document.createElement(ce)}createComment(ce){return document.createComment(ce)}createText(ce){return document.createTextNode(ce)}appendChild(ce,Q){ce.appendChild(Q)}insertBefore(ce,Q,Ie){ce&&ce.insertBefore(Q,Ie)}removeChild(ce,Q){ce&&ce.removeChild(Q)}selectRootElement(ce,Q){let Ie="string"==typeof ce?document.querySelector(ce):ce;if(!Ie)throw new Error(`The selector "${ce}" did not match any elements`);return Q||(Ie.textContent=""),Ie}parentNode(ce){return ce.parentNode}nextSibling(ce){return ce.nextSibling}setAttribute(ce,Q,Ie,it){if(it){Q=it+":"+Q;const Bt=$n[it];Bt?ce.setAttributeNS(Bt,Q,Ie):ce.setAttribute(Q,Ie)}else ce.setAttribute(Q,Ie)}removeAttribute(ce,Q,Ie){if(Ie){const it=$n[Ie];it?ce.removeAttributeNS(it,Q):ce.removeAttribute(`${Ie}:${Q}`)}else ce.removeAttribute(Q)}addClass(ce,Q){ce.classList.add(Q)}removeClass(ce,Q){ce.classList.remove(Q)}setStyle(ce,Q,Ie,it){it&(O.JOm.DashCase|O.JOm.Important)?ce.style.setProperty(Q,Ie,it&O.JOm.Important?"important":""):ce.style[Q]=Ie}removeStyle(ce,Q,Ie){Ie&O.JOm.DashCase?ce.style.removeProperty(Q):ce.style[Q]=""}setProperty(ce,Q,Ie){ce[Q]=Ie}setValue(ce,Q){ce.nodeValue=Q}listen(ce,Q,Ie){return"string"==typeof ce?this.eventManager.addGlobalEventListener(ce,Q,tn(Ie)):this.eventManager.addEventListener(ce,Q,tn(Ie))}}class mn extends Tn{constructor(ce,Q,Ie,it){super(ce),this.component=Ie;const Bt=Lt(it+"-"+Ie.id,Ie.styles,[]);Q.addStyles(Bt),this.contentAttr="_ngcontent-%COMP%".replace(jt,it+"-"+Ie.id),this.hostAttr="_nghost-%COMP%".replace(jt,it+"-"+Ie.id)}applyToHost(ce){super.setAttribute(ce,this.hostAttr,"")}createElement(ce,Q){const Ie=super.createElement(ce,Q);return super.setAttribute(Ie,this.contentAttr,""),Ie}}class Nn extends Tn{constructor(ce,Q,Ie,it){super(ce),this.sharedStylesHost=Q,this.hostEl=Ie,this.shadowRoot=Ie.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Bt=Lt(it.id,it.styles,[]);for(let An=0;An<Bt.length;An++){const sn=document.createElement("style");sn.textContent=Bt[An],this.shadowRoot.appendChild(sn)}}nodeOrShadowRoot(ce){return ce===this.hostEl?this.shadowRoot:ce}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ce,Q){return super.appendChild(this.nodeOrShadowRoot(ce),Q)}insertBefore(ce,Q,Ie){return super.insertBefore(this.nodeOrShadowRoot(ce),Q,Ie)}removeChild(ce,Q){return super.removeChild(this.nodeOrShadowRoot(ce),Q)}parentNode(ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ce)))}}let Cn=(()=>{class ne extends Be{constructor(Q){super(Q)}supports(Q){return!0}addEventListener(Q,Ie,it){return Q.addEventListener(Ie,it,!1),()=>this.removeEventListener(Q,Ie,it)}removeEventListener(Q,Ie,it){return Q.removeEventListener(Ie,it)}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(D.K0))},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})();const En=["alt","control","meta","shift"],kt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},en={alt:ne=>ne.altKey,control:ne=>ne.ctrlKey,meta:ne=>ne.metaKey,shift:ne=>ne.shiftKey};let we=(()=>{class ne extends Be{constructor(Q){super(Q)}supports(Q){return null!=ne.parseEventName(Q)}addEventListener(Q,Ie,it){const Bt=ne.parseEventName(Ie),An=ne.eventCallback(Bt.fullKey,it,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.q)().onAndCancel(Q,Bt.domEventName,An))}static parseEventName(Q){const Ie=Q.toLowerCase().split("."),it=Ie.shift();if(0===Ie.length||"keydown"!==it&&"keyup"!==it)return null;const Bt=ne._normalizeKey(Ie.pop());let An="";if(En.forEach(hr=>{const ti=Ie.indexOf(hr);ti>-1&&(Ie.splice(ti,1),An+=hr+".")}),An+=Bt,0!=Ie.length||0===Bt.length)return null;const sn={};return sn.domEventName=it,sn.fullKey=An,sn}static getEventFullKey(Q){let Ie="",it=function(ne){let ce=ne.key;if(null==ce){if(ce=ne.keyIdentifier,null==ce)return"Unidentified";ce.startsWith("U+")&&(ce=String.fromCharCode(parseInt(ce.substring(2),16)),3===ne.location&&lr.hasOwnProperty(ce)&&(ce=lr[ce]))}return kt[ce]||ce}(Q);return it=it.toLowerCase()," "===it?it="space":"."===it&&(it="dot"),En.forEach(Bt=>{Bt!=it&&en[Bt](Q)&&(Ie+=Bt+".")}),Ie+=it,Ie}static eventCallback(Q,Ie,it){return Bt=>{ne.getEventFullKey(Bt)===Q&&it.runGuarded(()=>Ie(Bt))}}static _normalizeKey(Q){switch(Q){case"esc":return"escape";default:return Q}}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(D.K0))},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac}),ne})();const gr=(0,O.eFA)(O._c5,"browser",[{provide:O.Lbi,useValue:D.bD},{provide:O.g9A,useValue:function(){Se.makeCurrent(),he.init()},multi:!0},{provide:D.K0,useFactory:function(){return(0,O.RDi)(document),document},deps:[]}]),Xr=[[],{provide:O.zSh,useValue:"root"},{provide:O.qLn,useFactory:function(){return new O.qLn},deps:[]},{provide:fe,useClass:Cn,multi:!0,deps:[D.K0,O.R0b,O.Lbi]},{provide:fe,useClass:we,multi:!0,deps:[D.K0]},[],{provide:Wn,useClass:Wn,deps:[Te,Rt,O.AFp]},{provide:O.FYo,useExisting:Wn},{provide:Ge,useExisting:Rt},{provide:Rt,useClass:Rt,deps:[D.K0]},{provide:O.dDg,useClass:O.dDg,deps:[O.R0b]},{provide:Te,useClass:Te,deps:[fe,O.R0b]},{provide:D.JF,useClass:ge,deps:[]},[]];let ei=(()=>{class ne{constructor(Q){if(Q)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Q){return{ngModule:ne,providers:[{provide:O.AFp,useValue:Q.appId},{provide:ae,useExisting:O.AFp},X]}}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(ne,12))},ne.\u0275mod=O.oAB({type:ne}),ne.\u0275inj=O.cJS({providers:Xr,imports:[D.ez,O.hGG]}),ne})();"undefined"!=typeof window&&window;var mr=B(6575),Un=B(8239),tr=B(817);let es=(()=>{class ne{constructor(Q,Ie){this.authService=Q,this.router=Ie}canActivate(){var Q=this;return(0,Un.Z)(function*(){return yield new Promise((Bt,An)=>{setTimeout((0,Un.Z)(function*(){let sn=!1;const hr=Q.authService.currentUser;if(console.log(hr),null==hr)Q.authService.logout(),Q.router.navigate(["auth"]);else{const ti=yield hr.getIdTokenResult();if(!ti.claims.email_verified)throw new Error("El email no esta verificado");ti.claims.paciente||ti.claims.especialista||ti.claims.administrador?sn=!0:setTimeout(()=>{Q.authService.logout(),Q.router.navigate(["auth"])},1e3)}Bt(sn)}),1e3)})})()}canActivateChild(Q,Ie){return!0}canLoad(Q,Ie){return!0}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.LFG(tr.e),O.LFG(mr.F0))},ne.\u0275prov=O.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})();var nn=B(4028);const vs=[{path:"",redirectTo:"auth",pathMatch:"full"},{path:"home",component:(()=>{class ne{constructor(Q,Ie){this.userService=Q,this.authService=Ie}ngOnInit(){setTimeout(()=>{var Q;this.userService.obtenerCurrentUsuario(null===(Q=this.authService.currentUser)||void 0===Q?void 0:Q.email).subscribe(Ie=>{console.log(Ie)})},500)}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.Y36(nn.i),O.Y36(tr.e))},ne.\u0275cmp=O.Xpm({type:ne,selectors:[["app-home"]],decls:2,vars:0,template:function(Q,Ie){1&Q&&(O.TgZ(0,"p"),O._uU(1,"home works!"),O.qZA())},styles:[""]}),ne})(),canActivate:[es]},{path:"auth",loadChildren:()=>Promise.resolve().then(B.bind(B,6830)).then(ne=>ne.AuthModule)},{path:"**",component:(()=>{class ne{constructor(Q){this.router=Q}ngOnInit(){setTimeout(()=>{this.router.navigate(["home"])},3e3)}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.Y36(mr.F0))},ne.\u0275cmp=O.Xpm({type:ne,selectors:[["app-error-page"]],decls:2,vars:0,template:function(Q,Ie){1&Q&&(O.TgZ(0,"p"),O._uU(1,"error-page works!"),O.qZA())},styles:[""]}),ne})()}];let Kr=(()=>{class ne{}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275mod=O.oAB({type:ne}),ne.\u0275inj=O.cJS({imports:[[mr.Bz.forRoot(vs)],mr.Bz]}),ne})();var Ar=B(2340);function ki(ne,ce){1&ne&&(O.TgZ(0,"li",9),O.TgZ(1,"a",11),O._uU(2,"Usuarios"),O.qZA(),O.qZA())}function Yr(ne,ce){if(1&ne){const Q=O.EpF();O.TgZ(0,"header"),O.TgZ(1,"nav",1),O.TgZ(2,"div",2),O._UZ(3,"img",3),O.TgZ(4,"button",4),O._UZ(5,"span",5),O.qZA(),O.TgZ(6,"div",6),O.TgZ(7,"ul",7),O.YNc(8,ki,3,0,"li",8),O.TgZ(9,"li",9),O.TgZ(10,"a",10),O.NdJ("click",function(){return O.CHM(Q),O.oxw().onLogout()}),O._uU(11,"Cerrar sesi\xf3n"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA()}if(2&ne){const Q=O.oxw();O.xp6(3),O.s9C("src",Q.urlLogoEmpresa,O.LSH),O.xp6(5),O.Q6J("ngIf","administrador"==(null==Q.userData?null:Q.userData.tipoUsuario))}}let Ur=(()=>{class ne{constructor(Q,Ie,it){this.authService=Q,this.router=Ie,this.userService=it,this.userHasLogged=!1,this.nombreEmpresa=Ar.N.nombreEmpresa,this.urlLogoEmpresa=Ar.N.urlImgLogoEmpresa}ngOnInit(){this.authService.statusUserChangedEvent.subscribe(Q=>{Q?setTimeout(()=>{this.userHasLogged=Q},1e3):this.userHasLogged=Q}),setTimeout(()=>{var Q;this.userService.obtenerCurrentUsuario(null===(Q=this.authService.currentUser)||void 0===Q?void 0:Q.email).subscribe(Ie=>{this.userData=Ie[0]})},500)}onLogout(){this.authService.logout().then(()=>{setTimeout(()=>{this.router.navigate(["auth"])},500)})}}return ne.\u0275fac=function(Q){return new(Q||ne)(O.Y36(tr.e),O.Y36(mr.F0),O.Y36(nn.i))},ne.\u0275cmp=O.Xpm({type:ne,selectors:[["app-header"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container-fluid"],[1,"img-fluid",3,"src"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav","mb-2","mb-md-0"],["class","nav-item",4,"ngIf"],[1,"nav-item"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-link",3,"click"],["aria-current","page","href","#",1,"nav-link","active"]],template:function(Q,Ie){1&Q&&O.YNc(0,Yr,12,2,"header",0),2&Q&&O.Q6J("ngIf",Ie.userHasLogged)},directives:[D.O5],styles:["img[_ngcontent-%COMP%]{width:100px}a.nav-link[_ngcontent-%COMP%]{cursor:pointer}"]}),ne})(),Oe=(()=>{class ne{constructor(){this.nombreEmpresa=Ar.N.nombreEmpresa}ngOnInit(){this.currentDate=new Date}}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275cmp=O.Xpm({type:ne,selectors:[["app-footer"]],decls:5,vars:5,consts:[[1,"footer","py-3","bg-light","fixed-bottom"],[1,"container","text-center"],[1,"text-muted"]],template:function(Q,Ie){1&Q&&(O.TgZ(0,"footer",0),O.TgZ(1,"div",1),O.TgZ(2,"span",2),O._uU(3),O.ALo(4,"date"),O.qZA(),O.qZA(),O.qZA()),2&Q&&(O.xp6(3),O.AsE("",Ie.nombreEmpresa," - ",O.xi3(4,2,Ie.currentDate,"yyyy"),""))},pipes:[D.uU],styles:[""]}),ne})(),We=(()=>{class ne{constructor(){this.title="ClinicaApp"}}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275cmp=O.Xpm({type:ne,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container","contenedor"]],template:function(Q,Ie){1&Q&&(O._UZ(0,"app-header"),O.TgZ(1,"div",0),O._UZ(2,"router-outlet"),O.qZA(),O._UZ(3,"app-footer"))},directives:[Ur,mr.lC,Oe],styles:[""]}),ne})(),Xe=(()=>{class ne{}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275mod=O.oAB({type:ne}),ne.\u0275inj=O.cJS({imports:[[D.ez]]}),ne})(),Et=(()=>{class ne{}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275mod=O.oAB({type:ne}),ne.\u0275inj=O.cJS({imports:[[D.ez]]}),ne})();var Ct=B(6830),Ot=B(8939),Gn=B(3820),pn=B(166),gn=B(4290);let kr=(()=>{class ne{}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275mod=O.oAB({type:ne}),ne.\u0275inj=O.cJS({imports:[[Ot.hO.initializeApp(Ar.N.firebase),Gn.ww,pn.yb,gn.Qv]]}),ne})(),_r=(()=>{class ne{}return ne.\u0275fac=function(Q){return new(Q||ne)},ne.\u0275mod=O.oAB({type:ne,bootstrap:[We]}),ne.\u0275inj=O.cJS({providers:[],imports:[[ei,kr,Kr,Et,Xe,Ct.AuthModule]]}),ne})();Ar.N.production&&(0,O.G48)(),gr().bootstrapModule(_r).catch(ne=>console.error(ne))},4762:(Pt,Ye,B)=>{"use strict";function Se(Ve,Re){var fe={};for(var Te in Ve)Object.prototype.hasOwnProperty.call(Ve,Te)&&Re.indexOf(Te)<0&&(fe[Te]=Ve[Te]);if(null!=Ve&&"function"==typeof Object.getOwnPropertySymbols){var Be=0;for(Te=Object.getOwnPropertySymbols(Ve);Be<Te.length;Be++)Re.indexOf(Te[Be])<0&&Object.prototype.propertyIsEnumerable.call(Ve,Te[Be])&&(fe[Te[Be]]=Ve[Te[Be]])}return fe}function ve(Ve,Re,fe,Te){return new(fe||(fe=Promise))(function(Ge,Rt){function Xt(xn){try{jt(Te.next(xn))}catch(Zn){Rt(Zn)}}function $n(xn){try{jt(Te.throw(xn))}catch(Zn){Rt(Zn)}}function jt(xn){xn.done?Ge(xn.value):function(Ge){return Ge instanceof fe?Ge:new fe(function(Rt){Rt(Ge)})}(xn.value).then(Xt,$n)}jt((Te=Te.apply(Ve,Re||[])).next())})}function ae(Ve,Re){var Te,Be,Ge,Rt,fe={label:0,sent:function(){if(1&Ge[0])throw Ge[1];return Ge[1]},trys:[],ops:[]};return Rt={next:Xt(0),throw:Xt(1),return:Xt(2)},"function"==typeof Symbol&&(Rt[Symbol.iterator]=function(){return this}),Rt;function Xt(jt){return function(xn){return function(jt){if(Te)throw new TypeError("Generator is already executing.");for(;fe;)try{if(Te=1,Be&&(Ge=2&jt[0]?Be.return:jt[0]?Be.throw||((Ge=Be.return)&&Ge.call(Be),0):Be.next)&&!(Ge=Ge.call(Be,jt[1])).done)return Ge;switch(Be=0,Ge&&(jt=[2&jt[0],Ge.value]),jt[0]){case 0:case 1:Ge=jt;break;case 4:return fe.label++,{value:jt[1],done:!1};case 5:fe.label++,Be=jt[1],jt=[0];continue;case 7:jt=fe.ops.pop(),fe.trys.pop();continue;default:if(!(Ge=(Ge=fe.trys).length>0&&Ge[Ge.length-1])&&(6===jt[0]||2===jt[0])){fe=0;continue}if(3===jt[0]&&(!Ge||jt[1]>Ge[0]&&jt[1]<Ge[3])){fe.label=jt[1];break}if(6===jt[0]&&fe.label<Ge[1]){fe.label=Ge[1],Ge=jt;break}if(Ge&&fe.label<Ge[2]){fe.label=Ge[2],fe.ops.push(jt);break}Ge[2]&&fe.ops.pop(),fe.trys.pop();continue}jt=Re.call(Ve,fe)}catch(xn){jt=[6,xn],Be=0}finally{Te=Ge=0}if(5&jt[0])throw jt[1];return{value:jt[0]?jt[1]:void 0,done:!0}}([jt,xn])}}}function he(Ve){var Re="function"==typeof Symbol&&Symbol.iterator,fe=Re&&Ve[Re],Te=0;if(fe)return fe.call(Ve);if(Ve&&"number"==typeof Ve.length)return{next:function(){return Ve&&Te>=Ve.length&&(Ve=void 0),{value:Ve&&Ve[Te++],done:!Ve}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(Ve,Re){var fe="function"==typeof Symbol&&Ve[Symbol.iterator];if(!fe)return Ve;var Be,Rt,Te=fe.call(Ve),Ge=[];try{for(;(void 0===Re||Re-- >0)&&!(Be=Te.next()).done;)Ge.push(Be.value)}catch(Xt){Rt={error:Xt}}finally{try{Be&&!Be.done&&(fe=Te.return)&&fe.call(Te)}finally{if(Rt)throw Rt.error}}return Ge}function je(Ve,Re,fe){if(fe||2===arguments.length)for(var Ge,Te=0,Be=Re.length;Te<Be;Te++)(Ge||!(Te in Re))&&(Ge||(Ge=Array.prototype.slice.call(Re,0,Te)),Ge[Te]=Re[Te]);return Ve.concat(Ge||Array.prototype.slice.call(Re))}B.d(Ye,{_T:()=>Se,mG:()=>ve,Jh:()=>ae,XA:()=>he,CR:()=>ge,ev:()=>je})},8239:(Pt,Ye,B)=>{"use strict";function D(g,Se,be,de,Fe,ve,ae){try{var J=g[ve](ae),X=J.value}catch(he){return void be(he)}J.done?Se(X):Promise.resolve(X).then(de,Fe)}function O(g){return function(){var Se=this,be=arguments;return new Promise(function(de,Fe){var ve=g.apply(Se,be);function ae(X){D(ve,de,Fe,ae,J,"next",X)}function J(X){D(ve,de,Fe,ae,J,"throw",X)}ae(void 0)})}}B.d(Ye,{Z:()=>O})}},Pt=>{Pt(Pt.s=8707)}]);